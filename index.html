<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="generator" content="Asciidoctor 0.1.4">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>OGCÂ® GeoPackage Encoding Standard (OGC 12-128r8)</title>
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
article, aside, details, figcaption, figure, footer, header, hgroup, main, nav, section, summary { display: block; }
audio, canvas, video { display: inline-block; }
audio:not([controls]) { display: none; height: 0; }
[hidden] { display: none; }
html { background: #fff; color: #000; font-family: sans-serif; -ms-text-size-adjust: 100%; -webkit-text-size-adjust: 100%; }
body { margin: 0; }
a:focus { outline: thin dotted; }
a:active, a:hover { outline: 0; }
h1 { font-size: 2em; margin: 0.67em 0; }
abbr[title] { border-bottom: 1px dotted; }
b, strong { font-weight: bold; }
dfn { font-style: italic; }
hr { -moz-box-sizing: content-box; box-sizing: content-box; height: 0; }
mark { background: #ff0; color: #000; }
code, kbd, pre, samp { font-family: monospace, serif; font-size: 1em; }
pre { white-space: pre-wrap; }
q { quotes: "\201C" "\201D" "\2018" "\2019"; }
small { font-size: 80%; }
sub, sup { font-size: 75%; line-height: 0; position: relative; vertical-align: baseline; }
sup { top: -0.5em; }
sub { bottom: -0.25em; }
img { border: 0; }
svg:not(:root) { overflow: hidden; }
figure { margin: 0; }
fieldset { border: 1px solid #c0c0c0; margin: 0 2px; padding: 0.35em 0.625em 0.75em; }
legend { border: 0; padding: 0; }
button, input, select, textarea { font-family: inherit; font-size: 100%; margin: 0; }
button, input { line-height: normal; }
button, select { text-transform: none; }
button, html input[type="button"], input[type="reset"], input[type="submit"] { -webkit-appearance: button; cursor: pointer; }
button[disabled], html input[disabled] { cursor: default; }
input[type="checkbox"], input[type="radio"] { box-sizing: border-box; padding: 0; }
input[type="search"] { -webkit-appearance: textfield; -moz-box-sizing: content-box; -webkit-box-sizing: content-box; box-sizing: content-box; }
input[type="search"]::-webkit-search-cancel-button, input[type="search"]::-webkit-search-decoration { -webkit-appearance: none; }
button::-moz-focus-inner, input::-moz-focus-inner { border: 0; padding: 0; }
textarea { overflow: auto; vertical-align: top; }
table { border-collapse: collapse; border-spacing: 0; }
*, *:before, *:after { -moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; }
html, body { font-size: 100%; }
body { background: white; color: #222222; padding: 0; margin: 0; font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif; font-weight: normal; font-style: normal; line-height: 1; position: relative; cursor: auto; }
a:hover { cursor: pointer; }
a:focus { outline: none; }
img, object, embed { max-width: 100%; height: auto; }
object, embed { height: 100%; }
img { -ms-interpolation-mode: bicubic; }
#map_canvas img, #map_canvas embed, #map_canvas object, .map_canvas img, .map_canvas embed, .map_canvas object { max-width: none !important; }
.left { float: left !important; }
.right { float: right !important; }
.text-left { text-align: left !important; }
.text-right { text-align: right !important; }
.text-center { text-align: center !important; }
.text-justify { text-align: justify !important; }
.hide { display: none; }
.antialiased, body { -webkit-font-smoothing: antialiased; }
img { display: inline-block; vertical-align: middle; }
textarea { height: auto; min-height: 50px; }
select { width: 100%; }
p.lead, .paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p { font-size: 1.21875em; line-height: 1.6; }
.subheader, #content #toctitle, .admonitionblock td.content > .title, .exampleblock > .title, .imageblock > .title, .videoblock > .title, .listingblock > .title, .literalblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, .sidebarblock > .title, .tableblock > .title, .verseblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title, .tableblock > caption { line-height: 1.4; color: #7a2518; font-weight: 300; margin-top: 0.2em; margin-bottom: 0.5em; }
div, dl, dt, dd, ul, ol, li, h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6, pre, form, p, blockquote, th, td { margin: 0; padding: 0; direction: ltr; }
a { color: #005498; text-decoration: underline; line-height: inherit; }
a:hover, a:focus { color: #00467f; }
a img { border: none; }
p { font-family: inherit; font-weight: normal; font-size: 1em; line-height: 1.6; margin-bottom: 1.25em; text-rendering: optimizeLegibility; }
p aside { font-size: 0.875em; line-height: 1.35; font-style: italic; }
h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { font-family: Georgia, "URW Bookman L", Helvetica, Arial, sans-serif; font-weight: normal; font-style: normal; color: #ba3925; text-rendering: optimizeLegibility; margin-top: 1em; margin-bottom: 0.5em; line-height: 1.2125em; }
h1 small, h2 small, h3 small, #toctitle small, .sidebarblock > .content > .title small, h4 small, h5 small, h6 small { font-size: 60%; color: #e99b8f; line-height: 0; }
h1 { font-size: 2.125em; }
h2 { font-size: 1.6875em; }
h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.375em; }
h4 { font-size: 1.125em; }
h5 { font-size: 1.125em; }
h6 { font-size: 1em; }
hr { border: solid #dddddd; border-width: 1px 0 0; clear: both; margin: 1.25em 0 1.1875em; height: 0; }
em, i { font-style: italic; line-height: inherit; }
strong, b { font-weight: bold; line-height: inherit; }
small { font-size: 60%; line-height: inherit; }
code { font-family: Consolas, "Liberation Mono", Courier, monospace; font-weight: normal; color: #6d180b; }
ul, ol, dl { font-size: 1em; line-height: 1.6; margin-bottom: 1.25em; list-style-position: outside; font-family: inherit; }
ul, ol { margin-left: 1.5em; }
ul li ul, ul li ol { margin-left: 1.25em; margin-bottom: 0; font-size: 1em; }
ul.square li ul, ul.circle li ul, ul.disc li ul { list-style: inherit; }
ul.square { list-style-type: square; }
ul.circle { list-style-type: circle; }
ul.disc { list-style-type: disc; }
ul.no-bullet { list-style: none; }
ol li ul, ol li ol { margin-left: 1.25em; margin-bottom: 0; }
dl dt { margin-bottom: 0.3125em; font-weight: bold; }
dl dd { margin-bottom: 1.25em; }
abbr, acronym { text-transform: uppercase; font-size: 90%; color: #222222; border-bottom: 1px dotted #dddddd; cursor: help; }
abbr { text-transform: none; }
blockquote { margin: 0 0 1.25em; padding: 0.5625em 1.25em 0 1.1875em; border-left: 1px solid #dddddd; }
blockquote cite { display: block; font-size: inherit; color: #555555; }
blockquote cite:before { content: "\2014 \0020"; }
blockquote cite a, blockquote cite a:visited { color: #555555; }
blockquote, blockquote p { line-height: 1.6; color: #6f6f6f; }
.vcard { display: inline-block; margin: 0 0 1.25em 0; border: 1px solid #dddddd; padding: 0.625em 0.75em; }
.vcard li { margin: 0; display: block; }
.vcard .fn { font-weight: bold; font-size: 0.9375em; }
.vevent .summary { font-weight: bold; }
.vevent abbr { cursor: auto; text-decoration: none; font-weight: bold; border: none; padding: 0 0.0625em; }
@media only screen and (min-width: 768px) { h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { line-height: 1.4; }
  h1 { font-size: 2.75em; }
  h2 { font-size: 2.3125em; }
  h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.6875em; }
  h4 { font-size: 1.4375em; } }
.print-only { display: none !important; }
@media print { * { background: transparent !important; color: #000 !important; box-shadow: none !important; text-shadow: none !important; }
  a, a:visited { text-decoration: underline; }
  a[href]:after { content: " (" attr(href) ")"; }
  abbr[title]:after { content: " (" attr(title) ")"; }
  .ir a:after, a[href^="javascript:"]:after, a[href^="#"]:after { content: ""; }
  pre, blockquote { border: 1px solid #999; page-break-inside: avoid; }
  thead { display: table-header-group; }
  tr, img { page-break-inside: avoid; }
  img { max-width: 100% !important; }
  @page { margin: 0.5cm; }
  p, h2, h3, #toctitle, .sidebarblock > .content > .title { orphans: 3; widows: 3; }
  h2, h3, #toctitle, .sidebarblock > .content > .title { page-break-after: avoid; }
  .hide-on-print { display: none !important; }
  .print-only { display: block !important; }
  .hide-for-print { display: none !important; }
  .show-for-print { display: inherit !important; } }
table { background: white; margin-bottom: 1.25em; border: solid 1px #dddddd; }
table thead, table tfoot { background: whitesmoke; font-weight: bold; }
table thead tr th, table thead tr td, table tfoot tr th, table tfoot tr td { padding: 0.5em 0.625em 0.625em; font-size: inherit; color: #222222; text-align: left; }
table tr th, table tr td { padding: 0.5625em 0.625em; font-size: inherit; color: #222222; }
table tr.even, table tr.alt, table tr:nth-of-type(even) { background: #f9f9f9; }
table thead tr th, table tfoot tr th, table tbody tr td, table tr td, table tfoot tr td { display: table-cell; line-height: 1.6; }
.clearfix:before, .clearfix:after, .float-group:before, .float-group:after { content: " "; display: table; }
.clearfix:after, .float-group:after { clear: both; }
*:not(pre) > code { font-size: 0.9375em; padding: 1px 3px 0; white-space: nowrap; background-color: #f2f2f2; border: 1px solid #cccccc; -webkit-border-radius: 4px; border-radius: 4px; text-shadow: none; }
pre, pre > code { line-height: 1.4; color: inherit; font-family: Consolas, "Liberation Mono", Courier, monospace; font-weight: normal; }
kbd.keyseq { color: #555555; }
kbd:not(.keyseq) { display: inline-block; color: #222222; font-size: 0.75em; line-height: 1.4; background-color: #F7F7F7; border: 1px solid #ccc; -webkit-border-radius: 3px; border-radius: 3px; -webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 2px white inset; box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 2px white inset; margin: -0.15em 0.15em 0 0.15em; padding: 0.2em 0.6em 0.2em 0.5em; vertical-align: middle; white-space: nowrap; }
kbd kbd:first-child { margin-left: 0; }
kbd kbd:last-child { margin-right: 0; }
.menuseq, .menu { color: #090909; }
p a > code:hover { color: #561309; }
#header, #content, #footnotes, #footer { width: 100%; margin-left: auto; margin-right: auto; margin-top: 0; margin-bottom: 0; max-width: 62.5em; *zoom: 1; position: relative; padding-left: 0.9375em; padding-right: 0.9375em; }
#header:before, #header:after, #content:before, #content:after, #footnotes:before, #footnotes:after, #footer:before, #footer:after { content: " "; display: table; }
#header:after, #content:after, #footnotes:after, #footer:after { clear: both; }
#header { margin-bottom: 2.5em; }
#header > h1 { color: black; font-weight: normal; border-bottom: 1px solid #dddddd; margin-bottom: -28px; padding-bottom: 32px; }
#header span { color: #6f6f6f; }
#header #revnumber { text-transform: capitalize; }
#header br { display: none; }
#header br + span { padding-left: 3px; }
#header br + span:before { content: "\2013 \0020"; }
#header br + span.author { padding-left: 0; }
#header br + span.author:before { content: ", "; }
#toc { border-bottom: 3px double #ebebeb; padding-bottom: 1.25em; }
#toc > ul { margin-left: 0.25em; }
#toc ul.sectlevel0 > li > a { font-style: italic; }
#toc ul.sectlevel0 ul.sectlevel1 { margin-left: 0; margin-top: 0.5em; margin-bottom: 0.5em; }
#toc ul { list-style-type: none; }
#toctitle { color: #7a2518; }
@media only screen and (min-width: 1280px) { body.toc2 { padding-left: 20em; }
  #toc.toc2 { position: fixed; width: 20em; left: 0; top: 0; border-right: 1px solid #ebebeb; border-bottom: 0; z-index: 1000; padding: 1em; height: 100%; overflow: auto; }
  #toc.toc2 #toctitle { margin-top: 0; }
  #toc.toc2 > ul { font-size: .95em; }
  #toc.toc2 ul ul { margin-left: 0; padding-left: 1.25em; }
  #toc.toc2 ul.sectlevel0 ul.sectlevel1 { padding-left: 0; margin-top: 0.5em; margin-bottom: 0.5em; }
  body.toc2.toc-right { padding-left: 0; padding-right: 20em; }
  body.toc2.toc-right #toc.toc2 { border-right: 0; border-left: 1px solid #ebebeb; left: auto; right: 0; } }
#content #toc { border-style: solid; border-width: 1px; border-color: #d9d9d9; margin-bottom: 1.25em; padding: 1.25em; background: #f2f2f2; border-width: 0; -webkit-border-radius: 4px; border-radius: 4px; }
#content #toc > :first-child { margin-top: 0; }
#content #toc > :last-child { margin-bottom: 0; }
#content #toc a { text-decoration: none; }
#content #toctitle { font-weight: bold; font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif; font-size: 1em; padding-left: 0.125em; }
#footer { max-width: 100%; background-color: #222222; padding: 1.25em; }
#footer-text { color: #dddddd; line-height: 1.44; }
.sect1 { padding-bottom: 1.25em; }
.sect1 + .sect1 { border-top: 3px double #ebebeb; }
#content h1 > a.anchor, h2 > a.anchor, h3 > a.anchor, #toctitle > a.anchor, .sidebarblock > .content > .title > a.anchor, h4 > a.anchor, h5 > a.anchor, h6 > a.anchor { position: absolute; width: 1em; margin-left: -1em; display: block; text-decoration: none; visibility: hidden; text-align: center; font-weight: normal; }
#content h1 > a.anchor:before, h2 > a.anchor:before, h3 > a.anchor:before, #toctitle > a.anchor:before, .sidebarblock > .content > .title > a.anchor:before, h4 > a.anchor:before, h5 > a.anchor:before, h6 > a.anchor:before { content: '\00A7'; font-size: .85em; vertical-align: text-top; display: block; margin-top: 0.05em; }
#content h1:hover > a.anchor, #content h1 > a.anchor:hover, h2:hover > a.anchor, h2 > a.anchor:hover, h3:hover > a.anchor, #toctitle:hover > a.anchor, .sidebarblock > .content > .title:hover > a.anchor, h3 > a.anchor:hover, #toctitle > a.anchor:hover, .sidebarblock > .content > .title > a.anchor:hover, h4:hover > a.anchor, h4 > a.anchor:hover, h5:hover > a.anchor, h5 > a.anchor:hover, h6:hover > a.anchor, h6 > a.anchor:hover { visibility: visible; }
#content h1 > a.link, h2 > a.link, h3 > a.link, #toctitle > a.link, .sidebarblock > .content > .title > a.link, h4 > a.link, h5 > a.link, h6 > a.link { color: #ba3925; text-decoration: none; }
#content h1 > a.link:hover, h2 > a.link:hover, h3 > a.link:hover, #toctitle > a.link:hover, .sidebarblock > .content > .title > a.link:hover, h4 > a.link:hover, h5 > a.link:hover, h6 > a.link:hover { color: #a53221; }
.imageblock, .literalblock, .listingblock, .verseblock, .videoblock { margin-bottom: 1.25em; }
.admonitionblock td.content > .title, .exampleblock > .title, .imageblock > .title, .videoblock > .title, .listingblock > .title, .literalblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, .sidebarblock > .title, .tableblock > .title, .verseblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title { text-align: left; font-weight: bold; }
.tableblock > caption { text-align: left; font-weight: bold; white-space: nowrap; overflow: visible; max-width: 0; }
table.tableblock #preamble > .sectionbody > .paragraph:first-of-type p { font-size: inherit; }
.admonitionblock > table { border: 0; background: none; width: 100%; }
.admonitionblock > table td.icon { text-align: center; width: 80px; }
.admonitionblock > table td.icon img { max-width: none; }
.admonitionblock > table td.icon .title { font-weight: bold; text-transform: uppercase; }
.admonitionblock > table td.content { padding-left: 1.125em; padding-right: 1.25em; border-left: 1px solid #dddddd; color: #6f6f6f; }
.admonitionblock > table td.content > :last-child > :last-child { margin-bottom: 0; }
.exampleblock > .content { border-style: solid; border-width: 1px; border-color: #e6e6e6; margin-bottom: 1.25em; padding: 1.25em; background: white; -webkit-border-radius: 4px; border-radius: 4px; }
.exampleblock > .content > :first-child { margin-top: 0; }
.exampleblock > .content > :last-child { margin-bottom: 0; }
.exampleblock > .content h1, .exampleblock > .content h2, .exampleblock > .content h3, .exampleblock > .content #toctitle, .sidebarblock.exampleblock > .content > .title, .exampleblock > .content h4, .exampleblock > .content h5, .exampleblock > .content h6, .exampleblock > .content p { color: #333333; }
.exampleblock > .content h1, .exampleblock > .content h2, .exampleblock > .content h3, .exampleblock > .content #toctitle, .sidebarblock.exampleblock > .content > .title, .exampleblock > .content h4, .exampleblock > .content h5, .exampleblock > .content h6 { line-height: 1; margin-bottom: 0.625em; }
.exampleblock > .content h1.subheader, .exampleblock > .content h2.subheader, .exampleblock > .content h3.subheader, .exampleblock > .content .subheader#toctitle, .sidebarblock.exampleblock > .content > .subheader.title, .exampleblock > .content h4.subheader, .exampleblock > .content h5.subheader, .exampleblock > .content h6.subheader { line-height: 1.4; }
.exampleblock.result > .content { -webkit-box-shadow: 0 1px 8px #d9d9d9; box-shadow: 0 1px 8px #d9d9d9; }
.sidebarblock { border-style: solid; border-width: 1px; border-color: #d9d9d9; margin-bottom: 1.25em; padding: 1.25em; background: #f2f2f2; -webkit-border-radius: 4px; border-radius: 4px; }
.sidebarblock > :first-child { margin-top: 0; }
.sidebarblock > :last-child { margin-bottom: 0; }
.sidebarblock h1, .sidebarblock h2, .sidebarblock h3, .sidebarblock #toctitle, .sidebarblock > .content > .title, .sidebarblock h4, .sidebarblock h5, .sidebarblock h6, .sidebarblock p { color: #333333; }
.sidebarblock h1, .sidebarblock h2, .sidebarblock h3, .sidebarblock #toctitle, .sidebarblock > .content > .title, .sidebarblock h4, .sidebarblock h5, .sidebarblock h6 { line-height: 1; margin-bottom: 0.625em; }
.sidebarblock h1.subheader, .sidebarblock h2.subheader, .sidebarblock h3.subheader, .sidebarblock .subheader#toctitle, .sidebarblock > .content > .subheader.title, .sidebarblock h4.subheader, .sidebarblock h5.subheader, .sidebarblock h6.subheader { line-height: 1.4; }
.sidebarblock > .content > .title { color: #7a2518; margin-top: 0; line-height: 1.6; }
.exampleblock > .content > :last-child > :last-child, .exampleblock > .content .olist > ol > li:last-child > :last-child, .exampleblock > .content .ulist > ul > li:last-child > :last-child, .exampleblock > .content .qlist > ol > li:last-child > :last-child, .sidebarblock > .content > :last-child > :last-child, .sidebarblock > .content .olist > ol > li:last-child > :last-child, .sidebarblock > .content .ulist > ul > li:last-child > :last-child, .sidebarblock > .content .qlist > ol > li:last-child > :last-child { margin-bottom: 0; }
.literalblock > .content pre, .listingblock > .content pre { background: none; border-width: 1px 0; border-style: dotted; border-color: #bfbfbf; -webkit-border-radius: 4px; border-radius: 4px; padding: 0.75em 0.75em 0.5em 0.75em; word-wrap: break-word; }
.literalblock > .content pre.nowrap, .listingblock > .content pre.nowrap { overflow-x: auto; white-space: pre; word-wrap: normal; }
.literalblock > .content pre > code, .listingblock > .content pre > code { display: block; }
@media only screen { .literalblock > .content pre, .listingblock > .content pre { font-size: 0.8em; } }
@media only screen and (min-width: 768px) { .literalblock > .content pre, .listingblock > .content pre { font-size: 0.9em; } }
@media only screen and (min-width: 1280px) { .literalblock > .content pre, .listingblock > .content pre { font-size: 1em; } }
.listingblock > .content { position: relative; }
.listingblock:hover code[class*=" language-"]:before { text-transform: uppercase; font-size: 0.9em; color: #999; position: absolute; top: 0.375em; right: 0.375em; }
.listingblock:hover code.asciidoc:before { content: "asciidoc"; }
.listingblock:hover code.clojure:before { content: "clojure"; }
.listingblock:hover code.css:before { content: "css"; }
.listingblock:hover code.groovy:before { content: "groovy"; }
.listingblock:hover code.html:before { content: "html"; }
.listingblock:hover code.java:before { content: "java"; }
.listingblock:hover code.javascript:before { content: "javascript"; }
.listingblock:hover code.python:before { content: "python"; }
.listingblock:hover code.ruby:before { content: "ruby"; }
.listingblock:hover code.scss:before { content: "scss"; }
.listingblock:hover code.xml:before { content: "xml"; }
.listingblock:hover code.yaml:before { content: "yaml"; }
.listingblock.terminal pre .command:before { content: attr(data-prompt); padding-right: 0.5em; color: #999; }
.listingblock.terminal pre .command:not([data-prompt]):before { content: '$'; }
table.pyhltable { border: 0; margin-bottom: 0; }
table.pyhltable td { vertical-align: top; padding-top: 0; padding-bottom: 0; }
table.pyhltable td.code { padding-left: .75em; padding-right: 0; }
.highlight.pygments .lineno, table.pyhltable td:not(.code) { color: #999; padding-left: 0; padding-right: .5em; border-right: 1px solid #dddddd; }
.highlight.pygments .lineno { display: inline-block; margin-right: .25em; }
table.pyhltable .linenodiv { background-color: transparent !important; padding-right: 0 !important; }
.quoteblock { margin: 0 0 1.25em; padding: 0.5625em 1.25em 0 1.1875em; border-left: 1px solid #dddddd; }
.quoteblock blockquote { margin: 0 0 1.25em 0; padding: 0 0 0.5625em 0; border: 0; }
.quoteblock blockquote > .paragraph:last-child p { margin-bottom: 0; }
.quoteblock .attribution { margin-top: -.25em; padding-bottom: 0.5625em; font-size: inherit; color: #555555; }
.quoteblock .attribution br { display: none; }
.quoteblock .attribution cite { display: block; margin-bottom: 0.625em; }
table thead th, table tfoot th { font-weight: bold; }
table.tableblock.grid-all { border-collapse: separate; border-spacing: 1px; -webkit-border-radius: 4px; border-radius: 4px; border-top: 1px solid #dddddd; border-bottom: 1px solid #dddddd; }
table.tableblock.frame-topbot, table.tableblock.frame-none { border-left: 0; border-right: 0; }
table.tableblock.frame-sides, table.tableblock.frame-none { border-top: 0; border-bottom: 0; }
table.tableblock td .paragraph:last-child p, table.tableblock td > p:last-child { margin-bottom: 0; }
th.tableblock.halign-left, td.tableblock.halign-left { text-align: left; }
th.tableblock.halign-right, td.tableblock.halign-right { text-align: right; }
th.tableblock.halign-center, td.tableblock.halign-center { text-align: center; }
th.tableblock.valign-top, td.tableblock.valign-top { vertical-align: top; }
th.tableblock.valign-bottom, td.tableblock.valign-bottom { vertical-align: bottom; }
th.tableblock.valign-middle, td.tableblock.valign-middle { vertical-align: middle; }
p.tableblock.header { color: #222222; font-weight: bold; }
td > div.verse { white-space: pre; }
ol { margin-left: 1.75em; }
ul li ol { margin-left: 1.5em; }
dl dd { margin-left: 1.125em; }
dl dd:last-child, dl dd:last-child > :last-child { margin-bottom: 0; }
ol > li p, ul > li p, ul dd, ol dd, .olist .olist, .ulist .ulist, .ulist .olist, .olist .ulist { margin-bottom: 0.625em; }
ul.unstyled, ol.unnumbered, ul.checklist, ul.none { list-style-type: none; }
ul.unstyled, ol.unnumbered, ul.checklist { margin-left: 0.625em; }
ul.checklist li > p:first-child > i[class^="icon-check"]:first-child, ul.checklist li > p:first-child > input[type="checkbox"]:first-child { margin-right: 0.25em; }
ul.checklist li > p:first-child > input[type="checkbox"]:first-child { position: relative; top: 1px; }
ul.inline { margin: 0 auto 0.625em auto; margin-left: -1.375em; margin-right: 0; padding: 0; list-style: none; overflow: hidden; }
ul.inline > li { list-style: none; float: left; margin-left: 1.375em; display: block; }
ul.inline > li > * { display: block; }
.unstyled dl dt { font-weight: normal; font-style: normal; }
ol.arabic { list-style-type: decimal; }
ol.decimal { list-style-type: decimal-leading-zero; }
ol.loweralpha { list-style-type: lower-alpha; }
ol.upperalpha { list-style-type: upper-alpha; }
ol.lowerroman { list-style-type: lower-roman; }
ol.upperroman { list-style-type: upper-roman; }
ol.lowergreek { list-style-type: lower-greek; }
.hdlist > table, .colist > table { border: 0; background: none; }
.hdlist > table > tbody > tr, .colist > table > tbody > tr { background: none; }
td.hdlist1 { padding-right: .8em; font-weight: bold; }
td.hdlist1, td.hdlist2 { vertical-align: top; }
.literalblock + .colist, .listingblock + .colist { margin-top: -0.5em; }
.colist > table tr > td:first-of-type { padding: 0 .8em; line-height: 1; }
.colist > table tr > td:last-of-type { padding: 0.25em 0; }
.qanda > ol > li > p > em:only-child { color: #00467f; }
.thumb, .th { line-height: 0; display: inline-block; border: solid 4px white; -webkit-box-shadow: 0 0 0 1px #dddddd; box-shadow: 0 0 0 1px #dddddd; }
.imageblock.left, .imageblock[style*="float: left"] { margin: 0.25em 0.625em 1.25em 0; }
.imageblock.right, .imageblock[style*="float: right"] { margin: 0.25em 0 1.25em 0.625em; }
.imageblock > .title { margin-bottom: 0; }
.imageblock.thumb, .imageblock.th { border-width: 6px; }
.imageblock.thumb > .title, .imageblock.th > .title { padding: 0 0.125em; }
.image.left, .image.right { margin-top: 0.25em; margin-bottom: 0.25em; display: inline-block; line-height: 0; }
.image.left { margin-right: 0.625em; }
.image.right { margin-left: 0.625em; }
a.image { text-decoration: none; }
span.footnote, span.footnoteref { vertical-align: super; font-size: 0.875em; }
span.footnote a, span.footnoteref a { text-decoration: none; }
#footnotes { padding-top: 0.75em; padding-bottom: 0.75em; margin-bottom: 0.625em; }
#footnotes hr { width: 20%; min-width: 6.25em; margin: -.25em 0 .75em 0; border-width: 1px 0 0 0; }
#footnotes .footnote { padding: 0 0.375em; line-height: 1.3; font-size: 0.875em; margin-left: 1.2em; text-indent: -1.2em; margin-bottom: .2em; }
#footnotes .footnote a:first-of-type { font-weight: bold; text-decoration: none; }
#footnotes .footnote:last-of-type { margin-bottom: 0; }
#content #footnotes { margin-top: -0.625em; margin-bottom: 0; padding: 0.75em 0; }
.gist .file-data > table { border: none; background: #fff; width: 100%; margin-bottom: 0; }
.gist .file-data > table td.line-data { width: 99%; }
div.unbreakable { page-break-inside: avoid; }
.big { font-size: larger; }
.small { font-size: smaller; }
.underline { text-decoration: underline; }
.overline { text-decoration: overline; }
.line-through { text-decoration: line-through; }
.aqua { color: #00bfbf; }
.aqua-background { background-color: #00fafa; }
.black { color: black; }
.black-background { background-color: black; }
.blue { color: #0000bf; }
.blue-background { background-color: #0000fa; }
.fuchsia { color: #bf00bf; }
.fuchsia-background { background-color: #fa00fa; }
.gray { color: #606060; }
.gray-background { background-color: #7d7d7d; }
.green { color: #006000; }
.green-background { background-color: #007d00; }
.lime { color: #00bf00; }
.lime-background { background-color: #00fa00; }
.maroon { color: #600000; }
.maroon-background { background-color: #7d0000; }
.navy { color: #000060; }
.navy-background { background-color: #00007d; }
.olive { color: #606000; }
.olive-background { background-color: #7d7d00; }
.purple { color: #600060; }
.purple-background { background-color: #7d007d; }
.red { color: #bf0000; }
.red-background { background-color: #fa0000; }
.silver { color: #909090; }
.silver-background { background-color: #bcbcbc; }
.teal { color: #006060; }
.teal-background { background-color: #007d7d; }
.white { color: #bfbfbf; }
.white-background { background-color: #fafafa; }
.yellow { color: #bfbf00; }
.yellow-background { background-color: #fafa00; }
span.icon > [class^="icon-"], span.icon > [class*=" icon-"] { cursor: default; }
.admonitionblock td.icon [class^="icon-"]:before { font-size: 2.5em; text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5); cursor: default; }
.admonitionblock td.icon .icon-note:before { content: "\f05a"; color: #005498; color: #003f72; }
.admonitionblock td.icon .icon-tip:before { content: "\f0eb"; text-shadow: 1px 1px 2px rgba(155, 155, 0, 0.8); color: #111; }
.admonitionblock td.icon .icon-warning:before { content: "\f071"; color: #bf6900; }
.admonitionblock td.icon .icon-caution:before { content: "\f06d"; color: #bf3400; }
.admonitionblock td.icon .icon-important:before { content: "\f06a"; color: #bf0000; }
.conum { display: inline-block; color: white !important; background-color: #222222; -webkit-border-radius: 100px; border-radius: 100px; text-align: center; width: 20px; height: 20px; font-size: 12px; font-weight: bold; line-height: 20px; font-family: Arial, sans-serif; font-style: normal; position: relative; top: -2px; letter-spacing: -1px; }
.conum * { color: white !important; }
.conum + b { display: none; }
.conum:after { content: attr(data-value); }
.conum:not([data-value]):empty { display: none; }
.literalblock > .content > pre, .listingblock > .content > pre { -webkit-border-radius: 0; border-radius: 0; }

</style>
<link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/font-awesome/3.2.1/css/font-awesome.min.css">
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>OGCÂ® GeoPackage Encoding Standard (OGC 12-128r8)</h1>
<span id="author" class="author">Paul Daisey et al.</span><br>
<span id="revnumber">version 0.9.1,</span>
<span id="revdate">2013</span>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_front_matter">Front Matter</a></li>
<li><a href="#_introduction">Introduction</a></li>
<li><a href="#_base">1. Base</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#_core">1.1. Core</a></li>
<li>
<ul class="sectlevel3">
<li><a href="#_sqlite_container">1.1.1. SQLite Container</a></li>
<li><a href="#spatial_ref_sys">1.1.2. Spatial Reference Systems</a></li>
<li><a href="#_contents">1.1.3. Contents</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_options">2. Options</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#_features">2.1. Features</a></li>
<li>
<ul class="sectlevel3">
<li><a href="#sfsql_intro">2.1.1. Simple Features SQL Introduction</a></li>
<li><a href="#_contents_2">2.1.2. Contents</a></li>
<li><a href="#_geometry_encoding">2.1.3. Geometry Encoding</a></li>
<li><a href="#_geometry_types">2.1.4. Geometry Types</a></li>
<li><a href="#_geometry_columns">2.1.5. Geometry Columns</a></li>
<li><a href="#feature_user_data_tables">2.1.6. Vector Feature User Data Tables</a></li>
</ul>
</li>
<li><a href="#_tiles">2.2. Tiles</a></li>
<li>
<ul class="sectlevel3">
<li><a href="#_tile_matrix_introduction">2.2.1. Tile Matrix Introduction</a></li>
<li><a href="#_contents_3">2.2.2. Contents</a></li>
<li><a href="#_zoom_levels">2.2.3. Zoom Levels</a></li>
<li><a href="#_tile_encoding_png">2.2.4. Tile Encoding PNG</a></li>
<li><a href="#_tile_encoding_jpeg">2.2.5. Tile Encoding JPEG</a></li>
<li><a href="#_tile_matrix_set">2.2.6. Tile Matrix Set</a></li>
<li><a href="#tile_matrix">2.2.7. Tile Matrix</a></li>
<li><a href="#_tile_pyramid_user_data_tables">2.2.8. Tile Pyramid User Data Tables</a></li>
</ul>
</li>
<li><a href="#_schema">2.3. Schema</a></li>
<li>
<ul class="sectlevel3">
<li><a href="#_data_columns">2.3.1. Data Columns</a></li>
<li><a href="#_data_column_constraints">2.3.2. Data Column Constraints</a></li>
</ul>
</li>
<li><a href="#_metadata">2.4. Metadata</a></li>
<li>
<ul class="sectlevel3">
<li><a href="#_introduction_2">2.4.1. Introduction</a></li>
<li><a href="#_metadata_table">2.4.2. Metadata Table</a></li>
<li><a href="#_metadata_reference_table">2.4.3. Metadata Reference Table</a></li>
</ul>
</li>
<li><a href="#_other_data_tables">2.5. Other Data Tables</a></li>
<li><a href="#_extension_mechanism">2.6. Extension Mechanism</a></li>
<li>
<ul class="sectlevel3">
<li><a href="#_extensions">2.6.1. Extensions</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_registered_extensions">3. Registered Extensions</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#_features_2">3.1. Features</a></li>
<li>
<ul class="sectlevel3">
<li><a href="#_geometry_types_2">3.1.1. Geometry Types</a></li>
<li><a href="#_spatial_indexes">3.1.2. Spatial Indexes</a></li>
<li><a href="#_geometry_type_triggers">3.1.3. Geometry Type Triggers</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_front_matter">Front Matter</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Copyright Â© 2012 Envitia<br>
Copyright Â© 2012 Luciad<br>
Copyright Â© 2012 Sigma Bravo<br>
Copyright Â© 2012 The Carbon Project<br>
Copyright Â© 2012 U.S. Army Geospatial Center<br>
Copyright Â© 2012 U.S. National Geospatial Intelligence Agency<br></p>
</div>
<div class="paragraph">
<p>The companies listed above have granted the Open Geospatial Consortium, Inc. (OGC) a nonexclusive, royalty-free, paid up, worldwide license to copy and distribute this document and to modify this document and distribute copies of the modified version.
To obtain additional rights of use, visit <a href="http://www.opengeospatial.org/legal/">http://www.opengeospatial.org/legal/</a>.</p>
</div>
<div class="paragraph">
<p><strong>Warning</strong></p>
</div>
<div class="paragraph">
<p>This document is not an OGC Standard. It is distributed for review and comment.
It is subject to change without notice and MAY not be referred to as an OGC Standard.</p>
</div>
<div class="paragraph">
<p>Document type: OGCÂ® Publicly Available Standard<br>
Document subtype: Encoding Standard<br>
Document stage: Draft<br>
Document language: English</p>
</div>
<div class="paragraph">
<p>Recipients of this document are invited to submit, with their comments, notification of any relevant patent rights of which they are aware and to provide supporting documentation.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_introduction">Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Mobile device users who require map/geospatial application services and operate in disconnected or limited network connectivity environments are challenged by limited storage capacity and the lack of open format geospatial data to support these applications.
The current situation is that each map/geospatial application requires its own potentially proprietary geospatial data store.
These separate application-specific data stores may contain the same geospatial data, wasting the limited storage available, and requiring custom applications for data translation, replication, and synchronization to enable different map/geospatial applications to share the same world view.
In addition, many existing geospatial data stores are platform-specific, which means that users with different platforms must translate data to share it.</p>
</div>
<div class="paragraph">
<p>An open, standards-based, application-independent, platform-independent, portable, interoperable, self-describing, GeoPackage (GPKG) data container, API and manifest are needed to overcome these challenges and to effectively support multiple map/geospatial applications such as fixed product distribution, local data collection, and geospatially enabled analytics.
This standard is intended to facilitate widespread adoption and use of GeoPackages by both COTS and open-source software applications on enterprise production platforms as well as mobile hand-held devices, given that mobile hand held devices do not yet have the processing power or battery life to effectively tackle difficult geospatial product production and analysis tasks.
An application that accesses a GPKG will make use of the GPKG capabilities it requires; few if any such applications will make use of all GPKG capabilities.</p>
</div>
<div class="paragraph">
<p>This OGCÂ® Encoding Standard defines GeoPackage files for exchange and GeoPackage SQLite Extensions for direct use of vector geospatial features and / or tile matrix sets of earth images and raster maps at various scales.
Direct use means the ability to access and update data in a ânativeâ format without intermediate format translations in an environment (e.g. through an API) that guarantees data model and data set integrity and identical access and update results in response to identical requests from different client applications.</p>
</div>
<div class="paragraph">
<p>A <strong>GeoPackage file</strong> is a platform-independent SQLite database file that contains GeoPackage data and metadata tables shown in <a href="#geopackage_tables_figure">GeoPackage Tables</a>, with specified definitions, integrity assertions, format limitations and content constraints.</p>
</div>
<div id="geopackage_tables_figure" class="imageblock">
<div class="content">
<img src="geopackage-uml.png" alt="GeoPackage Tables">
</div>
<div class="title">Figure 1. GeoPackage Tables</div>
</div>
<div class="paragraph">
<p>A <strong>GeoPackage file</strong> MAY be âemptyâ (contain user data table(s) for vector features and/or tile matrix pyramids with no row record content) ) or contain one or many vector feature type records and /or one or many tile matrix pyramid tile images.
GeoPackage file metadata can describe GeoPackage data contents and identify external data synchronization sources and targets.
A GeoPackage file MAY contain spatial indexes on feature geometries and SQL triggers to maintain indexes and enforce content constraints.</p>
</div>
<div class="paragraph">
<p>A <strong>GeoPackage SQLite Extension</strong> that MAY provide a minimal set of SQL API runtime functions to support spatial indexes and SQL triggers linked to a SQLite library with specified configuration requirements to provide SQL API access to a GeoPackage file.
A <strong>GeoPackage</strong> is a <strong>GeoPackage file</strong> used with a <strong>GeoPackage SQLite Extension</strong>. A GeoPackage MAY have extensions that are registered in the gpkg_extensions table.</p>
</div>
<div class="paragraph">
<p>This specification does not address the issues listed in the <a href="#_potential_future_work">[_potential_future_work]</a> clause in <a href="#background_and_context">[background_and_context]</a>, which MAY be addressed in a subsequent version of this specification or by other specifications.</p>
</div>
<div class="paragraph">
<p><em>Attention is drawn to the possibility that some of the elements of this document MAY be the subject of patent rights.
Open Geospatial Consortium Inc. SHALL not be held responsible for identifying any or all such patent rights. However, to date, no such rights have been claimed or identified.</em></p>
</div>
<div class="paragraph">
<p><em>Recipients of this document are requested to submit, with their comments, notification of any relevant patent claims or other intellectual property rights of which they MAY be aware that might be infringed by any implementation of the specification set forth in this document, and to provide supporting documentation.</em></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_base">1. Base</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The required capabilities specified in this clause serve as the base for optional options and registered extensions capabilities specified in clauses <a href="#_options">Options</a> and <a href="#_registered_extensions">Registered Extensions</a>.
All gpkg_* tables and views and all tiles user data tables specified in this standard SHALL have only the specified columns.
Any features user data tables MAY have columns in addition to those specified.
All specified table and column name values SHALL be lowercase.</p>
</div>
<div class="sect2">
<h3 id="_core">1.1. Core</h3>
<div class="paragraph">
<p>The mandatory core capabilities defined in sub clauses and requirement statements of this clause SHALL be implemented by every <strong>GeoPackage</strong>.</p>
</div>
<div class="sect3">
<h4 id="_sqlite_container">1.1.1. SQLite Container</h4>
<div class="paragraph">
<p>A self-contained, single-file, cross-platform, serverless, transactional, open source RDBMS container is desired to simplify production, distribution and use of GeoPackages and guarantee the integrity of the data they contain.
âSelf-containedâ means that container software requires very minimal support from external libraries or from the operating system.
âSingle-fileâ means that a container not currently opened by any software application consists of a single file in a file system supported by a computing platform operating system.
âCross-platformâ means that a container file MAY be created and loaded with data on one computing platform, and used and updated on another, even if they use different operating systems, file systems, and byte order (endian) conventions.
âServerlessâ means that the RDBMS container is implemented without any intermediary server process, and accessed directly by application software.
âTransactionalâ means that RDBMS transactions guarantee that all changes to data in the container are Atomic, Consistent, Isolated, and Durable (ACID) despite program crashes, operating system crashes, and power failures.</p>
</div>
<div class="sect4">
<h5 id="_data">Data</h5>
<div class="sect5">
<h6 id="_file_format">File Format</h6>
<div id="_requirement-1" class="quoteblock">
<div class="title">Requirement 1</div>
<blockquote>
The GeoPackage file format SHALL be a <a href="http://www.sqlite.org/">SQLite</a> database
<a href="http://sqlite.org/fileformat2.html">version 3 format file</a>, the first 16 bytes of which contain âSQLite format 3â
<span class="footnote">[<a id="_footnoteref_1" class="footnote" href="#_footnote_1" title="View footnote.">1</a>]</span> in ASCII. <span class="footnote">[<a id="_footnoteref_2" class="footnote" href="#_footnote_2" title="View footnote.">2</a>]</span>
</blockquote>
</div>
<div class="paragraph">
<p>It is RECOMMENDED that data providers whose data is intended for use in multiple applications put the value âGPKGâ in the SQLite database header application id field.
However, applications that put application-specific data in a GeoPackage MAY put their own application acronym in the application id field, so this is NOT a GeoPackage requirement.</p>
</div>
<div class="paragraph">
<p>The maximum size of a GeoPackage file is about 140TB.
In practice a lower size limit MAY be imposed by the filesystem to which the file is written.
Many mobile devices require external memory cards to be formatted using the FAT32 file system which imposes a maximum size limit of 4GB.</p>
</div>
</div>
<div class="sect5">
<h6 id="_file_extension_name">File Extension Name</h6>
<div id="_requirement-2" class="quoteblock">
<div class="title">Requirement 2</div>
<blockquote>
GeoPackage files SHALL have the file extension name â.gpkgâ.
</blockquote>
</div>
</div>
<div class="sect5">
<h6 id="_integrity_check">Integrity Check</h6>
<div id="_requirement-3" class="quoteblock">
<div class="title">Requirement 3</div>
<blockquote>
The SQLite PRAGMA integrity_check SQL command SHALL return âokâ for a GeoPackage file.
</blockquote>
</div>
<div id="_requirement-4" class="quoteblock">
<div class="title">Requirement 4</div>
<blockquote>
The SQLite PRAGMA foreign_key_check() SQL with no parameter value SHALL return an empty result set indicating no invalid foreign key values for a GeoPackage file.
</blockquote>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_api">API</h5>
<div class="sect5">
<h6 id="_structured_query_language_sql">Structured Query Language (SQL)</h6>
<div id="_requirement-5" class="quoteblock">
<div class="title">Requirement 5</div>
<blockquote>
A GeoPackage SQLite Extension SHALL provide SQL access to GeoPackage file contents via <a href="http://www.sqlite.org/download.html">SQLite sqlite3</a> <a href="#12">[12]</a> software APIs. <span class="footnote">[<a id="_footnoteref_3" class="footnote" href="#_footnote_3" title="View footnote.">3</a>]</span>
</blockquote>
</div>
</div>
<div class="sect5">
<h6 id="_every_gpkg_sqlite_configuration">Every GPKG SQLite Configuration</h6>
<div class="paragraph">
<p>The <a href="http://www.sqlite.org/download.html">SQLite</a> library has many <a href="http://www.sqlite.org/compile.html">compile time</a> and <a href="http://www.sqlite.org/pragma.html">run time</a> options that MAY be used to configure SQLite for different uses.
A GeoPackage application can use the <a href="http://www.sqlite.org/pragma.html#pragma_compile_options">compile options</a> and other SQLite pragmas to get the effective compile and run time option settings and compare them to those required for a particular GeoPackage.</p>
</div>
<div id="_requirement-6" class="quoteblock">
<div class="title">Requirement 6</div>
<blockquote>
Every GeoPackage SQLite Extension SHALL have the SQLite library compile and run time options specified in table <a href="#every_gpkg_sqlite_config_table">Every GeoPackage SQLite Configuration</a>.
</blockquote>
</div>
<table id="every_gpkg_sqlite_config_table" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 1. Every GeoPackage SQLite Configuration</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Option</th>
<th class="tableblock halign-left valign-top">Shall / Not</th>
<th class="tableblock halign-left valign-top">Discussion</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">compile</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SQLITE_OMIT_AUTOINCREMENT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Not</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A number of tables in GeoPackage are specified to have autoincrement columns.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">compile</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SQLITE_OMIT_DATETIME_FUNCS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Not</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>gpkg_contents</code> table <code>last_change</code> column requires timestamps</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">compile</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SQLITE_OMIT_DEPRECATED</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Shall</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Omit <a href="http://www.sqlite.org/pragma.html#syntax">PRAGMA</a>s marked âDo not use this pragma!â in SQLite documentation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">compile</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SQLITE_OMIT_FLOATING_POINT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Not</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">min/max x/y columns in <code>gpkg_contents</code> table are type REAL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">compile</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SQLITE_OMIT_PRAGMA</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Not</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GeoPackage configuration checks will require use of the <a href="http://www.sqlite.org/pragma.html#pragma_compile_options">compile_options</a> pragma.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">compile</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SQLITE_OMIT_FLAG_PRAGMAS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Not</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GeoPackage conformance validation will require use of the <a href="http://www.sqlite.org/pragma.html#pragma_integrity_check">integrity_check</a> pragma</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">compile</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SQLITE_OMIT_VIEW</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Not</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User data tables and some GeoPackage tables MAY be implemented as updateable views.</p></td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="sect3">
<h4 id="spatial_ref_sys">1.1.2. Spatial Reference Systems</h4>
<div class="sect4">
<h5 id="_data_2">Data</h5>
<div class="sect5">
<h6 id="_table_definition">Table Definition</h6>
<div id="_requirement-7" class="quoteblock">
<div class="title">Requirement 7</div>
<blockquote>
A GeoPackage file SHALL include a <code>gpkg_spatial_ref_sys</code> table per table <a href="#gpkg_spatial_ref_sys_cols">Spatial Ref Sys Table or View Definition</a> and table <a href="#gpkg_spatial_ref_sys_sql">[gpkg_spatial_ref_sys_sql]</a>.
</blockquote>
</div>
<div class="paragraph">
<p>A table named <code>gpkg_spatial_ref_sys</code> is the first component of the standard SQL schema for simple features described in clause <a href="#sfsql_intro">Simple Features SQL Introduction</a> below.
The coordinate reference system definitions it contains are referenced by the GeoPackage <code>gpkg_contents</code> and <code>gpkg_geometry_columns</code> tables to relate the vector and tile data in user tables to locations on the earth.</p>
</div>
<div class="paragraph">
<p>The <code>gpkg_spatial_ref_sys</code> table includes at a minimum the columns specified in SQL/MM (ISO 13249-3) <a href="#16">[16]</a> and shown in <a href="#gpkg_spatial_ref_sys_cols">Spatial Ref Sys Table or View Definition</a> below containing data that defines spatial reference systems.
Views of this table MAY be used to provide compatibility with the <a href="http://www.iso.org/iso/home/store/catalogue_ics/catalogue_detail_ics.htm?csnumber=53698">SQL/MM</a> (see <a href="#sqlmm_gpkg_spatial_ref_sys_sql">[sqlmm_gpkg_spatial_ref_sys_sql]</a>) and OGC <a href="http://portal.opengeospatial.org/files/?artifact_id=25354">Simple Features SQL</a> <a href="#3">[3]</a><a href="#14">[14]</a><a href="#15">[15]</a> (Table 21) specifications.</p>
</div>
<table id="gpkg_spatial_ref_sys_cols" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 2. Spatial Ref Sys Table or View Definition</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Column Name</th>
<th class="tableblock halign-left valign-top">Column Type</th>
<th class="tableblock halign-left valign-top">Column Description</th>
<th class="tableblock halign-left valign-top">Null</th>
<th class="tableblock halign-left valign-top">Key</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>srs_name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Human readable name of this SRS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>srs_id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique identifier for each Spatial Reference System within a GeoPackage file</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>organization</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Case-insensitive name of the defining organization e.g. EPSG or epsg</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>organization_coordsys_id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Numeric ID of the Spatial Reference System assigned by the organization</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>definition</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Well-known Text Representation of the Spatial Reference System</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>description</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>text</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Human readable description of this SRS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p>See <a href="#gpkg_spatial_ref_sys_sql">[gpkg_spatial_ref_sys_sql]</a>.</p>
</div>
</div>
<div class="sect5">
<h6 id="_table_data_values">Table Data Values</h6>
<div id="_requirement-8" class="quoteblock">
<div class="title">Requirement 8</div>
<blockquote>
The <code>gpkg_spatial_ref_sys</code> table in a GeoPackage SHALL contain a record for
organization <a href="http://www.epsg.org/Geodetic.html">EPSG</a> or epsg and <code>organization_coordsys_id</code> <a href="http://www.epsg-registry.org/report.htm?type=selection&amp;entity=urn:ogc:def:crs:EPSG::4326&amp;reportDetail=long&amp;title=WGS%2084&amp;style=urn:uuid:report-style:default-with-code&amp;style_name=OGP%20Default%20With%20Code">4326</a> for <a href="http://www.google.com/search?as_q=WGS-84">WGS-84</a>, a record with an <code>srs_id</code> of -1, an organization of âNONEâ, an <code>organization_coordsys_id</code> of -1, and definition âundefinedâ for undefined Cartesian coordinate reference systems, and a record with an <code>srs_id</code> of 0, an organization of âNONEâ, an <code>organization_coordsys_id</code> of 0, and definition âundefinedâ for undefined geographic coordinate reference systems.
</blockquote>
</div>
<div id="_requirement-9" class="quoteblock">
<div class="title">Requirement 9</div>
<blockquote>
The <code>gpkg_spatial_ref_sys</code> table in a GeoPackage file SHALL contain records to define all spatial reference systems used by features and tiles in a GeoPackage.
</blockquote>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_contents">1.1.3. Contents</h4>
<div class="sect4">
<h5 id="_data_3">Data</h5>
<div class="sect5">
<h6 id="_table_definition_2">Table Definition</h6>
<div id="_requirement-10" class="quoteblock">
<div class="title">Requirement 10</div>
<blockquote>
A GeoPackage file SHALL include a <code>gpkg_contents</code> table per table <a href="#gpkg_contents_cols">Contents Table or View Definition</a> and <a href="#gpkg_contents_sql">[gpkg_contents_sql]</a>.
</blockquote>
</div>
<div class="paragraph">
<p>The purpose of the <code>gpkg_contents</code> table is to provide identifying and descriptive information that an application can display to a user in a menu of geospatial data that is available for access and/or update.</p>
</div>
<table id="gpkg_contents_cols" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 3. Contents Table or View Definition</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Column Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Null</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Key</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>table_name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the tiles, or feature table</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>data_type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type of data stored in the table:. âfeaturesâ per clause <a href="#_features">Features</a>, âtilesâ per clause <a href="#_tiles">Tiles</a>, or an implementer-defined value for other data tables per clause <a href="#_other_data_tables">Other Data Tables</a>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>identifier</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A human-readable identifier (e.g. short name) for the table_name content</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>description</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A human-readable description for the table_name content</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ââ</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>last_change</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">timestamp value in ISO 8601 format as defined by the strftime function <em>%Y-%m-%dT%H:%M:%fZ</em> format string applied to the current time</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>strftime('%Y-%m-%dT%H:%M:%fZ', CURRENT_TIMESTAMP)</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>min_x</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">double</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bounding box for all content in table_name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>min_y</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">double</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bounding box for all content in table_name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>max_x</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">double</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bounding box for all content in table_name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>max_y</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">double</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bounding box for all content in table_name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>srs_id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Spatial Reference System ID: <code>gpkg_spatial_ref_sys.srs_id</code>; when <code>data_type</code> is features, SHALL also match <code>gpkg_geometry_columns.srs_id</code>; When data_type is tiles, SHALL also match gpkg_tile_matrix_set.srs.id</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">FK</p></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p>The <code>gpkg_contents</code> table is intended to provide a list of all geospatial contents in the GeoPackage.
The <code>data_type</code> specifies the type of content.
The bounding box (<code>min_x</code>, <code>min_y</code>, <code>max_x</code>, <code>max_y</code>) provides an informative bounding box (not necessarily minimum bounding box) of the content.
If the <code>srs_id</code> column value references a geographic coordinate reference system (CRS), then the min/max x/y values are in decimal degrees; otherwise, the srs_id references a projected CRS and the min/max x/y values are in the units specified by that CRS.</p>
</div>
<div class="paragraph">
<p>See <a href="#gpkg_contents_sql">[gpkg_contents_sql]</a>.</p>
</div>
</div>
<div class="sect5">
<h6 id="_table_data_values_2">Table Data Values</h6>
<div id="_requirement-11" class="quoteblock">
<div class="title">Requirement 11</div>
<blockquote>
The <code>table_name</code> column value in a <code>gpkg_contents</code> table row SHALL contain the name of a SQLite table or view.
</blockquote>
</div>
<div id="_requirement-12" class="quoteblock">
<div class="title">Requirement 12</div>
<blockquote>
Values of the <code>gpkg_contents</code> table <code>last_change</code> column SHALL be in <a href="http://www.iso.org/iso/catalogue_detail?csnumber=40874">ISO 8601</a> format containing a complete date plus UTC hours, minutes, seconds and a decimal fraction of a second, with a âZâ (âzuluâ) suffix indicating UTC. <span class="footnote">[<a id="_footnoteref_4" class="footnote" href="#_footnote_4" title="View footnote.">4</a>]</span>
</blockquote>
</div>
<div id="_requirement-13" class="quoteblock">
<div class="title">Requirement 13</div>
<blockquote>
Values of the <code>gpkg_contents</code> table <code>srs_id</code> column SHALL reference values in the <code>gpkg_spatial_ref_sys</code> table <code>srs_id</code> column.
</blockquote>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_options">2. Options</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The optional capabilities specified in this clause depend on the required capabilities specified in clause <a href="#_base">Base</a> above.</p>
</div>
<div id="_requirement-14" class="quoteblock">
<div class="title">Requirement 14</div>
<blockquote>
A Valid GeoPackage SHALL contain features per clause <a href="#_features">Features</a> and/or tiles per clause <a href="#_tiles">Tiles</a> and row(s) in the <code>gpkg_contents</code> table with lowercase <code>data_type</code> column values of âfeaturesâ and/or âtilesâ describing the user data tables.
</blockquote>
</div>
<div class="sect2">
<h3 id="_features">2.1. Features</h3>
<div class="paragraph">
<p>The optional capabilities defined in sub clauses and requirement statements of this clause MAY be implemented by any GeoPackage file.</p>
</div>
<div class="sect3">
<h4 id="sfsql_intro">2.1.1. Simple Features SQL Introduction</h4>
<div class="paragraph">
<p>Vector feature data represents geolocated entities including conceptual ones such as districts, real world objects such as roads and rivers, and observations thereof.
International specifications <a href="#13">[13]</a><a href="#14">[14]</a><a href="#15">[15]</a><a href="#16">[16]</a> have standardized practices for the storage, access and use of vector geospatial features and geometries via SQL in relational databases.
The first component of the SQL schema for vector features in a GeoPackage is the <code>gpkg_spatial_ref_sys</code> table defined in clause <a href="#spatial_ref_sys">Spatial Reference Systems</a> above.
Other components are defined below.</p>
</div>
<div class="paragraph">
<p>In a GeoPackage file, âsimpleâ features are geolocated using a linear geometry subset of the SQL/MM (ISO 13249-3) <a href="#16">[16]</a> geometry model shown in <a href="#core_geometry_model_figure">Core Geometry Model</a> below.</p>
</div>
<div id="core_geometry_model_figure" class="imageblock">
<div class="content">
<img src="core-geometry-model.png" alt="Core geometry model">
</div>
<div class="title">Figure 2. Core Geometry Model</div>
</div>
<div class="paragraph">
<p>The instantiable (not abstract) geometry types defined in this Standard are restricted to 0, 1 and 2-dimensional geometric objects that exist in 2, 3 or 4-dimensional coordinate space (R2, R3 or R4).
Geometry values in R2 have points with coordinate values for x and y.
Geometry values in R3 have points with coordinate values for x, y and z or for x, y and m.
Geometry values in R4 have points with coordinate values for x, y, z and m.
The interpretation of the coordinates is subject to the coordinate reference systems associated to the point.
All coordinates within a geometry object should be in the same coordinate reference systems.</p>
</div>
<div class="paragraph">
<p>Geometries MAY include z coordinate values.
The z coordinate value traditionally represents the third dimension (i.e. 3D).
In a Geographic Information System (GIS) this may be height above or below sea level.
For example: A map might have a point identifying the position of a mountain peak by its location on the earth, with the x and y coordinate values, and the height of the mountain, with the z coordinate value.</p>
</div>
<div class="paragraph">
<p>Geometries MAY include m coordinate values.
The m coordinate value allows the application environment to associate some measure with the point values.
For example: A stream network may be modeled as multilinestring value with the m coordinate values measuring the distance from the mouth of stream.</p>
</div>
<div class="paragraph">
<p>All geometry types described in this standard are defined so that instances of Geometry are topologically closed, i.e. all represented geometries include their boundary as point sets.
This does not affect their representation, and open version of the same classes MAY be used in other circumstances, such as topological representations.</p>
</div>
<div class="paragraph">
<p>A brief description of each geometry type is provided below.
A more detailed description can be found in ISO 13249-3 <a href="#16">[16]</a>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Geometry: the root of the geometry type hierarchy.</p>
</li>
<li>
<p>Point: a single location in space.
Each point has an X and Y coordinate.
A point MAY optionally also have a Z and/or an M value.</p>
</li>
<li>
<p>Curve: the base type for all 1-dimensional geometry types.
A 1-dimensional geometry is a geometry that has a length, but no area.
A curve is considered simple if it does not intersect itself (except at the start and end point).
A curve is considered closed its start and end point are coincident.
A simple, closed curve is called a ring.</p>
</li>
<li>
<p>LineString: A Curve that connects two or more points in space.</p>
</li>
<li>
<p>Surface: the base type for all 2-dimensional geometry types.
A 2-dimensional geometry is a geometry that has an area.</p>
</li>
<li>
<p>CurvePolygon: A planar surface defined by an exterior ring and zero or more interior ring.
Each ring is defined by a Curve instance.</p>
</li>
<li>
<p>Polygon: A restricted form of CurvePolygon where each ring is defined as a simple, closed LineString.</p>
</li>
<li>
<p>GeometryCollection: A collection of zero or more Geometry instances.</p>
</li>
<li>
<p>MultiSurface: A restricted form of GeometryCollection where each Geometry in the collection must be of type Surface.</p>
</li>
<li>
<p>MultiPolygon: A restricted form of MultiSurface where each Surface in the collection must be of type Polygon.</p>
</li>
<li>
<p>MultiCurve: A restricted form of GeometryCollection where each Geometry in the collection must be of type Curve.</p>
</li>
<li>
<p>MultiLineString: A restricted form of MultiCurve where each Curve in the collection must be of type LineString.</p>
</li>
<li>
<p>MultiPoint: A restricted form of GeometryCollection where each Geometry in the collection must be of type Point.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_contents_2">2.1.2. Contents</h4>
<div class="sect4">
<h5 id="_data_4">Data</h5>
<div class="sect5">
<h6 id="_contents_table_features_row">Contents Table â Features Row</h6>
<div id="_requirement-15" class="quoteblock">
<div class="title">Requirement 15</div>
<blockquote>
The <code>gpkg_contents</code> table SHALL contain a row with a lowercase <code>data_type</code> column value of âfeaturesâ for each vector features user data table or view.
</blockquote>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_geometry_encoding">2.1.3. Geometry Encoding</h4>
<div class="sect4">
<h5 id="_data_5">Data</h5>
<div class="sect5">
<h6 id="gpb_format">BLOB Format</h6>
<div id="_requirement-16" class="quoteblock">
<div class="title">Requirement 16</div>
<blockquote>
A GeoPackage file SHALL store feature table geometries with or without optional elevation (Z) and/or measure (M) values in SQL BLOBs using the GeoPackageBinary format specified in table <a href="#gpb_spec">GeoPackage SQL Geometry Binary Format</a> and clause <a href="#gpb_format">BLOB Format</a>.
</blockquote>
</div>
<div id="gpb_spec" class="listingblock">
<div class="title">GeoPackage SQL Geometry Binary Format</div>
<div class="content">
<pre>GeoPackageBinary {
  byte[2] magic = 0x4750; <i class="conum" data-value="1"></i><b>(1)</b>
  byte version;           <i class="conum" data-value="2"></i><b>(2)</b>
  byte flags;             <i class="conum" data-value="3"></i><b>(3)</b>
  int32 srs_id;
  double[] envelope;      <i class="conum" data-value="4"></i><b>(4)</b>
  WKBGeometry geometry;   <i class="conum" data-value="5"></i><b>(5)</b>
}</pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><em>GP</em> in ASCII</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>8-bit unsigned integer, 0 = version 1</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>flags layout:</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>see flags envelope contents indicator code below</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>per  ISO 13249-3 <a href="#16">[16]</a> clause 5.1.46 <span class="footnote">[<a id="_footnoteref_5" class="footnote" href="#_footnote_5" title="View footnote.">5</a>]</span></td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Well-Known Binary as defined in ISO 13249-3 <a href="#16">[16]</a> does not provide a standardized encoding for an empty point set (i.e., <em>Point Empty</em> in Well-Known Text).
In GeoPackage files these points SHALL be encoded as a Point where each coordinate value is set to an IEEE-754 quiet NaN value.
GeoPackage files SHALL use big endian 0x7ff8000000000000 or little endian 0x000000000000f87f as the binary encoding of the NaN values.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_api_2">API</h5>
<div class="sect5">
<h6 id="_minimal_runtime_sql_functions">Minimal Runtime SQL Functions</h6>
<div class="paragraph">
<p>In contrast to functions in application code or a runtime library, triggers are part of the SQLite database file.
When an application writes to a GeoPackage file that it did not create itself then there is the possibility that it will invoke a trigger that calls a function that the applicationâs runtime library does not provide.
To avoid this interoperability problem, a small set of functions on the GeoPackageBinary geometry specified in clause <a href="#gpb_format">BLOB Format</a> are defined in <a href="#minimal_runtime_sql_functions">[minimal_runtime_sql_functions]</a>.
Every implementation can be sure that triggers that only use these functions in addition to those provided by SQLite will work as intended across implementations.
<span class="footnote">[<a id="_footnoteref_6" class="footnote" href="#_footnote_6" title="View footnote.">6</a>]</span>
<span class="footnote">[<a id="_footnoteref_7" class="footnote" href="#_footnote_7" title="View footnote.">7</a>]</span></p>
</div>
<div id="_requirement-17" class="quoteblock">
<div class="title">Requirement 17</div>
<blockquote>
A GeoPackage SQLite Extension MAY provide SQL function support for triggers in GeoPackage file.
One that does so SHALL provide the minimal runtime SQL functions listed in <a href="#minimal_runtime_sql_functions">[minimal_runtime_sql_functions]</a> table <a href="#minimal_runtime_sql_functions_table">[minimal_runtime_sql_functions_table]</a>.
</blockquote>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_geometry_types">2.1.4. Geometry Types</h4>
<div class="sect4">
<h5 id="_data_6">Data</h5>
<div class="sect5">
<h6 id="_core_types">Core Types</h6>
<div id="_requirement-18" class="quoteblock">
<div class="title">Requirement 18</div>
<blockquote>
A GeoPackage file SHALL store feature table geometries with the basic simple feature geometry types (Geometry, Point, LineString, Polygon, MultiPoint, MultiLineString, MultiPolygon, GeomCollection) in <a href="#geometry_types">[geometry_types]</a> <a href="#geometry_types_core">[geometry_types_core]</a> in the GeoPackageBinary geometry encoding format.
</blockquote>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_geometry_columns">2.1.5. Geometry Columns</h4>
<div class="sect4">
<h5 id="_data_7">Data</h5>
<div class="sect5">
<h6 id="_table_definition_3">Table Definition</h6>
<div id="_requirement-19" class="quoteblock">
<div class="title">Requirement 19</div>
<blockquote>
A GeoPackage file with a <code>gpkg_contents</code> table row with a âfeaturesâ <code>data_type</code> SHALL contain a <code>gpkg_geometry_columns</code> table or updateable view per <a href="#gpkg_geometry_columns_cols">Geometry Columns Table or View Definition</a> and <a href="#gpkg_geometry_columns_sql">[gpkg_geometry_columns_sql]</a>.
</blockquote>
</div>
<div class="paragraph">
<p>The second component of the SQL schema for vector features in a GeoPackage is a <code>gpkg_geometry_columns</code> table that
identifies the geometry columns in tables that contain user data representing features.</p>
</div>
<table id="gpkg_geometry_columns_cols" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 4. Geometry Columns Table or View Definition</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Column Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Key</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>table_name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the table containing the geometry column</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PK, FK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>column_name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of a column in the feature table that is a Geometry Column</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>geometry_type_name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name from <a href="#geometry_types_core">[geometry_types_core]</a> or <a href="#geometry_types_extension">[geometry_types_extension]</a> in <a href="#geometry_types">[geometry_types]</a></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>srs_id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Spatial Reference System ID: <code>gpkg_spatial_ref_sys.srs_id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">FK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>z</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0: z values prohibited; 1: z values mandatory; 2: z values optional</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>m</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0: m values prohibited; 1: m values mandatory; 2: m values optional</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p>The FK on <code>gpkg_geometry_columns.srs_id</code> references the PK on <code>gpkg_spatial_ref_sys.srs_id</code> to ensure that geometry columns are only defined in feature tables for defined spatial reference systems.</p>
</div>
<div class="paragraph">
<p>Views of this table or view MAY be used to provide compatibility with the SQL/MM <a href="#16">[16]</a> <a href="#sqlmm_gpkg_geometry_columns_sql">[sqlmm_gpkg_geometry_columns_sql]</a> and OGC Simple Features SQL <a href="#13">[13]</a><a href="#14">[14]</a><a href="#15">[15]</a> <a href="#sfsql_gpkg_geometry_columns_sql">[sfsql_gpkg_geometry_columns_sql]</a> specifications.</p>
</div>
<div class="paragraph">
<p>See <a href="#gpkg_geometry_columns_sql">[gpkg_geometry_columns_sql]</a>.</p>
</div>
</div>
<div class="sect5">
<h6 id="_table_data_values_3">Table Data Values</h6>
<div id="_requirement-20" class="quoteblock">
<div class="title">Requirement 20</div>
<blockquote>
The <code>gpkg_geometry_columns</code> table or updateable view SHALL contain one row record for each geometry column in each vector feature data table (clause <a href="#feature_user_data_tables">Vector Feature User Data Tables</a>) in a GeoPackage.
</blockquote>
</div>
<div id="_requirement-21" class="quoteblock">
<div class="title">Requirement 21</div>
<blockquote>
Values of the <code>gpkg_geometry_columns</code> <code>table_name</code> column SHALL reference values in the <code>gpkg_contents</code> <code>table_name</code> column for rows with a <code>data_type</code> of <em>features</em> or <em>tiles</em>.
</blockquote>
</div>
<div id="_requirement-22" class="quoteblock">
<div class="title">Requirement 22</div>
<blockquote>
The <code>column_name</code> column value in a <code>gpkg_geometry_columns</code> row SHALL be the name of a column in the table or view specified by the <code>table_name</code> column value for that row.
</blockquote>
</div>
<div id="_requirement-23" class="quoteblock">
<div class="title">Requirement 23</div>
<blockquote>
The <code>geometry_type_name</code> value in a <code>gpkg_geometry_columns</code> row SHALL be one of the uppercase geometry type names specified in <a href="#geometry_types">[geometry_types]</a>.
</blockquote>
</div>
<div id="_requirement-24" class="quoteblock">
<div class="title">Requirement 24</div>
<blockquote>
The <code>srs_id</code> value in a <code>gpkg_geometry_columns</code> table row SHALL be an <code>srs_id</code> column value from the <code>gpkg_spatial_ref_sys</code> table.
</blockquote>
</div>
<div id="_requirement-25" class="quoteblock">
<div class="title">Requirement 25</div>
<blockquote>
The z value in a <code>gpkg_geometry_columns</code> table row SHALL be one of 0, 1, or 2.
</blockquote>
</div>
<div id="_requirement-26" class="quoteblock">
<div class="title">Requirement 26</div>
<blockquote>
The m value in a <code>gpkg_geometry_columns</code> table row SHALL be one of 0, 1, or 2.
</blockquote>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="feature_user_data_tables">2.1.6. Vector Feature User Data Tables</h4>
<div class="sect4">
<h5 id="_data_8">Data</h5>
<div class="sect5">
<h6 id="_table_definition_4">Table Definition</h6>
<div class="paragraph">
<p>The third component of the SQL schema for vector features in a GeoPackage described in clause <a href="#sfsql_intro">Simple Features SQL Introduction</a> above are tables that contain user data representing features.
Feature attributes are columns in a feature table, including geometries.
Features are rows in a feature table.
<span class="footnote">[<a id="_footnoteref_8" class="footnote" href="#_footnote_8" title="View footnote.">8</a>]</span></p>
</div>
<div id="_requirement-27" class="quoteblock">
<div class="title">Requirement 27</div>
<blockquote>
A GeoPackage file MAY contain tables or updateable views containing vector features.
Every such feature table or view in a GeoPackage file SHALL have a primary key defined on one integer column per <a href="#example_feature_table_cols">EXAMPLE : Sample Feature Table or View Definition</a> and <a id="example_feature_table_sql"></a>.
</blockquote>
</div>
<div class="paragraph">
<p>The integer primary key of a feature table allows features to be linked to row level metadata records in the <code>gpkg_metadata</code> table by rowid values in the <code>gpkg_metadata_reference</code> table as described in clause <a href="#_metadata_reference_table">Metadata Reference Table</a> below.</p>
</div>
<div id="_requirement-28" class="quoteblock">
<div class="title">Requirement 28</div>
<blockquote>
A feature table SHALL have only one geometry column.
</blockquote>
</div>
<div class="paragraph">
<p>Feature data models from non-GeoPackage implementations that have multiple geometry columns per feature table MAY be transformed into GeoPackage implementations with a separate feature table for each geometry type whose rows have matching integer primary key values that allow them to be joined in a view with the same column definitions as the non-GeoPackage feature data model with multiple geometry columns.</p>
</div>
<div id="_requirement-29" class="quoteblock">
<div class="title">Requirement 29</div>
<blockquote>
The columns of a vector feature user data table SHALL only be declared using one of the data types specified in table <a href="#vector_feature_data_types">Vector Feature Data Types</a>.
</blockquote>
</div>
<table id="vector_feature_data_types" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 5. Vector Feature Data Types</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Data Type</th>
<th class="tableblock halign-left valign-top">Size and Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">BOOLEAN</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A boolean value representing true or false. Stored as SQLite INTEGER with value 0 for false or 1 for true</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TINYINT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8-bit signed two&#8217;s complement integer. Stored as SQLite INTEGER with values in the range [-128, 127]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SMALLINT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">16-bit signed two&#8217;s complement integer. Stored as SQLite INTEGER with values in the range [-32768, 32767]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MEDIUMINT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">32-bit signed two&#8217;s complement integer. Stored as SQLite INTEGER with values in the range [-2147483648, 2147483647]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">INT, INTEGER</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">64-bit signed two&#8217;s complement integer. Stored as SQLite INTEGER with values in the range [-9223372036854775808, 9223372036854775807]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">FLOAT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">32-bit IEEE floating point number Stored as SQLite REAL limited to values that can be represented as a 4-byte IEEE floating point number</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DOUBLE, REAL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">64-bit IEEE floating point number Stored as SQLite REAL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Variable length string encoded in either UTF-8 or UTF-16, determined by PRAGMA encoding; see <a href="http://www.sqlite.org/pragma.html#pragma_encoding">http://www.sqlite.org/pragma.html#pragma_encoding</a> Stored as SQLite TEXT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">BLOB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Variable length binary data Stored as SQLite BLOB</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;geometry_type_name&gt;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Geometry encoded as per clause <a href="#_geometry_encoding">Geometry Encoding</a>. &lt;geometry type_name&gt; is one of the geometry types listed in <a href="#geometry_types">[geometry_types]</a>. XY, XYZ, XYM and XYZM geometries use the same data type. Stored as SQLite BLOB</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DATE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ISO-8601 date string encoded in either UTF-8 or UTF-16. See TEXT. Stored as SQLite TEXT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DATETIME</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ISO-8601 date/time string encoded in either UTF-8 or UTF-16. See TEXT. Stored as SQLite TEXT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DECIMAL_TEXT(m,d)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Decimal value with maximum digits (precision) (m) from 1 to 65 and digits to the right of the decimal point (scale) (d) from 0 to 30 1</p></td>
</tr>
</tbody>
</table>

<table id="example_feature_table_cols" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 6. EXAMPLE : Sample Feature Table or View Definition</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Column Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Null</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Key</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">INTEGER</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Autoincrement primary key</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>geometry</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GEOMETRY</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GeoPackage Geometry</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>text_attribute</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Text attribute of feature</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>real_attribute</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">REAL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Real attribute of feature</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>boolean_attribute</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BOOLEAN</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean attribute of feature</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>raster_or_photo</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BLOB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Photograph of the area</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p>See <a href="#example_feature_table_sql">[example_feature_table_sql]</a>.</p>
</div>
</div>
<div class="sect5">
<h6 id="_table_data_values_4">Table Data Values</h6>
<div class="paragraph">
<p>A feature geometry is stored in a geometry column specified by the lowercase <code>geometry_column</code> value for the feature table in the <code>gpkg_geometry_columns</code> table defined in clause <a href="#_geometry_columns">Geometry Columns</a> above.</p>
</div>
<div class="paragraph">
<p>The geometry type of a feature geometry column specified in the <code>gpkg_geometry_columns</code> table <code>geometry_type_name</code> column is a name from <a href="#geometry_types">[geometry_types]</a>.</p>
</div>
<div id="_requirement-30" class="quoteblock">
<div class="title">Requirement 30</div>
<blockquote>
Feature table geometry columns SHALL contain geometries of the type or assignable for the type specified for the column by the <code>gpkg_geometry_columns</code> table <code>geometry_type_name</code> column value <span class="footnote">[<a id="_footnoteref_9" class="footnote" href="#_footnote_9" title="View footnote.">9</a>]</span>.
</blockquote>
</div>
<div class="paragraph">
<p>Geometry subtypes are assignable as defined in <a href="#geometry_types">[geometry_types]</a> and shown in part in <a href="#core_geometry_model_figure">Core Geometry Model</a>.
For example, if the <code>geometry_type_name</code> value in the <code>gpkg_geometry_columns</code> table is for a geometry type like POINT that has no subtypes, then the feature table geometry column MAY only contain geometries of that type.
If the geometry <code>type_name</code> value in the <code>gpkg_geometry_columns</code> table is for a geometry type like GEOMCOLLECTION that has subtypes, then the feature table geometry column MAY only contain geometries of that type or any of its direct or indirect subtypes.
If the geometry <code>type_name</code> is GEOMETRY (the root of the geometry type hierarchy) then the feature table geometry column MAY contain geometries of any geometry type.
The presence or absence of optional elevation (Z) and/or measure (M) values in a geometry does not change its type or assignability.</p>
</div>
<div class="paragraph">
<p>The spatial reference system type of a feature geometry column specified by a <code>gpkg_geometry_columns</code> table <code>srs_id</code> column value is a code from the <code>gpkg_spatial_ref_sys</code> table <code>srs_id</code> column.</p>
</div>
<div id="_requirement-31" class="quoteblock">
<div class="title">Requirement 31</div>
<blockquote>
Feature table geometry columns SHALL contain geometries with the <code>srs_id</code> specified for the column by the <code>gpkg_geometry_columns</code> table <code>srs_id</code> column value.
</blockquote>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_tiles">2.2. Tiles</h3>
<div class="paragraph">
<p>The optional capabilities defined in sub-clauses and requirement statements of this clause MAY be implemented by an GeoPackage file.</p>
</div>
<div class="sect3">
<h4 id="_tile_matrix_introduction">2.2.1. Tile Matrix Introduction</h4>
<div class="paragraph">
<p>There are a wide variety of commercial and open source conventions for storing, indexing, accessing and describing tile in tile pyramids. Unfortunately, no applicable existing consensus, national or international specifications hav standardized practices in this domain. In addition, various image file formats have different representationa capabilities, and include different self-descriptive metadata. The tile store data / metadata model and convention described below support direct use of tiles in a GeoPackage in two ways.
First, they specify how existing application MAY create SQL Views of the data /metadata model on top of existing application tables that that follow differen interface conventions.
Second, they include and expose enough metadata information at both the dataset and record level to allow applications that use GeoPackage data to discover its characteristics without having to parse all of the store images.
Applications that store GeoPackage tile data, which are presumed to have this information available, SHALL stor sufficient metadata to enable its intended use.</p>
</div>
<div class="paragraph">
<p>The GeoPackage tile store data model MAY be implemented directly as SQL tables in a SQLite database for maximu performance, or as SQL views on top of tables in an existing SQLite tile store for maximum adaptability and loos coupling to enable widespread implementation.</p>
</div>
<div class="paragraph">
<p>A GeoPackage CAN store multiple raster and tile pyramid data sets in different tables or views in the same container.
<span class="footnote">[<a id="_footnoteref_10" class="footnote" href="#_footnote_10" title="View footnote.">10</a>]</span> âTile pyramidâ refers to the concept of pyramid structure of tiles of different spatial extent an resolution at different zoom levels, and the tile data itself.
âTile matrixâ refers to rows and columns of tiles tha all have the same spatial extent and resolution at a particular zoom level.
âTile matrix setâ refers to the definitio of a tile pyramidâs tiling structure.</p>
</div>
<div class="paragraph">
<p>The tables or views that implement the GeoPackage tile store data / metadata model are described and discusse individually in the following subsections.</p>
</div>
</div>
<div class="sect3">
<h4 id="_contents_3">2.2.2. Contents</h4>
<div class="sect4">
<h5 id="_data_9">Data</h5>
<div class="sect5">
<h6 id="_contents_table_tiles_row">Contents Table â Tiles Row</h6>
<div id="_requirement-32" class="quoteblock">
<div class="title">Requirement 32</div>
<blockquote>
The <code>gpkg_contents</code> table SHALL contain a row with a <code>data_type</code> column value of âtilesâ for eac tile pyramid user data table or view.
</blockquote>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_zoom_levels">2.2.3. Zoom Levels</h4>
<div class="paragraph">
<p>In a GeoPackage, zoom levels are integers in sequence from 0 to n that identify tile matrix layers in a tile matrix se that contain tiles of decreasing spatial extent and finer spatial resolution.
Adjacent zoom levels immediately preced or follow each other and differ by a value of 1.
Pixel sizes are real numbers in the terrain units of the spatia reference system of a tile image specifying the dimensions of the real world area represented by one pixel.
Pixel size MAY vary by a constant factor or by different factors or intervals between some or all adjacent zoom levels in a til matrix set.
In the commonly used "zoom times two" convention, pixel sizes vary by a factor of 2 between all adjacent zoom levels, as shown in the example in <a href="#tiles_factor2_example_appendix">[tiles_factor2_example_appendix]</a>.
Other "zoom other intervals" conventions use different factors o irregular intervals with pixel sizes chosen for intuitive cartographic representation of raster data, or to coincid with the original pixel size of commonly used global image products.
See WMTS Annex E for additional examples of both conventions.</p>
</div>
<div class="sect4">
<h5 id="_data_10">Data</h5>
<div class="sect5">
<h6 id="_zoom_times_two">Zoom Times Two</h6>
<div id="_requirement-33" class="quoteblock">
<div class="title">Requirement 33</div>
<blockquote>
In a GeoPackage file that contains a tile matrix user data table that contains tile data, b default <span class="footnote">[<a id="_footnoteref_11" class="footnote" href="#_footnote_11" title="View footnote.">11</a>]</span>, zoom level pixel sizes for that table SHALL vary by a factor of 2 between adjacent zoo levels in the tile matrix metadata table.
</blockquote>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_tile_encoding_png">2.2.4. Tile Encoding PNG</h4>
<div class="sect4">
<h5 id="_data_11">Data</h5>
<div class="sect5">
<h6 id="_mime_type_png">MIME Type PNG</h6>
<div id="_requirement-34" class="quoteblock">
<div class="title">Requirement 34</div>
<blockquote>
In a GeoPackage file that contains a tile matrix user data table that contains tile data that is no <a href="http://www.ietf.org/rfc/rfc2046.txt">MIME type</a> <a href="http://www.jpeg.org/public/jfif.pdf">image/jpeg</a>, by default SHALL store that tile data in <a href="http://www.iana.org/assignments/media-types/index.html">MIME type http://libpng.org/pub/png/[image/png</a>. <span class="footnote">[<a id="_footnoteref_12" class="footnote" href="#_footnote_12" title="View footnote.">12</a>]</span>
</blockquote>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_tile_encoding_jpeg">2.2.5. Tile Encoding JPEG</h4>
<div class="sect4">
<h5 id="_data_12">Data</h5>
<div class="sect5">
<h6 id="_mime_type_jpeg">MIME Type JPEG</h6>
<div id="_requirement-35" class="quoteblock">
<div class="title">Requirement 35</div>
<blockquote>
In a GeoPackage file that contains a tile matrix user data table that contains tile data that is no <a href="http://www.iana.org/assignments/media-types/index.html">MIME type</a> <a href="http://libpng.org/pub/png/">image/png</a>, by defaul SHALL store that tile data in <a href="http://www.ietf.org/rfc/rfc2046.txt">MIME type http://www.jpeg.org/public/jfif.pdf[image/jpeg</a>. <span class="footnote">[<a id="_footnoteref_13" class="footnote" href="#_footnote_13" title="View footnote.">13</a>]</span>
</blockquote>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_tile_matrix_set">2.2.6. Tile Matrix Set</h4>
<div class="sect4">
<h5 id="_data_13">Data</h5>
<div class="sect5">
<h6 id="_table_definition_5">Table Definition</h6>
<div id="_requirement-36" class="quoteblock">
<div class="title">Requirement 36</div>
<blockquote>
A GeoPackage that contains a tile pyramid user data table SHALL contain  <code>gpkg_tile_matrix_set</code> table per <a href="#gpkg_tile_matrix_set_cols">Tile Matrix Set Table or View Definition</a> and <a href="#gpkg_tile_matrix_set_sql">[gpkg_tile_matrix_set_sql]</a>.
</blockquote>
</div>
<table id="gpkg_tile_matrix_set_cols" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 7. Tile Matrix Set Table or View Definition</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Column Name</th>
<th class="tableblock halign-left valign-top">Column Type</th>
<th class="tableblock halign-left valign-top">Column Description</th>
<th class="tableblock halign-left valign-top">Null</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Key</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>table_name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tile Pyramid User Data Table Name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PK, FK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>srs_id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Spatial Reference System ID: gpkg_spatial_ref_sys.srs_id</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">FK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>min_x</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">double</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Minimum bounding box for all content in table_name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>min_y</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">double</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Minimum bounding box for all content in table_name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>max_x</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">double</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Minimum bounding box for all content in table_name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">256</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>max_y</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">double</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Minimum bounding box for all content in table_name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">256</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p>The gpkg_tile_matrix_set table or updateable view defines the minimum bounding box (min_x, min_y, max_x, max_y) an spatial reference system (srs_id) for all content in a tile pyramid user data table.
This bounding box SHALL be exact so that the bounding box coordinates for individual tiles in a tile pyramid MAY be calculated based on the column value for the user data table in the gpkg_tile_matrix table or view defined in clause <a href="#tile_matrix">Tile Matrix</a> below.</p>
</div>
</div>
<div class="sect5">
<h6 id="_table_data_values_5">Table Data Values</h6>
<div id="_requirement-37" class="quoteblock">
<div class="title">Requirement 37</div>
<blockquote>
Values of the <code>gpkg_tile_matrix_set</code> <code>table_name</code> column SHALL reference values in th gpkg_contents table_name column for rows with a data type of "tiles".
</blockquote>
</div>
<div id="_requirement-38" class="quoteblock">
<div class="title">Requirement 38</div>
<blockquote>
The gpkg_tile_matrix_set table or view SHALL contain one row record for each tile pyramid user data table.
</blockquote>
</div>
<div id="_requirement-39" class="quoteblock">
<div class="title">Requirement 39</div>
<blockquote>
Values of the <code>gpkg_tile_matrix_set</code> <code>srs_id</code> column SHALL reference values in the <code>gpkg_spatial_ref_sys</code> <code>srs_id</code> column.
</blockquote>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="tile_matrix">2.2.7. Tile Matrix</h4>
<div class="sect4">
<h5 id="_data_14">Data</h5>
<div class="sect5">
<h6 id="_table_definition_6">Table Definition</h6>
<div id="_requirement-40" class="quoteblock">
<div class="title">Requirement 40</div>
<blockquote>
A GeoPackage taht contains a tile pyramid user data table SHALL contain a <code>gpkg_tile_matrx</code> table or view per <a href="#gpkg_tile_matrix_cols">Tile Matrix Metadata Table or View Definition</a> and <a href="#gpkg_tile_matrix_sql">[gpkg_tile_matrix_sql]</a>
</blockquote>
</div>
<table id="gpkg_tile_matrix_cols" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 8. Tile Matrix Metadata Table or View Definition</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Column Name</th>
<th class="tableblock halign-left valign-top">Column Type</th>
<th class="tableblock halign-left valign-top">Column Description</th>
<th class="tableblock halign-left valign-top">Null</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Key</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>table_name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tile Pyramid User Data Table Name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PK, FK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>zoom_level</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0 &#8656; <code>zoom_level</code> &#8656; max_level for <code>table_name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>matrix_width</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of columns (&gt;= 1) in tile matrix at this zoom level</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>matrix_height</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of rows (&gt;= 1) in tile matrix at this zoom level</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tile_width</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tile width in pixels (&gt;= 1)for this zoom level</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">256</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tile_height</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tile height in pixels (&gt;= 1) for this zoom level</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">256</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pixel_x_size</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">double</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">In <code>t_table_name</code> srid units or default meters for srid 0 (&gt;0)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pixel_y_size</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">double</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">In <code>t_table_name</code> srid units or default meters for srid 0 (&gt;0)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p>The <code>gpkg_tile_matrix</code> table or updateable view documents the structure of the tile matrix at each zoom level in each tiles table.
It allows GeoPackages to contain rectangular as well as square tiles (e.g. for better representation of polar regions).
It allows tile pyramids with zoom levels that differ in resolution by factors of 2, irregular intervals, or regular intervals other than factors of 2.</p>
</div>
<div class="paragraph">
<p>See <a href="#gpkg_tile_matrix_metadata_sql">[gpkg_tile_matrix_metadata_sql]</a></p>
</div>
</div>
<div class="sect5">
<h6 id="_table_data_values_6">Table Data Values</h6>
<div id="_requirement-41" class="quoteblock">
<div class="title">Requirement 41</div>
<blockquote>
Values of the <code>gpkg_tile_matrix</code> <code>table_name</code> column SHALL reference values in the <code>gpkg_contents</code> <code>table_name</code> column for rows with a <code>data_type</code> of âtilesâ.
</blockquote>
</div>
<div id="_requirement-42" class="quoteblock">
<div class="title">Requirement 42</div>
<blockquote>
The <code>gpkg_tile_matrix</code> table or view SHALL contain one row record for each zoom level that contains one or more tiles in each tile pyramid user data table or view.
</blockquote>
</div>
<div class="paragraph">
<p>The <code>gpkg_tile_matrix</code> table or view MAY contain row records for zoom levels in a tile pyramid user data table that do not contain tiles.</p>
</div>
<div class="paragraph">
<p>GeoPackages follow the most frequently used conventions of a tile origin at the upper left and a zoom-out-level of 0 for the smallest map scale âwhole worldâ zoom level view <span class="footnote">[<a id="_footnoteref_14" class="footnote" href="#_footnote_14" title="View footnote.">14</a>]</span>, as specified by <a href="http://portal.opengeospatial.org/files/?artifact_id=35326">WMTS</a>.
The tile coordinate (0,0) always refers to the tile in the upper left corner of the tile matrix at any zoom level, regardless of the actual availability of that tile.</p>
</div>
<div id="_requirement-43" class="quoteblock">
<div class="title">Requirement 43</div>
<blockquote>
The <code>zoom_level</code> column value in a <code>gpkg_tile_matrix</code> table row SHALL not be negative.
</blockquote>
</div>
<div id="_requirement-44" class="quoteblock">
<div class="title">Requirement 44</div>
<blockquote>
The <code>matrix_width</code> column value in a <code>gpkg_tile_matrix</code> table row SHALL be greater than 0.
</blockquote>
</div>
<div id="_requirement-45" class="quoteblock">
<div class="title">Requirement 45</div>
<blockquote>
The <code>matrix_height</code> column value in a <code>gpkg_tile_matrix</code> table row SHALL be greater than 0.
</blockquote>
</div>
<div id="_requirement-46" class="quoteblock">
<div class="title">Requirement 46</div>
<blockquote>
The <code>tile_width</code> column value in a <code>gpkg_tile_matrix</code> table row SHALL be greater than 0.
</blockquote>
</div>
<div id="_requirement-47" class="quoteblock">
<div class="title">Requirement 47</div>
<blockquote>
The <code>tile_height</code> column value in a <code>gpkg_tile_matrix</code> table row SHALL be greater than 0.
</blockquote>
</div>
<div id="_requirement-48" class="quoteblock">
<div class="title">Requirement 48</div>
<blockquote>
The <code>pixel_x_size</code> column value in a <code>gpkg_tile_matrix</code> table row SHALL be greater than 0.
</blockquote>
</div>
<div id="_requirement-49" class="quoteblock">
<div class="title">Requirement 49</div>
<blockquote>
The <code>pixel_y_size</code> column value in a <code>gpkg_tile_matrix</code> table row SHALL be greater than 0.
</blockquote>
</div>
<div id="_requirement-50" class="quoteblock">
<div class="title">Requirement 50</div>
<blockquote>
The <code>pixel_x_size</code> and <code>pixel_y_size</code> column values for <code>zoom_level</code> column values in a <code>gpkg_tile_matrix</code> table sorted in ascending order SHALL be sorted in descending order.
</blockquote>
</div>
<div class="paragraph">
<p>If the geographic extent of the image data contained in these tiles is within but not equal to this bounding box, then the non-image area of matrix edge tiles must be padded with no-data values, preferably transparent ones.]</p>
</div>
<div class="paragraph">
<p>Tiles MAY or MAY NOT be provided for level 0 or any other particular zoom level. <span class="footnote">[<a id="_footnoteref_15" class="footnote" href="#_footnote_15" title="View footnote.">15</a>]</span>
This means that a tile matrix set can be sparse, i.e. not contain a tile for any particular position at a certain tile zoom level.
<span class="footnote">[<a id="_footnoteref_16" class="footnote" href="#_footnote_16" title="View footnote.">16</a>]</span> This does not affect the spatial extent stated by the min/max x/y columns values in the <code>gpkg_contents</code> record for the same <code>table_name</code>, or the tile matrix width and height at that level. footnote:[The gpkg_contents table contains coordinates that define a bounding box as the stated spatial extent for all tiles in a tile (matrix set) table.</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_tile_pyramid_user_data_tables">2.2.8. Tile Pyramid User Data Tables</h4>
<div class="sect4">
<h5 id="_data_15">Data</h5>
<div class="sect5">
<h6 id="_table_definition_7">Table Definition</h6>
<div id="_requirement-51" class="quoteblock">
<div class="title">Requirement 51</div>
<blockquote>
Each tile matrix set in a GeoPackage file SHALL be stored in a different tile pyramid user data table or updateable view with a unique name per <a href="#example_tiles_table_cols">Tiles Table or View Definition</a> and <a href="#example_tiles_table_sql">[example_tiles_table_sql]</a>.
</blockquote>
</div>
<table id="example_tiles_table_cols" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 9. Tiles Table or View Definition</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Column Name</th>
<th class="tableblock halign-left valign-top">Column Type</th>
<th class="tableblock halign-left valign-top">Column Description</th>
<th class="tableblock halign-left valign-top">Null</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Key</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Autoincrement primary key</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>zoom_level</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">min(zoom_level) &#8656; <code>zoom_level</code> &#8656; max(zoom_level) for <code>t_table_name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tile_column</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0 to <code>tile_matrix</code> <code>matrix_width</code> â 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tile_row</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0 to <code>tile_matrix</code> <code>matrix_height</code> - 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tile_data</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BLOB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Of an image MIME type specified in clause 10.2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p>See <a href="#example_tiles_table_sql">[example_tiles_table_sql]</a>.</p>
</div>
</div>
<div class="sect5">
<h6 id="_table_data_values_7">Table Data Values</h6>
<div class="paragraph">
<p>Each tile pyramid user data table or view <span class="footnote">[<a id="_footnoteref_17" class="footnote" href="#_footnote_17" title="View footnote.">17</a>]</span> MAY contain tile matrices at zero or more zoom levels of different spatial resolution (map scale).</p>
</div>
<div id="_requirement-52" class="quoteblock">
<div class="title">Requirement 52</div>
<blockquote>
For each distinct <code>table_name</code> from the <code>gpkg_tile_matrix</code> (tm) table, the tile pyramid (tp) user data table <code>zoom_level</code> column value in a GeoPackage file SHALL be in the range min(tm.zoom_level) &#8656; tp.zoom_level &#8656; max(tm.zoom_level).
</blockquote>
</div>
<div id="_requirement-53" class="quoteblock">
<div class="title">Requirement 53</div>
<blockquote>
For each distinct <code>table_name</code> from the <code>gpkg_tile_matrix</code> (tm) table, the tile pyramid (tp) user data table <code>tile_column</code> column value in a GeoPackage file SHALL be in the range 0 &#8656; tp.tile_column &#8656; tm.matrix_width â 1 where the tm and tp <code>zoom_level</code> column values are equal.
</blockquote>
</div>
<div id="_requirement-54" class="quoteblock">
<div class="title">Requirement 54</div>
<blockquote>
For each distinct <code>table_name</code> from the <code>gpkg_tile_matrix</code> (tm) table, the tile pyramid (tp) user data table <code>tile_row</code> column value in a GeoPackage file SHALL be in the range 0 &#8656; tp.tile_row &#8656; tm.matrix_height â 1 where the tm and tp <code>zoom_level</code> column values are equal.
</blockquote>
</div>
<div class="paragraph">
<p>All tiles at a particular zoom level have the same <code>pixel_x_size</code> and <code>pixel_y_size</code> values specified in the <code>gpkg_tile_matrix</code> row record for that tiles table and zoom level. {tile_data_foot1_ref}</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_schema">2.3. Schema</h3>
<div class="paragraph">
<p>The optional capabilities defined in sub clauses and requirement statements of this clause MAY be implemented by any GeoPackage file.</p>
</div>
<div class="sect3">
<h4 id="_data_columns">2.3.1. Data Columns</h4>
<div class="sect4">
<h5 id="_data_16">Data</h5>
<div class="sect5">
<h6 id="_table_definition_8">Table Definition</h6>
<div id="_requirement-55" class="quoteblock">
<div class="title">Requirement 55</div>
<blockquote>
A GeoPackage file MAY contain a table or updateable view named <code>gpkg_data_columns</code>.
If present it SHALL be defined per <a href="#gpkg_data_columns_cols">Data Columns Table or View Definition</a> and <a href="#gpkg_data_columns_sql">[gpkg_data_columns_sql]</a>.
</blockquote>
</div>
<table id="gpkg_data_columns_cols" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 10. Data Columns Table or View Definition</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Column Name</th>
<th class="tableblock halign-left valign-top">Column Type</th>
<th class="tableblock halign-left valign-top">Column Description</th>
<th class="tableblock halign-left valign-top">Null</th>
<th class="tableblock halign-left valign-top">Key</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>table_name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the tiles or feature table</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>column_name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the table column</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A human-readable identifier (e.g. short name) for the column_name content</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>title</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A human-readable formal title for the column_name content</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>description</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A human-readable description for the table_name content</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mime_type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.iana.org/assignments/media-types/index.html">MIME</a> type of column_name if BLOB type, or NULL for other types</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>constraint_name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Case sensitive column value constraint name specified by reference to  gpkg_data_column_constraints.constraint name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>constraint_type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Lowercase column value constraint type  specified by reference to gpkg_data_column_constraints.constraint_type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p>GeoPackage applications MAY <span class="footnote">[<a id="_footnoteref_18" class="footnote" href="#_footnote_18" title="View footnote.">18</a>]</span> use the <code>gpkg_data_columns</code> table to store minimal application schema identifying, descriptive and <a href="http://www.iana.org/assignments/media-types/index.html">MIME</a> type <span class="footnote">[<a id="_footnoteref_19" class="footnote" href="#_footnote_19" title="View footnote.">19</a>]</span> information about columns in user vector feature and tile matrix data tables that supplements the data available from the SQLite <code>sqlite_master</code> table and pragma <code>table_info(table_name)</code> SQL function.
The <code>gpkg_data_columns</code> data CAN be used to provide more specific column data types and value ranges and application specific structural and semantic information to enable more informative user menu displays and more effective user decisions on the suitability of GeoPackage contents for specific purposes.</p>
</div>
<div class="paragraph">
<p>See <a href="#gpkg_data_columns_sql">[gpkg_data_columns_sql]</a>.</p>
</div>
</div>
<div class="sect5">
<h6 id="_table_data_values_8">Table Data Values</h6>
<div id="_requirement-56" class="quoteblock">
<div class="title">Requirement 56</div>
<blockquote>
Values of the <code>gpkg_data_columns</code> table <code>table_name</code> column value SHALL reference values in the <code>gpkg_contents</code> <code>table_name</code> column.
</blockquote>
</div>
<div id="_requirement-57" class="quoteblock">
<div class="title">Requirement 57</div>
<blockquote>
The <code>column_name</code> column value in a <code>gpkg_data_columns</code> table row SHALL contain the name of a column in the SQLite table or view identified by the <code>table_name</code> column value.
</blockquote>
</div>
<div id="_requirement-58" class="quoteblock">
<div class="title">Requirement 58</div>
<blockquote>
The constraint_name column value in a gpkg_data_columns table MAY be NULL.
If it is not NULL, it SHALL contain a case sensitive constraint_name column value from the gpkg_data_column_constraints table.
</blockquote>
</div>
<div id="_requirement-59" class="quoteblock">
<div class="title">Requirement 59</div>
<blockquote>
The constraint_type column value in a gpkg_data_columns table MAY be NULL if the constraint_name column value is NULL.
If the constraint_name column value is not NULL, then the constraint_type column value SHALL contain a lowercase constraint_type column value from the gpkg_data_column_constraints table for a row with a matching constraint_name value.
</blockquote>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_data_column_constraints">2.3.2. Data Column Constraints</h4>
<div class="sect4">
<h5 id="_data_17">Data</h5>
<div class="sect5">
<h6 id="_table_definition_9">Table Definition</h6>
<div id="_requirement-60" class="quoteblock">
<div class="title">Requirement 60</div>
<blockquote>
A GeoPackage file MAY contain a table or updateable view named gpkg_data_column_constraints.
If present it SHALL be defined per <a href="#gpkg_data_column_constraints_cols">Data Column Constraints Table or View Definition</a> and <a href="#gpkg_data_column_constraints_sql">[gpkg_data_column_constraints_sql]</a>.
</blockquote>
</div>
<div class="paragraph">
<p>The gpkg_data_column_constraints table contains data to specify restrictions on basic data type column values.
The constraint_name and constraint_type columns are referenced by columns with the same names in the gpkg_data_columns table defined in clause 2.3.1.1.1.</p>
</div>
<table id="gpkg_data_column_constraints_cols" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 11. Data Column Constraints Table or View Definition</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Column Name</th>
<th class="tableblock halign-left valign-top">Column Type</th>
<th class="tableblock halign-left valign-top">Column Description</th>
<th class="tableblock halign-left valign-top">Null</th>
<th class="tableblock halign-left valign-top">Key</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>constraint_name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Case sensitive name of constraint</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>constraint_type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Lowercase type name of constraint: <em>range</em> | <em>enum</em> | <em>glob</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>value</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specified case sensitive value for <em>enum</em> or <em>glob</em> or NULL for <em>range</em> constraint_type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>min</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NUMERIC</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Minimum value for ârangeâ or NULL for âenumâ or âglobâ constraint_type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>minIsInclusive</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">INTEGER</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0 (false) if min value is exclusive, or 1 (true) if min value is inclusive</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>max</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NUMERIC</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum value for ârangeâ or NULL for âenumâ or âglobâ constraint_type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>maxIsInclusive</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">INTEGER</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0 (false) if max value is exclusive, or 1 (true) if max value is inclusive</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>

</div>
<div class="sect5">
<h6 id="_table_data_values_9">Table Data Values</h6>
<div class="paragraph">
<p>The case sensitive gpkg_data_column_constraints constraint_name column value SHOULD indicate the table name, column name, and constraint type that is being specified, e.g. "roads_lanes_range".
The lowercase gpkg_data_column_constraints constraint_type column value specifies the type of constraint: "range", "enum", or "glob" (text pattern match).
The case sensitive value column contains an enumerated legal value for constraint_type "enum", a pattern match string for constraint_type "glob", or NULL for constraint_type "range".
The min and max column values specify the minim and maximum valid values for constraint_type "range", or are NULL for constraint_type "enum" or "glob".
The minIsInclusive and maxIsInclusive column values contain 1 if the min and max values are inclusive, 0 if they are exclusive, or are NULL for constraint_type "enum" or "glob".
These restrictions MAY be enforced by SQL triggers or by code in applications that update GeoPackage data values.</p>
</div>
<div id="_requirement-61" class="quoteblock">
<div class="title">Requirement 61</div>
<blockquote>
The <code>gpkg_data_column_constraints</code> table MAY be empty.
If it contains data, the lowercase <code>constraint_type</code> column values SHALL be one of "range", "enum", or "glob".
</blockquote>
</div>
<div id="_requirement-62" class="quoteblock">
<div class="title">Requirement 62</div>
<blockquote>
The <code>gpkg_data_column_constraints</code> table MAY be empty.
If it contains rows with constraint_type column values of "range", the <code>value</code> column values for those rows SHALL be NULL.
</blockquote>
</div>
<div id="_requirement-63" class="quoteblock">
<div class="title">Requirement 63</div>
<blockquote>
The <code>gpkg_data_column_constraints</code> table MAY be empty.
If it contains rows with <code>constraint_type</code> column values of "range", the <code>min</code> column values for those rows SHALL be NOT NULL and less than the <code>max</code> column value which shall be NOT NULL.
</blockquote>
</div>
<div id="_requirement-64" class="quoteblock">
<div class="title">Requirement 64</div>
<blockquote>
The <code>gpkg_data_column_constraints</code> table MAY be empty.
If it contains rows with <code>constraint_type</code> column values of "range", the <code>minIsInclusive</code> and <code>maxIsInclusive</code> column values for those rows SHALL be 0 or 1.
</blockquote>
</div>
<div id="_requirement-65" class="quoteblock">
<div class="title">Requirement 65</div>
<blockquote>
The <code>gpkg_data_column_constraints</code> table MAY be empty.
If it contains rows with <code>constraint_type</code> column values of "enum" or "glob", the <code>min</code>, <code>max</code>, <code>minIsInclusive</code> and <code>maxIsInclusive</code> column values for those rows SHALL be NULL.
</blockquote>
</div>
<div id="_requirement-66" class="quoteblock">
<div class="title">Requirement 66</div>
<blockquote>
The <code>gpkg_data_column_constraints</code> table MAY be empty.
If it contains rows with <code>constraint_type</code> column values of "enum" or "glob", the <code>value</code> column SHALL NOT be NULL.
</blockquote>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_metadata">2.4. Metadata</h3>
<div class="paragraph">
<p>The optional capabilities defined in sub clauses and requirement statements of this clause MAY be implemented by any <strong>GeoPackage file</strong>.</p>
</div>
<div class="sect3">
<h4 id="_introduction_2">2.4.1. Introduction</h4>
<div class="paragraph">
<p>Two tables in a GeoPackage file provide a means of storing metadata in MIME <a href="#25">[25]</a> encodings that are defined in accordance with any authoritative metadata specifications, and relating it to the features, rasters, and tiles data in a GeoPackage.
These tables are intended to provide the support necessary to implement the hierarchical metadata model defined in ISO 19115 <a href="#40">[40]</a>, Annex B B.5.25 MD_ScopeCode, <a href="#metadata_example_appendix">[metadata_example_appendix]</a> and <a href="#raster_or_tile_metadata_example_appendix">[raster_or_tile_metadata_example_appendix]</a>, so that as GeoPackage data is captured and updated, the most local and specific detailed metadata changes associated with the new or modified data MAY be captured separately, and referenced to existing global and general metadata.</p>
</div>
<div class="paragraph">
<p>The <code>gpkg_metadata</code> table that contains metadata is described in clause <a href="#_metadata_table">Metadata Table</a>, and the <code>gpkg_metadata_reference</code> table that relates <code>gpkg_metadata</code> to GeoPackage data is described in clause <a href="#_metadata_reference_table">Metadata Reference Table</a>.
There is no GeoPackage requirement that such metadata be provided or that defined metadata be structured in a hierarchical fashion <span class="footnote">[<a id="_footnoteref_20" class="footnote" href="#_footnote_20" title="View footnote.">20</a>]</span> with more than one level, only that if it is, these tables SHALL be used.
Such metadata <span class="footnote">[<a id="_footnoteref_21" class="footnote" href="#_footnote_21" title="View footnote.">21</a>]</span> and data that relates it to GeoPackage contents SHALL NOT be stored in other tables as defined in clause <a href="#_other_data_tables">Other Data Tables</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_metadata_table">2.4.2. Metadata Table</h4>
<div class="sect4">
<h5 id="_data_18">Data</h5>
<div class="sect5">
<h6 id="_table_definition_10">Table Definition</h6>
<div class="paragraph">
<p><em>Req 50:</em> A GeoPackage file MAY contain a table named gpkg_metadata. If present it SHALL be defined
per <a href="#gpkg_metadata_cols">Metadata Table Definition</a> and <a href="#gpkg_metadata_sql">[gpkg_metadata_sql]</a>.</p>
</div>
<div class="paragraph">
<p>The first component of GeoPackage metadata is the <code>gpkg_metadata</code> table that MAY contain metadata in MIME <a href="#25">[25]</a> encodings structured in accordance with any authoritative metadata specification, such as ISO 19115 <a href="#40">[40]</a>, ISO 19115-2 <a href="#B31">[B31]</a>, ISO 19139 <a href="#B32">[B32]</a>, Dublin Core <a href="#B33">[B33]</a>, CSDGM <a href="#B34">[B34]</a>, DDMS <a href="#B35">[B35]</a>, NMF/NMIS <a href="#B36">[B36]</a>, etc.
The GeoPackage interpretation of what constitutes âmetadataâ is a broad one that includes UML models <a href="#B37">[B37]</a> encoded in XMI <a href="#B38">[B38]</a>, GML Application Schemas <a href="#B39">[B39]</a>, ISO 19110 feature catalogues <a href="#B40">[B40]</a>, OWL <a href="#B41">[B41]</a> and SKOS <a href="#B42">[B42]</a> taxonomies, etc.</p>
</div>
<table id="gpkg_metadata_cols" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 12. Metadata Table Definition</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Column Name</th>
<th class="tableblock halign-left valign-top">Column Type</th>
<th class="tableblock halign-left valign-top">Column Description</th>
<th class="tableblock halign-left valign-top">Null</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Key</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Metadata primary key</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>md_scope</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Case sensitive name of the data scope to which this metadata applies; see table 11 below</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">âdatasetâ</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>md_standard_uri</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URI reference to the metadata structure definition authority</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mime_type</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MIME [25] encoding of metadata</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text/xml</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>metadata</code></p></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p>The md_standard_uri data value provides an identifier for the metadata structure (schema) specified by its definition authority.
The structure (schema) information could be in whatever encoding is used by the definition authority, e.g. UML, or IDF, or XML/Schema, or RDF/S.</p>
</div>
<div class="paragraph">
<p>See <a href="#gpkg_metadata_sql">[gpkg_metadata_sql]</a>.</p>
</div>
</div>
<div class="sect5">
<h6 id="_table_data_values_10">Table Data Values</h6>
<div class="paragraph">
<p>The <code>md_scope</code> column in the <code>gpkg_metadata</code> table is the name of the applicable scope for the contents of the metadata column for a given row.
The list of valid scope names and their definitions is provided in Table 11 below.
The initial contents of this table were obtained from the ISO 19115 [40], Annex B B.5.25 MD_ScopeCode code list, which was extended [^3] for use in the GeoPackage specification by addition of entries with âNAâ as the scope code column in Table 10.</p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 13. Metadata Scopes</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name (md_scope)</th>
<th class="tableblock halign-left valign-top">Scope Code</th>
<th class="tableblock halign-left valign-top">Definition</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">undefined</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NA</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Metadata information scope is undefined</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">fieldSession</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">012</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Information applies to the field session</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">collectionSession</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">004</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Information applies to the collection session</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">series</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">006</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Information applies to the (dataset) series4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">dataset</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">005</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Information applies to the (geographic feature) dataset</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">featureType</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">010</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Information applies to a feature type (class)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">feature</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">009</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Information applies to a feature (instance)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">attributeType</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">002</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Information applies to the attribute class</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">attribute</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">001</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Information applies to the characteristic of a feature (instance)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">tile</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">016</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Information applies to a tile, a spatial subset of geographic data</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">model</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">015</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Information applies to a copy or imitation of an existing or hypothetical object</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">catalog</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NA</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Metadata applies to a feature catalog [^5]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">schema</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NA</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Metadata applies to an application schema [^6]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">taxonomy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NA</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Metadata applies to a taxonomy or knowledge system [^7]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">software</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">013</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Information applies to a computer program or routine</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">service</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">014</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Information applies to a capability which a service provider entity makes available to a service user entity through a set of interfaces that define a behaviour, such as a use case</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">collectionHardware</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">003</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Information applies to the collection hardware class</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nonGeographicDataset</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">007</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Information applies to non-geographic data</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">dimensionGroup</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">008</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Information applies to a dimension group</p></td>
</tr>
</tbody>
</table>

<div id="_requirement-67" class="quoteblock">
<div class="title">Requirement 67</div>
<blockquote>
Each <code>md_scope</code> column value in a <code>gpkg_metadata</code> table or updateable view SHALL be one of the name column values from 11 in clause 2.4.2.1.2.
</blockquote>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_metadata_reference_table">2.4.3. Metadata Reference Table</h4>
<div class="sect4">
<h5 id="_data_19">Data</h5>
<div class="sect5">
<h6 id="_table_definition_11">Table Definition</h6>
<div id="_requirement-68" class="quoteblock">
<div class="title">Requirement 68</div>
<blockquote>
A GeoPackage file that contains a gpkg_metadata table SHALL contain a gpkg_metadata_reference table per clause 2.4.3.1.1, Table 12 and Table 34.
</blockquote>
</div>
<div class="paragraph">
<p>The second component of GeoPackage metadata is the <code>gpkg_metadata_reference</code> table that links metadata in the <code>gpkg_metadata</code> table to data in the feature, and tiles tables defined in clauses 2.1.6 and 2.2.7.
The <code>gpkg_metadata_reference</code> table is not required to contain any rows.</p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 14. Metadata Reference Table or View Definition</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Column Name</th>
<th class="tableblock halign-left valign-top">Col Type</th>
<th class="tableblock halign-left valign-top">Column Description</th>
<th class="tableblock halign-left valign-top">Null</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Key</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>reference_scope</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Lowercase metadata reference scope; one of âgeopackageâ, âtableâ,âcolumnâ, ârowâ, ârow/colâ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>table_name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the table to which this metadata reference applies, or NULL for reference_scope of âgeopackageâ.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>column_name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the column to which this metadata reference applies; NULL for <code>reference_scope</code> of âgeopackageâ,âtableâ or ârowâ, or the name of a column in the <code>table_name</code> table for <code>reference_scope</code> of âcolumnâ or ârow/colâ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>row_id_value</code>[^8]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NULL for <code>reference_scope</code> of âgeopackageâ, âtableâ or âcolumnâ, or the rowed of a row record in the <code>table_name</code> table for <code>reference_scope</code> of ârowâ or ârow/colâ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>timestamp</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">timestamp value in ISO 8601 format as defined by the strftime function <em>%Y-%m-%dT%H:%M:%fZ</em> format string applied to the current time</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">strftime(<em>%Y-%m-%dT%H:%M:%fZ</em>, CURRENT_TIMESTAMP)</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>md_file_id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>gpkg_metadata</code> table id column value for the metadata to which this <code>gpkg_metadata_reference</code> applies</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">FK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>md_parent_id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>gpkg_metadata</code> table id column value for the hierarchical parent <code>gpkg_metadata</code> for the <code>gpkg_metadata</code> to which this <code>gpkg_metadata_reference</code> applies, or NULL if <code>md_file_id</code> forms the root of a metadata hierarchy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">FK</p></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p>Every row in <code>gpkg_metadata_reference</code> that has null value as <code>md_parent_id</code> forms the root of a metadata hierarchy [^9].</p>
</div>
<div class="paragraph">
<p>See <a href="#table_definition_sql">[table_definition_sql]</a> clause <a href="#gpkg_metadata_reference_sql">[gpkg_metadata_reference_sql]</a>.</p>
</div>
</div>
<div class="sect5">
<h6 id="_table_data_values_11">Table Data Values</h6>
<div id="_requirement-69" class="quoteblock">
<div class="title">Requirement 69</div>
<blockquote>
Every <code>gpkg_metadata_reference</code> table reference scope column value SHALL be one of âgeopackageâ, âtableâ, âcolumnâ, ârowâ, ârow/colâ in lowercase.
</blockquote>
</div>
<div id="_requirement-70" class="quoteblock">
<div class="title">Requirement 70</div>
<blockquote>
Every <code>gpkg_metadata_reference</code> table row with a <code>reference_scope</code> column value of âgeopackageâ SHALL have a <code>table_name</code> column value that is NULL.
Every other <code>gpkg_metadata_reference</code> table row SHALL have a <code>table_name</code> column value that references a value in the <code>gpkg_contents</code> <code>table_name</code> column.
</blockquote>
</div>
<div id="_requirement-71" class="quoteblock">
<div class="title">Requirement 71</div>
<blockquote>
Every <code>gpkg_metadata_reference</code> table row with a <code>reference_scope</code> column value of âgeopackageâ,âtableâ or ârowâ SHALL have a <code>column_name</code> column value that is NULL.
Every other <code>gpkg_metadata_reference</code> table row SHALL have a <code>column_name</code> column value that contains the name of a column in the SQLite table or view identified by the <code>table_name</code> column value.
</blockquote>
</div>
<div id="_requirement-72" class="quoteblock">
<div class="title">Requirement 72</div>
<blockquote>
Every <code>gpkg_metadata_reference</code> table row with a <code>reference_scope</code> column value of âgeopackageâ, âtableâ or âcolumnâ SHALL have a <code>row_id_value</code> column value that is NULL.
Every other <code>gpkg_metadata_reference</code> table row SHALL have a <code>row_id_value</code> column value that contains the ROWID of a row in the SQLite table or view identified by the <code>table_name</code> column value.
</blockquote>
</div>
<div id="_requirement-73" class="quoteblock">
<div class="title">Requirement 73</div>
<blockquote>
Every <code>gpkg_metadata_reference</code> table row timestamp column value SHALL be in ISO 8601 [41]format containing a complete date plus UTC hours, minutes, seconds and a decimal fraction of a second, with a âZâ (âzuluâ) suffix indicating UTC.[^10]
</blockquote>
</div>
<div id="_requirement-74" class="quoteblock">
<div class="title">Requirement 74</div>
<blockquote>
Every <code>gpkg_metadata_reference</code> table row <code>md_file_id</code> column value SHALL be an id column value from the <code>gpkg_metadata</code> table.
</blockquote>
</div>
<div id="_requirement-75" class="quoteblock">
<div class="title">Requirement 75</div>
<blockquote>
Every <code>gpkg_metadata_reference</code> table row <code>md_parent_id</code> column value that is NOT NULL SHALL be an id column value from the <code>gpkg_metadata</code> table that is not equal to the <code>md_file_id</code> column value for that row.
</blockquote>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_other_data_tables">2.5. Other Data Tables</h3>
<div class="paragraph">
<p>Application-specific or vendor-specific data tables that do not conform to the table definitions or other requirements for storing feature data, raster or tile data, or metadata as defined in other sections of this document MAY be defined and used to store supplemental information in a GeoPackage database.
Such other data tables MAY be described by rows in the <code>gpkg_spatial_ref_sys</code>, <code>gpkg_contents</code>, <code>gpkg_extensions</code>, <code>gpkg_data_columns</code>, <code>gpkg_metadata</code> and <code>gpkg_metadata_reference</code> tables. GeoPackage applications MAY ignore such descriptive rows and other data tables they do not recognize. Such other data tables SHALL NOT be described by rows in the <code>gpkg_geometry_columns</code> or <code>gpkg_tile_matrix</code> tables.</p>
</div>
</div>
<div class="sect2">
<h3 id="_extension_mechanism">2.6. Extension Mechanism</h3>
<div class="paragraph">
<p>The GeoPackage extension mechanism is an optional capability that is a required dependency for the optional registered extension capabilities defined in clause 3.</p>
</div>
<div class="sect3">
<h4 id="_extensions">2.6.1. Extensions</h4>
<div class="sect4">
<h5 id="_data_20">Data</h5>
<div class="paragraph">
<p>The optional capabilities defined in sub clauses and requirement statements of this clause MAY be implemented by any GeoPackage file.</p>
</div>
<div class="sect5">
<h6 id="extensions_table_definition">Table Definition</h6>
<div id="_requirement-76" class="quoteblock">
<div class="title">Requirement 76</div>
<blockquote>
A GeoPackage file MAY contain a table or updateable view named gpkg_extensions.
If present this tableÂ SHALL be defined per clause 2.6.1.1.1, Table 13 and Table 23.
</blockquote>
</div>
<div class="paragraph">
<p>The <code>gpkg_extensions</code> table or updateable view in a GeoPackage file registers extension capabilities required to make direct use of its contents.
An application that access a GeoPackage file can query the <code>gpkg_extensions</code> table instead of the contents of all the user data tables to determine if it has the required capabilitiesto read or write to tables with extensions, and to âfail fastâ and return an error message if it does not.</p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 15. GeoPackage Extensions Table or View Definition</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Column Name</th>
<th class="tableblock halign-left valign-top">Col Type</th>
<th class="tableblock halign-left valign-top">Column Description</th>
<th class="tableblock halign-left valign-top">Null</th>
<th class="tableblock halign-left valign-top">Key</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>table_name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the table that requires the extension. When NULL, the extension is required for the entire GeoPackage. SHALL NOT be NULL when the column_name is not NULL.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>column_name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the column that requires the extension. When NULL, the extension is required for the entire table.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>extension_name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The case sensitive name of the extension that is required, in the form \_\.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>scope</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">text</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates scope of extension effects on readers / writers: <em>read-write</em> or <em>write-only</em> in lowercase.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p>See Annex C: Table Definition SQL clause C.3 gpkg_extensions.</p>
</div>
</div>
<div class="sect5">
<h6 id="_table_data_values_12">Table Data Values</h6>
<div id="_requirement-77" class="quoteblock">
<div class="title">Requirement 77</div>
<blockquote>
Values of the <code>gpkg_extensions</code> <code>table_name</code> column SHALL reference values in the <code>gpkg_contents</code> <code>table_name</code> column or be NULL.
They SHALL NOT be NULL for rows where the <code>column_name</code> value is not NULL.
</blockquote>
</div>
<div id="_requirement-78" class="quoteblock">
<div class="title">Requirement 78</div>
<blockquote>
The <code>column_name</code> column value in a <code>gpkg_extensions</code> row SHALL be the name of a column in the table specified by the <code>table_name</code> column value for that row, or be NULL.
</blockquote>
</div>
<div id="_requirement-79" class="quoteblock">
<div class="title">Requirement 79</div>
<blockquote>
Each <code>extension_name</code> column value in a <code>gpkg_extensions</code> row SHALL be a unique case sensitive value of the form \&lt;author\&gt;_\&lt;extension_name\&gt; where \&lt;author\&gt; indicates the person or organization that developed and
maintains the extension. The valid character set for \&lt;author\&gt; SHALL be [a-zA-Z0-9].
The valid character set for \&lt;extension_name\&gt; SHALL be [a-zA-Z0-9_]. An <code>extension_name</code> for the âgpkgâ author name SHALL be one of those listed in <a href="#gpkg_reserved_extensions">Reserved GeoPackage Extensions</a>.
</blockquote>
</div>
<div id="_requirement-80" class="quoteblock">
<div class="title">Requirement 80</div>
<blockquote>
The scope column value in a <code>gpkg_extensions</code> row SHALL be lowercase "read-write" for an extension that affects both readers and writers, or "write-only" for an extension that affects only writers.
</blockquote>
</div>
<div class="paragraph">
<p>The author value âgpkgâ is reserved for GeoPackage extensions that are developed and maintained by OGC.
Requirements for extension names for the âgpkgâ author name are defined in the clauses listed in 14 below.
GeoPackage implementers use their own author names to register other extensions.</p>
</div>
<table id="gpkg_reserved_extensions" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 16. Reserved GeoPackage Extensions</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Extension Name</th>
<th class="tableblock halign-left valign-top">Defined in Clause</th>
<th class="tableblock halign-left valign-top">Scope</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">gpkg_geom_\&lt;gname\&gt;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.1.2.1.2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">read-write</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\&lt;gname\&gt; is the uppercase name of specific extension geometry type from Annex G 47</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">gpkg_zoom_other</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.2.1.1.1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">read-write</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tile matrix set user data table with zoom intervals other than factors of two between adjacent layers</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">gpkg_webp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.2.2.2.1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">read-write</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Raster images in image/webp format</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">gpkg_tiff</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.2.3.1.2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">read-write</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Raster images in image/tiff format</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">gpkg_nitf</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.2.4.1.2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">read-write</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Raster images in application/vnd.NITF</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">gpkg_rtree_index</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.1.3.1.2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">write-only</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Rtree spatial index implemented via SQLite Virtual Table and maintained via triggers that use all minimal runtime SQL functions except ST_SRID.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">gpkg_gtype_trigger</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.1.4.1.2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">write-only</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Trigger to restrict GeoPackage feature table geometry column geometries to geometry types equal to or substitutable for the geometry type specified for the column in the <code>gpkg_geometry_columns</code> table <code>geometry_type_name</code> column.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">gpkg_srs_id_trigger</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.1.5.1.2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">write-only</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Trigger to restrict GeoPackage feature table geometry column geometries to the <code>srs_id</code> specified for the geometry column in the <code>gpkg_geometry_columns</code> table using the ST_SRID SQL function.</p></td>
</tr>
</tbody>
</table>

</div>
</div>
<div class="sect4">
<h5 id="_api_3">API</h5>
<div class="paragraph">
<p>The optional capabilities defined in sub clauses and requirement statements of this clause MAY be implemented by any GeoPackage SQLite Extension.</p>
</div>
<div class="sect5">
<h6 id="_api_geopackage_sqlite_config">API GeoPackage SQLite Config</h6>
<div id="_requirement-81" class="quoteblock">
<div class="title">Requirement 81</div>
<blockquote>
A GeoPackage SQLite Extension MAY provide SQL runtime functions or rtree support for a GeoPackage file.
One that does so SHALL have the SQLite library compile and run time options specified in clause 2.6.1.2.1 Table 15.
</blockquote>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 17. API GeoPackage SQLite Configuration</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Option</th>
<th class="tableblock halign-left valign-top">Shall / Not (Value)</th>
<th class="tableblock halign-left valign-top">Discussion</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">compile</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SQLITE_OMIT_LOAD_EXTENSION</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Not</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The load_extension() function is required to implement the MinimalRuntimeSQLFunctions</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">compile</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SQLITE_OMIT_VIRTUALTABLE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Not</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Virtual tables are required to implement RTrees</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">compile</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SQLITE_ENABLE_RTREE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Shall</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Rtrees are used for GeoPackage Spatial Indexes. See SpatialIndexRequirements</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">compile</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SQLITE_RTREE_INT_ONLY</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Not</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Rtrees with floating point values are used for GeoPackage Spatial Indexes.</p></td>
</tr>
</tbody>
</table>

</div>
<div class="sect5">
<h6 id="_safe_geopackage_sqlite_config">Safe GeoPackage SQLite Config</h6>
<div id="_requirement-82" class="quoteblock">
<div class="title">Requirement 82</div>
<blockquote>
A GeoPackage SQLite Extension MAY provide primary/foreign key and trigger support for a GeoPackage file.
One that does so SHALL have the SQLite library compile and run time options specified in clause 2.6.1.2.2 Table 16.
</blockquote>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 18. Safe GeoPackage SQLite Configuration</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Option</th>
<th class="tableblock halign-left valign-top">Shall / Not (Value)</th>
<th class="tableblock halign-left valign-top">Discussion</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">compile</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SQLITE_DEFAULT_FOREIGN_KEYS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Shall (1)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Foreign key constraints are used to maintain GeoPackage relational integrity.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">compile</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SQLITE_OMIT_FOREIGN_KEY</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Not</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Foreign key constraints are used to maintain GeoPackage relational integrity.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">run</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PRAGMA foreign_keys</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Not (OFF)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Foreign key constraints are used to maintain GeoPackage relational integrity.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">compile</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SQLITE_OMIT_INTEGRITY_CHECK</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Not</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This option omits support for the integrity_check pragma, which does an integrity check of the entire database.
This pragma should be part of GeoPackage conformance validation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">compile</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SQLITE_OMIT_SUBQUERY</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Not</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This option omits support for sub-selects and the IN() operator, both of which are used in GeoPackage triggers.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">compile</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SQLITE_OMIT_TRIGGER</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Not</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defining this option omits support for TRIGGER objects. Neither the CREATE TRIGGER or DROP TRIGGER commands are available in this case, and attempting to execute either will result in a parse error.
This option also disables enforcement of foreign key constraints, since the code that implements triggers and which is omitted by this option is also used to implement foreign key actions. Foreign keys and triggers are used by Safe GeoPackages.
Triggers are used to maintain spatial indexes.</p></td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_registered_extensions">3. Registered Extensions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The optional registered extension capabilities specified in this clause depend on required capabilities specified in
clause 1 and optional capabilities specified in clause 2. Any optional capability in this class that is implemented
SHALL be registered using the Extension Mechanism defined in clause 2.6, as specified by the sub clauses below for
extension name and extension row for the optional capability.</p>
</div>
<div id="_requirement-83" class="quoteblock">
<div class="title">Requirement 83</div>
<blockquote>
A GeoPackage file with any extension described in the following sub clauses SHALL contain a
gpkg_extensions table per clause <a href="#extensions_table_definition">Table Definition</a>.Â  A GeoPackage file without any extension described in
the following sub clauses MAY contain an empty <code>gpkg_extensions</code> table, or MAY NOT contain a <code>gpkg_extensions</code> table.
</blockquote>
</div>
<div id="_requirement-84" class="quoteblock">
<div class="title">Requirement 84</div>
<blockquote>
Any table in a GeoPackage file subject to a registered extension with an <code>author_name</code> other than
âgpkgâ SHALL NOT be described by a <code>gpkg_contents</code> table row with a <code>data_type</code> value of âfeatureâ or âtilesâ.
</blockquote>
</div>
<div class="paragraph">
<p>Such tables do not count[^1] in the determination of GeoPackage file validity per clause 2 Req 13: but otherwise MAY
differ from âfeaturesâ and âtilesâ tables only with respect to non-gpkg registered extensions that enable implementers
to meet requirements not addressed in the current version of this specification, and MAY be included in a valid
GeoPackage.</p>
</div>
<div class="sect2">
<h3 id="_features_2">3.1. Features</h3>
<div class="sect3">
<h4 id="_geometry_types_2">3.1.1. Geometry Types</h4>
<div class="sect4">
<h5 id="_data_21">Data</h5>
<div class="paragraph">
<p>The optional extension capabilities defined in sub clauses and requirement statements of this clause MAY be implemented
by any GeoPackage file that implements the requirements of clause 2.1 and clause 2.6.1.1 on which they depend, as
specified in <a href="#abstract_test_suite">[abstract_test_suite]</a>.</p>
</div>
<div class="sect5">
<h6 id="_extension_types">Extension Types</h6>
<div id="_requirement-85" class="quoteblock">
<div class="title">Requirement 85</div>
<blockquote>
A GeoPackage file MAY store feature table geometries with the extended non-linear geometry types
(CircularString, CompoundCurve, CurvePolygon, MultiCurve, MultiSurface, Curve, Surface) in <a href="#geometry_types">[geometry_types]</a>. If it does so, they
SHALL be encoded in the GeoPackageBinary geometry format.
</blockquote>
</div>
</div>
<div class="sect5">
<h6 id="_extensions_types_extensions_name">Extensions Types - Extensions Name</h6>
<div id="_requirement-86" class="quoteblock">
<div class="title">Requirement 86</div>
<blockquote>
An extension name to specify a feature geometry extension type SHALL be defined for the âgpkgâ author name using the âgpkg_geom_\&lt;gname\&gt;â template where \&lt;gname\&gt; is the uppercase name of the extension geometry type from <a href="#geometry_types">[geometry_types]</a> used in a GeoPackage file.
</blockquote>
</div>
</div>
<div class="sect5">
<h6 id="_extensions_types_extensions_row">Extensions Types - Extensions Row</h6>
<div id="_requirement-87" class="quoteblock">
<div class="title">Requirement 87</div>
<blockquote>
A GeoPackage file that contains a <code>gpkg_geometry_columns</code> table or updateable view with row records
that specify extension <code>geometry_type_name</code> column values SHALL contain a <code>gpkg_extensions</code> table that contains row records with
<code>table_name</code> and <code>column_name</code> values from the <code>gpkg_geometry_columns</code> row records that identify extension type uses, and
<code>extension_name</code> column values for each of those geometry types constructed per clause 3.1.2.1.2.
</blockquote>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_spatial_indexes">3.1.2. Spatial Indexes</h4>
<div class="sect4">
<h5 id="_data_22">Data</h5>
<div class="paragraph">
<p>The optional registered extension capabilities defined in sub clauses and requirement statements of this clause MAY be
implemented by any GeoPackage file that implements requirements of clause 2.1 and clause 2.6 on which they depend.</p>
</div>
<div class="sect5">
<h6 id="_spatial_indexes_implementation">Spatial Indexes Implementation</h6>
<div class="paragraph">
<p>Spatial indexes provide a significant performance advantage for searches with basic envelope spatial criteria that
return subsets of the rows in a feature table with a non-trivial number (thousands or more) of rows.[^2]</p>
</div>
<div class="paragraph">
<p>Spatial indexes are an optional GeoPackage extension with the following runtime requirements</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The SQLite RTree extension SHALL be available and loaded per clause</p>
</li>
<li>
<p>SQLite trigger support SHALL be present per clause 2.6.1.2.2.<br></p>
</li>
<li>
<p>The ST_MinX, ST_MaxX, ST_MinY, ST_MaxY SQL functions specified in <a href="#minimal_runtime_sql_functions">[minimal_runtime_sql_functions]</a> SHALL be available.</p>
</li>
</ul>
</div>
<div id="_requirement-88" class="quoteblock">
<div class="title">Requirement 88</div>
<blockquote>
A GeoPackage file SHALL implement spatial indexes on feature table geometry columns as specified in clause
<a href="#_spatial_indexes_implementation">Spatial Indexes Implementation</a> using the SQLite Virtual Table RTrees and triggers specified in <a href="#spatial_index_sql">[spatial_index_sql]</a>.
</blockquote>
</div>
</div>
<div class="sect5">
<h6 id="_spatial_indexes_extensions_name">Spatial Indexes - Extensions Name</h6>
<div id="_requirement-89" class="quoteblock">
<div class="title">Requirement 89</div>
<blockquote>
The âgpkg_rtree_indexâ extension name SHALL be used as a <code>gpkg_extensions</code> table extension name
column value to specify implementation of spatial indexes on a geometry column.
</blockquote>
</div>
</div>
<div class="sect5">
<h6 id="_spatial_indexes_extensions_row">Spatial Indexes - Extensions Row</h6>
<div id="_requirement-90" class="quoteblock">
<div class="title">Requirement 90</div>
<blockquote>
A GeoPackage file that implements spatial indexes SHALL have a <code>gpkg_extensions</code> table that contains
a row for each spatially indexed column with <code>extension_name</code> âgpkg_rtree_indexâ, the <code>table_name</code> of the table with a
spatially indexed column, and the <code>column_name</code> of the spatially indexed column.
</blockquote>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_geometry_type_triggers">3.1.3. Geometry Type Triggers</h4>
<div class="sect4">
<h5 id="_data_23">Data</h5>
<div class="paragraph">
<p>The optional extension capabilities defined in sub clauses and requirement statements of this clause MAY be implemented
by any GeoPackage file that implements requirements of clause 2.1 and clause 2.6 on which they depend.</p>
</div>
<div class="sect5">
<h6 id="_geometry_type_triggers_implementation">Geometry Type Triggers â Implementation</h6>
<div id="_requirement-91" class="quoteblock">
<div class="title">Requirement 91</div>
<blockquote>
A GeoPackage file SHALL include the SQL insert and update triggers specified in clause 3.1.4.1.1
and 17 on every feature table geometry column to enforce the geometry type values specified for those columns in the
<code>gpkg_geometry_columns</code> table.
</blockquote>
</div>
<div class="listingblock">
<div class="title">Geometry Type Trigger Definition SQL Template</div>
<div class="content">
<pre>CREATE TRIGGER fgti_&lt;t&gt;_&lt;c&gt; BEFORE INSERT ON '&lt;t&gt;'
FOR EACH ROW
BEGIN
  SELECT RAISE (ABORT, 'insert on &lt;t&gt; violates constraint: ST_GeometryType(&lt;c&gt;) is not assignable from gpkg_geometry_columns.geometry_type_name value')
  WHERE (SELECT geometry_type_name FROM gpkg_geometry_columns
         WHERE Lower(table_name) = Lower('&lt;t&gt;')
          AND   Lower(column_name) = Lower('&lt;c&gt;')
          AND   gpkg_IsAssignable(geometry_type_name,
                                  ST_GeometryType(NEW.&lt;c&gt;)) = 0;

END

CREATE TRIGGER fgtu_&lt;t&gt;_&lt;c&gt; BEFORE UPDATE OF '&lt;c&gt;' ON '&lt;t&gt;'
FOR EACH ROW
BEGIN
SELECT RAISE (ABORT,
'update of &lt;c&gt; on &lt;t&gt; violates constraint: ST_GeometryType(&lt;c&gt;) is not assignable from gpkg_geometry_columns.geometry_type_name value')
WHERE (SELECT geometry_type_name FROM gpkg_geometry_columns
       WHERE Lower(table_name) = Lower('&lt;t&gt;')
        AND   Lower(column_name) = Lower('&lt;c&gt;')
        AND   gpkg_IsAssignable(geometry_type_name,
                                ST_GeometryType(NEW.&lt;c&gt;)) = 0;
END
------------------------------------------------------------------------------------------------------------------------

where and are replaced with the names of the feature table and geometry column being inserted or updated. The triggers
to enforce `gpkg_geometry_columns` `geometry_type_name` constraints on feature table geometries use Minimal Runtime SQL
Functions specified in &lt;&lt;minimal_runtime_sql_functions&gt;&gt;.

====== Geometry Type Triggers â Extensions Name

[requirement]
The âgpkg_geometry_type_triggerâ extension name SHALL be used as a `gpkg_extensions` table
extension name column value to specify implementation of geometry type triggers.

====== Geometry Type Triggers â Extensions Row

[requirement]
A GeoPackage file that implements geometry type triggers on feature table geometry columns SHALL
contain a `gpkg_extensions` table that contains a row for each such geometry column with `extension_name`
âgpkg_geometry_type_triggerâ, `table_name` of the feature table with a geometry column, and `column_name` of the
geometry column.

==== SRS_ID Triggers

===== Data

The optional extension capabilities defined in sub clauses and requirement statements of this clause MAY be implemented
by any GeoPackage file that implements requirements of clause 2.1 and clause 2.6 on which they depend.

====== SRS_ID Triggers â Implementation

[requirement]
A GeoPackage file SHALL include the SQL insert and update triggers specified in clause 3.1.5.1.1 and 18 on
every feature table geometry column to enforce the `srs_id` values specified for those columns in the
`gpkg_geometry_columns` table.

.Table SRS_ID Trigger Definition SQL Templates
------------------------------------------------------------------------------------------------------------------------
code,SQL
CREATE TRIGGER fgsi_&lt;t&gt; _&lt;c&gt; BEFORE INSERT ON '&lt;t&gt;'
FOR EACH ROW
BEGIN
  SELECT RAISE (ABORT, 'insert on &lt;t&gt;violates constraint: ST_SRID(&lt;c&gt;) does not match gpkg_geometry_columns.srs_id value')
  WHERE (SELECT srs_id FROM gpkg_geometry_columns
       WHERE Lower(table_name) = Lower('&lt;t&gt;')
       AND   Lower(column_name) = Lower('&lt;c&gt;')
       AND   ST_SRID(NEW.'&lt;c&gt;') &lt;&gt; srs_id) ;
END

CREATE TRIGGER fgsu_&lt;t&gt;_&lt;c&gt; BEFORE UPDATE OF '&lt;c&gt;' ON '&lt;t&gt;'
FOR EACH ROW
BEGIN
SELECT RAISE (ABORT,
'update of &lt;c&gt; on &lt;t&gt; violates constraint: ST_SRID(&lt;c&gt;) does not match gpkg_geometry_columns.srs_id value')
WHERE (SELECT srs_id FROM gpkg_geometry_columns
       WHERE Lower(table_name) = Lower('&lt;t&gt;')
       AND   Lower(column_name) = Lower('&lt;c&gt;')
       AND   ST_SRID(NEW.'&lt;c&gt;') &lt;&gt; srs_id);
END
------------------------------------------------------------------------------------------------------------------------

where \&lt;t\&gt; and \&lt;c\&gt; are replaced with the names of the feature table and geometry column being inserted or updated.

The triggers to enforce `gpkg_geometry_columns` `srs_id` constraints on feature table geometries use Minimal Runtime SQL
Functions specified in [minimal_runtime_sql_functions].

====== SRS_ID Triggers â Extensions Name

[requirement]
The âgpkg_srs_id_triggerâ extension name SHALL be used as a `gpkg_extensions` table extension name
column value to specify implementation of `srs_id` triggers.

====== SRS_ID Triggers â Extensions Row

[requirement]
A GeoPackage file that implements `srs_id` triggers on feature table geometry columns SHALL contain
a `gpkg_extensions` table that contains a row for each geometry column with `extension_name` âgpkg_srs_id_triggerâ,
`table_name` of the feature table with a geometry column, and `column_name` of the geometry column.

=== Tiles

==== Zoom Levels

===== Data

The optional extension capabilities defined in sub clauses and requirement statements of this clause MAY be implemented
by any GeoPackage file that implements the requirements of clause 2.2 and clause 2.6.1.1 on which they depend.

====== Zoom Other Intervals

As a registered extension, a GeoPackage file MAY contain tile matrix set user data tables with pixel sizes that vary by
irregular intervals or by regular intervals other than a factor of two (the default) between adjacent zoom levels, as
described in the `gpkg_tile_matrix` table.

====== Zoom Other â Extensions Name

[requirement]
The âgpkg_zoom_otherâ extension name SHALL be used as a `gpkg_extensions` table extension name
column value to specify implementation of other zoom intervals on a tile matrix set user data table.

====== Zoom Other â Extensions Row

[requirement]
A GeoPackage file that implements other zoom intervals SHALL have a `gpkg_extensions` table that
contains a row for each tile matrix set user data table with other zoom intervals with `extension_name`
âgpkg_zoom_otherâ, the `table_name` of the table with other zoom intervals, and the âtile_dataâ `column_name`.

[[ext_webp_tiles]]
==== Tile Encoding WEBP

===== Data

The optional extension capabilities defined in sub clauses and requirement statements of this clause MAY be implemented
by any GeoPackage file that implements the requirements of clause 2.2 and clause 2.6.1.1 on which they depend.

===== WEBP MIME Type

As a registered extension, a GeoPackage file that contains a tile matrix user data table that contains tile data MAY
store `tile_data` in MIME type image/x-webp[26].

====== WEBP -- Extensions Name

[requirement]
The âgpkg_webpâ extension name SHALL be used as a `gpkg_extensions` table extension name
column value to specify storage of raster images in WEBP format.

====== WEBP -- Extensions Row

[requirement]
A GeoPackage file that contains tile matrix user data tables with `tile_data` columns that contain
raster images in WEBP format SHALL contain a `gpkg_extensions` table that contains row records with `table_name` values
for each such table, âtile_dataâ `column_name` values and `extension_name` column values of âgpkg_webpâ.

[[ext_tiff_tiles]]
==== Tiles Encoding TIFF

===== Data

The optional extension capabilities defined in sub clauses and requirement statements of this clause MAY be implemented
by any GeoPackage file that implements the requirements of clause 2.2 and clause 2.6.1.1 on which they depend.

====== TIFF MIME Type

As a registered extension, a GeoPackage file that contains a tile matrix user data table that contains tile data MAY
store tile_data in MIME type image/tiff [27] for GeoTIFF images [28][29] that meet the requirements of the NGA
Implementation Profile [31] for coordinate transformation case 3 where the position and scale of the data is known
exactly, and no rotation of the image is required.

====== TIFF -- Extensions Name

[requirement]
The âgpkg_tiffâ extension name SHALL be used as a `gpkg_extensions` table extension name
column value to specify storage of raster images in TIFF format.

====== Extensions Row

[requirement]
A GeoPackage file that contains tile matrix user data tables with `tile_data` columns that contain
raster images in TIFF format per SHALL contain a `gpkg_extensions` table that contains row records with `table_name`
values for each such table, âtile_dataâ `column_name` values and `extension_name` column values of âgpkg_tiffâ.

[[ext_nitf_tiles]]
==== Tile Encoding NITF

===== Data

The optional extension capabilities defined in sub clauses and requirement statements of this clause MAY be implemented
by any GeoPackage file that implements the requirements of clause 2.2 and clause 2.6.1.1 on which they depend.

====== NITF MIME Type

As a registered extension, a GeoPackage file that contains a tile matrix user data table that contains tile data MAY
store `tile_data` in MIME type application/vnd.NITF[46] for National Imagery Transmission Format images.

====== NITF -- Extensions Name

[requirement]
The âgpkg_nitfâ extension name SHALL be used as a `gpkg_extensions` table extension name column
value to specify storage of raster images in NITF format.

====== NITF -- Extensions Row

[requirement]
A GeoPackage file that contains tile matrix user data tables with `tile_data` columns that contain
raster images in NITF format SHALL contain a `gpkg_extensions` table that contains row records with `table_name` values
for each such table, âtile_dataâ `column_name` values and `extension_name` column values of âgpkg_nitfâ.

[[ext_other_tiles]]
==== Tile Encoding Other

===== Data

The optional extension capabilities defined in sub clauses and requirement statements of this clause MAY be implemented
by any GeoPackage file that implements the requirements of clause 2.2 and clause 2.6.1.1 on which they depend.

====== Other MIME Type

As a registered extension, a GeoPackage file that contains a tile matrix user data table that contains tile data MAY
store `tile_data` in other MIME types. However, a table with such data is not considered to be a âtilesâ table for
purposes of determining GeoPackage file validity.

====== Other Extensions Name

[requirement]
An extension name in the form \&lt;authorname\&gt;_\&lt;other\&gt;_mime_type SHALL be defined for an author
name other than âgpkgâ for each other MIME image format used for `tile_data` columns in tile matrix set user data
tables, where is replaced by the other MIME type abbreviation in uppercase

====== Other Extensions Row

[requirement]
A GeoPackage file that contains tile matrix user data tables with `tile_data` columns that contain
raster images in a MIME type format other than those defined in this specification SHALL contain a `gpkg_extensions`
table that contains row records with `table_name` values for each such table, âtile_dataâ `column_name` values and
`extension_name` column values of the other format extension name defined per clause 3.2.5.1.2.

=== Any Tables

==== Other Geometry Encoding

===== Data

The optional registered extension capabilities defined in sub clauses and requirement statements of this clause MAY be
implemented by any GeoPackage file that implements the requirements of clause 2.6.1.1 on which they depend.

====== BLOB Format

As a registered extension, a GeoPackage file CAN store geometries in other data tables specified in clause 2.5 using
BLOB formats other than the GeoPackageBinary format specified in clause 2.1.3.1.1. However, other data tables with
geometry column data encoded in such extension formats are not considered to be GeoPackage feature tables for purposes
of determining GeoPackage file validity.

====== BLOB format - Extensions Name

[requirement]
An extension name in the form \&lt;author_name\&gt;_geometry encoding SHALL be defined for an author name
other than âgpkgâ for each geometry BLOB format other than GeoPackageBinary used in a GeoPackage file.

====== BLOB format - Extensions Row

[requirement]
A GeoPackage file that contains other data tables with geometry column BLOB values encoded in an
extension format SHALL contain a gpkg_extensions table that contains row records with table_name and column_name values
that identify extension format uses, and with extension_name column values constructed per clause 3.3.1.

==== Other Trigger

===== Data

The optional extension capabilities defined in sub clauses and requirement statements of this clause MAY be implemented
by any GeoPackage file that implements requirements of clause 2.1 and/or 2.2 and clause 2.6 on which they depend.

====== Other Trigger Implementation

As a registered extension, GeoPackage files MAY contain other triggers that require support from GeoPackage SQLite
Extension functions other than those provided by SQLite or the GeoPackage Minimal Runtime SQL Functions to enforce data
integrity or application business rule constraints. [^3]

====== Other Trigger â Extensions Name

[requirement]
An extension name in the form for an author name other than âgpkgâ SHALL be defined as a
`gpkg_extensions` table extension name column value to specify triggers in a GeoPackage file that use SQL functions
other than those provided by SQLite or the GeoPackage Minimal Runtime SQL Functions.

====== Other Trigger â Extensions Row

[requirement]
A GeoPackage file that implements triggers that use SQL functions other than those provided by
SQLite or the GeoPackage Minimal Runtime SQL Functions SHALL have a `gpkg_extensions` table that contains row records
with `table_name` values for each such table, `column_name` values for each such column and `extension_name` column
values of the other trigger extension name defined per clause 3.3.1.1.2.

[[abstract_test_suite]]
[appendix]
== Conformance / Abstract Test Suite (Normative)

*WARNING: This section is not up to date. Please refer to the PDF or Word version of the specification.*

=== Base

==== Core

===== SQLite Container

====== Data

*File Format*

**Test Case ID**: /base/core/container/data/file\_format

*Test Purpose*: Verify that the Geopackage file is an SQLite version\_3 database

*Test Method*: Pass if the first 16 bytes of the file contain "SQLite format 3" in ASCII.

*Reference*: Clause 1.1.1.1.1 Req 1:

*Test Type*: Basic

*File Extension Name*

**Test Case ID**: /base/core/container/data/file\_extension\_name

*Test Purpose*: Verify that the geopackage file extension is ".gpkg"

*Test Method*: Pass if the geopackage file extension is ".gpkg"

*Reference*: Clause 1.1.1.1.2 Req 2:

*Test Type*: Basic

*Integrity Check*

**Test Case ID**: /base/core/container/data/file\_integrity

*Test Purpose*: Verify that the geopackage file passes the SQLite integrity check.

*Test Method*: Pass if PRAGMA integrity\_check returns "ok"

*Reference*: Clause 1.1.1.1.3 Req 3:

*Test Type*: Capability

====== API

*Structured Query Language*

**Test Case ID**: /base/core/container/api/sql

*Test Purpose*: Test that the GeoPackage SQLite Extension provides the SQLite SQL API
 interface.

*Test Method*:

1. SELECT * FROM sqlite\_master
2. Fail if returns an SQL error.
3. Pass otherwise

*Reference*:     Clause 1.1.1.2.1 Req 4:

*Test Type*:     Capability

*Every GPKG SQLite Configuration*

**Test Case ID**: /base/core/container/api/every\_gpkg\_sqlite\_config

*Test Purpose*: Verify that a GeoPackage SQLite Extension has the Every GeoPackage
 SQLite Configuration compile and run time options.

*Test Method*:

1. SELECT sqlite\_compileoption\_used('SQLITE\_OMIT\_AUTOINCREMENT')
2.    Fail if returns 1
3.    SELECT sqlite\_compileoption\_used('SQLITE\_OMIT\_DATETIME\_FUNCS')
4.    Fail if returns 1
5.    SELECT sqlite\_compileoption\_used('SQLITE\_OMIT\_ DEPRECATED ')
6.    Fail if returns 0
7.    SELECT sqlite\_compileoption\_used('SQLITE\_OMIT\_ FLOATING\_POINT ')
8.    Fail if returns 1
9.    SELECT sqlite\_compileoption\_used('SQLITE\_OMIT\_PRAGMA')
10.   Fail if returns 1
11.   SELECT sqlite\_compileoption\_used('SQLITE\_OMIT\_FLAG\_PRAGMAS')
12.   Fail if returns 1
13.   SELECT sqlite\_compileoption\_used('SQLITE\_OMIT\_VIEW')
14.   Fail if returns 1
15.   Pass otherwise

*Reference*:     Clause 1.1.1.2.2 Req 5:

*Test Type*:     Basic

===== Spatial Reference Systems

====== Data

*Table Definition*


**Test Case ID**: /base/core/spatial\_ref\_sys/data/table\_def

*Test Purpose*: Verify that the gpkg_spatial\_ref\_sys table exists and has the correct definition.

*Test Method*:

1. SELECT sql FROM sqlite\_master WHERE type = 'table' AND tbl\_name = 'gpkg\_spatial\_ref\_sys'
2. Fail if returns an empty result set
3. Pass if column names and column definitions in the returned CREATE TABLE
    statement in the sql column value, including data type, nullability, and
    primary key constraints match all of those in the contents of C.1
    Table 19. Column order, check constraint and trigger definitions, and other column
    definitions in the returned sql are irrelevant.
4. Fail otherwise.

*Reference*:     Clause 1.1.2.1.1 Req 6:

*Test Type*:     Basic

*Table Data Values*


**Test Case ID**: /base/core/spatial\_ref\_sys/data\_values\_default

*Test Purpose*: Verify that the spatial\_ref\_sys table contains the required default contents.

*Test Method*:

1. SELECT srid, auth\_name, auth\_srid, srtext FROM spatial\_ref\_sys WHERE srid = -1
    returns -1 "NONE" -1 "Undefined", AND
2. SELECT srid, auth\_name, auth\_srid, srtext FROM spatial\_ref\_sys WHERE srid = 0
    returns 0 "NONE" 0 "Undefined", AND
3. SELECT srid, auth\_name, auth\_srid, srtext FROM spatial\_ref\_sys WHERE srid =
    4326 returns 4326 epsg 4326 GEOGCS["WGS 84", DATUM["WGS\_1984",
  SPHEROID["WGS 84",6378137,298.257223563, AUTHORITY["EPSG","7030"]],
  AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","
  8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]],
  AUTHORITY["EPSG","4326"]] (whitespace irrelevant)
4. Pass if tests 1-3 are met
5. Fail otherwise

*Reference*:     Clause 1.1.2.1.2 Req 7:

*Test Type*:     Capability


**Test Case ID**: /base/core/spatial\_ref\_sys/data\_values\_required

*Test Purpose*: Verify that the spatial\_ref\_sys table contains rows to define all srs\_id values
 used by features and tiles in a GeoPackage.

*Test Method*:

1. SELECT DISTINCT gc.srs\_id AS gc\_srid, srs.srs\_name, srs.srs\_id, srs.organization,
  srs.organization\_coordsys\_id, srs.definition FROM gpkg\_contents AS gc LEFT
  OUTER JOIN gpkg\_spatial\_ref\_sys AS srs ON srs.srs\_id = gc.srs\_id
2. Pass if no returned srs values are NULL.
3. Fail otherwise

*Reference*:     Clause Clause 1.1.2.1.2 Req 7:

===== Test Type: CapabilityContents

======   Data

*Table Definition*


**Test Case ID**: /base/core/contents/data/table\_def

*Test Purpose*: Verify that the gpkg\_contents table exists and has the correct definition.

*Test Method*:

1. SELECT sql FROM sqlite\_master WHERE type = 'table' AND tbl\_name = 'gpkg\_contents'
2. Fail if returns an empty result set.
3. Pass if the column names and column definitions in the returned CREATE TABLE
  statement, including data type, nullability, default values and primary, foreign and
  unique key constraints match all of those in the contents of C.2 Table 20. Column
  order, check constraint and trigger definitions, and other column definitions in the
  returned sql are irrelevant.
4. Fail Otherwise

*Reference*:     Clause 1.1.3.1.1 Req 9:

*Test Type*:     Basic

*Table Data Values*

**Test Case ID**: /base/core/contents/data/data\_values\_table\_name

*Test Purpose*: Verify that the table\_name column values in the gpkg\_contents table are
 valid.

*Test Method*:

1. SELECT DISTINCT gc.table\_name AS gc\_table, sm.tbl\_name
FROM gpkg\_contents AS ge LEFT OUTER JOIN sqlite\_master AS sm ON
gc.table\_name = sm.tbl\_name
2. Not testable if returns an empty result set.
3. Fail if any gpkg\_contents.table\_name value is NULL
4. Pass otherwise.

*Reference*:    Clause 1.1.3.1.2 Req 10:

*Test Type*:    Capability



**Test Case ID**: /base/core/contents/data/data\_values\_last\_change

*Test Purpose*: Verify that the gpkg\_contents table last\_change column values are in ISO
 8601 [41]format containing a complete date plus UTC hours, minutes, seconds and a
 decimal fraction of a second, with a 'Z' ('zulu') suffix indicating UTC.

*Test Method*:

1. SELECT last\_change from gpkg\_contents.
2. Not testable if returns an empty result set.
3. For each row from step 1
  - Fail if format of returned value does not match yyyy-mm-ddThh:mm:ss.hhhZ
  - Log pass otherwise
4. Pass if logged pass and no fails.

*Reference*:    Clause 1.1.3.1.2 Req 11:

*Test Type*:    Capability



**Test Case ID**: /base/core/contents/data/data\_values\_srs\_id

*Test Purpose*: Verify that the gpkg\_contents table srs\_id column values are defined in the
 gpkg\_spatial\_ref\_sys table.

*Test Method*:

1. SELECT srs\_id FROM gpkg\_contents
2. Not testable if returns an empty result set
3. SELECT srs\_id FROM gpkg\_contents WHERE srs\_id NOT IN (SELECT srs\_id
  FROM gpkg\_spatial\_ref\_sys)
4. Fail if does not return an empty result set
5. SELECT srs\_id FROM gpkg\_contents gc WHERE data\_type = 'features' AND srs\_id
  NOT IN (SELECT srs\_id FROM gpkg\_geometry\_columns WHERE table\_name =
  gc.table\_name)
6. Fail if does not return an empty result set
7. Pass otherwise

*Reference*:    Clause Clause 1.1.3.1.2 Req 12:

*Test Type*:    Capability


=== Options


**Test Case ID**: /opt/valid\_geopackage

*Test Purpose*: Verify that a GeoPackage contains a features or tiles table and gpkg\_contents
 table row describing it.

*Test Method*:

1.   Execute test /opt/features/contents/data/features\_row
2.   Pass if test passed
3.   Execute test /opt/tiles/contents/data/tiles\_row
4.   Pass if test passed
5.   Fail otherwise

*Reference*:     Clause 2 Req 13:

*Test Type*:     Capability

==== Features

===== Contents

======   Data

*Contents Table Feature Row*


**Test Case ID**: /opt/features/contents/data/features\_row

*Test Purpose*: Verify that the gpkg\_contents table\_name value table exists, and is
 apparently a feature table for every row with a data\_type column value of "features"

*Test Method*:

1. Execute test /opt/features/vector_features/data/feature_table_integer_primary_key

*Reference*:     Clause 2.1.2.1.1 Req 14:

*Test Type*:     Capability

===== Geometry Encoding

======   Data

*BLOB Format*


**Test Case ID**: /opt/features/geometry\_encoding/data/blob

*Test Purpose*: Verify that geometries stored in feature table geometry columns are encoded
 in the GeoPackageBinary format.

*Test Method*:

1. SELECT table\_name AS tn, column\_name AS cn FROM gpkg\_geometry\_columns
  WHERE table\_name IN (SELECT table\_name FROM gpkg\_contents WHERE
  data\_type = 'features')
2. Not testable if returns an empty result set
3. For each row from step 1
  * SELECT cn FROM tn
  * Not testable if none found
  * For each cn value from step a
      -  Fail if the first three bytes of each gc are not "GPB"
      -  Fail if gc.version\_number is not 0
      -  Fail if ST\_IsEmpty(cn value) = 1 and gc.flags.envelope != 0 and envelope values are not NaN
4. Pass if no fails

*Reference*:    Clause 2.1.3.1.1 Req 15:

*Test Type*:    Capability

======   API

*Minimal Runtime SQL Functions*


**Test Case ID**: /opt/features/geometry\_encoding/sql\_func

*Test Purpose*: Verify that a GeoPackage SQLite Extension provides the GeoPackage
 Minimal Runtime SQL functions.

*Test Method*:

1. Open Geometry Test Data Set GeoPackage with GeoPackage SQLite Extension
2. For each Geometry Test Data Set &amp;lt;gtype\_test&amp;gt; data table row for each assignable
      (gtype, atype) and non-assignable (ntype, atype) combination of geometry type in
      Annex G, for an assortment of srs\_ids, for an assortment of coordinate values,
      without and with z and / or m values, in both big and little endian encodings:
      - SELECT 'Fail' FROM &amp;lt;gtype\_test&amp;gt; WHERE ST\_SRID(geom) != srs\_id
      - SELECT 'Fail' FROM &amp;lt;gtype\_test&amp;gt; WHERE ST\_GeometryType(geom) !=
          atype
      - SELECT 'Fail' FROM &amp;lt;gtype\_test&amp;gt; WHERE GPKG\_IsAssignable(gtype,
          atype) = 0
      - SELECT 'Fail' FROM &amp;lt;gtype\_test&amp;gt; WHERE GPKG\_IsAssignable(ntype,
          atype) = 1
      - SELECT 'Fail' FROM &amp;lt;gtype\_test&amp;gt; WHERE ST\_Is3D(geom) != is3d
      - SELECT 'Fail' FROM &amp;lt;gtype\_test&amp;gt; WHERE ST\_IsMeasured(geom) != ism
      - SELECT 'Fail' FROM &amp;lt;gtype\_test&amp;gt; WHERE ST\_MinX(geom) != minx
      - SELECT 'Fail' FROM &amp;lt;gtype\_test&amp;gt; WHERE ST\_MaxX(geom) != maxx
      - SELECT 'Fail' FROM &amp;lt;gtype\_test&amp;gt; WHERE ST\_MinY(geom) != miny
      - SELECT 'Fail' FROM &amp;lt;gtype\_test&amp;gt; WHERE ST\_MaxY(geom) != maxy
      - SELECT 'Fail' FROM &amp;lt;gtype\_test&amp;gt; WHERE ST\_MinZ(geom) != minz
      - SELECT 'Fail' FROM &amp;lt;gtype\_test&amp;gt; WHERE ST\_MaxZ(geom) != maxz
      - SELECT 'Fail' FROM &amp;lt;gtype\_test&amp;gt; WHERE ST\_MinM(geom) != minm
      - SELECT 'Fail' FROM &amp;lt;gtype\_test&amp;gt; WHERE ST\_MaxM(geom) != maxm
3. Pass if no 'Fail' selected from step 2

*Reference*:    Clause 2.1.3.2.1 Req 16:

*Test Type*:    Capability

===== Geometry Types

======  Data

*Core Types*

**Test Case ID**: /opt/features/geometry\_encoding/data/core\_types\_existing\_sparse\_data

*Test Purpose*: Verify that existing basic simple feature geometries are stored in valid GeoPackageBinary format encodings.

*Test Method*:

1. SELECT table\_name FROM gpkg\_geometry\_columns
2. Not testable if returns an empty result set
3. SELECT table\_name AS tn, column\_name AS cn FROM gpkg\_geometry\_columns
    WHERE table\_name IN (SELECT table\_name FROM gpkg\_contents WHERE
    data\_type = 'features'),
4. Fail if returns an empty result set
5. For each row from step 3
     - SELECT cn FROM tn;
     - For each row from step a, if bytes 2-5 of cn.wkb as uint32 in endianness of
            gc.wkb byte 1of cn from #1 are a geometry type value from Annex G Table 46,
            then
         +     Log cn.header values, wkb endianness and geometry type
         +     If cn.wkb is not correctly encoded per ISO 13249-3 clause 5.1.46 then log
                fail
         +      If cn.flags.E is 1 - 4 and some cn.wkbx is outside of cn.envelope.minx,maxx
                then log fail
         +      If cn.flags.E is 1 - 4 and some gc.wkby is outside of cn.envelope.miny,maxy
                then log fail
         +      If cn.flags.E is 2,4 and some gc.wkb.z is outside of cnenvelope.minz,maxz
                then log fail
         +      If cn.flags.E is 3,4 and some gc.wkb.m is outside of cn.envelope.minm,maxm
                then log fail
         +      If cn.flags.E is 5-7 then log fail
         +      Otherwise log pass

6. Pass if log contanins pass and no fails

*Reference*:     Clause 2.1.4.1.1 Req 17:

*Test Type*:     Capability


**Test Case ID**: /opt/features/geometry\_encoding/data/core\_types\_all\_types\_test\_data

*Test Purpose*: Verify that all basic simple feature geometry types and options are stored in valid GeoPackageBinary format encodings.

*Test Method*:

1. Open GeoPackage that has feature geometry values of geometry type in Annex G, for
  an assortment of srs\_ids, for an assortment of coordinate values, without and with z
  and / or m values, in both big and little endian encodings:
2. /opt/features/geometry\_encoding/data/core\_types\_existing\_sparse\_data
3. Pass if log contains pass record for big and little endian GPB headers containing big
  and little endian WKBs for 0-1 envelope contents indicator codes for every geometry
  type value from Annex G Table 46 without and with z and/or m values.
4. Fail otherwise

*Reference*:     Clause 2.1.4.1.1 Req 17:

*Test Type*:     Capability

===== Geometry Columns

====== Data

*Table Definition*


**Test Case ID**: /opt/features/geometry\_columns/data/table\_def

*Test Purpose*: Verify that the gpkg\_geometry\_columns table exists and has the correct
 definition.

*Test Method*:

1. SELECT sql FROM sqlite\_master WHERE type = 'table' AND tbl\_name =
    'gpkg\_geometry\_columns'
2. Fail if returns an empty result set.
3. Pass if the column names and column definitions in the returned Create TABLE
    statement in the sql column value, including data type, nullability, default values and
    primary, foreign and unique key constraints match all of those in the contents of C.4
    Table 22. Column order, check constraint and trigger definitions, and other column
    definitions in the returned sql are irrelevant.
4. Fail otherwise.

*Reference*:     Clause 2.1.5.1.1 Req 18:

*Test Type*:     Basic

*Table Data Values*


**Test Case ID**: /opt/features/geometry\_columns/data/data\_values\_table\_name

*Test Purpose*: Verify that the table\_name column values in the gpkg\_geometry\_columns
 table are valid.

*Test Method*:

1. SELECT DISTINCT table\_name FROM gpkg\_geometry\_columns
2. Not testable if returns an empty result set.
3. For each row from setp 1
    - Fail if table\_name value is NULL
4. SELECT DISTINCT ggc.table\_name AS ggc\_table, gc.table\_name
    FROM gpkg\_geometry\_columns AS ggc LEFT OUTER JOIN geopackage\_contents
    AS gc ON ggc.table\_name = gc.table\_name
5. For each row from step 4
    - Fail if ggc.table\_name != gc.table\_name
6. Pass if no fails.

*Reference*:     Clause 2.1.5.1.2 Req 19:

*Test Type*:     Capability



**Test Case ID**: /opt/features/geometry\_columns/data/data\_values\_column\_name

*Test Purpose*: Verify that the column\_name column values in the gpkg\_geometry\_columns
table are valid.

*Test Method*:

1. SELECT table\_name, column\_name FROM gpkg\_geometry\_columns
2. Not testable if returns an empty result set
3. For each row from step 1
    - PRAGMA table\_info(table\_name)
    - Fail if gpkg\_geometry\_columns.column\_name value does not equal a name
	column value returned by PRAGMA table\_info.

Pass if no fails.

*Reference*:   Clause 2.1.5.1.2 Req 20:

*Test Type*: Capability


**Test Case ID**: /opt/features/geometry\_columns/data/data\_values\_geometry\_type\_name

*Test Purpose*: Verrify that the geometry\_type\_name column values in the
gpkg\_geometry\_columns table are valid.

*Test Method*:

1. SELECT DISTINCT geometry\_type\_name from gpkg\_geometry\_columns
2. Not testable if returns an empty result set
3. For each row from step 1
    - Fail if a returned geometry\_type value is not in Table 46 or Table 47 in Annex G
4. Pass if no fails.

*Reference*:     Clause 2.1.5.1.2 Req 21:

*Test Type*:     Capability


**Test Case ID**: /opt/features/geometry\_columns/data/data\_values\_srs\_id

*Test Purpose*: Verify that the gpkg\_geometry\_columns table srs\_id column values are
defined in the gpkg\_spatial\_ref\_sys table.

*Test Method*:

1. SELECT srs\_id FROM gpkg\_geometry\_columns
2. Not testable if returns an empty result set
3. SELECT srs\_id FROM gpkg\_geometry\_columns WHERE srs\_id NOT IN (SELECT
    srs\_id FROM gpkg\_spatial\_ref\_sys)
4. Fail if does not return an empty result set
5. Pass otherwise.

*Reference*:     Clause 2.1.5.1.2 Req 22:

*Test Type*:     Capability


**Test Case ID**: /opt/features/geometry\_columns/data/data\_values\_z

*Test Purpose*: Verify that the gpkg\_geometry\_columns table z column values are valid.

*Test Method*:

1.   SELECT z FROM gpkg\_geometry\_columns
2.   Not testable if returns an empty result set
3.   SELECT z FROM gpkg\_geometry\_columns WHERE z NOT IN (1,2,3)
4.   Fail if does not return an empty result set
5.   Pass otherwise.

*Reference*:     Clause 2.1.5.1.2 Req 23:

*Test Type*:     Capability



**Test Case ID**: /opt/features/geometry\_columns/data/data\_values\_m

*Test Purpose*: Verify that the gpkg\_geometry\_columns table m column values are valid.

*Test Method*:

1.   SELECT m FROM gpkg\_geometry\_columns
2.   Not testable if returns an empty result set
3.   SELECT m FROM gpkg\_geometry\_columns WHERE m NOT IN (1,2,3)
4.   Fail if does not return an empty result set
5.   Pass otherwise.

*Reference*:     Clause 2.1.5.1.2 Req 24:

*Test Type*:     Capability


===== Vector Features User Data Tables

====== Data

*Table Definition*


**Test Case ID**: /opt/features/vector\_features/data/feature\_table\_integer\_primary\_key

*Test Purpose*: Verify that every vector features user data table has an integer primary key.

*Test Method*:

1. SELECT table\_name FROM gpkg\_contents WERE data\_type = 'features'
2. Not testable if returns an empty result set
3. For each row from step 1
   - PRAGMA table\_info(table\_name)
   - Fail if returns an empty result set
   - Fail if result set does not contain one row where the pk column value is 1 and the not
       null column value is 1 and the type column value is "INTEGER"
4. Pass if no fails.

*Reference*:     Clause 2.1.6.1.1 Req 25:

*Test Type*:     Basic

**Test Case ID**: /opt/features/vector/features/data/feature\_table\_one\_geometry\_column

*Test Purpose*: Verify that every vector features user data table has one geometry column.

*Test Method*:

1. SELECT table\_name FROM gpkg\_contents WERE data\_type = 'features'
2. Not testable if returns an empty result set
3. For each row table name from step 1
   - SELECT column\_name from gpkg\_geometry\_columns where table\_name = row
       table name
   - Fail if returns more than one column name
4. Pass if no fails

*Reference*: Clause 2.1.6.1.1 Req 26:

*Test Type*: Capability

*Table Data Values*

**Test Case ID**: /opt/features/vector\_features/data/data\_values\_geometry\_type

*Test Purpose*: Verify that the geometry type of feature geometries are of the type or are
 assignable for the geometry type specified by the gpkg\_geometry columns table
 geometry\_type\_name column value.

*Test Method*:

1. SELECT table\_name AS tn, column\_name AS cn, geometry\_type\_name AS gt\_name
  FROM gpkg\_geometry\_columns WHERE table\_name IN (SELECT table\_name
  FROM gpkg\_contents WHERE data\_type = 'features')
2. Not testable if returns an empty result set
3. For each row from step 1
  - SELECT DISTINCT ST\_GeometryType(cn) FROM tn
  - For each row actual\_type\_name from step a
      +    SELECT GPKG\_IsAssignable(geometry\_type\_name, actual\_type\_name)
      +    Fail if any returned 0
4. Pass if no fails

*Reference*:     Clause 2.1.6.1.2 Req 27:

*Test Type*:     Capability



**Test Case ID**: /opt/features/vector\_features/data/tata\_value\_geometry\_srs\_id

*Test Purpose*: Verify the the srs\_id of feature geometries are the srs\_id specified for the
 gpkg\_geometry\_columns table srs\_id column value.

*Test Method*:

1. SELECT table\_name AS tn, column\_name AS cn, srs\_id AS gc\_srs\_id FROM
  gpkg\_geometry\_columns WHERE table\_name IN (SELECT table\_name FROM
  gpkg\_contents where data\_type = 'features')
2. Not testable if returns an empty result set
3. For each row from step 1
  - SELECT DISTINCT st\_srid(cn) FROM tn
  - For each row from step a
    +     Fail if returnvalue not equal to gc\_srs\_id
4. Pass if no fails

*Reference*:     Clause 2.1.6.1.2 Req 28:

*Test Type*:     Capability

==== Tiles

===== Contents

======   Data

*Contents Table - Tiles Row*


**Test Case ID**: /opt/tiles/contents/data/tiles\_row

*Test Purpose*: Verify that the gpkg\_contents table\_name value table exists and is apparently
 a tiles table for every row with a data\_type column value of "tiles".

*Test Method*:

1. SELECT table\_name FROM gpkg\_contents WHERE data\_type = "tiles"
2. Fail if returns empty result set
3. For each row from step 1
  - PRAGMA table\_info(table\_name)
  - Fail if returns an empty result set
  - Fail if result set does not contain one row where the pk column value is 1 and the
      not null column value is 1 and the type column value is "INTEGER"and the
      name column value is "id"
  - Fail if result set does not contain four other rows where the name column values
      are "zoom\_level","tile\_column","tile\_row", and "tile\_data".
4. Pass if no fails.

*Reference*:     Clause 2.2.2.1.1 Req 29:

*Test Type*:     Capability

===== Zoom Levels

======   Data

*Zoom Times Two*


**Test Case ID**: /opt/tiles/zoom\_levels\_data\_zoom\_times\_two

*Test Purpose*: Verify that by default zoom level pixel sizes for tile matrix user data tables
 vary by factors of 2 between adjacent zoom levels in the tile matrix metadata table.

*Test Method*:

1. SELECT CASE
  WHEN (SELECT tbl\_name FROM sqlite\_master WHERE tbl\_name =
  'gpkg\_extensions') = 'gpkg\_extensions' THEN
  (SELECT table\_name FROM geopackage\_contents WHERE data\_type = 'tiles' AND
  table\_name NOT IN
    (SELECT table\_name from gpkg\_extensions WHERE extension\_name =
  'gpkg\_zoom\_other'))
  ELSE (SELECT table\_name FROM geopackage\_contents WHERE data\_type =
  'tiles')
  END;
2. Not testable if returns empty result set
3. For each row table\_name from step 1
  - SELECT zoom\_level, pixel\_x\_size, pixel\_y\_size FROM tile\_matrix\_metadata
	WHERE table\_name = selected table name ORDER BY zoom\_level ASC
  - Not testable if returns empty result set, or only one row
  - Not testable if there are not two rows with adjacent zoom levels
  - Fail if any pair of rows for adjacent zoom levels have pixel\_x\_size or
      pixel\_y\_size values that differ by other than factors of two
4. Pass if no fails

*Reference*:      Clause 2.2.3.1.1 Req 30:

*Test Type*:      Capability

===== Tile Encoding PNG

====== Data

*MIME Type PNG*


**Test Case ID**: /opt/tiles/tiles\_encoding/data/mime\_type\_png

*Test Purpose*: Verify that a tile matrix user data table that contains tile data that is not
 MIME type image/jpeg by default contains tile data in MIME type image/png.

*Test Method*:

1. SELECT CASE
    WHEN (SELECT tbl\_name FROM sqlite\_master WHERE tbl\_name =
    'gpkg\_extensions') = 'gpkg\_extensions' THEN
    (SELECT table\_name FROM geopackage\_contents WHERE data\_type = 'tiles' AND
    table\_name NOT IN
    (SELECT table\_name from gpkg\_extensions WHERE extension\_name IN
    ('gpkg\_webp','gpkg\_tiff','gpkg\_nitf')))
    ELSE (SELECT table\_name FROM geopackage\_contents WHERE data\_type =
    'tiles')
    END;
2. Not testable if returns empty result set
3. For each row tbl\_name from step 1
    - SELECT tile\_data FROM tbl\_name
    - For each row tile\_data from step a
	+ Pass if tile data in MIME type image/png
4. Fail if no passes

*Reference*:      Clause 2.2.4.1.1 Req 31:

*Test Type*:      Capability

===== Tile Encoding JPEG

====== Data

*MIME Type JPEG*


**Test Case ID**: /opt/tiles/tiles\_encoding/data/mime\_type\_jpeg

*Test Purpose*: Verify that a tile matrix user data table that contains tile data that is not
 MIME type image/png by default contains tile data in MIME type image/jpeg.

*Test Method*:

1. SELECT CASE
  WHEN (SELECT tbl\_name FROM sqlite\_master WHERE tbl\_name =
  'gpkg\_extensions') = 'gpkg\_extensions' THEN
  (SELECT table\_name FROM geopackage\_contents WHERE data\_type = 'tiles' AND
  table\_name NOT IN
    (SELECT table\_name from gpkg\_extensions WHERE extension\_name IN
  ('gpkg\_webp','gpkg\_tiff','gpkg\_nitf')))
  ELSE (SELECT table\_name FROM geopackage\_contents WHERE data\_type =
  'tiles')
  END;
2. Not testable if returns empty result set
3. For each row tbl\_name from step 1
  - SELECT tile\_data FROM tbl\_name
  - For each row tile\_data from step a
      +   Pass if tile data in MIME type image/jpeg
4. Fail if no passes

*Reference*:    Clause 2.2.5.1.1 Req 32:

*Test Type*:    Capability

===== Tile Matrix Metadata

====== Data

*Table Definition*


**Test Case ID**: /opt/tiles/tile\_matrix\_metadata/data/table\_def

*Test Purpose*: Verify that the gpkg\_tile\_matrix\_metadata table exists and has the correct
 definition.

*Test Method*:

1. SELECT sql FROM sqlite\_master WHERE type = 'table' AND tbl\_name =
  'gpkg\_tile\_matrix\_metadata'
2. Fail if returns an empty result set.
3. Pass if the column names and column definitions in the returned CREATE TABLE
  statement in the sql column value,, including data type, nullability, default values and
  primary, foreign and unique key constraints match all of those in the contents of C.7
  Table 25. Column order, check constraint and trigger definitions, and other column
  definitions in the returned sql are irrelevant.
4. Fail otherwise.

*Reference*:    Clause 2.2.6.1.1 Req 33:

*Test Type*:    Basic


*Table Data Values*

**Test Case ID**: /opt/tiles/tile\_matrix\_metadata/data\_values\_table\_name

*Test Purpose*: Verify that values of the gpkg\_tile\_matrix\_metadata table\_name column
 reference values in the gpkg\_contents table\_name column for rows with a data type of
 "tiles".

*Test Method*:

1. SELECT table\_name FROM gpkg\_tile\_matrix\_metadata
2. Not testable if returns an empty result set
3. SELECT table\_name FROM gpkg\_tile\_matrix\_metadata tmm WHERE table\_name
    NOT IN (SELECT table\_name FROM gpkg\_contents gc WHERE tmm.table\_name =
    gc.table\_name)
4. Fail if result set contains any rows
5. Pass otherwise

*Reference*:    Clause 2.2.6.1.2 Req 34:

*Test Type*:    Capability


**Test Case ID**: /opt/tiles/tile\_matrix\_metadata/data/data\_values\_zoom\_level\_rows

*Test Purpose*: Verify that the gpkg\_tile\_matrix\_metadata table contains a row record for
each zoom level that contains one or more tiles in each tile matrix user data table.

*Test Method*:

1. SELECT table\_name AS &amp;lt;user\_data\_tiles\_table&amp;gt; from gpkg\_contents where
    data\_type = 'tiles'
2. Not testable if returns an empty result set
3. For each row from step 1
    - SELECT DISTINCT gtmm.zoom\_level AS gtmm\_zoom, udt.zoom\_level AS
	udtt\_zoom FROM tile\_matrix\_metadata AS gtmm
	LEFT OUTER JOIN &amp;lt;user\_data\_tiles\_table&amp;gt; AS udtt ON udtt.zoom\_level =
	gtmm.zoom\_level AND gtmm.t\_table\_name = '&amp;lt;user\_data\_tiles\_table&amp;gt;'
    - Fail if any gtmm\_zoom column value in the result set is NULL
4. Pass if no fails

*Reference*:    Clause 2.2.6.1.2 Req 35:

*Test Type*:    Capability


**Test Case ID**: /opt/tiles/tile\_matrix\_metadata/data/data\_values\_zoom\_level

*Test Purpose*: Verify that zoom level column values in the gpkg\_tile\_matrix\_metadata table
are not negative.

*Test Method*:

1.   SELECT zoom\_level FROM gpkg\_tile\_matrix\_metadata
2.   Not testable if returns an empty result set
3.   SELECT min(zoom\_level) FROM gpkg\_tile\_matrix\_metadata.
4.   Fail if less than 0.
5.   Pass otherwise.

*Reference*:    Clause 2.2.6.1.2 Req 36:

*Test Type*:    Capability


**Test Case ID**: /opt/tiles/tile\_matrix\_metadata/data/data\_values\_matrix\_width

*Test Purpose*: Verify that the matrix\_width values in the gpkg\_tile\_matrix\_metadata table
are valid.

*Test Method*:

1.   SELECT matrix\_width FROM gpkg\_tile\_matrix\_metadata
2.   Not testable if returns an empty result set
3.   SELECT min(matrix\_width) FROM gpkg\_tile\_matrix\_metadata.
4.   Fail if less than 1.
5.   Pass otherwise.

*Reference*:     Clause 2.2.6.1.2 Req 37:

*Test Type*:     Capabilty


**Test Case ID**: /opt/tiles/tile\_matrix\_metadata/data/data\_values\_matrix\_height

*Test Purpose*: Verify that the matrix\_height values in the gpkg\_tile\_matrix\_metadata table
are valid.

*Test Method*:

1.   SELECT matrix\_height FROM gpkg\_tile\_matrix\_metadata
2.   Not testable if returns an empty result set
3.   SELECT min(matrix\_height) FROM gpkg\_tile\_matrix\_metadata.
4.   Fail if less than 1.
5.   Pass otherwise.

*Reference*:     Clause 2.2.6.1.2 Req 38:

*Test Type*:     Capability


**Test Case ID**: /opt/tiles/tile\_matrix\_metadata/data/data\_values\_tile\_width

*Test Purpose*: Verify that the tile\_width values in the gpkg\_tile\_matrix\_metadata table are
valid.

*Test Method*:

1.   SELECT tile\_width FROM gpkg\_tile\_matrix\_metadata
2.   Not testable if returns an empty result set
3.   SELECT min(tile\_width) FROM gpkg\_tile\_matrix\_metadata.
4.   Fail if less than 1.
5.   Pass otherwise.

*Reference*:     Clause 2.2.6.1.2 Req 39:

*Test Type*:     Capability


**Test Case ID**: /opt/tiles/tile\_matrix\_metadata/data/data\_values\_tile\_height

*Test Purpose*: Verify that the tile\_height values in the gpkg\_tile\_matrix\_metadata table are
valid.

*Test Method*:

1. SELECT tile\_height FROM gpkg\_tile\_matrix\_metadata
2.   Not testable if returns an empty result set
3.   SELECT min(tile\_height) FROM gpkg\_tile\_matrix\_metadata.
4.   Fail if less than 1.
5.   Pass otherwise.

*Reference*:    Clause 2.2.6.1.2 Req 40:

*Test Type*:    Capability


**Test Case ID**: /opt/tiles/tile\_matrix\_metadata/data/data\_values\_pixel\_x\_size

*Test Purpose*: Verify that the pixel\_x\_size values in the gpkg\_tile\_matrix\_metadata table
are valid.

*Test Method*:

1.   SELECT pixel\_x\_size FROM gpkg\_tile\_matrix\_metadata
2.   Not testable if returns an empty result set
3.   SELECT min(pixel\_x\_size) FROM gpkg\_tile\_matrix\_metadata.
4.   Fail if less than 0.
5.   Pass otherwise.

*Reference*:    Clause 2.2.6.1.2 Req 41:

*Test Type*:    Capability


**Test Case ID**: /opt/tiles/tile\_matrix\_metadata/data/data\_values\_pixel\_y\_size

*Test Purpose*: Verify that the pixel\_y\_size values in the gpkg\_tile\_matrix\_metadata table
are valid.

*Test Method*:

1.   SELECT pixel\_y\_size FROM gpkg\_tile\_matrix\_metadata
2.   Not testable if returns an empty result set
3.   SELECT min(pixel\_y\_size) FROM gpkg\_tile\_matrix\_metadata.
4.   Fail if less than 0.
5.   Pass otherwise.

*Reference*:    Clause 2.2.6.1.2 Req 42:

*Test Type*:    Capability


**Test Case ID**: /opt/tiles/tile\_matrix\_metadata/data/data\_values\_pixel\_size\_sort

*Test Purpose*: Verify that the pixel\_x\_size and pixel\_y\_size column values for zoom level
column values in a gpkg\_tile\_matrix\_metadata table sorted in ascending order are sorted in
descending order, showing that lower zoom levels are zoomed "out".

*Test Method*:

1. SELECT table\_name FROM gpkg\_contents WHERE data\_type = 'tiles'
2. Not testable if returns empty result set
3. For each row table\_name from step 1
    - SELECT zoom\_level, pixel\_x\_size, pixel\_y\_size from
	gpkg\_tile\_matrix\_metadata WHERE table\_name = row table name ORDER BY
	zoom\_level ASC
    - Not testable if returns empty result set
    - Fail if pixel\_x\_sizes are not sorted in descending order
    - Fail if pixel\_y\_sizes are not sorted in descending order
4. Pass if testable and no fails

*Reference*:     Clause 2.2.6.1.2 Req 43:

*Test Type*:     Capability

===== Tile Matrix User Data

====== Data

*Table Definition*


**Test Case ID**: /opt/tiles/tile\_matrix/data/table\_def

*Test Purpose*: Verify that multiple tile matrix sets are stored in different tiles tables with
 unique names containing the required columns.

*Test Method*:

1. SELECT COUNT(table\_name) FROM gpkg\_contents WERE data\_type = "tiles"
2. Fail if less than 2
3. SELECT table\_name FROM gpkg\_contents WHERE data\_type = "tiles"
4. For each row from step 3
    - PRAGMA table\_info(table\_name)
    - Fail if returns an empty result set
    - Fail if result set does not contain one row where the pk column value is 1 and the
	not null column value is 1 and the type column value is "INTEGER"and the
	name column value is "id"
    - Fail if result set does not contain four other rows where the name column values
	are "zoom\_level","tile\_column","tile\_row", and "tile\_data".
5. Pass if no fails

*Reference*:     Clause 2.2.7.1.1 Req 44:

*Test Type*:     Basic

*Table Data Values*


**Test Case ID**: /opt/tiles/tile\_matrix/data/data\_values\_zoom\_levels

*Test Purpose*: Verify that the zoom level column values in each tile matrix user data table
 are within the range of zoom levels defined by rows in the tile\_matrix\_metadata table.

*Test Method*:

1. SELECT DISTINCT table\_name AS &amp;lt;user\_data\_tiles\_table&amp;gt; FROM
  gpkg\_tile\_matrix\_metadata
2. Not testable if returns an empty result set
3. For each row &amp;lt;user\_data\_tiles\_table&amp;gt; from step 1
      - SELECT zoom\_level FROM &amp;lt;user\_data\_tiles\_table&amp;gt;
      - If result set not empty
	  + SELECT MIN(gtmm.zoom\_level) AS min\_gtmm\_zoom,
		  MAX(gtmm.zoom\_level) AS max\_gtmm\_zoom FROM
		  gpkg\_tile\_matrix\_metadata WHERE table\_name =
		  &amp;lt;user\_data\_tiles\_table&amp;gt;
	  + SELECT id FROM &amp;lt;user\_data\_tiles\_table&amp;gt; WHERE zoom\_level &amp;lt;
		  min\_gtmm\_zoom
	  + Fail if result set not empty
	  + SELECT id FROM &amp;lt;user\_data\_tiles\_table&amp;gt; WHERE zoom\_level &amp;gt;
		  max\_gtmm\_zoom
	  + Fail if result set not empty
	  + Log pass otherwise
4. Pass if logged pas and no fails

*Reference*:     Clause 2.2.7.1.2 Req 45:

*Test Type*:     Capability


**Test Case ID**: /opt/tiles/tile\_matrix/data/data\_values\_tile\_column

*Test Purpose*: Verify that the tile\_column column values for each zoom level value in each
tile matrix user data table are within the range of columns defined by rows in the
tile\_matrix\_metadata table.

*Test Method*:

1. SELECT DISTINCT table\_name AS &amp;lt;user\_data\_tiles\_table&amp;gt; FROM
    gpkg\_tile\_matrix\_metadata
2. Not testable if returns an empty result set
3. For each row &amp;lt;user\_data\_tiles\_table&amp;gt; from step 1
      + SELECT DISTINCT gtmm.zoom\_level AS gtmm\_zoom, gtmm.matrix\_width
	    AS gtmm\_width, udt.zoom\_level AS udt\_zoom, udt.tile\_column AS
	    udt\_column FROM tile\_matrix\_metadata AS gtmm LEFT OUTER JOIN
	    &amp;lt;user\_data\_tiles\_table&amp;gt; AS udt ON udt.zoom\_level = gtmm.zoom\_level AND
	    gtmm.t\_table\_name = '&amp;lt;user\_data\_tiles\_table&amp;gt;' AND (udt\_column &amp;lt; 0 OR
	    udt\_column &amp;gt; (gtmm\_width - 1))
      + Fail if any udt\_column value in the result set is not NULL
      + Log pass otherwise
4. Pass if logged pass and no fails

*Reference*:     Clause 2.2.7.1.2 Req 46:

*Test Type*:     Capability

**Test Case ID**: /opt/tiles/tile\_matrix\_data/data\_values\_tile\_row

*Test Purpose*: Verify that the tile\_row column values for each zoom level value in each tile
matrix user data table are within the range of rows defined by rows in the
tile\_matrix\_metadata table.

*Test Method*:

1. SELECT DISTINCT table\_name AS &amp;lt;user\_data\_tiles\_table&amp;gt; FROM
  gpkg\_tile\_matrix\_metadata
2. Not testable if returns an empty result set
3. For each row &amp;lt;user\_data\_tiles\_table&amp;gt; from step 1
      + SELECT DISTINCT gtmm.zoom\_level AS gtmm\_zoom, gtmm.matrix\_height
	  AS gtmm\_height, udt.zoom\_level AS udt\_zoom, udt.tile\_row AS udt\_row
	  FROM tile\_matrix\_metadata AS gtmm LEFT OUTER JOIN
	  &amp;lt;user\_data\_tiles\_table&amp;gt; AS udt ON udt.zoom\_level = gtmm.zoom\_level AND
	  gtmm.t\_table\_name = '&amp;lt;user\_data\_tiles\_table&amp;gt; ' AND (udt\_row &amp;lt; 0 OR
	  udt\_row &amp;gt; (gtmm\_height - 1))
      + Fail if any udt\_row value in the result set is not NULL
      + Log pass otherwise
4. Pass if logged pass and no fails

*Reference*:     Clause 2.2.7.1.2 Req 47:

*Test Type*:     Capability

==== Schema

===== Data Columns

====== Data

*Table Definition*

**Test Case ID**: /opt/schema/data\_columns/data\_table\_def

*Test Purpose*: Verify that the gpkg\_data\_columns table exists and has the correct definition.

*Test Method*:

1. SELECT sql FROM sqlite\_master WHERE type = 'table' AND tbl\_name = 'gpkg\_data\_columns'
2. Fail if returns an empty result set
3. Pass if column names and column definitions in the returned CREATE TABLE
    statement in the sql column value, including data type, nullability, default values and
    primary, foreign and unique key constraints match all of those in the contents of C.1
    Table 32. Column order, check constraint and trigger definitions, and other column
    definitions in the returned sql are irrelevant.
4. Fail otherwise.

*Reference*:     Clause 2.3.1.1.1 Req 48:

*Test Type*:     Basic

*Data Values*

**Test Case ID**: /opt/schema/data\_columns/data/data\_values\_table\_name

*Test Purpose*: Verify that values of the gpkg\_data\_columns table\_name column reference
 values in the gpkg\_contents table\_name column.

*Test Method*:

1. SELECT table\_name FROM gpkg\_data columns
2. Not testable if returns an empty result set
3. SELECT table\_name FROM gpkg\_data\_columns gdc WHERE table\_name NOT IN
    (SELECT table\_name FROM gpkg\_contents gc WHERE gdc.table\_name =
    gc.t\_table\_name)
4. Fail if result set contains any rows
5. Pass otherwise

*Reference*:     Clause 2.3.1.1.2 Req 49:

*Test Type*:     Capability



**Test Case ID**: /opt/schema/data\_columns/data/data\_values\_column\_name

*Test Purpose*: Verify that for each gpkg\_data\_columns row, the column\_name value is the
 name of a column in the table\_name table.

*Test Method*:

1. SELECT table\_name, column\_name FROM gpkg\_data\_columns
2. Not testable if returns an empty result set
3. For each row from step 1
    + PRAGMA table\_info(table\_name)
    + Fail if gpkg\_data\_columns.column\_name value does not equal a name column
	value returned by PRAGMA table\_info.
4. Pass if no fails.

*Reference*:     Clause 2.3.1.1.2 Req 50:

*Test Type*:     Capability


==== Metadata

===== Metadata Table

====== Data

*Table Definition*


**Test Case ID**: /opt/metadata/metadata/data/table\_def

*Test Purpose*: Verify that the gpkg\_metadata table exists and has the correct definition.

*Test Method*:

1. SELECT sql FROM sqlite\_master WHERE type = 'table' AND tbl\_name = 'gpkg\_metadata'
2. Fail if returns an empty result set.
3. Pass if the column names and column definitions in the returned Create TABLE
    statement in the sql column value, including data type, nullability, default values and
    primary, foreign and unique key constraints match all of those in the contents of
    Table 33. Column order, check constraint and trigger definitions, and other column
    definitions in the returned sql are irrelevant.
4. Fail otherwise.

*Reference*:     Clause 2.4.2.1.1 Req 51:

*Test Type*:     Basic

*Table Data Values*


**Test Case ID**: /opt/metadata/metadata/data/data\_values\_md\_scope

*Test Purpose*: Verify that each of the md\_scope column values in a gpkg\_metadata table is
 one of the name column values from Table 11 in clause 2.4.2.1.2.

*Test Method*:

1. SELECT md\_scope FROM gpkg\_metadata
2. Not testable if returns an empty result set
3. For each row returned from step 1
  - Fail if md\_scope value not one of the name column values from Table 11 in clause 2.4.2.1.2
4. Pass if no fails

*Reference*:    Clause 2.4.2.1.2 Req 52:

*Test Type*:    Capabilities

===== Metadata Reference Table

====== Data

*Table Definition*


**Test Case ID**: /opt/metadata/metadata\_reference\_data\_table\_def

*Test Purpose*: Verify that the gpkg\_metadata\_reference table exists and has the correct
 definition.

*Test Method*:

1. SELECT sql FROM sqlite\_master WHERE type = 'table' AND tbl\_name = 'gpkg\_metadata\_reference'
2. Fail if returns an empty result set.
3. Pass if the column names and column definitions in the returned Create TABLE
  statement in the sql column value, including data type, nullability, default values and
  primary, foreign and unique key constraints match all of those in the contents of
  Table 34. Column order, check constraint and trigger definitions, and other column
  definitions in the returned sql are irrelevant.
4. Fail otherwise.

*Reference*:    Clause 2.4.3.1.1 Req 53:

*Test Type*:    Basic

*Data Values*


**Test Case ID**: /opt/metadata/metadata\_reference/data/data\_values\_reference\_scope

*Test Purpose*: Verify that gpkg\_metadata\_reference table reference\_scope column values
 are valid.

*Test Method*:

1. SELECT reference\_scope FROM gpkg\_metadata\_reference
2. Not testable if returns an empty result set
3. SELECT reference\_scope FROM gpkg\_metadata\_reference WHERE
  reference\_scope NOT IN ('geopackage','table','column','row','row/col')
4. Fail if does not return an empty result set
5. Pass otherwise.

*Reference*:    Clause 2.4.3.1.2 Req 54:

*Test Type*:    Capability



**Test Case ID**: /opt/metadata/metadata\_reference/data/data\_values\_table\_name

*Test Purpose*: Verify that gpkg\_metadata\_reference table\_name column values are NULL
for rows with reference\_scope values of 'geopackage', and reference gpkg\_contents
table\_name values for all other reference\_scope values.

*Test Method*:

1. SELECT table\_name FROM gpkg\_metadata\_reference
2. Not testable if returns an empty result set
3. SELECT table\_name FROM gpkg\_metadata\_reference WHERE reference\_scope = 'geopackage'
4. Fail if result set contains any non-NULL values
5. SELECT table\_name FROM metadata\_reference WHERE reference\_scope != 'geopackage' AND table\_name NOT IN (SELECT table\_name FROM gpkg\_contents)
6. Fail if result set is not empty
7. Pass otherwise.

*Reference*:    Clause 2.4.3.1.2 Req 55:

*Test Type*:    Capability


**Test Case ID**: /opt/metadata/metadata\_reference/data/data\_values\_column\_name

*Test Purpose*: Verify that gpkg\_metadata\_reference column\_name column values are
NULL for rows with reference scope values of 'geopackage', 'table', or 'row', and contain
the name of a column in table\_name table for other reference scope values.

*Test Method*:

1. SELECT column\_name FROM gpkg\_metadata\_reference
2. Not testable if returns an empty result set
3. SELECT column\_name FROM gpkg\_metadata\_reference WHERE reference\_scope
    IN ('geopackage', 'table', 'row')
4. Fail if result set contains any non-NULL values
5. SELECT &amp;lt;table\_name&amp;gt;, &amp;lt;column\_name&amp;gt; FROM metadata\_reference WHERE
    reference\_scope NOT IN ('geopackage', 'table', 'row')
6. For each row from step 5
    - SELECT sql FROM sqlite\_master WHERE type = 'table' AND tbl\_name = '&amp;lt;table\_name&amp;gt;'
    - Fail if returns an empty result set.
    - Fail if the one of the column names in the returned sql Create TABLE statement
	is not &amp;lt;column\_name&amp;gt;
    - Log pass otherwise
7. Pass if logged pass and no fails.

*Reference*:    Clause 2.4.3.1.2 Req 56:

*Test Type*:    Capability


**Test Case ID**: /opt/metadata/metadata\_reference/data/data\_values\_row\_id\_value

*Test Purpose*: Verify that gpkg\_metadata\_reference row\_id\_value column values are NULL
for rows with reference scope values of 'geopackage', 'table', or 'row', and contain the
ROWID of a row in the table\_name for other reference scope values.

*Test Method*:

1. SELECT row\_id\_value FROM gpkg\_metadata\_reference
2. Not testable if returns an empty result set
3. SELECT row\_id\_value FROM gpkg\_metadata\_reference WHERE reference\_scope
    IN ('geopackage', 'table', 'row')
4. Fail if result set contains any non-NULL values
5. For each SELECT &amp;lt;table\_name&amp;gt;, &amp;lt;row\_id\_value&amp;gt; FROM gpkg\_metadata\_reference
    WHERE reference\_scope NOT IN ('geopackage', 'table', 'row')
6. For each row from step 5
    - SELECT * FROM &amp;lt;table\_name&amp;gt; WHERE ROWID = &amp;lt;row\_id\_value&amp;gt;
    - Fail if result set is empty
    - Log pass otherwise
7. Pass if logged pass and no fails.

*Reference*:    Clause 2.4.3.1.2 Req 57:

*Test Type*:    Capability


**Test Case ID**: /opt/metadata/metadata\_reference/data/data\_values\_timestamp

*Test Purpose*: Verify that every gpkg\_metadata\_reference table row timestamp column
value is in ISO 8601 UTC format.

*Test Method*:

1. SELECT timestamp from gpkg\_metadata\_reference.
2. Not testable if returns an empty result set
3. For each row from step 1
    - Fail if format of returned value does not match yyyy-mm-ddThh:mm:ss.hhhZ
    - Log pass otherwise
4. Pass if logged pass and no fails.

*Reference*:    Clause 2.4.3.1.2 Req 58:

*Test Type*:    Capability


**Test Case ID**: /opt/metadata/metadata\_reference/data/data\_values\_md\_file\_id

*Test Purpose*: Verify that every gpkg\_metadata\_reference table row md\_file\_id column
value is an id column value from the gpkg\_metadata table.

*Test Method*:

1.   SELECT md\_file\_id FROM gpkg\_metadata\_reference
2.   Not testable if returns an empty result set
3.   SELECT gmr.md\_file\_id, gm.id FROM gpkg\_metadata\_reference AS gmr
4.   LEFT OUTER JOIN gpkg\_metadata gm ON gmr.md\_file\_id = gm.id
5.   Fail if result set is empty
6.   Fail if any result set gm.id values are NULL
7.   Pass otherwise

*Reference*:     Clause 2.4.3.1.2 Req 59:

*Test Type*:     Capability



**Test Case ID**: /opt/metadata/metadata\_reference/data/data\_values\_md\_parent\_id

*Test Purpose*: Verify that every gpkg\_metadata\_reference table row md\_parent\_id column
 value that is not null is an id column value from the gpkg\_metadata\_table that is not equal to
 the md\_file\_id column value for that row.

*Test Method*:

1.    SELECT md\_file\_id FROM gpkg\_metadata\_reference
2.    Not testable if returns an empty result set
3.    SELECT gmr.md\_file\_id, gmr.md\_parent\_id
4.    FROM gpkg\_metadata\_reference AS gmr
5.    WHERE gmr.md\_file\_id == gmr.md\_parent\_id
6.    Fail if result set is not empty
7.    SELECT gmr.md\_file\_id, gmr.md\_parent\_id, gm.id
8.    FROM gpkg\_metadata\_reference AS gmr
9.    LEFT OUTER JOIN gpkg\_metadata gm ON gmr.md\_parent\_id =gm.id
10.   Fail if any result set gm.id values are NULL
11.   Pass otherwise

*Reference*:     Clause 2.4.3.1.2 Req 60:

*Test Type*:     Capability

==== Extension Mechanism

===== Extensions

====== Data

*Table Definition*


**Test Case ID**: /opt/extension\_mechanism/extensions/data/table\_def

*Test Purpose*: Verify that a gpkg\_extensions table exists and has the correct definition.

*Test Method*:

1. SELECT sql FROM sqlite\_master WHERE type = 'table' AND tbl\_name =
  'gpkg\_extensions'
2. Fail if returns an empty result set.
3. Pass if the column names and column definitions in the returned Create TABLE
  statement in the sql column value, including data type, nullability, default values and
  primary, foreign and unique key constraints match all of those in the contents of
  Table 23. Column order, check constraint and trigger definitions, and other column
  definitions in the returned sql are irrelevant.
4. Fail otherwise.

*Reference*:     Clause 2.6.1.1.1 Req 61:

*Test Type*:     Basic

*Table Data Values*


**Test Case ID**: /opt/extension\_metchanism/extensions/data/data\_values\_table\_name

*Test Purpose*: Verify that the table\_name column values in the gpkg\_extensions table are
 valid.

*Test Method*:

1. SELECT table\_name, column\_name FROM gpkg\_extensions
2. Not testable if returns an empty result set
3. For each row from step one
  - Fail if table\_name value is NULL and column\_name value is not NULL.
  - SELECT DISTINCT ge.table\_name AS ge\_table, sm.tbl\_name
      FROM gpkg\_extensions AS ge LEFT OUTER JOIN sqlite\_master AS sm ON
      ge.table\_name = sm.tbl\_name
  - Log pass if every row ge.table\_name = sm.tbl\_name (MAY both be NULL).
4. Pass if logged pass and no fails.

*Reference*:    Clause 2.6.1.1.2 Req 63:

*Test Type*:    Capability



**Test Case ID**: /opt/extension\_metchanism/extensions/data/data\_values\_column\_name

*Test Purpose*: Verify that the column\_name column values in the gpkg\_extensions table are
 valid.

*Test Method*:

1. SELECT table\_name, column\_name FROM gpkg\_extensions
2. Not testable if returns an empty result set
3. SELECT table\_name, column\_name FROM gpkg\_extensions WHERE table\_name
  IS NOT NULL AND column\_name IS NOT NULL
4. Pass if returns an empty result set
5. For each row from step 3
  - PRAGMA table\_info(table\_name)
  - Fail if gpkg\_extensions.column\_name value does not equal a name column value
      returned by PRAGMA table\_info.
  - Log pass otherwise
6. Pass if logged pass and no fails.

*Reference*:    Clause 2.6.1.1.2 Req 63:

*Test Type*:    Capability



**Test Case ID**: /opt/extension\_mechanism/extensions/data/data\_values\_extension\_name

*Test Purpose*: Verify that the extension\_name column values in the gpkg\_extensions table
 are valid.

*Test Method*:

1. SELECT extension\_name FROM gpkg\_extensions
2. Not testable if returns an empty result set
3. For each row returned from step 1
  - Log pass if extension\_name is one of those listed in Table 14
  - Separate extension\_name into &amp;lt;author&amp;gt; and &amp;lt;extension&amp;gt; at the first "\_"
  - Fail if &amp;lt;author&amp;gt; is "gpkg"
  - Fail if &amp;lt;author&amp;gt; contains characters other than [a-zA-Z0-9]
  - Fail if &amp;lt;extension&amp;gt; contains characters other than [a-zA-Z0-9\_]
  - Log pass otherwise
4. Pass if logged pass and no fails.

*Reference*:    Clause 2.6.1.1.2 Req 64:

*Test Type*:    Capability


===== API

====== API GeoPackage SQLite Config


**Test Case ID**: /opt/extension\_mechanism/extensions/api/api\_geopackage\_sqlite\_config

*Test Purpose*: Verify that a GeoPackage SQLite Extension has the API GeoPackage SQLite
 Configuration compile and run time options.

*Test Method*:

1.   SELECT sqlite\_compileoption\_used('SQLITE\_OMIT\_LOAD\_EXTENSION')
2.   Fail if returns 1
3.   SELECT sqlite\_compileoption\_used('SQLITE\_OMIT\_VIRTUALTABLE')
4.   Fail if returns 1
5.   SELECT sqlite\_compileoption\_used('SQLITE\_ENABLE\_RTREE')
6.   Fail if returns 0
7.   SELECT sqlite\_compileoption\_used('SQLITE\_RTREE\_INT\_ONLY')
8.   Fail if returns 1
9.   Pass otherwise

*Reference*:    Clause 2.6.1.2.1 Req 65:

*Test Type*:    Basic

*Safe GeoPackage SQLite Config*

**Test Case ID**: /opt/extension\_mechanism/extensions/api/safe\_geopackage\_sqlite\_config

*Test Purpose*: Verify that a GeoPackage SQLite Extension has the Safe GeoPackage
 SQLite Configuration compile and run time options.

*Test Method*:

1.   SELECT sqlite\_compileoption\_used('SQLITE\_DEFAULT\_FOREIGN\_KEYS ')
2.   Fail if returns 0
3.   SELECT sqlite\_compileoption\_used('SQLITE\_OMIT\_FOREIGN\_KEY')
4.   Fail if returns 1
5.   PRAGMA foreign\_keys
6.   Fail if returns 0
7.   SELECT sqlite\_compileoption\_used('SQLITE\_OMIT\_INTEGRITY\_CHECK')
8.   Fail if returns 1
9.    SELECT sqlite\_compileoption\_used('SQLITE\_OMIT\_SUBQUERY')
10.   Fail if returns 1
11.   SELECT sqlite\_compileoption\_used('SQLITE\_OMIT\_TRIGGER')
12.   Fail if returns 1
13.   Pass otherwise

*Reference*:     Clause 2.6.1.2.2 Req 66:

*Test Type*:     Basic

=== Registered Extensions



**Test Case ID**: /reg\_ext/all/author\_name/not\_gpkg/not\_features\_or\_tiles

*Test Purpose*: Verify that any table in a GeoPackage file subject to a registered extension
 with an author\_name other than "gpkg" is not described by a gpkg\_contents table row with a
 data\_type value of 'features' or 'tiles'.

*Test Method*:

1. /opt/extension\_mechanism/extensions/data/table\_def
2. Not testable if failed
3. SELECT table\_name FROM geopackage\_contents
  WHERE data\_type IN ('features','tiles') AND table\_name IN
  (SELECT table\_name FROM gpkg\_extensions WHERE
  substr(lower(extension\_name),1,4. != 'gpkg')
4. Fail if result set is not empty
5. Pass otherwise

*Reference*:     Clause 3 Req 67:

*Test Type*:     Basic

==== Features

===== Geometry Encoding

======   Data

*BLOB Format - Extensions Name*


**Test Case ID**: /reg\_ext/features/geometry\_encoding/data/ext\_name

*Test Purpose*: Verify that an extension name in the form
 &amp;lt;author\_name&amp;gt;\_geometry\_encoding is defined for an author name other than "gpkg" for
 each geometry BLOB format other than GeoPackageBinary used in a GeoPackage file.

*Test Method*:

1. SELECT table\_name, column\_name FROM gpkg\_geometry\_columns WHERE
  table\_name IN (SELECT table\_name FROM gpkg\_contents WHERE data\_type NOT
  IN ('features', 'tiles'))
2. Not testable if returns an empty result set
3. For each row table\_name, column\_name from step 1
      * SELECT result\_set\_column\_name FROM result\_set\_table\_name
      * Not testable if returns an empty result set
      * For each geometry column value from step a
	      - If the first three bytes of geometry column value are not "GPB", then
		    + /opt/extension\_mechanism/extensions/data/table\_def
		    + Fail if failed
		    + SELECT extension\_name FROM gpkg\_extensions WERE
			table\_name = result\_set\_table\_name AND column\_name =
			result\_set\_column\_name AND
			substr(lower(extension\_name),1,4. != 'gpkg')
				* Fail if returns an empty result set
				* Separate extension\_name into &amp;lt;author&amp;gt; and
				  &amp;lt;extension&amp;gt; at the first "\_"
				* Fail if &amp;lt;extension&amp;gt; is not '\_geometry\_encoding'.
				* Otherwise log pass
4. Pass if logged pass and no fails

*Reference*:     Clause 3.1.1.1.2 Req 68:

*Test Type*:     Basic

*BLOB Format - Extensions Row*


**Test Case ID**: /reg\_ext/features/geometry\_encoding/data/ext\_row

*Test Purpose*: Verify that the gpkg\_extensions table contains a row with an extension\_name
 in the form &amp;lt;author\_name&amp;gt;\_geometry\_encoding is defined for an author name other than
 "gpkg" for each table\_name and column\_name that contain a geometry BLOB format other
 than GeoPackageBinary in a GeoPackage file.

*Test Method*:

Same as /reg\_ext/features/geometry\_encoding/data/ext\_name

*Reference*:     Clause 3.1.1.1.3 Req 69:

*Test Type*:     Capability


===== Geometry Types

======   Data

*Extension Types*


**Test Case ID**: /reg\_ext/features/geometry\_encoding/data/extension\_types\_existing\_sparse\_data

*Test Purpose*: Verify that existing extended non-linear geometry types are stored in valid
 GeoPackageBinary format encodings.

*Test Method*:

1. SELECT table\_name FROM gpkg\_geometry\_columns
2. Not testable if returns an empty result set
3. SELECT table\_name AS tn, column\_name AS cn FROM gpkg\_geometry\_columns
  WHERE table\_name IN (SELECT table\_name FROM gpkg\_contents WHERE
  data\_type = 'features'),
4. Fail if returns an empty result set
5. For each row from step 3
      + SELECT cn FROM tn;
      + For each row from step a, if bytes 2-5 of cn.wkb as uint32 in endianness of
	  gc.wkb byte 1of cn from #1 are a geometry type value from Annex G Table
	  46, then
	    - Log cn.header values, wkb endianness and geometry type
	    - If cn.wkb is not correctly encoded per ISO 13249-3 clause 5.1.46 then
		  log fail
	    - If cn.flags.E is 1 - 4 and some cn.wkbx is outside of
		  cn.envelope.minx,maxx then log fail
	    - If cn.flags.E is 1 - 4 and some gc.wkby is outside of
		  cn.envelope.miny,maxy then log fail
	    -    If cn.flags.E is 2,4 and some gc.wkb.z is outside of
		  cnenvelope.minz,maxz then log fail
	    - If cn.flags.E is 3,4 and some gc.wkb.m is outside of
		  cn.envelope.minm,maxm then log fail
	    - If cn.flags.E is 5-7 then log fail
	    - Otherwise log pass
6. Log pass if log contains pass and no fails

*Reference*:     Clause 3.1.2.1.1 Req 70:

*Test Type*:     Capability


**Test Case ID**: /reg\_ext/features/geometry\_encoding/data/extension\_types\_all\_types\_test\_data

*Test Purpose*: Verify that all extended non-linear geometry types and options are stored in
 valid GeoPackageBinary format encodings.

*Test Method*:

1. Open GeoPackage that has feature geometry values of geometry type in Annex G, for
  an assortment of srs\_ids, for an assortment of coordinate values, without and with z
  and/or m values, in both big and little endian encodings:
2. /reg\_ext/features/geometry\_encoding/data/extension\_types\_existing\_sparse\_data
3. Pass if log contains pass record for big and little endian GPB headers containing big
  and little endian WKBs for 0-1 envelope contents indicator codes for every geometry
  type value from Annex G Table 47 without and with z and/or m values.
4. Fail otherwise

*Reference*:     Clause 3.1.2.1.1 Req 70:

*Test Type*:     Capability

*Geometry Types -- Extensions Name*


**Test Case ID**: /reg\_ext/features/geometry\_encoding/data/extension\_name

*Test Purpose*: Verify that an extension name in the form gpkg\_geom\_&amp;lt;gname&amp;gt; is defined
 for each &amp;lt;gname&amp;gt; extension geometry type from Annex G Table 47 used in a GeoPackage
 file.

*Test Method*:

1. SELECT table\_name, column\_name FROM gpkg\_geometry\_columns WHERE
    table\_name IN (SELECT table\_name FROM gpkg\_contents WHERE data\_type ==
    'features'))
2. Not testable if result set is empty
3. For each row result set table\_name, column\_name from step 3
	- SELECT result\_set\_column\_name FROM result\_set\_table\_name
	- For each geometry column value from step a
	      + If the first three bytes of each geometry column value are "GPB", then
		      * /opt/extension\_mechanism/extensions/data/table\_def
		      * Fail if failed
		      * SELECT ST\_GeometryType(geometry column value) AS lt;gtype&amp;gt;;
		      * SELECT extension\_name FROM gpkg\_extensions WERE
			    table\_name = result\_set\_table\_name AND column\_name =
			    result\_set\_column\_name AND extension\_name = 'gpkg\_geom\_'
			    || &amp;lt;gtype&amp;gt;
				  - Fail if result set is empty
				  - Log pass otherwise
4. Pass if logged pass and no fails

*Reference*:     Clause 3.1.2.1.2 Req 71:

*Test Type*:     Basic

*Geometry Types -- Extensions Row*


**Test Case ID**: /reg\_ext/features/geometry\_encoding/data/extension\_row

*Test Purpose*: Verify that the gpkg\_extensions table contains a row with an extension\_name
 in the form gpkg\_geom\_&amp;lt;gname&amp;gt; for each table\_name and column\_name in the
 gpkg\_geometry\_columns table with a &amp;lt;gname&amp;gt; geometry\_type\_name.

*Test Method*:

/reg\_ext/features/geometry\_encoding/data/extension\_name


*Reference*:     Clause 3.1.2.1.3 Req 72:

*Test Type*:     Capability


===== Spatial Indexes

======   Data

*Spatial Indexes Implementation*


**Test Case ID**: /reg\_ext/features/spatial\_indexes/implementation

*Test Purpose*: Verify the correct implementation of spatial indexes on feature table
 geometry columns.

*Test Method*:

1. SELECT table\_name, column\_name FROM gpkg\_geometry\_columns WHERE
  table\_name IN (SELECT table\_name FROM gpkg\_contents WHERE data\_type ==
  'features'))
2. Not testable if result set is empty
3. For each row table\_name, column\_name from step 1
      - SELECT sql FROM sqlite\_master WHERE tbl\_name = 'rtree\_' ||
	  result\_set\_table\_name || '\_' || result\_set\_column\_name
      - Not testable if result set is empty
      - Fail if returned sql != 'CREATE VIRTUAL TABLE rtree\_' ' ||
	  result\_set\_table\_name || '\_' || result\_set\_column\_name || USING rtree(id, minx,
	  maxx, miny, maxy)
      - SELECT sql FROM sqlite\_master WHERE type = 'trigger' AND tname =
	  'rtree\_' || result\_set\_table\_name || '\_' || result\_set\_column\_name || '\_insert'
      - Fail if returned sql != result of populating insert triggers template in Table 39
	  using result\_set\_table\_name for &amp;lt;t&amp;gt; and result\_set\_column\_name for &amp;lt;c&amp;gt;
      - SELECT sql FROM sqlite\_master WHERE type = 'trigger' AND name LIKE
	  'rtree\_' || result\_set\_table\_name || '\_' || result\_set\_column\_name || '\_update%'
      - Fail if returned sql != result of populating 4 update triggers templates in Table
	  39 using result\_set\_table\_name for &amp;lt;t&amp;gt; and result\_set\_column\_name for &amp;lt;c&amp;gt;
      - SELECT sql FROM sqlite\_master WHERE type='trigger' AND name =
	  'rtree\_' || result\_set\_table\_name || '\_' || result\_set\_column\_name || '\_delete'
      - Fail if returned sql != result of populating delete trigger template in Table 39
	  using result\_set\_table\_name for &amp;lt;t&amp;gt; and result\_set\_column\_name for &amp;lt;c&amp;gt;
      - Log pass otherwise
4. Pass if logged pass and no fails

*Reference*:     Clause 3.1.3.1.1 Req 73:

*Test Type*:     Capability

*Spatial Indexes - Extensions Name*


**Test Case ID**: /reg\_ext/features/spatial\_indexes/extension\_name

*Test Purpose*: Verify that the "gpkg\_rtree\_index" extension name is used to register spatial
 index extensions.

*Test Method*:

1. SELECT table\_name, column\_name FROM gpkg\_geometry\_columns WHERE
  table\_name IN (SELECT table\_name FROM gpkg\_contents WHERE data\_type ==
  'features'))
2. Not testable if result set is empty
3. For each row table\_name, column\_name from step 3
      - SELECT sql FROM sqlite\_master WHERE tbl\_name = 'rtree\_' ||
	  result\_set\_table\_name || '\_' || result\_set\_column\_name
      - Not testable if returns an empty result set
      - /opt/extension\_mechanism/extensions/data/table\_def
      - Fail if failed
      - SELECT extension\_name from gpkg\_extensions WHERE table\_name =
	  result\_set\_table\_name AND column\_name = result\_set\_column\_name
      - Log pass if result is "gpkg\_rtree\_index"
      - Fail otherwise

4. Pass if logged pass and no fails

*Reference*:     Clause 3.1.3.1.2 Req 74:

*Test Type*:     Basic

*Spatial Indexes - Extensions Row*


**Test Case ID**: /reg\_ext/features/spatial\_indexes/extension\_row

*Test Purpose*: Verify that spatial index extensions are registered using the
 "gpkg\_rtree\_index" name in the gpkg\_extensions table.

*Test Method*:

/reg\_ext/features/spatial\_indexes/extension\_name


*Reference*:     Clause 3.1.3.1.3 Req 75:

*Test Type*:     Capability

===== Geometry Type Triggers

====== Data

*Geometry Type Triggers Implementation*


**Test Case ID**: /reg\_ext/features/geometry\_type\_triggers/implementation

*Test Purpose*: Verify that user feature data table geometry type triggers are implemented
 correctly.

*Test Method*:

1. SELECT table\_name, column\_name FROM gpkg\_geometry\_columns WHERE
  table\_name IN (SELECT table\_name FROM gpkg\_contents WHERE data\_type ==
  'features'))
2. Not testable if returns an empty result set
3. For each row table\_name, column\_name from step 1
      - SELECT sql FROM sqlite\_master WHERE type = 'trigger' AND tbl\_name =
	  'fgti\_' || result\_set\_table\_name || '\_' || result\_set\_column\_name
      - Not testable if returns an empty result set
      - Fail if sql != result of populating the first trigger template in Table 17 with &amp;lt;t&amp;gt;
	  as result\_set\_table\_name and &amp;lt;c&amp;gt; as result\_set\_column\_name
      - SELECT sql FROM sqlite\_master WHERE type = 'trigger' AND tbl\_name =
	  'fgtu\_' || result\_set\_table\_name || '\_' || result\_set\_column\_name
      - Fail if sql != result of populating the second trigger template in Table 17 with
	  &amp;lt;t&amp;gt; as result\_set\_table\_name and &amp;lt;c&amp;gt; as result\_set\_column\_name
      - Log pass otherwise
4. Pass if logged pass and no fails

*Reference*:     Clause 3.1.4.1.1 Req 76:

*Test Type*:     Capability

*Geometry Type Triggers - Extensions Name*


**Test Case ID**: /reg\_ext/features/geometry\_type\_triggers/extension\_name

*Test Purpose*: Verify that the "gpkg\_geometry\_type\_trigger" extension name is used to
 register geometry type triggers.

*Test Method*:

1. SELECT table\_name, column\_name FROM gpkg\_geometry\_columns WHERE
  table\_name IN (SELECT table\_name FROM gpkg\_contents WHERE data\_type ==
  'features'))
2. Not testable if result set is empty
3. For each row table\_name, column\_name from step 1
  - SELECT sql FROM sqlite\_master WHERE type = 'trigger' AND tbl\_name =
      'fgti\_' || result\_set\_table\_name || '\_' || result\_set\_column\_name
  - Not testable if result set is empty
  - /opt/extension\_mechanism/extensions/data/table\_def
  - Fail if failed
  - SELECT extension\_name from gpkg\_extensions WHERE table\_name =
      result\_set\_table\_name AND column\_name = result\_set\_column\_name
  - Log pass if result is "gpkg\_geometry\_type\_trigger"
  - Fail otherwise
4. Pass if logged pass and no fails

*Reference*:     Clause 3.1.4.1.2 Req 77:

*Test Type*:     Basic

*Geometry Type Triggers - Extensions Row*


**Test Case ID**: /reg\_ext/features/geometry\_type\_triggers/extension\_row

*Test Purpose*: Verify that geometry type triggers are registered using the
 "gpkg\_geometry\_type\_trigger" extension name.

*Test Method*:

/reg\_ext/features/geometry\_type\_triggers/extension\_name


*Reference*:     Clause 3.1.4.1.3 Req 78:

*Test Type*:     Capability

===== SRS\_ID Triggers

======   Data

*SRS\_ID Triggers - Implementation*


**Test Case ID**: /reg\_ext/features/srs\_id\_triggers/implementation

*Test Purpose*: Verify that user feature data table srs\_id triggers are implemented correctly.

*Test Method*:

1. SELECT table\_name, column\_name FROM gpkg\_geometry\_columns WHERE
  table\_name IN (SELECT table\_name FROM gpkg\_contents WHERE data\_type ==
  'features'))
2. Not testable if result set is empty
3. For each row table\_name, column\_name from step 1
      - SELECT sql FROM sqlite\_master WHERE type = 'trigger' AND tbl\_name =
	  'fgsi\_' || result\_set\_table\_name || '\_' || result\_set\_column\_name
      - Not testable if result set is empty
      - Fail if sql != result of populating the first trigger template in Table 18 with &amp;lt;t&amp;gt;
	  as result\_set\_table\_name and &amp;lt;c&amp;gt; as result\_set\_column\_name
      - SELECT sql FROM sqlite\_master WHERE type = 'trigger' AND tbl\_name =
	  'fgsu\_' || result\_set\_table\_name || '\_' || result\_set\_column\_name
      - Fail if sql != result of populating the second trigger template in Table 18 with
	  &amp;lt;t&amp;gt; as result\_set\_table\_name and &amp;lt;c&amp;gt; as result\_set\_column\_name
      - Log pass otherwise
4. Pass if logged pass and no fails



*Reference*:     Clause 3.1.5.1.1 Req 79:

*Test Type*:     Capability

*SRS\_ID Triggers - Extensions Name*


**Test Case ID**: /reg\_ext/features/srs\_id\_triggers/extension\_name

*Test Purpose*: Verify that the "gpkg\_srs\_id\_trigger" extension name is used to register
 srs\_id triggers.

*Test Method*:

1. SELECT table\_name, column\_name FROM gpkg\_geometry\_columns WHERE
  table\_name IN (SELECT table\_name FROM gpkg\_contents WHERE data\_type ==
  'features'))
2. Not testable if result set is empty
3. For each row table\_name, column\_name from step 1
  - SELECT sql FROM sqlite\_master WHERE type = 'trigger' AND tbl\_name =
      'fgsi\_' || result\_set\_table\_name || '\_' || result\_set\_column\_name
  - Not testable if result set is empty
  - /opt/extension\_mechanism/extensions/data/table\_def
  - Fail if failed
  - SELECT extension\_name from gpkg\_extensions WHERE table\_name =
      result\_set\_table\_name AND column\_name = result\_set\_column\_name
  - Pass if result is "gpkg\_srs\_id\_trigger"
  - Fail otherwise

*Reference*:     Clause 3.1.5.1.2 Req 80:

*Test Type*:     Basic

*SRS\_ID Triggers - Extensions Row*

**Test Case ID**: /reg\_ext/features/srs\_id\_triggers/extension\_row

*Test Purpose*: Verify that srs\_id triggers are registered using the "gpkg\_srs\_id\_trigger"
 extension name.

*Test Method*:

/reg\_ext/features/srs\_id\_triggers/extension\_name


*Reference*:     Clause 3.1.5.1.3 Req 81:

*Test Type*:     Capability

====   Tiles

===== Zoom Levels

====== Data

*Zoom Other IntervalsâExtensions Name*


**Test Case ID**: /reg\_ext/tiles/zoom\_levels/data/zoom\_other\_ext\_name

*Test Purpose*: Verify that the "gpkg\_zoom\_other" extension name is used to register tiles
 tables with other than factors of two zoom intervals.

*Test Method*:

1. SELECT table\_name FROM geopackage\_contents WHERE data\_type = 'tiles'
2. Not testable if empty result set
3. For each row table\_name from step 1
      - SELECT zoom\_level, pixel\_x\_size, pixel\_y\_size FROM tile\_matrix\_metadata
	  WHERE table\_name = selected table name ORDER BY zoom\_level ASC
      - Not testable if returns empty result set
      - Not testable if there are not two rows with adjacent zoom levels
      - Not testable if no pair of rows for adjacent zoom levels have pixel\_x\_size or
	  pixel\_y\_size values that differ by other than factors of two
      - /opt/extension\_mechanism/extensions/data/table\_def
      - Fail if failed
      - SELECT * FROM gpkg\_extensions WHERE table\_name = selected table
	  name AND extension\_name = 'gpkg\_zoom\_other'
      - Fail if returns an empty result set
      - Log pass otherwise
4. Pass if logged pass and no fails



*Reference*:     Clause 3.2.1.1.2 Req 82:

*Test Type*:     Basic

*Zoom Other Intervals - Extensions Row*


**Test Case ID**: / reg\_ext/tiles/zoom\_levels/data/zoom\_other\_ext\_row

*Test Purpose*: Verify that tiles tables with other than factors of two zoom intervals are
 registered using the "gpkg\_zoom\_other" extension name.

*Test Method*:

/reg\_ext/tiles/zoom\_levels/data/zoom\_other\_ext\_name


*Reference*:     Clause 3.2.1.1.3 Req 83:

*Test Type*:     Capabilty

===== Tile Encoding WEBP

======    Data

*WEBP - Extensions Name*


**Test Case ID**: /reg\_ext/tiles/tile\_encoding\_webp/data/webp\_ext\_name

*Test Purpose*: Verify that the "gpkg\_webp" extensions name is used to register WEBP tile
 encoding implementations.

*Test Method*:

1. SELECT table\_name FROM geopackage\_contents WHERE data\_type = 'tiles'
2. Not testable if empty result set
3. For each row table\_name from step 1
      - Select tile\_data FROM row table\_name
      - For each row tile\_data from step a
	      + Log webp if tile data in MIME type image/webp
      - Not testable if no logged webps
      - /opt/extension\_mechanism/extensions/data/table\_def
      - Fail if failed
      - SELECT * FROM gpkg\_extensions WHERE table\_name = selected table
	  name AND extension\_name = 'gpkg\_webp'
      - Fail if returns an empty result set
      - Log pass otherwise
4. Pass if logged pass and no fails

*Reference*:     Clause 3.2.2.2.1 Req 84:

*Test Type*:     Basic

====== WEBP - Extensions Row


**Test Case ID**: /reg\_ext/tiles/tile\_encoding\_webp/data/webp\_ext\_row

*Test Purpose*: Verify that WEBP tile encodings are registered using the "gpkg\_webp"
 extensions name.

*Test Method*:

/reg\_ext/tiles/tile\_encoding\_webp/data/webp\_ext\_name


*Reference*:     Clause 3.2.2.2.2 Req 85:

*Test Type*:     Capability

===== Tile Encoding TIFF

====== Data

*TIFF - Extensions Name*


**Test Case ID**: /reg\_ext/tiles/tile\_encoding\_tiff/data/tiff\_ext\_name

*Test Purpose*: Verify that the "gpkg\_tiff" extensions name is used to register TIFF tile
 encoding implementations.

*Test Method*:

1. SELECT table\_name FROM geopackage\_contents WHERE data\_type = 'tiles'
2. Not testable if empty result set
3. For each row table\_name from step 3
      - Select tile\_data FROM row table\_name
      - For each row tile\_data from step a
	      + Log tiff if tile data in MIME type image/tiff
      - Not testable if no logged webps
      - /opt/extension\_mechanism/extensions/data/table\_def
      - Fail if failed
      - SELECT * FROM gpkg\_extensions WHERE table\_name = selected table
	  name AND extension\_name = 'gpkg\_tiff'
      - Fail if returns an empty result set
      - Log pass otherwise
4. Pass if logged pass and no fails

*Reference*:     Clause 3.2.3.1.2 Req 86:

*Test Type*:     Basic

*TIFF - Extensions Row*


**Test Case ID**: /reg\_ext/tiles/tile\_encoding\_tiff/data/tiff\_ext\_row

*Test Purpose*: Verify that TIFF tile encodings are registered using the "gpkg\_tiff"
 extensions name.

*Test Method*:

/reg\_ext/tiles/tile\_encoding\_tiff/data/tiff\_ext\_name


*Reference*:     Clause 3.2.3.1.3 Req 87:

*Test Type*:     Capability

===== Tile Encoding NITF

====== Data

*NITF - Extensions Name*


**Test Case ID**: /reg\_ext/tiles/tile\_encoding\_nitf/data/nitf\_ext\_name

*Test Purpose*: Verify that the "gpkg\_nitf" extensions name is used to register NITF tile
 encoding implementations.

*Test Method*:

1. SELECT table\_name FROM geopackage\_contents WHERE data\_type = 'tiles'
2. Not testable if empty result set
3. For each row table\_name from step 3
      - Select tile\_data FROM row table\_name
      - For each row tile\_data from step a
	      + Log nitf if tile data in MIME type application/vnd.NITF
      - Not testable if no logged webps
      - /opt/extension\_mechanism/extensions/data/table\_def
      - Fail if failed
      - SELECT * FROM gpkg\_extensions WHERE table\_name = selected table
	  name AND extension\_name = 'gpkg\_nitf'
      - Fail if returns an empty result set
      - Log pass otherwise
4. Pass if logged pass and no fails

*Reference*:     Clause 3.2.4.1.2 Req 88:

*Test Type*:     Basic

*NITF - Extensions Row*


**Test Case ID**: /reg\_ext/tiles/tile\_encoding/nitf/data/nitf\_ext\_row

*Test Purpose*: Verify that NITF tile encodings are registered in the gpkg\_extensions table
 using the "gpkg\_nitf" extensions name.

*Test Method*:

/reg\_ext/tiles/tile\_encoding\_nitf/data/nitf\_ext\_name


*Reference*:     Clause 3.2.4.1.3 Req 89:

*Test Type*:     Capability

===== Tile Encoding Other

====== Data

*Other Mime Type - Extensions Name*


**Test Case ID**: /reg\_ext/tiles/tile\_encoding/other/data/other\_ext\_name

*Test Purpose*: Verify that an extension name in the form
 &amp;lt;author\_name&amp;gt;\_&amp;lt;other&amp;gt;\_mime\_type is defined for an author name other than "gpkg" for
 each other MIME image format used for tile\_data columns in tile matrix set user data tables,
 where &amp;lt;other&amp;gt; is replaced by the other MIME type abbreviation in uppercase.

*Test Method*:

1. SELECT table\_name FROM geopackage\_contents WHERE data\_type = 'tiles'
2. Not testable if empty result set
3. For each row table\_name from step 3
      + Select tile\_data FROM row table\_name
      + For each row tile\_data from step a
		- Log other MIME type name if tile data not in MIME type png, jpeg, webp, tiff or nitf
      + Not testable if no logged others
      + /opt/extension\_mechanism/extensions/data/table\_def
      + Fail if failed
      + For each other logged MIME type name for this table\_name
		- SELECT extension\_name FROM gpkg\_extensions WHERE
		    table\_name = result set table name AND column\_name = 'tile\_data'
		    AND substr(lower(extension\_name),1,4. !- 'gpkg') AND
		    instr(extension\_name, logged MIME type name) != 0
		- Fail if returns an empty result set
	        - Separate extension\_name into &amp;lt;author&amp;gt; and &amp;lt;extension&amp;gt; at the first "\_"
	        - Separate &amp;lt;extension&amp;gt; into &amp;lt;mime&amp;gt; and &amp;lt;ext&amp;gt; at the first "\_"
		- Fail if &amp;lt;mime&amp;gt; not logged MIME type
	        - Fail if &amp;lt;ext&amp;gt; not "mime\_type"
	        - Log pass otherwise
4. Pass if logged pass and no fails"

*Reference*:     Clause 3.2.5.1.2 Req 90:

*Test Type*:     Basic

*Other Mime Type - Extensions Row*


**Test Case ID**: /reg\_ext/tiles\_tile\_encoding/other/data/other\_ext\_row

*Test Purpose*: Verify that other mime image type tile encodings are registered in the
 gpkg\_extensions table using names of the form &amp;lt;author\_name&amp;gt;\_&amp;lt;other&amp;gt;\_mime\_type.

*Test Method*:

/reg\_ext/tiles/tile\_encoding/other/data/other\_ext\_name


*Reference*:    Clause 3.2.5.1.3 Req 91:

*Test Type*:    Capability

==== Any Tables

===== Other Trigger

====== Data

*Other Trigger - Extensions Name*


**Test Case ID**: /reg\_ext/any/other\_triggers/data/ext\_name

*Test Purpose*: Verify that an extension name in the form &amp;lt;author\_name&amp;gt;\_&amp;lt;extension&amp;gt; is
 defined for an author name other than "gpkg" for each other trigger implementation that
 uses SQL functions other than those provided by SQLite or the GeoPackage Minimal
 Runtime SQL Functions.

*Test Method*:

1. SELECT sql, tbl\_name FROM sqlite\_master WHERE type='trigger'
2. For each row sql, tbl\_name from step 1
      - If sql contains an SQL function other than those provided by SQLite or the
	  GeoPackage Minimal Runtime SQL Functions
		+ Log trigger
	        + /opt/extension\_mechanism/extensions/data/table\_def
	        + Fail if failed
	        + SELECT extension\_name FROM gpkg\_extensions WHERE
		  table\_name = tbl\_name AND substr(lower(extension\_name),1,4. !-
		  'gpkg')
	        + Fail if returns an empty result set
	        + Log pass otherwise
3. Not testable if no logged triggers
4. Pass if logged pass and no fails

*Reference*:    Clause 3.3.1.1.2 Req 92:

*Test Type*:    Basic

*Other Trigger - Extensions Row*

**Test Case ID**: /reg\_ext/any/other\_triggers/data/ext\_row

*Test Purpose*: Verify that other trigger implementations that use SQL functions other than
 those provided by SQLite or the GeoPackage Minimal Runtime SQL Functions.are
 registered with &amp;lt;author\_name&amp;gt;\_&amp;lt;extension&amp;gt; names in the gpkg\_extensions table.

*Test Method*:

/reg\_ext/any/other\_triggers/data/ext\_name


*Reference*:    Clause 3.3.1.1.3 Req 93:

*Test Type*:   Capability

[appendix]
[[background_and_context]]
== Background and Context (Informative)

=== Preface

An open standard non-proprietary platform-independent GeoPackage container for distribution and direct use of all kinds
of geospatial data will increase the cross-platform interoperability of geospatial applications and web services.
Standard APIs for access and management of GeoPackage data will provide consistent query and update results across such
applications and services. Increased interoperability and result consistency will enlarge the potential market for such
 applications and services, particularly in resource-constrained mobile computing environments like cell phones and
 tablets. GeoPackages will become the standard containers for âMyGeoDataâ that are used as a transfer format by users
 and Geospatial Web Services and a storage format on personal and enterprise devices.

This OGCÂ® GeoPackage Encoding Standard defines a GeoPackage as a self-contained, single-file,
cross-platform, serverless, transactional, open source SQLite data container with table definitions, relational
integrity constraints, an SQL API exposed via a âCâ CLI and JDBC, and manifest tables that together act as an exchange
and direct-use format for multiple types of geospatial data including vector features, features with raster attributes
and tile matrix pyramids, especially on mobile / hand held devices in disconnected or limited network connectivity
environments.

Table formats, definitions of geometry types and metadata tables, relational integrity constraints, and SQL API are
interdependent specification facets of the SF-SQL [13][11][12] and SQL-MM (Spatial) [14] standards that serve as
normative references for the vector feature portion of this specification.

This specification attempts to support and use relevant raster types, storage table definitions, and metadata from
widely adopted implementations and existing standards such as WMTS [22] and ISO metadata [42], to integrate use of
rasters as attributes of geospatial features, and to define relational integrity constraints and an SQL API thereon to
provide a raster analogy to the SF-SQL and SF-MM data access and data quality assurance capabilities.

Conformance classes for this specification are classified as core (mandatory) and extension (optional). The simple core
of an Empty GeoPackage contains two SQL tables.

Future versions of this specification willmay include requirements for elevation data and routes. Future enhancements to
this specification, a future GeoPackage Web Service specification, and modifications to existing OGC Web Service (OWS)
specifications to use GeoPackages as exchange formats willmay allow OWS to support provisioning of GeoPackages
throughout an enterprise or information community. Â 

=== Submission Contact Points

=== Submitting Organizations

The following organizations submitted this Encoding Standard to the Open Geospatial Consortium Inc. as a
Request For Comment (RFC).

* Envitia
* Luciad
* Sigma Bravo
* The Carbon Project
* U.S. Army Geospatial Center
* U.S. National Geospatial Intelligence Agency

.Revision history
[cols=",,,,",options="header",]
|=======================================================================
|Date |Rel |Editor |Paragraph modified |Description
|---- |--- |------ |------------------ | Revision history omitted
|=======================================================================

Changes to the OGCÂ® Abstract Specification
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The OGCÂ® Abstract Specification does not require changes to accommodate this OGCÂ® standard.

Changes to OGCÂ® Implementation Standards
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

None at present.

=== Potential Future Work

* MAY investigate GeoPackage implementation on SQLite version 4 &lt;&lt;B46&gt;&gt;.
* Future versions of this specification MAY include requirements for elevation data and routes.
* Future enhancements to this specification, a future GeoPackage Web Service specification and modifications to existing OGC Web Service (OWS) specifications to use GeoPackages as exchange formats MAY allow OWS to support provisioning of GeoPackages throughout an enterprise.
* Future versions of this specification MAY include additional raster / image formats, including fewer restrictions on the image/tiff format.
* Future versions of this specification MAY include additional SQL API routines for interrogation and conversion of raster / image BLOBs.
* Future versions of this specification and/or one for a GeoPackage Web Service MAY address utilities for importing and exporting vector, raster and tile data in various formats.
* Future versions of this specification and/or one for a GeoPackage Web Service MAY address encryption of GeoPackages and/or individual tables or column values.
* Future versions of this specification MAY add infrastructure to the metadata tables such as a `temporal_columns` table that refers to the time properties of data records.
* MAY specify a streaming synchronization protocol for GeoPackage as part of a future GeoPackage Web Service specification, and/or a future version of the GeoPackage and/or Web Synchronization Service specification(s).
* Future versions of this specification MAY address symbology and styling information.
* Future version of this specification MAY include geographic / geodesic geometry types.
* MAY create a GeoPackage Abstract Object Model to support data encodings other than SQL in a future version of this specification.
* MAY add https://github.com/mapbox/utfgrid-spec[UTFGrid] support in a future version of this specification

=== Contributors

The following organizations and individuals have contributed to the preparation of this standard:

* Alessandro Furieri
* Compusult Limited
* Development Seed
* Environmental Systems Research Institute, Inc. (Esri)
* Envitia
* Feng China University
* George Mason University
* Image Matters LLC
* International Geospatial Services Institute (iGSI) GmbH
* LMN Solutions
* Luciad
* MapBox
* OpenGeo
* Open Site Plan
* Sigma Bravo
* The Carbon Project
* Universitat AutÃ²noma de Barcelona (CREAF)
* U.S. Army Geospatial Center (AGC)
* U.S. National Aeronautics and Space Administration (NASA)
* U.S. National Geospatial Intelligence Agency (NGA)

=== Terms and Definitions

For the purposes of this document, the following terms and definitions apply.

[gloassary]
Empty GeoPackage::
    A GeoPackage file that contains a `spatial_ref_sys` table, `agpkg_contents` table with row record(s) with `data_type` column values of âfeaturesâ or âtilesâ, and corresponding features tables per clause 2.1. and/or tiles tables per clause 2.2 where the user data tables per clauses 2.1.6. and 2.2.7 exist but contain no rows.
geolocate::
    identify a real-world geographic location
GeoPackage::
    A GeoPackage file used with a GeoPackage SQLite Extension
GeoPackage file::
    a platform-independent SQLite database file that contains GeoPackage data and metadata tables with specified definitions, integrity assertions, format limitations and content constraints.
GeoPackage SQLite Extension::
    executable software linked to a SQLite library with specified configuration requirements to provide SQL API access to and functional manipulation of GeoPackage file contents.
georectified::
    raster whose pixels have been regularly spaced in a geographic (i.e., latitude / longitude) or projected map coordinate system using ground control points so that any pixel can be geolocated given its grid coordinate and the grid origin, cell spacing, and orientation.
orthorectified::
    georectified raster that has also been corrected to remove image perspective (camera angle tilt), camera and lens induced distortions, and terrain induced distortions using camera calibration parameters and DEM elevation data to accurately align with real world coordinates, have constant scale, and support direct measurement of distances, angles, and areas.
Valid GeoPackage::
    A GeoPackage file that contains features per clause Error! Reference source not found. and/or tiles per clause Error! Reference source not found. and row(s) in the `gpkg_contents` table with `data_type` column values of âfeaturesâ and/or âtilesâ describing the user data tables.

=== Conventions

Symbols (and abbreviated terms)

Some frequently used abbreviated terms:

[gloassary]
ACID::
    Atomic, Consistent, Isolated, and Durable

=== UML Notation

The diagrams that appear in this standard are presented using the Unified Modeling Language (UML) static structure diagrams.
The UML notations used in this standard for RDBMS tables in the GeoPackage container are described in Figure 1 below.

.UML Notation for RDBMS Tables
image::umlnotationforrdbmstables.png[]

In this standard, the following two stereotypes of UML classes are used to represent RDBMS tables:

a. \&lt;&lt;table&gt;&gt; An instantiation of a UML class as an RDMBS table.
b. \&lt;&lt;column&gt;&gt; An instantiation of a UML attribute as an RDBMS table column.

In this standard, the following standard data types are used for RDBMS
columns:

a. NULL â The value is a NULL value.
b. INTEGER â A signed integer, stored in 1, 2, 3, 4, 6, or 8 bytes depending on the magnitude of the value
c. REAL â The value is a floating point value, stored as an 8-byte IEEE floating point number.
d. TEXT â A sequence of characters, stored using the database encoding (UTF-8, UTF-16BE or UTF-16LE).
e. BLOB â The value is a blob of data, stored exactly as it was input.
f. NONE â The value is a Date / Time Timestamp

The UML notations used in this standard for the eXtensible Markup Language (XML) schema for the GeoPackage manifest are described in Figure 2 below.

.UML notation for XML Schema
image::umlnotationforxmlschema.png[]

In this standard, the following stereotypes of UML classes are used to describe XML schemas:

a. \&lt;&lt;DataType&gt;&gt; A descriptor of a set of values that lack identity (independent existence and the possibility of side effects). A DataType is a class with no operations whose primary purpose is to hold the information.
b. \&lt;&lt;Enumeration&gt;&gt; is a fixed enumeration that uses string values for expressing a list of potential values.
c. \&lt;&lt;CodeList&gt;&gt; is an extensible enumeration that uses string values for expressing a list of potential values.

In this standard, the standard data types defined in http://www.w3.org/TR/xmlschema-2/[XML Schema Part 2: Datatypes] are used to describe XML Schemas.

[[table_definition_sql]]
[appendix]
== Table Definition SQL (Normative)

=== gpkg_spatial_ref_sys

[[gpkg_spatial_ref_sys_sql]]
[source,sql]
.gpkg_spatial_ref_sys Table Definition SQL
----
CREATE TABLE gpkg_spatial_ref_sys (
  srs_name TEXT NOT NULL,
  srs_id INTEGER NOT NULL PRIMARY KEY,
  organization TEXT NOT NULL,
  organization_coordsys_id INTEGER NOT NULL,
  definition  TEXT NOT NULL,
  description TEXT
);
----

[[sqlmm_gpkg_spatial_ref_sys_sql]]
[source,sql]
.SQL/MM View of gpkg_spatial_ref_sys Definition SQL
----
CREATE VIEW st_spatial_ref_sys AS
  SELECT
    srs_name,
    srs_id,
    organization,
    organization_coordsys_id,
    definition,
    description
  FROM gpkg_spatial_ref_sys;
----

[[sfsql_gpkg_spatial_ref_sys_sql]]
[source,sql]
.SF/SQL View of gpkg_spatial_ref_sys Definition SQL
----
CREATE VIEW spatial_ref_sys AS
  SELECT
    srs_id AS srid,
    organization AS auth_name,
    organization_coordsys_id AS auth_srid,
    definition AS srtext
  FROM gpkg_spatial_ref_sys;
----

=== gpkg_contents

[[gpkg_contents_sql]]
[source,sql]
.gpkg_contents Table Definition SQL
----
CREATE TABLE gpkg_contents (
  table_name TEXT NOT NULL PRIMARY KEY,
  data_type TEXT NOT NULL,
  identifier TEXT UNIQUE,
  description TEXT DEFAULT '',
  last_change TEXT NOT NULL DEFAULT (strftime('%Y-%m-%dT%H:%M:%fZ',CURRENT_TIMESTAMP)),
  min_x DOUBLE,
  min_y DOUBLE,
  max_x DOUBLE,
  max_y DOUBLE,
  srs_id INTEGER,
  CONSTRAINT fk_gc_r_srs_id FOREIGN KEY (srs_id) REFERENCES gpkg_spatial_ref_sys(srs_id)
);
----

=== gpkg_extension

[[gpkg_extension_sql]]
[source,sql]
.gpkg_extensions Table Definition SQL
----
CREATE TABLE gpkg_extensions (
  table_name TEXT,
  column_name TEXT,
  extension_name TEXT NOT NULL,
  scope TEXT NOT NULL,
  CONSTRAINT ge_tce UNIQUE (table_name, column_name, extension_name)
);
----

=== gpkg_geometry_columns

[[gpkg_geometry_columns_sql]]
[source,sql]
.gpkg_geometry_columns Table Definition SQL
----
CREATE TABLE gpkg_geometry_columns (
  table_name TEXT NOT NULL,
  column_name TEXT NOT NULL,
  geometry_type_name TEXT NOT NULL,
  srs_id INTEGER NOT NULL,
  z INTEGER NOT NULL,
  m INTEGER NOT NULL,
  CONSTRAINT pk_geom_cols PRIMARY KEY (table_name, column_name),
  CONSTRAINT uk_gc_table_name UNIQUE (table_name),
  CONSTRAINT fk_gc_tn FOREIGN KEY (table_name) REFERENCES gpkg_contents(table_name),
  CONSTRAINT fk_gc_srs FOREIGN KEY (srs_id) REFERENCES gpkg_spatial_ref_sys (srs_id)
);
----

[[sqlmm_gpkg_geometry_columns_sql]]
[source,sql]
.SQL/MM View of gpkg_geometry_columns Definition SQL
----
CREATE VIEW st_geometry_columns AS
  SELECT
    table_name,
    column_name,
    "ST_" || geometry_type_name,
    g.srs_id,
    srs_name
  FROM gpkg_geometry_columns as g JOIN gpkg_spatial_ref_sys AS s
  WHERE g.srs_id = s.srs_id;
----

[[sfsql_gpkg_geometry_columns_sql]]
[source,sql]
.SF/SQL VIEW of gpkg_geometry_columns Definition SQL
----
CREATE VIEW geometry_columns AS
  SELECT
    table_name AS f_table_name,
    column_name AS f_geometry_column,
    code4name 1 (geometry_type_name) AS geometry_type,
    2 + (CASE z WHEN 1 THEN 1 WHEN 2 THEN 1 ELSE 0 END) + (CASE m WHEN 1 THEN 1 WHEN 2 THEN 1 ELSE 0 END) AS coord_dimension,
    srs_id AS srid
  FROM gpkg_geometry_columns;
----

=== sample_feature_table (Informative)

[[example_feature_table_sql]]
[source,sql]
.sample_feature_table Table Definition SQL
----
CREATE TABLE sample_feature_table (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  geometry GEOMETRY,
  text_attribute TEXT,
  real_attribute REAL,
  boolean_attribute BOOLEAN,
  raster_or_photo BLOB
);
----

=== gpkg_tile_matrix_set

[[gpkg_tile_matrix_set_sql]]
[source,sql]
.gpkg_tile_matrix_set Table Creation SQL
----
CREATE TABLE gpkg_tile_matrix_set (
  table_name TEXT NOT NULL PRIMARY KEY,
  srs_id INTEGER NOT NULL
  min_x DOUBLE NOT NULL,
  min_y DOUBLE NOT NULL,
  max_x DOUBLE NOT NULL,
  max_y DOUBLE NOT NULL,
  CONSTRAINT fk_gtms_table_name FOREIGN KEY (table_name) REFERENCES gpkg_contents(table_name),
  CONSTRAINT fk_gtms_srs FOREIGN KEY (srs_id) REFERENCES gpkg_spatial_ref_sys (srs_id)
);
----

=== gpkg_tile_matrix

[[gpkg_tile_matrix_sql]]
[source,sql]
.gpkg_tile_matrix Table Creation SQL
----
CREATE TABLE gpkg_tile_matrix (
  table_name TEXT NOT NULL,
  zoom_level INTEGER NOT NULL,
  matrix_width INTEGER NOT NULL,
  matrix_height INTEGER NOT NULL,
  tile_width INTEGER NOT NULL,
  tile_height INTEGER NOT NULL,
  pixel_x_size DOUBLE NOT NULL,
  pixel_y_size DOUBLE NOT NULL,
  CONSTRAINT pk_ttm PRIMARY KEY (table_name, zoom_level),
  CONSTRAINT fk_tmm_table_name FOREIGN KEY (table_name) REFERENCES gpkg_contents(table_name)
);
----

[source,sql]
.EXAMPLE: gpkg_tile_matrix Insert Statement
----
INSERT INTO gpkg_tile_matrix VALUES (
  "sample_tile_pyramid",
  0,
  1,
  1,
  512,
  512,
  2.0,
  2.0
);
----

=== sample_matrix_tiles (Informative)

[[example_tiles_table_sql]]
[source,sql]
.EXAMPLE: tiles table Create Table SQL
----
CREATE TABLE sample_matrix_pyramid (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  zoom_level INTEGER NOT NULL,
  tile_column INTEGER NOT NULL,
  tile_row INTEGER NOT NULL,
  tile_data BLOB NOT NULL),
  UNIQUE (zoom_level, tile_column, tile_row)
)
----

[source,sql]
.EXAMPLE: tiles table Insert Statement
----
INSERT INTO sample_matrix_pyramid VALUES (
  1,
  1,
  1,
  1,
  "BLOB VALUE"
)
----

=== gpkg_data_columns

[[gpkg_data_columns_sql]]
[source,sql]
.gpkg_data_columns Table Definition SQL
----
CREATE TABLE gpkg_data_columns (
  table_name TEXT NOT NULL,
  column_name TEXT NOT NULL,
  name TEXT,
  title TEXT,
  description TEXT,
  mime_type TEXT,
  constraint_name TEXT,
  constraint_type TEXT,
  CONSTRAINT pk_gdc PRIMARY KEY (table_name, column_name),
  CONSTRAINT fk_gdc_tn FOREIGN KEY (table_name) REFERENCES gpkg_contents(table_name)
);
----

=== gpkg_data_column_constraints

[[gpkg_data_column_constraints_sql]]
[source,sql]
.gpkg_data_columns Table Definition SQL
----
CREATE TABLE gpkg_data_column_constraints (
  constraint_name TEXT NOT NULL,
  constraint_type TEXT NOT NULL, // 'range' | 'enum' | 'glob'
  value TEXT,
  min NUMERIC,
  minIsInclusive INTEGER, // 0 = false, 1 = true
  max NUMERIC,
  maxIsInclusive INTEGER, // 0 = false, 1 = true
)
----

=== gpkg_metadata

[[gpkg_metadata_sql]]
[source,sql]
.gpkg_metadata Table Definition SQL
----
CREATE TABLE gpkg_metadata (
  id INTEGER CONSTRAINT m_pk PRIMARY KEY ASC NOT NULL UNIQUE,
  md_scope TEXT NOT NULL DEFAULT 'dataset',
  metadata_standard_URI TEXT NOT NULL DEFAULT 'http://schemas.opengis.net/iso/19139/',
  mime_type TEXT NOT NULL DEFAULT âtext/xmlâ,
  metadata TEXT NOT NULL DEFAULT (ââ)
);
----

=== gpkg_metadata_reference

[[gpkg_metadata_reference_sql]]
[source,sql]
.gpkg_metadata_reference Table Definition SQL
----
CREATE TABLE gpkg_metadata_reference (
  reference_scope TEXT NOT NULL,
  table_name TEXT,
  column_name TEXT,
  row_id_value INTEGER,
  timestamp TEXT NOT NULL DEFAULT (strftime('%Y-%m-%dT%H:%M:%fZ',CURRENT_TIMESTAMP)),
  md_file_id INTEGER NOT NULL,
  md_parent_id INTEGER,
  CONSTRAINT crmr_mfi_fk FOREIGN KEY (md_file_id) REFERENCES gpkg_metadata(id),
  CONSTRAINT crmr_mpi_fk FOREIGN KEY (md_parent_id) REFERENCES gpkg_metadata(id)
);
----

[source,sql]
.Example: gpkg_metadata_reference SQL insert statement
----
INSERT INTO gpkg_metadata_reference VALUES (
  'table',
  'sample_rasters',
  NULL,
  NULL,
  '2012-08-17T14:49:32.932Z',
  98,
  99
)
----

[[minimal_runtime_sql_functions]]
[appendix]
== Minimal Runtime SQL Functions (Normative)

[[minimal_runtime_sql_functions_table]]
.Minimal Runtime SQL Functions
[cols=",,",options="header"]
|====
|SQL Function |Description | Use
|ST_SRID(geom. Geometry) : INTEGER
|Returns the spatial reference system id of a Geometry
|Check that geometry srid matches what's specified in gpkg_geometry_columns.srid
|ST_GeometryType(geom. Geometry) : TEXT
|Returns the WKB geometry type name of a Geometry
|Check that the geometry type matches whatâs specified in gpkg_geometry_columns.geometry_type_name
|GPKG_IsAssignable(expected_type_name TEXT, actual_type_name TEXT): INTEGER
|Returns 1 if a value of type expected_type_name is the same or a super type of type actual_type_name.
 Returns 0 otherwise.
|Determine if the expected geometry type is the same as or a super type of the actual geometry type.
|ST_IsEmpty(geom. Geometry) : INTEGER
|Returns 1 if geometry value is empty, 0 if not empty, NULL if geometry value is NULL.
|Test if a geometry value corresponds to the empty set
|ST_Is3D(geom. Geometry) : INTEGER
|Check that elevation values are present when they are required, and not present when they are prohibited.
|Tests whether a Geometry value has z coordinates
|ST_IsMeasured(geom. Geometry) : INTEGER
|Check that measure values are present when they are required, and not present when they are prohibited.
|Tests whether a Geometry value has m coordinates.
|ST_MinX(geom. Geometry) : REAL
|Returns the minimum X value of the bounding Envelope of a Geometry
|Update the spatial index on a geometry column in a feature table.
|ST_MaxX(geom. Geometry) : REAL
|Returns the maximum X value of the bounding Envelope of a Geometry
|Update the spatial index on a geometry column in a feature table.
|ST_MinY(geom. Geometry) : REAL
|Returns the minimum Y value of the bounding Envelope of a Geometry
|Update the spatial index on a geometry column in a feature table.
|ST_MaxY(geom. Geometry) : REAL
|Returns the maximum Y value of the bounding Envelope of a Geometry
|Update the spatial index on a geometry column in a feature table.
|ST_MinZ(geom. Geometry) : REAL
|Returns the minimum Z value of the bounding Envelope of a Geometry
|Update the spatial index on a geometry column in a feature table.
|ST_MaxZ(geom. Geometry) : REAL
|Returns the maximum Z value of the bounding Envelope of a Geometry
|Update the spatial index on a geometry column in a feature table.
|ST_MinM(geom. Geometry) : REAL
|Returns the minimum M value of the bounding Envelope of a Geometry
|Update the spatial index on a geometry column in a feature table.
|ST_MaxM(geom. Geometry) : REAL
|Returns the maximum M value of the bounding Envelope of a Geometry
|Update the spatial index on a geometry column in a feature table.
|====

[[spatial_index_sql]]
[appendix]
== Spatial Index SQL (Normative)

The tables below contain SQL templates with variables.
Replace the following template variables with the specified values to create the required SQL statements: +
&lt;t&gt;: The name of the feature table containing the geometry column +
&lt;c&gt;: The name of the geometry column in &lt;t&gt; that is being indexed +
&lt;i&gt;: The name of the integer primary key column in &lt;t&gt; as specified in Req 25

=== Create Virtual Table SQL Template

GeoPackage files MAY contain a spatial index for each geometry column of a feature table.
These spatial indexes SHALL be created using the SQLite Virtual Table RTree extension.
An application that creates a spatial index SHALL create it using the following SQL statement template:

.create virtual table SQL
[source,sql]
----
CREATE VIRTUAL TABLE rtree_&lt;t&gt;_&lt;c&gt; USING rtree(id, minx, maxx, miny, maxy)
----

where &lt;t&gt; and &lt;c&gt; are replaced with the names of the feature table and geometry column being indexed.
The rtree function id parameter becomes the virtual table 64-bit signed integer primary key id column, and the min/max x/y parameters are min- and max-value pairs (stored as 32-bit floating point numbers) for each dimension that become the virtual table data columns that are populated to create the spatial rtree index.

=== Load Spatial Index Values

The indexes provided by the SQLite Virtual Table RTree extension are not automatic indices.
This means the index data structure needs to be manually populated, updated and queried.
Each newly created spatial index SHALL be populated using the following SQL statement

.load spatial index values SQL
[source,sql]
----
INSERT OR REPLACE INTO rtree_&lt;t&gt;_&lt;c&gt;
  SELECT &lt;i&gt;, st_minx(&lt;c&gt;), st_maxx(&lt;c&gt;), st_miny(&lt;c&gt;), st_maxy(&lt;c&gt;) FROM &lt;t&gt;;
----

where &lt;t&gt; and &lt;c&gt; are replaced with the names of the feature table and geometry column being indexed and &lt;i&gt; is replaced with the name of the feature table integer primary key column.

=== Define Triggers to Maintain Spatial Index Values

For each spatial index in a GeoPackage file, corresponding insert, update and delete triggers that update the spatial index SHALL be present on the indexed geometry column.
These spatial index triggers SHALL be defined as follows:

.Spatial Index SQL Triggers Template
[source,sql]
----
/* Conditions: Insertion of non-empty geometry
   Actions   : Insert record into rtree */
CREATE TRIGGER rtree_&lt;t&gt;_&lt;c&gt;_insert AFTER INSERT ON &lt;t&gt;
  WHEN (new.&lt;c&gt; NOT NULL AND NOT ST_IsEmpty(NEW.&lt;c&gt;))
BEGIN
  INSERT OR REPLACE INTO rtree_&lt;t&gt;_&lt;c&gt; VALUES (
    NEW.&lt;i&gt;,
    ST_MinX(NEW.&lt;c&gt;), ST_MaxX(NEW.&lt;c&gt;),
    ST_MinY(NEW.&lt;c&gt;), ST_MaxY(NEW.&lt;c&gt;)
  );
END;

/* Conditions: Update of geometry column to non-empty geometry
               No row ID change
   Actions   : Update record in rtree */
CREATE TRIGGER rtree_&lt;t&gt;_&lt;c&gt;_update1 AFTER UPDATE OF &lt;c&gt; ON &lt;t&gt;
  WHEN OLD.&lt;i&gt; = NEW.&lt;i&gt; AND
       (NEW.&lt;c&gt; NOTNULL AND NOT ST_IsEmpty(NEW.&lt;c&gt;))
BEGIN
  INSERT OR REPLACE INTO rtree_&lt;t&gt;_&lt;c&gt; VALUES (
    NEW.&lt;i&gt;,
    ST_MinX(NEW.&lt;c&gt;), ST_MaxX(NEW.&lt;c&gt;),
    ST_MinY(NEW.&lt;c&gt;), ST_MaxY(NEW.&lt;c&gt;)
  );
END;

/* Conditions: Update of geometry column to empty geometry
               No row ID change
   Actions   : Remove record from rtree */
CREATE TRIGGER rtree_&lt;t&gt;_&lt;c&gt;_update2 AFTER UPDATE OF &lt;c&gt; ON &lt;t&gt;
  WHEN OLD.&lt;i&gt; = NEW.&lt;i&gt; AND
       (NEW.&lt;c&gt; ISNULL OR ST_IsEmpty(NEW.&lt;c&gt;))
BEGIN
  DELETE FROM rtree_&lt;t&gt;_&lt;c&gt; WHERE id = OLD.&lt;i&gt;;
END;

/* Conditions: Update of any column
               Row ID change
               Non-empty geometry
   Actions   : Remove record from rtree for old &lt;i&gt;
               Insert record into rtree for new &lt;i&gt; */
CREATE TRIGGER rtree_&lt;t&gt;_&lt;c&gt;_update3 AFTER UPDATE OF &lt;c&gt; ON &lt;t&gt;
  WHEN OLD.&lt;i&gt; != NEW.&lt;i&gt; AND
       (NEW.&lt;c&gt; NOTNULL AND NOT ST_IsEmpty(NEW.&lt;c&gt;))
BEGIN
  DELETE FROM rtree_&lt;t&gt;_&lt;c&gt; WHERE id = OLD.&lt;i&gt;;
  INSERT OR REPLACE INTO rtree_&lt;t&gt;_&lt;c&gt; VALUES (
    NEW.&lt;i&gt;,
    ST_MinX(NEW.&lt;c&gt;), ST_MaxX(NEW.&lt;c&gt;),
    ST_MinY(NEW.&lt;c&gt;), ST_MaxY(NEW.&lt;c&gt;)
  );
END;

/* Conditions: Update of any column
               Row ID change
               Empty geometry
   Actions   : Remove record from rtree for old and new &lt;i&gt; */
CREATE TRIGGER rtree_&lt;t&gt;_&lt;c&gt;_update4 AFTER UPDATE ON &lt;t&gt;
  WHEN OLD.&lt;i&gt; != NEW.&lt;i&gt; AND
       (NEW.&lt;c&gt; ISNULL OR ST_IsEmpty(NEW.&lt;c&gt;))
BEGIN
  DELETE FROM rtree_&lt;t&gt;_&lt;c&gt; WHERE id IN (OLD.&lt;i&gt;, NEW.&lt;i&gt;);
END;

/* Conditions: Row deleted
   Actions   : Remove record from rtree for old &lt;i&gt; */
CREATE TRIGGER rtree_&lt;t&gt;_&lt;c&gt;_delete AFTER DELETE ON &lt;t&gt;
  WHEN old.&lt;c&gt; NOT NULL
BEGIN
  DELETE FROM rtree_&lt;t&gt;_&lt;c&gt; WHERE id = OLD.&lt;i&gt;;
END;
----

where &lt;t&gt; and &lt;c&gt; are replaced with the names of the feature table and geometry column being indexed and &lt;i&gt; is replaced with the name of the feature table integer primary key column.

[appendix]
== Trigger Definition SQL (Informative)

=== geometry_columns

.gpkg_geometry_columns Trigger Definitions
[source,sql]
----
CREATE TRIGGER 'gpkg_geometry_columns_geometry_type_name_insert'
BEFORE INSERT ON 'gpkg_geometry_columns'
FOR EACH ROW BEGIN
SELECT RAISE(ABORT,'geometry_type name must be one of GEOMETRY,
POINT, LINESTRING, POLYGON, MULTIPOINT, MULTILINESTRING, MULTIPOLYGON,
GEOMCOLLECTION, CIRCULARSTRING, COMPOUNDCURVE, CURVEPOLYGON, MULTICURVE,
MULTISURFACE, CURVE, SURFACE')
WHERE NOT(NEW.geometry_type_name IN('GEOMETRY', 'POINT', 'LINESTRING',
'POLYGON', 'MULTIPOINT', 'MULTILINESTRING', 'MULTIPOLYGON',
'GEOMCOLLECTION', 'CIRCULARSTRING', 'COMPOUNDCURVE', 'CURVEPOLYGON',
'MULTICURVE', 'MULTISURFACE', 'CURVE', 'SURFACE'));
END

CREATE TRIGGER 'gpkg_geometry_columns_geometry_type_name_update'
BEFORE UPDATE OF 'geometry_type_name' ON 'gpkg_geometry_columns'
FOR EACH ROW BEGIN
SELECT RAISE(ABORT,'geometry_type name must be one of GEOMETRY,
POINT, LINESTRING, POLYGON, MULTIPOINT, MULTILINESTRING, MULTIPOLYGON,
GEOMCOLLECTION, CIRCULARSTRING, COMPOUNDCURVE, CURVEPOLYGON, MULTICURVE,
MULTISURFACE, CURVE, SURFACE ')
WHERE NOT(NEW.geometry_type_name IN ('GEOMETRY', 'POINT', 'LINESTRING',
'POLYGON', 'MULTIPOINT', 'MULTILINESTRING', 'MULTIPOLYGON',
'GEOMCOLLECTION', 'CIRCULARSTRING', 'COMPOUNDCURVE', 'CURVEPOLYGON',
'MULTICURVE', 'MULTISURFACE', 'CURVE', 'SURFACE'));
END
----

=== gpkg_tile_matrix

.gpkg_tile_matrix Trigger Definition SQL
[source,sql]
----
CREATE TRIGGER 'gpkg_tile_matrix_zoom_level_insert'
BEFORE INSERT ON 'gpkg_tile_matrix'
FOR EACH ROW BEGIN
SELECT RAISE(ABORT, 'insert on table ''gpkg_tile_matrix'' violates constraint: zoom_level cannot be less than 0')
WHERE (NEW.zoom_level &lt; 0);
END

CREATE TRIGGER 'gpkg_tile_matrix_zoom_level_update'
BEFORE UPDATE of zoom_level ON 'gpkg_tile_matrix'
FOR EACH ROW BEGIN
SELECT RAISE(ABORT, 'update on table ''gpkg_tile_matrix'' violates constraint: zoom_level cannot be less than 0')
WHERE (NEW.zoom_level &lt; 0);
END

CREATE TRIGGER 'gpkg_tile_matrix_matrix_width_insert'
BEFORE INSERT ON 'gpkg_tile_matrix'
FOR EACH ROW BEGIN
SELECT RAISE(ABORT, 'insert on table ''gpkg_tile_matrix'' violates constraint: matrix_width cannot be less than 1')
WHERE (NEW.matrix_width &lt; 1);
END

CREATE TRIGGER 'gpkg_tile_matrix_matrix_width_update'
BEFORE UPDATE OF matrix_width ON 'gpkg_tile_matrix'
FOR EACH ROW BEGIN
SELECT RAISE(ABORT, 'update on table ''gpkg_tile_matrix'' violates constraint: matrix_width cannot be less than 1')
WHERE (NEW.matrix_width &lt; 1);
END

CREATE TRIGGER 'gpkg_tile_matrix_matrix_height_insert'
BEFORE INSERT ON 'gpkg_tile_matrix'
FOR EACH ROW BEGIN
SELECT RAISE(ABORT, 'insert on table ''gpkg_tile_matrix'' violates constraint: matrix_height cannot be less than 1')
WHERE (NEW.matrix_height &lt; 1);
END

CREATE TRIGGER 'gpkg_tile_matrix_matrix_height_update'
BEFORE UPDATE OF matrix_height ON 'gpkg_tile_matrix'
FOR EACH ROW BEGIN
SELECT RAISE(ABORT, 'update on table ''gpkg_tile_matrix'' violates constraint: matrix_height cannot be less than 1')
WHERE (NEW.matrix_height &lt; 1);
END

CREATE TRIGGER 'gpkg_tile_matrix_pixel_x_size_insert'
BEFORE INSERT ON 'gpkg_tile_matrix'
FOR EACH ROW BEGIN
SELECT RAISE(ABORT, 'insert on table ''gpkg_tile_matrix'' violates constraint: pixel_x_size must be greater than 0')
WHERE NOT (NEW.pixel_x_size &gt; 0);
END

CREATE TRIGGER 'gpkg_tile_matrix_pixel_x_size_update'
BEFORE UPDATE OF pixel_x_size ON 'gpkg_tile_matrix'
FOR EACH ROW BEGIN
SELECT RAISE(ABORT, 'update on table ''gpkg_tile_matrix'' violates constraint: pixel_x_size must be greater than 0')
WHERE NOT (NEW.pixel_x_size &gt; 0);
END

CREATE TRIGGER 'gpkg_tile_matrix_pixel_y_size_insert'
BEFORE INSERT ON 'gpkg_tile_matrix'
FOR EACH ROW BEGIN
SELECT RAISE(ABORT, 'insert on table ''gpkg_tile_matrix'' violates constraint: pixel_y_size must be greater than 0')
WHERE NOT (NEW.pixel_y_size &gt; 0);
END

CREATE TRIGGER 'gpkg_tile_matrix_pixel_y_size_update'
BEFORE UPDATE OF pixel_y_size ON 'gpkg_tile_matrix'
FOR EACH ROW BEGIN
SELECT RAISE(ABORT, 'update on table ''gpkg_tile_matrix'' violates constraint: pixel_y_size must be greater than 0')
WHERE NOT (NEW.pixel_y_size &gt; 0);
END
----

=== metadata

.metadata Trigger Definition SQL
[source,sql]
----
CREATE TRIGGER 'gpkg_metadata_md_scope_insert'
BEFORE INSERT ON 'gpkg_metadata'
FOR EACH ROW BEGIN
SELECT RAISE(ABORT, 'insert on table gpkg_metadata violates
constraint: md_scope must be one of undefined | fieldSession |
collectionSession | series | dataset | featureType | feature |
attributeType | attribute | tile | model | catalogue | schema |
taxonomy software | service | collectionHardware |
nonGeographicDataset | dimensionGroup')
WHERE NOT(NEW.md_scope IN
('undefined','fieldSession','collectionSession','series','dataset',
'featureType','feature','attributeType','attribute','tile','model',
'catalogue','schema','taxonomy','software','service',
'collectionHardware','nonGeographicDataset','dimensionGroup'));
END

CREATE TRIGGER 'gpkg_metadata_md_scope_update'
BEFORE UPDATE OF 'md_scope' ON 'gpkg_metadata'
FOR EACH ROW BEGIN
SELECT RAISE(ABORT, 'update on table gpkg_metadata violates
constraint: md_scope must be one of undefined | fieldSession |
collectionSession | series | dataset | featureType | feature |
attributeType | attribute | tile | model | catalogue | schema |
taxonomy software | service | collectionHardware |
nonGeographicDataset | dimensionGroup')
WHERE NOT(NEW.md_scope IN
('undefined','fieldSession','collectionSession','series','dataset',
'featureType','feature','attributeType','attribute','tile','model',
'catalogue','schema','taxonomy','software','service',
'collectionHardware','nonGeographicDataset','dimensionGroup'));
END
----

=== metadata_reference

.gpkg_metadata_reference Trigger Definition SQL
----
CREATE TRIGGER 'gpkg_metadata_reference_reference_scope_insert'
BEFORE INSERT ON 'gpkg_metadata_reference'
FOR EACH ROW BEGIN
SELECT RAISE(ABORT, 'insert on table gpkg_metadata_reference
violates constraint: reference_scope must be one of "geopackage",
table", "column", "row", "row/col"')
WHERE NOT NEW.reference_scope IN
('geopackage','table','column','row','row/col');
END

CREATE TRIGGER 'gpkg_metadata_reference_reference_scope_update'
BEFORE UPDATE OF 'reference_scope' ON 'gpkg_metadata_reference'
FOR EACH ROW BEGIN
SELECT RAISE(ABORT, 'update on table gpkg_metadata_reference
violates constraint: referrence_scope must be one of "geopackage",
"table", "column", "row", "row/col"')
WHERE NOT NEW.reference_scope IN
('geopackage','table','column','row','row/col');
END

CREATE TRIGGER 'gpkg_metadata_reference_column_name_insert'
BEFORE INSERT ON 'gpkg_metadata_reference'
FOR EACH ROW BEGIN
SELECT RAISE(ABORT, 'insert on table gpkg_metadata_reference
violates constraint: column name must be NULL when reference_scope
is "geopackage", "table" or "row"')
WHERE (NEW.reference_scope IN ('geopackage','table','row')
AND NEW.column_name IS NOT NULL);
SELECT RAISE(ABORT, 'insert on table gpkg_metadata_reference
violates constraint: column name must be defined for the specified
table when reference_scope is "column" or "row/col"')
WHERE (NEW.reference_scope IN ('column','row/col')
AND NOT NEW.table_name IN (
SELECT name FROM SQLITE_MASTER WHERE type = 'table'
AND name = NEW.table_name
AND sql LIKE ('%' || NEW.column_name || '%')));
END

CREATE TRIGGER 'gpkg_metadata_reference_column_name_update'
BEFORE UPDATE OF column_name ON 'gpkg_metadata_reference'
FOR EACH ROW BEGIN
SELECT RAISE(ABORT, 'update on table gpkg_metadata_reference
violates constraint: column name must be NULL when reference_scope
is "geopackage", "table" or "row"')
WHERE (NEW.reference_scope IN ('geopackage','table','row')
AND NEW.column_nameIS NOT NULL);
SELECT RAISE(ABORT, 'update on table gpkg_metadata_reference
violates constraint: column name must be defined for the specified
table when reference_scope is "column" or "row/col"')
WHERE (NEW.reference_scope IN ('column','row/col')
AND NOT NEW.table_name IN (
SELECT name FROM SQLITE_MASTER WHERE type = 'table'
AND name = NEW.table_name
AND sql LIKE ('%' || NEW.column_name || '%')));
END

CREATE TRIGGER 'gpkg_metadata_reference_row_id_value_insert'
BEFORE INSERT ON 'gpkg_metadata_reference'
FOR EACH ROW BEGIN
SELECT RAISE(ABORT, 'insert on table gpkg_metadata_reference
violates constraint: row_id_value must be NULL when reference_scope
is "geopackage", "table" or "column"')
WHERE NEW.reference_scope IN ('geopackage','table','column')
AND NEW.row_id_value IS NOT NULL;
SELECT RAISE(ABORT, 'insert on table gpkg_metadata_reference
violates constraint: row_id_value must exist in specified table when
reference_scope is "row" or "row/col"')
WHERE NEW.reference_scope IN ('row','row/col')
AND NOT EXISTS (SELECT rowid
FROM (SELECT NEW.table_name AS table_name) WHERE rowid =
NEW.row_id_value);
END

CREATE TRIGGER 'gpkg_metadata_reference_row_id_value_update'
BEFORE UPDATE OF 'row_id_value' ON 'gpkg_metadata_reference'
FOR EACH ROW BEGIN
SELECT RAISE(ABORT, 'update on table gpkg_metadata_reference
violates constraint: row_id_value must be NULL when reference_scope
is "geopackage", "table" or "column"')
WHERE NEW.reference_scope IN ('geopackage','table','column')
AND NEW.row_id_value IS NOT NULL;
SELECT RAISE(ABORT, 'update on table gpkg_metadata_reference
violates constraint: row_id_value must exist in specified table when
reference_scope is "row" or "row/col"')
WHERE NEW.reference_scope IN ('row','row/col')
AND NOT EXISTS (SELECT rowid
FROM (SELECT NEW.table_name AS table_name) WHERE rowid =
NEW.row_id_value);
END

CREATE TRIGGER 'gpkg_metadata_reference_timestamp_insert'
BEFORE INSERT ON 'gpkg_metadata_reference'
FOR EACH ROW BEGIN
SELECT RAISE(ABORT, 'insert on table gpkg_metadata_reference
violates constraint: timestamp must be a valid time in ISO 8601
"yyyy-mm-ddThh-mm-ss.cccZ" form')
WHERE NOT (NEW.timestamp GLOB
'[1-2][0-9][0-9][0-9]-[0-1][0-9]-[1-3][0-9]T[0-2][0-9]:[0-5][0-
9]:[0-5][0-9].[0-9][0-9][0-9]Z'
AND strftime('%s',NEW.timestamp) NOT NULL);
END
CREATE TRIGGER 'gpkg_metadata_reference_timestamp_update'
BEFORE UPDATE OF 'timestamp' ON 'gpkg_metadata_reference'
FOR EACH ROW BEGIN
SELECT RAISE(ABORT, 'update on table gpkg_metadata_reference
violates constraint: timestamp must be a valid time in ISO 8601
"yyyy-mm-ddThh-mm-ss.cccZ" form')
WHERE NOT (NEW.timestamp GLOB
'[1-2][0-9][0-9][0-9]-[0-1][0-9]-[1-3][0-9]T[0-2][0-9]:[0-5][0-
9]:[0-5][0-9].[0-9][0-9][0-9]Z'
AND strftime('%s',NEW.timestamp) NOT NULL);
END
----

=== sample_feature_table

.EXAMPLE: features table Trigger Definition SQL
[source,sql]
----
CREATE TRIGGER "sample_feature_table_real_insert"
BEFORE INSERT ON "sample_feature_table"
FOR EACH ROW BEGIN
SELECT RAISE(ABORT, 'insert on table ''sample_feature_table''
violates constraint: real_attribute must be greater than 0')
WHERE NOT (NEW.real_attribute &gt; 0);
END

CREATE TRIGGER "sample_feature_table_real_update"
BEFORE UPDATE OF "real_attribute" ON "sample_feature_tableâ
FOR EACH ROW BEGIN
SELECT RAISE (ABORT, 'update of ''real_attribute'' on table
''sample_feature_table'' violates constraint: real_attribute value
must be &gt; 0')
WHERE NOT (NEW.real_attribute &gt; 0);
END
----

where &lt;t&gt; and &lt;c&gt; are replaced with the names of the feature table and geometry column being inserted or updated.

=== sample_matrix_tiles

.tiles table Trigger Definition SQL
[source,sql]
----
CREATE TRIGGER "sample_matrix_tiles_zoom_insert"
BEFORE INSERT ON "sample_matrix_tiles"
FOR EACH ROW BEGIN
SELECT RAISE(ABORT, 'insert on table ''sample_matrix_tiles'' violates constraint: zoom_level not specified for table in gpkg_tile_matrix')
WHERE NOT (NEW.zoom_level IN (SELECT zoom_level FROM gpkg_tile_matrix WHERE t_table_name = 'sample_matrix_tiles')) ;
END

CREATE TRIGGER "sample_matrix_tiles_zoom_update"
BEFORE UPDATE OF zoom_level ON "sample_matrix_tiles"
FOR EACH ROW BEGIN
SELECT RAISE(ABORT, 'update on table ''sample_matrix_tiles'' violates constraint: zoom_level not specified for table in gpkg_tile_matrix')
WHERE NOT (NEW.zoom_level IN (SELECT zoom_level FROM gpkg_tile_matrix WHERE t_table_name = 'sample_matrix_tiles')) ;
END

CREATE TRIGGER "sample_matrix_tiles_tile_column_insert"
BEFORE INSERT ON "sample_matrix_tiles"
FOR EACH ROW BEGIN
SELECT RAISE(ABORT, 'insert on table ''sample_matrix_tiles'' violates constraint: tile_column cannot be &lt; 0')
WHERE (NEW.tile_column &lt; 0) ;
SELECT RAISE(ABORT, 'insert on table ''sample_matrix_tiles'' violates constraint: tile_column must by &lt; matrix_width specified for table and zoom level in gpkg_tile_matrix')
WHERE NOT (NEW.tile_column &lt; (SELECT matrix_width FROM gpkg_tile_matrix WHERE t_table_name = 'sample_matrix_tiles' AND zoom_level = NEW.zoom_level));
END

CREATE TRIGGER "sample_matrix_tiles_tile_column_update"
BEFORE UPDATE OF tile_column ON "sample_matrix_tiles"
FOR EACH ROW BEGIN
SELECT RAISE(ABORT, 'update on table ''sample_matrix_tiles'' violates constraint: tile_column cannot be &lt; 0')
WHERE (NEW.tile_column &lt; 0) ;
SELECT RAISE(ABORT, 'update on table ''sample_matrix_tiles'' violates constraint: tile_column must by &lt; matrix_width specified for table and zoom level in gpkg_tile_matrix')
WHERE NOT (NEW.tile_column &lt; (SELECT matrix_width FROM gpkg_tile_matrix WHERE t_table_name = 'sample_matrix_tiles' AND zoom_level = NEW.zoom_level));
END

CREATE TRIGGER "sample_matrix_tiles_tile_row_insert"
BEFORE INSERT ON "sample_matrix_tiles"
FOR EACH ROW BEGIN
SELECT RAISE(ABORT, 'insert on table ''sample_matrix_tiles'' violates constraint: tile_row cannot be &lt; 0')
WHERE (NEW.tile_row &lt; 0) ;
SELECT RAISE(ABORT, 'insert on table ''sample_matrix_tiles'' violates constraint: tile_row must by &lt; matrix_height specified for table and zoom level in gpkg_tile_matrix')
WHERE NOT (NEW.tile_row &lt; (SELECT matrix_height FROM gpkg_tile_matrix WHERE t_table_name = 'sample_matrix_tiles' AND zoom_level = NEW.zoom_level));
END

CREATE TRIGGER "sample_matrix_tiles_tile_row_update"
BEFORE UPDATE OF tile_row ON "sample_matrix_tiles"
FOR EACH ROW BEGIN
SELECT RAISE(ABORT, 'update on table ''sample_matrix_tiles'' violates constraint: tile_row cannot be &lt; 0')
WHERE (NEW.tile_row &lt; 0) ;
SELECT RAISE(ABORT, 'update on table ''sample_matrix_tiles'' violates constraint: tile_row must by &lt; matrix_height specified for table and zoom level in gpkg_tile_matrix')
WHERE NOT (NEW.tile_row &lt; (SELECT matrix_height FROM gpkg_tile_matrix WHERE t_table_name = 'sample_matrix_tiles' AND zoom_level = NEW.zoom_level));
END
----

[[geometry_types]]
[appendix]
== Geometry Types (Normative)

[[geometry_types_core]]
.Geometry Type Codes (Core)
[cols=",",options="header"]
|======
|Code|Name
|0|Geometry
|1|Point
|2|LineString
|3|Polygon
|4|MultiPoint
|5|MultiLineString
|6|MultiPolygon
|7|GeometryCollection
|======

[[geometry_types_extension]]
.Geometry Type Codes (Extension)
[cols=",",options="header"]
|======
|Code|Name
|8|CircularString
|9|CompoundCurve
|10|CurvePolygon
|11|MultiCurve
|12|MultiSurface
|13|Curve
|14|Surface
|======

Geometry subtypes are Point, Curve, Surface and GeometryCollection. Curve subtypes are LineString, CircularString and CompoundCurve.

Surface subtype is CurvePolygon.

CurvePolygon subtype is Polygon.

GeometryCollection subtypes are MultiPoint, MultiCurve and MultiSurface.

MultiCurve subtype is MultiLineString.

MultiSurface subtype is MultiPolygon.

[appendix]
== Other SQL/MM Functions (Informative)

To be completed.

[[tiles_factor2_example_appendix]]
[appendix]
== Tiles Zoom Times Two Example (Informative)

To be completed.

[[metadata_example_appendix]]
[appendix]
== Hierarchical Metadata Example (Informative)

To be completed.

[[raster_or_tile_metadata_example_appendix]]
[appendix]
== Raster or Tile Metadata Example (Informative)

To be completed.

[appendix]
== Normative References (Normative)

The following normative documents contain provisions which, through reference in this text, constitute provisions of OGC 12-128.
For dated references, subsequent amendments to, or revisions of, any of these publications do not apply.
However, parties to agreements based on this part of OGC 12-128 are encouraged to investigate the possibility of applying the most recent editions of the normative documents indicated below.
For undated references, the latest edition of the normative document referred to applies.

[bibliography]
- [[[1]]] ISO 19105: Geographic information â Conformance and Testing
- [[[2]]] ISO/IEC 9075:1992 Information Technology - Database Language SQL SQL92)
- [[[3]]] ISO/IEC 9075-1:2011 Information Technology - Database Language SQL - Part 1: Framework
- [[[4]]] ISO/IEC 9075-2:2011 Information Technology - Database Language SQL - Part 2: Foundation
- [[[5]]] ISO/IEC 9075-3:2008 Information Technology - Database Language SQL - Part 3: Call- Level Interface (SQL/CLI)
- [[[6]]] ISO/IEC 9075-4:2011 Information Technology - Database Language SQL - Part 4: Persistent Stored Modules (SQL/PSM)
- [[[7]]] ISO/IEC 9075-10:2008 Information Technology - Database Language SQL â Part 10: Object Language Bindings (SQL/OLB)
- [[[8]]] JDBCTM 3.0 Specification, Final Release, John Ellis &amp; Linda Ho with Maydene Fisher, Sun Microsystems, Inc., October, 2001.
- [[[9]]] SQLite (all parts) http://www.sqlite.org/ (online) http://www.sqlite.org/sqlite-doc-3071300.zip (offline)
- [[[10]]] http://sqlite.org/fileformat2.html
- [[[11]]] http://www.sqlite.org/formatchng.html
- [[[12]]] http://www.sqlite.org/download.html
- [[[13]]] OGC 06-103r4 OpenGISÂ® Implementation Standard for Geographic information - Simple feature access - Part 1: Common architecture Version: 1.2.1 2011-05-28 http://portal.opengeospatial.org/files/?artifact_id=25355 (also ISO/TC211 19125 Part 1)
- [[[14]]] OGC 06-104r4 OpenGISÂ® Implementation Standard for Geographic information - Simple feature access - Part 2: SQL option Version: 1.2.1 2010-08-04 http://portal.opengeospatial.org/files/?artifact_id=25354 (also ISO/TC211 19125 Part 2)
- [[[15]]] OGC 99-049 OpenGISÂ® Simple Features Specification for SQL Revision 1.1 5, 1999, Clause 2.3.8 http://portal.opengeospatial.org/files/?artifact_id=829 May
- [[[16]]] ISO/IEC 13249-3:2011 Information technology â SQL Multimedia and Application Packages - Part 3: Spatial (SQL/MM)
- [[[17]]] http://www.epsg.org/Geodetic.html
- [[[18]]] http://www.epsg-registry.org/
- [[[19]]] MIL_STD_2401 DoD World Geodetic System 84 (WGS84), 11 January 1994
- [[[20]]] OGC 07-057r7 OpenGISÂ® Web Map Tile Service Implementation Standard ersion 1.0.0 2010-04-06 (WMTS) http://portal.opengeospatial.org/files/?artifact_id=35326
- [[[21]]] ITU-T Recommendation T.81 (09/92) with Corrigendum (JPEG)
- [[[22]]] JPEG File Interchange Format Version 1.02, September 1, 1992 http://www.jpeg.org/public/jfif.pdf
- [[[23]]] IETF RFC 2046 Multipurpose Internet Mail Extensions (MIME) Part Two: Media Types http://www.ietf.org/rfc/rfc2046.txt
- [[[24]]] Portable Network Graphics http://libpng.org/pub/png/
- [[[25]]] MIME Media Types http://www.iana.org/assignments/media-types/index.html
- [[[26]]] WebP https://developers.google.com/speed/webp/
- [[[27]]] TIFF â Tagged Image File Format, Revision 6.0, Adobe Systems Inc., June 1992 http://partners.adobe.com/public/developer/en/tiff/TIFF6.pdf
- [[[28]]] GeoTIFF Format Specification, Revision 1.0, 10 November 1995; version 1.8.2 http://www.remotesensing.org/geotiff/spec/geotiffhome.html
- [[[29]]] NGA Standardization Document: Implementation Profile for Tagged Image File Format (TIFF) and Geographic Tagged Image File Format (GeoTIFF), Version 2.0, 2001-10-26 https://nsgreg.nga.mil/doc/view?i=2224
- [[[30]]] IETF RFC 3986 Uniform Resource Identifier (URI): Generic Syntax http://www.ietf.org/rfc/rfc3986.txt
- [[[31]]] OGC08-131r3 The Specification Model â A Standard for Modular specifications https://portal.opengeospatial.org/files/?artifact_id=34762
- [[[32]]] OGC10-103 Name type specification - specification elements http://portal.opengeospatial.org/files/?artifact_id=39194
- [[[33]]] W3C Recommendation 26 November 2008 Extensible Markup Language (XML) 1.0 (Fifth Edition) http://www.w3.org/TR/xml/
- [[[34]]] W3C Recommendation 8 December 2009 Namespaces in XML 1.0 (Third Edition) http://www.w3.org/TR/REC-xml-names/
- [[[35]]] W3C Recommendation 28 January 2009 XML Base (Second Edition) http://www.w3.org/TR/xmlbase/
- [[[36]]] W3C Recommendation 06 May 2010 XML Linking Language (XLink) Version 1.1 http://www.w3.org/TR/xlink11/
- [[[37]]] W3C Recommendation 28 October 2004 XML Schema Part 0: Primer Second Edition http://www.w3.org/TR/xmlschema-0/
- [[[38]]] W3C Recommendation 28 October 2004 XML Schema Part 1: Structures Second Edition http://www.w3.org/TR/xmlschema-1/
- [[[39]]] W3C Recommendation 28 October 2004 XML Schema Part 2: Datatypes Second Edition http://www.w3.org/TR/xmlschema-2/
- [[[40]]] ISO 19115 Geographic information -- Metadata, 8 May 2003, with Technical Corrigendum 1, 5 July 2006
- [[[41]]] ISO 8601 Representation of dates and times http://www.iso.org/iso/catalogue_detail?csnumber=40874
- [[[42]]] OGCÂ® 10-100r3 Geography Markup Language (GML) simple features profile (with technical note) http://portal.opengeospatial.org/files/?artifact_id=42729
- [[[43]]] Atom Syndication Format - IETF RFC 4287 http://tools.ietf.org/html/rfc4287
- [[[44]]] OGCÂ® OWS Context Documen Conceptual Model 12-080 OWS Context Conceptual Model https://portal.opengeospatial.org/wiki/OWSContextswg/ConceptualModelHome
- [[[45]]] OGCÂ® OWS Context Atom Encoding 2-084 OWS Context Atom Encoding https://portal.opengeospatial.org/wiki/OWS9/GeoPackageOWSContext
- [[[46]]] MIL-STD-2500C DoD Interface Standard: National Imagery Transmission Format

[appendix]
== Bibliography (Informative)

[bibliography]
- [[[B1]]] http://developer.android.com/guide/topics/data/data-storage.html#db
- [[[B2]]] https://developer.apple.com/technologies/ios/data-management.html
- [[[B3]]] http://www.epsg.org/guides/docs/G7-1.pdf
- [[[B4]]] http://www.gdal.org/ogr/
- [[[B5]]] http://www.gdal.org/ogr/drv_sqlite.html
- [[[B6]]] http://trac.osgeo.org/geos/wiki/Applications
- [[[B7]]] http://www.qgis.org/
- [[[B8]]] http://hub.qgis.org/projects/android-qgis
- [[[B9]]] http://www.luciad.com/products/LuciadMobile
- [[[B10]]] http://www.falconview.org/trac/FalconView/downloads/26
- [[[B11]]] http://wiki.openstreetmap.org/wiki/TMS
- [[[B12]]] https://github.com/mapbox/mbtiles-spec
- [[[B13]]] https://www.gaia-gis.it/fossil/librasterlite/index
- [[[B14]]] http://wiki.openstreetmap.org/wiki/Main_Page
- [[[B15]]] http://code.google.com/p/osmdroid/
- [[[B16]]] http://www.falconview.org/trac/FalconView
- [[[B17]]] http://code.google.com/p/big-planet-tracks/
- [[[B18]]] http://en.wikipedia.org/wiki/ASCII
- [[[B19]]] âSQL for Smarties: Advanced SQL Programmingâ Joe Selko, Morgan Kaufmann, 1995, ISBN 1-55860-323-9
- [[[B20]]] NATO IIRS STANAG, NATO Imagery Interpretability Rating Scale (NIIRS) STANAG 7194 Edition 1 2009
- [[[B21]]] https://nsgreg.nga.mil/doc/view?i=2129
- [[[B22]]] U.S. National Image Interpretability Rating Scales http://www.fas.org/irp/imint/niirs.htm
- [[[B23]]] Civil NIIRS http://www.fas.org/irp/imint/niirs_c/index.html
- [[[B24]]] Civil NIIRS Reference Guide http://www.fas.org/irp/imint/niirs_c/guide.htm
- [[[B25]]] Additional Civil NIIRS Criteria http://www.fas.org/irp/imint/niirs_c/app2.htm
- [[[B26]]] Sample Civil NIIRS Images http://www.fas.org/irp/imint/niirs_c/append.htm
- [[[B27]]] History of NIIRS http://www.fas.org/irp/imint/niirs_c/app3.htm
- [[[B28]]] http://www.ucgis.org/priorities/research/research_white/1998%20Papers/data.html
- [[[B29]]] http://www.gdal.org/frmt_rasterlite.html
- [[[B30]]] https://www.gaia-gis.it/fossil/libspatialite/wiki?name=switching-to-4.0
- [[[B31]]] http://www.sqlite.org/lang_createtable.html#rowid
- [[[B32]]] ISO 19115-2 Geographic information - - Metadata - Part 2: Metadata for imagery and gridded data
- [[[B33]]] ISO 19139: Geographic information -- Metadata -- XML schema implementation
- [[[B34]]] Dublin Core Metadata Initiative http://dublincore.org/ IETF RFC 5013
- [[[B35]]] ISO 15836:2009 http://www.iso.org/iso/home/store/catalogue_tc/catalogue_detail.htm?csnumber=52142
- [[[B36]]] Content Standard for Digital Geospatial Metadata (CSDGM)
- [[[B37]]] http://www.fgdc.gov/standards/projects/FGDC-standards-projects/metadata/base-metadata/index_html
- [[[B38]]] Department of Defense Discovery Metadata Specification (DDMS) http://metadata.ces.mil/mdr/irs/DDMS/
- [[[B39]]] NMF NGA.STND.0012_2.0 / NMIS NGA.STND.0018_1.0
- [[[B40]]] Unified Modeling Language (UML) http://www.uml.org/
- [[[B41]]] XML for Metadata Interchange (XMI) http://www.omg.org/spec/XMI/
- [[[B42]]] Geography Markup Language (GML) ISO 19136:2007
- [[[B43]]] ISO 19110 Geographic information â Methodology for feature cataloguing
- [[[B44]]] Web Ontology Language (OWL) http://www.w3.org/TR/2009/REC-owl2-xml- serialization-20091027/
- [[[B45]]] Simple Knowledge Organization System (SKOS) http://www.w3.org/TR/skos-reference/
- [[[B46]]] STANAG 7074 Digital Geographic Information Exchange Standard (DIGEST) - AGeoP-3A, edition 1, 19 October 1994 http://www.dgiwg.org/dgiwg/htm/documents/historical_documents.htm
- [[[B47]]] ISO 19109 Geographic information - Rules for application schema
- [[[B48]]] http://www.sqlite.org/changes.html
- [[[B49]]] http://sqlite.org/src4/doc/trunk/www/design.wiki
- [[[B50]]] http://trac.osgeo.org/geos/
- [[[B51]]] http://trac.osgeo.org/proj
- [[[B52]]] https://www.gaia-gis.it/fossil/libspatialite/index
- [[[B53]]] http://www.gaia-gis.it/gaia-sins/BLOB-Geometry.html</pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnote_1">
<a href="#_footnoteref_1">1</a>. SQLite version 4 <<B49>>, which will be an alternative to version 3, not a replacement thereof, was not available when this specification was written. See Future Work clause in Annex B.
</div>
<div class="footnote" id="_footnote_2">
<a href="#_footnoteref_2">2</a>. SQLite is in the public domain (see <a href="http://www.sqlite.org/copyright.html)">http://www.sqlite.org/copyright.html)</a>
</div>
<div class="footnote" id="_footnote_3">
<a href="#_footnoteref_3">3</a>. New applications should use the latest available SQLite version software
</div>
<div class="footnote" id="_footnote_4">
<a href="#_footnoteref_4">4</a>. The following statement selects an ISO 8601timestamp value using the SQLite strftime function: SELECT (strftime('%Y-%m-%dT%H:%M:%fZ','now')).
</div>
<div class="footnote" id="_footnote_5">
<a href="#_footnoteref_5">5</a>. OGC WKB simple feature geometry types specified in <<13>> are a subset of the ISO WKB geometry types specified in <<16>>
</div>
<div class="footnote" id="_footnote_6">
<a href="#_footnoteref_6">6</a>. Functions other than the minimal runtime SQL functions required by triggers in a GeoPackage file SHOULD be documented in the gpkg_extensions table and provided by a GeoPackage SQLite Extension.
</div>
<div class="footnote" id="_footnote_7">
<a href="#_footnoteref_7">7</a>. SQL functions on geometries in addition to those defined in this clause SHOULD conform to the SF/SQL <<13>><<14>><<15>> and SQL/MM <<16>> specifications cited in clause <<sfsql_intro>> above.
</div>
<div class="footnote" id="_footnote_8">
<a href="#_footnoteref_8">8</a>. A GeoPackage is not required to contain any feature data tables. Feature data tables in a GeoPackage MAY be empty.
</div>
<div class="footnote" id="_footnote_9">
<a href="#_footnoteref_9">9</a>. GeoPackage applications MAY use SQL triggers or tests in application code to meet this requirement
</div>
<div class="footnote" id="_footnote_10">
<a href="#_footnoteref_10">10</a>. Images of multiple MIME types MAY be stored in given table. For example, in a tiles table, image/png format tiles could be used for transparency where there is no data on the tile edges, and image/jpeg format tiles could be used for storage efficiency where there is image data for all pixels. Images of multiple bit depths of the same MIME type MAY also be stored in a given table, for example image/png tiles in both 8 and 24 bit depths.
</div>
<div class="footnote" id="_footnote_11">
<a href="#_footnoteref_11">11</a>. See clause 3.2.1.1.1 for use of other zoom levels as a registered extensions.
</div>
<div class="footnote" id="_footnote_12">
<a href="#_footnoteref_12">12</a>. See Clauses <<ext_webp_tiles>>, <<ext_tiff_tiles>>, <<ext_nitf_tiles>> and <<ext_other_tiles>> regarding use of alternative tile MIME types as registered extensions.
</div>
<div class="footnote" id="_footnote_13">
<a href="#_footnoteref_13">13</a>. See Clauses <<ext_webp_tiles>>, <<ext_tiff_tiles>>, <<ext_nitf_tiles>> and <<ext_other_tiles>> regarding use of alternative tile MIME types as registered extensions.
</div>
<div class="footnote" id="_footnote_14">
<a href="#_footnoteref_14">14</a>. GeoPackage applications MAY query the gpkg_tile_matrix_metadata table or the tile matrix user data table to determine the minimum and maximum zoom levels for a given tile matrix table.
</div>
<div class="footnote" id="_footnote_15">
<a href="#_footnoteref_15">15</a>. GeoPackage applications MAY query the tiles (matrix set) table to determine which tiles are available at each zoom level.
</div>
<div class="footnote" id="_footnote_16">
<a href="#_footnoteref_16">16</a>. GeoPackage applications that insert, update, or delete tiles (matrix set) table tiles row records are responsible for maintaining the corresponding descriptive contents of the gpkg_tile_matrix_metadata table.
</div>
<div class="footnote" id="_footnote_17">
<a href="#_footnoteref_17">17</a>. A GeoPackage is not required to contain any tile matrix data tables. Tile matrix user data tables in a GeoPackage MAY be empty.
</div>
<div class="footnote" id="_footnote_18">
<a href="#_footnoteref_18">18</a>. A GeoPackage is not required to contain a gpkg_data_columns table. The gpkg_data_columns table in a GeoPackage MAY be empty.
</div>
<div class="footnote" id="_footnote_19">
<a href="#_footnoteref_19">19</a>. GeoPackages MAY contain MIME types other than the raster image types specified in clauses 2.2.4, 2.2.5, 3.2.2, 3.2.3, and 3.2.4 as feature attributes, but they are not required to do so.
</div>
<div class="footnote" id="_footnote_20">
<a href="#_footnoteref_20">20</a>. Informative examples of hierarchical metadata are provided in &lt;&lt;metadata_example_appendix&gt;&gt;
</div>
<div class="footnote" id="_footnote_21">
<a href="#_footnoteref_21">21</a>. An informative example of raster image metadata is provided in &lt;&lt;tiles_example_appendix&gt;&gt;
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 0.9.1<br>
Last updated 2013-10-05 20:52:00 UTC
</div>
</div>
</body>
</html>