<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.8">
<title>OGC GeoPackage Related Tables Extension</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<link rel="stylesheet" href="./asciidoctor.css">
<link rel="stylesheet" href="./pygments-default.css">
</head>
<body class="book">
<div id="header">
<h1>OGC GeoPackage Related Tables Extension</h1>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div style="page-break-after: always;"></div>
<table class="tableblock frame-none grid-none stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-right valign-top" style="background-color: #FFFFFF;"></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><strong class="big">Open Geospatial Consortium</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Submission Date: 2018-08-13</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Approval Date:   2019-03-26</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Publication Date:   2019-05-08</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" style="background-color: #FFFFFF;"><p class="tableblock">External identifier of this OGC&#174; document: <a href="http://www.opengis.net/doc/IS/gpkg-rte/1.0" class="bare">http://www.opengis.net/doc/IS/gpkg-rte/1.0</a></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Internal reference number of this OGC&#174; document:    18-000</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Version: 1.0</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Category: OGC&#174; Encoding Standard</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Editor:   Jeff Yutzler</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-none grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><strong class="big">OGC GeoPackage Related Tables Extension</strong></p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-none grid-none stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><strong>Copyright notice</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Copyright &#169; 2019 Open Geospatial Consortium</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock">To obtain additional rights of use, visit <a href="http://www.opengeospatial.org/legal/" class="bare">http://www.opengeospatial.org/legal/</a></p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-none grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><strong>Warning</strong></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>This document is an OGC Member approved international standard. This document is available on a royalty free, non-discriminatory basis. Recipients of this document are invited to submit, with their comments, notification of any relevant patent rights of which they are aware and to provide supporting documentation.</p>
</div>
<table class="tableblock frame-all grid-none" style="width: 50%;">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Document type:   	OGC® Standard</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Document subtype:   </p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Document stage:   	Approved for public release</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Document language: 	English</p></td>
</tr>
</tbody>
</table>
<div style="page-break-after: always;"></div>
<div class="paragraph">
<p>License Agreement</p>
</div>
<div class="paragraph">
<p><span class="small">Permission is hereby granted by the Open Geospatial Consortium, ("Licensor"), free of charge and subject to the terms set forth below, to any person obtaining a copy of this Intellectual Property and any associated documentation, to deal in the Intellectual Property without restriction (except as set forth below), including without limitation the rights to implement, use, copy, modify, merge, publish, distribute, and/or sublicense copies of the Intellectual Property, and to permit persons to whom the Intellectual Property is furnished to do so, provided that all copyright notices on the intellectual property are retained intact and that each person to whom the Intellectual Property is furnished agrees to the terms of this Agreement.</span></p>
</div>
<div class="paragraph">
<p><span class="small">If you modify the Intellectual Property, all copies of the modified Intellectual Property must include, in addition to the above copyright notice, a notice that the Intellectual Property includes modifications that have not been approved or adopted by LICENSOR.</span></p>
</div>
<div class="paragraph">
<p><span class="small">THIS LICENSE IS A COPYRIGHT LICENSE ONLY, AND DOES NOT CONVEY ANY RIGHTS UNDER ANY PATENTS THAT MAY BE IN FORCE ANYWHERE IN THE WORLD.</span></p>
</div>
<div class="paragraph">
<p><span class="small">THE INTELLECTUAL PROPERTY IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, AND NONINFRINGEMENT OF THIRD PARTY RIGHTS. THE COPYRIGHT HOLDER OR HOLDERS INCLUDED IN THIS NOTICE DO NOT WARRANT THAT THE FUNCTIONS CONTAINED IN THE INTELLECTUAL PROPERTY WILL MEET YOUR REQUIREMENTS OR THAT THE OPERATION OF THE INTELLECTUAL PROPERTY WILL BE UNINTERRUPTED OR ERROR FREE. ANY USE OF THE INTELLECTUAL PROPERTY SHALL BE MADE ENTIRELY AT THE USER’S OWN RISK. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR ANY CONTRIBUTOR OF INTELLECTUAL PROPERTY RIGHTS TO THE INTELLECTUAL PROPERTY BE LIABLE FOR ANY CLAIM, OR ANY DIRECT, SPECIAL, INDIRECT OR CONSEQUENTIAL DAMAGES, OR ANY DAMAGES WHATSOEVER RESULTING FROM ANY ALLEGED INFRINGEMENT OR ANY LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR UNDER ANY OTHER LEGAL THEORY, ARISING OUT OF OR IN CONNECTION WITH THE IMPLEMENTATION, USE, COMMERCIALIZATION OR PERFORMANCE OF THIS INTELLECTUAL PROPERTY.</span></p>
</div>
<div class="paragraph">
<p><span class="small">This license is effective until terminated. You may terminate it at any time by destroying the Intellectual Property together with all copies in any form. The license will also terminate if you fail to comply with any term or condition of this Agreement. Except as provided in the following sentence, no such termination of this license shall require the termination of any third party end-user sublicense to the Intellectual Property which is in force as of the date of notice of such termination. In addition, should the Intellectual Property, or the operation of the Intellectual Property, infringe, or in LICENSOR&#8217;s sole opinion be likely to infringe, any patent, copyright, trademark or other right of a third party, you agree that LICENSOR, in its sole discretion, may terminate this license without any compensation or liability to you, your licensees or any other party. You agree upon termination of any kind to destroy or cause to be destroyed the Intellectual Property together with all copies in any form, whether held by you or by any third party.</span></p>
</div>
<div class="paragraph">
<p><span class="small">Except as contained in this notice, the name of LICENSOR or of any other holder of a copyright in all or part of the Intellectual Property shall not be used in advertising or otherwise to promote the sale, use or other dealings in this Intellectual Property without prior written authorization of LICENSOR or such copyright holder. LICENSOR is and shall at all times be the sole entity that may authorize you or any third party to use certification marks, trademarks or other special designations to indicate compliance with any LICENSOR standards or specifications. This Agreement is governed by the laws of the Commonwealth of Massachusetts. The application to this Agreement of the United Nations Convention on Contracts for the International Sale of Goods is hereby expressly excluded. In the event any provision of this Agreement shall be deemed unenforceable, void or invalid, such provision shall be modified so as to make it valid and enforceable, and as so modified the entire Agreement shall remain in full force and effect. No decision, action or inaction by LICENSOR shall be construed to be a waiver of any rights or remedies available to it.</span></p>
</div>
<div style="page-break-after: always;"></div>
<div id="toc" class="toc">
<div id="toctitle" class="title">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_scope">1. Scope</a></li>
<li><a href="#_conformance">2. Conformance</a></li>
<li><a href="#_references">3. References</a></li>
<li><a href="#_terms_and_definitions">4. Terms and Definitions</a></li>
<li><a href="#_conventions">5. Conventions</a>
<ul class="sectlevel2">
<li><a href="#_identifiers">5.1. Identifiers</a></li>
</ul>
</li>
<li><a href="#DesignClause">6. Design (Informative)</a>
<ul class="sectlevel2">
<li><a href="#_overview">6.1. Overview</a></li>
<li><a href="#_requirements_classes">6.2. Requirements Classes</a>
<ul class="sectlevel3">
<li><a href="#_media">6.2.1. Media</a></li>
<li><a href="#_simple_attributes">6.2.2. Simple Attributes</a></li>
<li><a href="#_features">6.2.3. Features</a></li>
<li><a href="#_attributes">6.2.4. Attributes</a></li>
<li><a href="#_tiles">6.2.5. Tiles</a></li>
</ul>
</li>
<li><a href="#_usage_scenario">6.3. Usage scenario</a></li>
</ul>
</li>
<li><a href="#_requirements_normative">7. Requirements (Normative)</a>
<ul class="sectlevel2">
<li><a href="#_common_requirements_table_definitions">7.1. Common Requirements – Table Definitions</a>
<ul class="sectlevel3">
<li><a href="#_gpkg_extensions">7.1.1. <code>gpkg_extensions</code></a></li>
<li><a href="#_gpkgext_relations">7.1.2. <code>gpkgext_relations</code></a></li>
<li><a href="#user_defined_mapping_table">7.1.3. User-Defined Mapping Tables</a></li>
<li><a href="#user_defined_related_data_table">7.1.4. User-Defined Related Data Tables</a></li>
</ul>
</li>
<li><a href="#media_rc">7.2. Media Requirements Class</a>
<ul class="sectlevel3">
<li><a href="#_user_defined_media_tables">7.2.1. User-Defined Media Tables</a></li>
</ul>
</li>
<li><a href="#sa_rc">7.3. Simple Attributes Requirements Class</a>
<ul class="sectlevel3">
<li><a href="#_user_defined_simple_attribute_tables">7.3.1. User-Defined Simple Attribute Tables</a></li>
</ul>
</li>
<li><a href="#f_rc">7.4. Related Features Requirements Class</a>
<ul class="sectlevel3">
<li><a href="#_user_defined_related_features_tables">7.4.1. User-Defined Related Features Tables</a></li>
</ul>
</li>
<li><a href="#attr_rc">7.5. Related Attributes Requirements class</a>
<ul class="sectlevel3">
<li><a href="#_user_defined_related_attributes_tables">7.5.1. User-Defined Related Attributes Tables</a></li>
</ul>
</li>
<li><a href="#tiles_rc">7.6. Related Tiles Requirements class</a>
<ul class="sectlevel3">
<li><a href="#_user_defined_related_tiles_tables">7.6.1. User-Defined Related Tiles Tables</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_media_types_for_any_data_encodings">8. Media Types for any data encoding(s)</a></li>
<li><a href="#_conformance_class_abstract_test_suite_normative">Annex A: Conformance Class Abstract Test Suite (Normative)</a>
<ul class="sectlevel2">
<li><a href="#_common_requirements">A.1. Common Requirements</a>
<ul class="sectlevel3">
<li><a href="#_gpkg_extensions_row">A.1.1. gpkg_extensions Row</a></li>
<li><a href="#_gpkgext_relations_row">A.1.2. gpkgext_relations Row</a></li>
<li><a href="#_gpkg_extensions_user_defined_mapping_table_rows">A.1.3. gpkg_extensions User Defined Mapping Table Rows</a></li>
<li><a href="#_gpkgext_relations_table">A.1.4. gpkgext_relations Table</a></li>
<li><a href="#_gpkgext_relations_base_table">A.1.5. gpkgext_relations Base Table</a></li>
<li><a href="#_gpkgext_relations_related_table">A.1.6. gpkgext_relations Related Table</a></li>
<li><a href="#_gpkgext_relations_user_defined_mapping_table">A.1.7. gpkgext_relations User Defined Mapping Table</a></li>
<li><a href="#_gpkgext_relations_relation_name">A.1.8. gpkgext_relations Relation Name</a></li>
<li><a href="#_user_defined_mapping_table">A.1.9. User Defined Mapping Table</a></li>
<li><a href="#_user_defined_mapping_table_base_id">A.1.10. User Defined Mapping Table Base ID</a></li>
<li><a href="#_user_defined_mapping_table_related_id">A.1.11. User Defined Mapping Table Related ID</a></li>
<li><a href="#_media_relation_name">A.1.12. Media Relation Name</a></li>
<li><a href="#_media_table_definition">A.1.13. Media Table Definition</a></li>
<li><a href="#_simple_attributes_relation_name">A.1.14. Simple Attributes Relation Name</a></li>
<li><a href="#_simple_attributes_table_definition">A.1.15. Simple Attributes Table Definition</a></li>
<li><a href="#_features_relation_name">A.1.16. Features Relation Name</a></li>
<li><a href="#_features_table_definition">A.1.17. Features Table Definition</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_example_informative">Annex B: Example (Informative)</a></li>
<li><a href="#_dublin_core_profile_informative">Annex C: Dublin Core Profile (Informative)</a></li>
<li><a href="#_table_definition_sql">Annex D: Table Definition SQL</a></li>
<li><a href="#_revision_history">Annex E: Revision History</a></li>
<li><a href="#Bibliography">Annex F: Bibliography</a></li>
</ul>
</div>
<div style="page-break-after: always;"></div>
<div class="paragraph">
<p><strong class="big">i.     Abstract</strong></p>
</div>
<div class="paragraph">
<p>A GeoPackage <a href="#GEOPACKAGE">[GEOPACKAGE]</a> is a platform-independent SQLite <a href="#SQLITE">[SQLITE]</a> database file that contains GeoPackage data and metadata tables.
GeoPackages, as described by the GeoPackage Encoding Standard <a href="#GPKG1_2">[GPKG1_2]</a> are designed to be extensible, including support for additional data types.
This document defines the Related Tables Extension (RTE) for the GeoPackage Encoding Standard.</p>
</div>
<div class="paragraph">
<p>The RTE defines the rules and requirements for creating relationships in a GeoPackage data store between geospatial data tables and other tables that contain or reference related content such as attributes or media.
Geospatial data tables (such as features or tiles tables) contain location information and/or geometries.
There are many examples of where the RTE can be used including relating parcel (land lot) features to pictures of that parcel or linking census boundaries to the related demographic census data.</p>
</div>
<div class="paragraph">
<p><strong class="big">ii.    Keywords</strong></p>
</div>
<div class="paragraph">
<p>The following are keywords to be used by search engines and document catalogues.</p>
</div>
<div class="paragraph">
<p>ogcdoc, OGC document, GeoPackage, extension, related tables, multimedia</p>
</div>
<div class="paragraph">
<p><strong class="big">iii.   Preface</strong></p>
</div>
<div class="paragraph">
<p>The GeoPackage Related Tables Extension (RTE) defines the rules and requirements for creating relationships in a GeoPackage <a href="#GEOPACKAGE">[GEOPACKAGE]</a> data store between geospatial or attributes data tables and other tables that contain or reference related content such as attributes or media.
Geospatial data tables (such as features or tiles tables) contain location information and/or geometries.
Conceptually, this extension is similar to the OGC Table Joining Service Interface Standard <a href="#OGC-TJS-IS">[OGC-TJS-IS]</a>.</p>
</div>
<div class="paragraph">
<p>One use case for this extension is to associate features with related multimedia content such as:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>photographs;</p>
</li>
<li>
<p>audio or video files; and</p>
</li>
<li>
<p>PDFs.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>There are many examples of where the RTE can be used including relating parcel (land lot) features to pictures of that parcel or linking census boundaries to the related demographic census data.
To support this capability, an ancillary data table (<code>gpkgext_relations</code>) is used in conjunction with user-defined mapping tables.</p>
</div>
<div class="paragraph">
<p>This extension, like all GeoPackage extensions, is intended to be transparent and to not interfere with GPKG compliant, but non-supporting, software packages. The OGC GeoPackage (GPKG) Related Tables Extension Interoperability Experiment (GPKG-RTE IE) <a href="#GPKG-RTE_IE">[GPKG-RTE_IE]</a> verified that the extension is correctly designed to meet the design goals and to be transparent in this manner. The goal of the IE was achieved by building GeoPackages containing embedded multimedia content and sharing those GeoPackages with other software products. This IE produced an OGC Engineering Report <a href="#GPKG-RTE_IE_ER">[GPKG-RTE_IE_ER]</a> that discusses whether the extension is fit for use and adoption by the OGC.</p>
</div>
<div class="paragraph">
<p>The following information is provided in compliance with the GeoPackage Extension template as defined in Annex E: GeoPackage Extension Template of the GeoPackage Standard. These additional introductory clauses are not elements in the standard OGC document template.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Extension Author: GeoPackage SWG; author_name <code>gpkg</code> to be used upon adoption.</p>
</li>
<li>
<p>Extension Name or Template: <code>related_tables</code>; upon adoption the alias <code>gpkg_related_tables</code> MAY be used</p>
</li>
<li>
<p>Extension Type: This extension provides new requirements dependent on GeoPackage <a href="http://www.geopackage.org/spec121/index.html#features">Clause 2.1</a>, <a href="http://www.geopackage.org/spec121/index.html#tiles">Clause 2.2</a>, and <a href="http://www.geopackage.org/spec121/index.html#attributes">Clause 2.4</a>.</p>
</li>
<li>
<p>Applicability: This extension defines relationships between feature tables and tables that hold related content, including multimedia, simple attributes, and other features.</p>
</li>
<li>
<p>Scope: read-write</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><em>Attention is drawn to the possibility that some of the elements of this document may be the subject of patent rights. The Open Geospatial Consortium shall not be held responsible for identifying any or all such patent rights.</em></p>
</div>
<div class="paragraph">
<p><em>Recipients of this document are requested to submit, with their comments, notification of any relevant patent claims or other intellectual property rights of which they may be aware that might be infringed by any implementation of the standard set forth in this document, and to provide supporting documentation.</em></p>
</div>
<div class="paragraph">
<p><strong class="big">iv.    Submitting organizations</strong></p>
</div>
<div class="paragraph">
<p>The following organizations submitted this Document to the Open Geospatial Consortium (OGC):</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Image Matters LLC</p>
</li>
<li>
<p>Compusult</p>
</li>
<li>
<p>Radiant Solutions</p>
</li>
<li>
<p>SOFWERX</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong class="big">v.     Submitters</strong></p>
</div>
<div class="paragraph">
<p>All questions regarding this submission should be directed to the editor or the submitters:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><strong>Name</strong></p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><strong>Affiliation</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Rob Cass</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Compusult</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Jeff Yutzler</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Image Matters</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Tracey Birch</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">SOFWERX</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Jason MacDonald</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Compusult</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Ashley Antonides</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Radiant Solutions</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Brad Hards</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">&#8201;&#8212;&#8201;</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_scope"><a class="anchor" href="#_scope"></a>1. Scope</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A GeoPackage <a href="#geopackage">[geopackage]</a> is a platform-independent SQLite <a href="#sqlite">[sqlite]</a> database file that contains GeoPackage data and metadata tables.
GeoPackage is designed to be extensible, including support for additional data types.</p>
</div>
<div class="paragraph">
<p>This document defines an extension that allows a GeoPackage to contain additional data that is related to geospatial (generally, but not exclusively, features) or attributes data.
As an example, this can be used to establish a many-to-many relationship between features (e.g. points, lines, or areas) and multimedia files.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_conformance"><a class="anchor" href="#_conformance"></a>2. Conformance</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This standard defines requirements for specialized attribute tables (containing information such as multimedia content to be stored in a GeoPackage, or simple attributes) and mapping tables to relate information in separate tables, along with metadata to describe those tables and the relationships between them.</p>
</div>
<div class="paragraph">
<p>Conformance with this standard shall be checked using all the relevant tests specified in Annex A (normative) of this document. The framework, concepts, and methodology for testing, and the criteria to be achieved to claim conformance are specified in the OGC Compliance Testing Policies and Procedures and the OGC Compliance Testing web site <a href="#CITE">[CITE]</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_references"><a class="anchor" href="#_references"></a>3. References</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following normative documents contain provisions that, through reference in this text, constitute provisions of this document. For dated references, subsequent amendments to, or revisions of, any of these publications do not apply. For undated references, the latest edition of the normative document referred to applies.</p>
</div>
<div id="GPKG1_2" class="dlist">
<dl>
<dt class="hdlist1">GPKG1_2 </dt>
<dd>
<p>OGC 12-128r14, <em>GeoPackage Encoding Standard 1.2.1</em>, September 6, 2018. <a href="http://www.geopackage.org/spec121/index.html">OGC 12-128r15 OGC® GeoPackage Encoding Standard v1.2.1 - with Corrigendum (Online).</a></p>
</dd>
</dl>
</div>
<div id="OWS_COMMON" class="dlist">
<dl>
<dt class="hdlist1">OWS_COMMON </dt>
<dd>
<p>OGC 06-121r9, <em>OGC Web Service Common Implementation Specification</em>, April 7, 2010. <a href="http://portal.opengeospatial.org/files/?artifact_id=38867" class="bare">http://portal.opengeospatial.org/files/?artifact_id=38867</a>.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_terms_and_definitions"><a class="anchor" href="#_terms_and_definitions"></a>4. Terms and Definitions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This document uses the terms defined in Sub-clause 5.3 of <a href="#OWS_COMMON">[OWS_COMMON]</a>, which is based on the ISO/IEC Directives, Part 2, Rules for the structure and drafting of International Standards. In particular, the word “shall” (not “must”) is the verb form used to indicate a requirement to be strictly followed to conform to this standard.</p>
</div>
<div class="paragraph">
<p>For the purposes of this document, the following additional terms and definitions apply.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">attributes data </dt>
<dd>
<p>Non-spatial tabular data that is designed to be joined with geospatial data for analysis. In a GeoPackage, attributes data is stored in attributes tables as per <a href="http://www.geopackage.org/spec121/#attributes" class="bare">http://www.geopackage.org/spec121/#attributes</a>.</p>
</dd>
<dt class="hdlist1">base data </dt>
<dd>
<p>Data that is linked in some way to related data (in other words, the <em>left</em> side of the A&#8594;B relationship). In this extension, base data is stored in geospatial or attributes data tables.</p>
</dd>
<dt class="hdlist1">cardinality </dt>
<dd>
<p>The property of a relationship between two entities, specifying whether it is one-to-one, one-to-many, many-to-one, or many-to-many.</p>
</dd>
<dt class="hdlist1">geospatial data </dt>
<dd>
<p>  Data containing location information and/or geometries.
In a GeoPackage, geospatial data may be stored in features or tiles tables.</p>
</dd>
<dt class="hdlist1">one-to-many </dt>
<dd>
<p>A type of cardinality in which an element of <code>A</code> may be linked to zero or more elements of <code>B</code>, but an element of <code>B</code> is linked to one and only one element of <code>A</code>.</p>
</dd>
<dt class="hdlist1">many-to-many </dt>
<dd>
<p>A type of cardinality in which an element of <code>A</code> may be linked to zero or more elements of <code>B</code> and an element of <code>B</code> may be linked to zero or more elements of <code>A</code>.</p>
</dd>
<dt class="hdlist1">many-to-one </dt>
<dd>
<p>A type of cardinality in which an element of <code>A</code> is linked to one and only one element of <code>B</code>, but an element of <code>B</code> may be linked to zero or more elements of <code>A</code>.</p>
</dd>
<dt class="hdlist1">related data </dt>
<dd>
<p>Data that is linked to in some way from base data (in other words, the <em>right</em> side of the A&#8594;B relationship). In this extension, related data is stored in a user-defined attributes table (of which user-defined media table is a special case) or feature table.</p>
</dd>
<dt class="hdlist1">relationship </dt>
<dd>
<p>For the purposes of this extension, a link between two entities <code>A</code> and <code>B</code>. <code>A</code> refers to base data and <code>B</code> refers to related data.</p>
</dd>
<dt class="hdlist1">user-defined attributes table </dt>
<dd>
<p>In this extension, a user-defined attributes table is a table that contains data that is related to existing geospatial data.</p>
</dd>
<dt class="hdlist1">user-defined mapping table </dt>
<dd>
<p>In this extension, a user-defined mapping table is a join table that links geospatial data and related data.</p>
</dd>
<dt class="hdlist1">user-defined media table </dt>
<dd>
<p>In this extension, a user-defined media table is a user-defined attributes table that is specifically designed to contain multimedia content (including, but not limited to, images, diagrams, formatted text, moving images or audio).</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_conventions"><a class="anchor" href="#_conventions"></a>5. Conventions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This sections provides details and examples for any conventions used in the document. Examples of conventions are symbols, abbreviations, use of XML schema, or special notes regarding how to read the document.</p>
</div>
<div class="sect2">
<h3 id="_identifiers"><a class="anchor" href="#_identifiers"></a>5.1. Identifiers</h3>
<div class="paragraph">
<p>The normative provisions in this specification are denoted by the URI prefix</p>
</div>
<div class="paragraph">
<p><a href="http://www.opengis.net/spec/gpkg-rt/1.0/" class="bare">http://www.opengis.net/spec/gpkg-rt/1.0/</a></p>
</div>
<div class="paragraph">
<p>All requirements and conformance tests that appear in this document are denoted by partial URIs which are relative to this base. For example, if the requirement identifier is shown as <code>/req/table-defs/extensions-ger</code> then the unique identifier for that requirement is <code><a href="http://www.opengis.net/spec/gpkg-rt/1.0/req/table-defs/extensions-ger" class="bare">http://www.opengis.net/spec/gpkg-rt/1.0/req/table-defs/extensions-ger</a></code>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="DesignClause"><a class="anchor" href="#DesignClause"></a>6. Design (Informative)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview"><a class="anchor" href="#_overview"></a>6.1. Overview</h3>
<div class="paragraph">
<p>The core of the Related Tables Extension is a mapping between existing table types defined by GPKG 1.2.1 - <a href="http://www.geopackage.org/spec121/#features">features</a>, <a href="http://www.geopackage.org/spec121/#tiles">tiles</a>, and <a href="http://www.geopackage.org/spec121/#attributes">attributes</a>. The mapping is defined by a new kind of table defined by the Related Tables Extension. The mapping table links related rows in those tables of those types by reference to their primary keys. For example, to link a row in Table A to a row in Table B, the mapping table includes a row that has two values - the primary key of the row from Table A, and the primary key of the row from Table B.</p>
</div>
<div class="paragraph">
<p>The mapping table allows many-to-many relationships. For example, to relate another row in Table B to the same row in Table A, the mapping table would simply include another row with the appropriate primary keys. See <a href="#img_relatedtablesconcept">Figure 1</a>.</p>
</div>
<div id="img_relatedtablesconcept" class="imageblock text-center">
<div class="content">
<img src="images/RelatedTablesConcept.png" alt="RelatedTablesConcept" width="800">
</div>
<div class="title">Figure 1. Related Tables concept</div>
</div>
<div class="paragraph">
<p>Mapping tables are unique to each pair of tables. The appropriate mapping table for each table pair (if any) is identified in a new table <code>gpkgext_relations</code>, which also specifies the name of the primary key column and the type of related data. This version of the Related Tables Extension supports five types of related data, which are separate conformance classes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>media</p>
</li>
<li>
<p>simple attributes</p>
</li>
<li>
<p>features</p>
</li>
<li>
<p>attributes</p>
</li>
<li>
<p>tiles</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The relationships can be considered directional, in that they relate primary keys of two tables in terms of base (the "left" or "from" side of the mapping) and related (the "right" or "to" side of the mapping). Since the related tables are valid GPKG 1.2 table types (potentially with some additional constraints), they can form the base side of another mapping. This allows chaining (directed graph) of relationships as appropriate to represent the modeled data. See <a href="#img_related_tables_uml">Figure 2</a>.</p>
</div>
<div id="img_related_tables_uml" class="imageblock text-center">
<div class="content">
<img src="images/related_tables_uml.png" alt="related tables uml" width="800">
</div>
<div class="title">Figure 2. Related Tables UML Diagram</div>
</div>
<div class="paragraph">
<p>The Related Tables Extension makes no constraints on the base table; it can be any table type supported by GPKG 1.2 - tiles, attributes or features. The related ("right" / "to") table is constrained by defined values of <code>relation_name</code> which is a TEXT value in the <code>gpkgext_relations</code> table. The constraining of relationships serves two purposes - it allows clients to provide appropriate rendering of content, and it communicates the intent of the relationship. Since the relationship is text, values other than those defined by the Related Tables Extension document can be used, however this will not be interoperable without some other coordination mechanism.</p>
</div>
</div>
<div class="sect2">
<h3 id="_requirements_classes"><a class="anchor" href="#_requirements_classes"></a>6.2. Requirements Classes</h3>
<div class="sect3">
<h4 id="_media"><a class="anchor" href="#_media"></a>6.2.1. Media</h4>
<div class="paragraph">
<p>The Media conformance class is used for related tables that provide multimedia content. The GPKG table type is <a href="http://www.geopackage.org/spec121/#attributes">attributes</a>. This was the original intent of the Related Tables Interoperability Experiment, and remains an important use. For example, using a <code>relation_name</code> of <code>media</code> provides the ability to link a set of photographs, line diagrams, documents, videos and/or audio files to a specific location (typically a point or polygon feature; but the Related Tables Extension does not prohibit some other kind of feature, or a row in an attribute table, or a row in a tile table being used as the base side of the mapping to the media table). The minimum content of the user defined media table is a primary key, a BLOB containing the media content (conceptually a byte array in the GeoPackage), and the <a href="https://www.iana.org/assignments/media-types/media-types.xhtml">IANA Media Type</a> type for the media content (e.g., <code>image/jpeg</code> for a photograph).</p>
</div>
<div class="paragraph">
<p>An example of this is a land parcel (land lot) as the feature (base table), and photographs of the location (house, commercial property, etc.) as the related media.</p>
</div>
<div class="paragraph">
<p>Note that the related table does not need to include additional columns, although additional columns are permitted in the related table definition, so they can be added if desired. The Related Tables Extension does not constrain or codify what the additional columns can be. Specific communities of interest may wish to provide usage profiles of the Media conformance class to meet specific operational or business needs. Clients that intend to display GeoPackages that make use of the Media conformance class of the Related Tables Extension may wish to provide additional attribute display on a "best efforts" basis (e.g., view with the column names as labels for the text and numeric row values).</p>
</div>
<div class="paragraph">
<p>For example, additional column content might include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>An indicator of the size of the media content (although this can be determined using the SQLite <code>length()</code> function);</p>
</li>
<li>
<p>A title or description of the content of the media BLOB; and/or</p>
</li>
<li>
<p>License information, usage restrictions, or security constraints.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_simple_attributes"><a class="anchor" href="#_simple_attributes"></a>6.2.2. Simple Attributes</h4>
<div class="paragraph">
<p>The Simple Attributes conformance class is used for related tables that include only "simple attributes" - those SQLite values that are part of the TEXT, INTEGER and REAL <a href="https://www.sqlite.org/datatype3.html#storage_classes_and_datatypes">storage classes</a>. The GPKG table type is <a href="http://www.geopackage.org/spec121/#attributes">attributes</a>. This is intended to support data that would typically be represented in Comma Separated Value (CSV) or spreadsheet formats, such as reference tables or observations. The simple attributes related table is not permitted to contain BLOB data (such as multimedia content, or feature GEOMETRY - these are covered by other conformance classes).</p>
</div>
<div class="paragraph">
<p>Only two columns are required in the related attributes table - the primary key, and one other column (which can be of TEXT, INTEGER, REAL, or a type that maps to one of those storage classes). As for Media, the Simple Attributes related table does not need to include additional columns, although additional columns are permitted in the related table definition, so they can be added if desired. The Related Tables Extension does not constrain or codify what the additional columns can be.  Specific communities of interest may wish to provide usage profiles of the Simple Attributes conformance class to meet specific operational or business needs. Clients that intend to display GeoPackages that make use of the Simple Attributes conformance class of the Related Tables Extension may wish to provide additional attribute display on a "best efforts" basis (e.g., view with the column names as labels for the text and numeric row values; or a spreadsheet-style table representation).</p>
</div>
<div class="paragraph">
<p>An example of this is a land parcel (land lot) as the feature (base table), and contact details for the managing agent as the related table. While this could be supported by embedding the contact details for each land parcel, this could be a lot of duplication and require update if a phone number or email address changes.</p>
</div>
<div class="paragraph">
<p>Note that the feature (base table) could link to many attribute table rows. An example of this would be for a set of valuations for the property, or records of property inspections or maintenance work conducted on the property.</p>
</div>
</div>
<div class="sect3">
<h4 id="_features"><a class="anchor" href="#_features"></a>6.2.3. Features</h4>
<div class="paragraph">
<p>The Features conformance class is used for related tables that are <a href="http://www.geopackage.org/spec121/#feature_user_tables">GPKG 1.2.1 vector feature tables</a>. The GPKG table type is <a href="http://www.geopackage.org/spec121/#features">features</a>. This is intended to support defining relationships between feature types. No changes or constraints are made on the extant definition of the features tables.</p>
</div>
<div class="paragraph">
<p>An example of this is linking the location of a condominium (town house) or apartment with the locations of associated parking places or individual garden plots.</p>
</div>
</div>
<div class="sect3">
<h4 id="_attributes"><a class="anchor" href="#_attributes"></a>6.2.4. Attributes</h4>
<div class="paragraph">
<p>The Attributes conformance class is used for related tables that comply with the GPKG <a href="http://www.geopackage.org/spec121/#attributes">attributes</a> table type. This is intended to support additional relationships to data which may already be stored as GPKG metadata.</p>
</div>
<div class="paragraph">
<p>As with the Simple Attributes conformance class, only two columns are required in the related attributes table - the primary key, and one other column. The Related Tables Extension does not constrain or codify what additional columns can be. Unlike a Simple Attributes table, an Attributes table may include all data types allowed in a GPKG <a href="http://www.geopackage.org/spec121/#attributes">attributes</a> metadata table (e.g. BLOB data types).</p>
</div>
</div>
<div class="sect3">
<h4 id="_tiles"><a class="anchor" href="#_tiles"></a>6.2.5. Tiles</h4>
<div class="paragraph">
<p>The Tiles conformance class is used for related tables that are GPKG <a href="http://www.geopackage.org/spec121/#tiles">tiles</a> tables, specifically <a href="http://www.geopackage.org/spec121/#tiles_user_tables">tile pyramid</a> tables.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_usage_scenario"><a class="anchor" href="#_usage_scenario"></a>6.3. Usage scenario</h3>
<div class="paragraph">
<p>A single GeoPackage could include each of these relationships. For example, an airport can be considered as a point location with some attributes, which would be represented in GeoPackage as a features table. Similarly, the runways may be considered as polygons with attributes, which would be represented in GeoPackage as a different features table. See <a href="#img_airportsandrunways">Figure 3</a>. The mapping between those feature tables can be represented using the Related Tables Extension, so that a graphical user interface could identify and select the runways for a particular airport, including associated attributes and metadata.</p>
</div>
<div id="img_airportsandrunways" class="imageblock text-center">
<div class="content">
<img src="images/AirportsAndRunways.png" alt="AirportsAndRunways" width="1000">
</div>
<div class="title">Figure 3. Airports and runways for Tampa area (from FAA data, AIRAC cycle 1802)</div>
</div>
<div class="paragraph">
<p>In addition to feature geometry, an airport may have associated documents, such as terminal procedures. These are typically provided as PDF documents containing a mix of text and diagrams, as shown in <a href="#img_arrivalprocedure">Figure 4</a>. These could be common to a range of airports in a close area (which is the case for that Arrival procedure), specific to a particular airport, or they could be specific to a particular runway, as shown in <a href="#img_gpsapproach">Figure 5</a>.</p>
</div>
<div id="img_arrivalprocedure" class="imageblock text-center">
<div class="content">
<img src="images/bridgearrival.png" alt="bridgearrival" height="1000">
</div>
<div class="title">Figure 4. Bridge Eight Arrival (from FAA data, AIRAC cycle 1802)</div>
</div>
<div id="img_gpsapproach" class="imageblock text-center">
<div class="content">
<img src="images/gpsapproach.png" alt="gpsapproach" height="1000">
</div>
<div class="title">Figure 5. Tampa International RWY 19L GPS Instrument Approach(from FAA data, AIRAC cycle 1802)</div>
</div>
<div class="paragraph">
<p>This information can be represented using the user defined media table, either by incorporating the original PDF as the content of the data BLOB, or by rendering it to an image format such as PNG and using that as the content of the data BLOB. Mapping tables can relate the feature tables (e.g., airport geometry as points and runways as polygons, as described above) to the media table.</p>
</div>
<div class="paragraph">
<p>Airports may also have associated attributes that are not geospatial or media, such as the communications frequencies that are required. There are often multiple frequencies, and they are often common to multiple airports in an area. The frequency information can be represented as an attributes table, with the mapping from airport to communication frequency through a simple attributes mapping. There could well be additional attribute information, such as a mapping from the terminal procedures media table to currency (validity dates, last change) or to the responsible information provider and associated contact details.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_requirements_normative"><a class="anchor" href="#_requirements_normative"></a>7. Requirements (Normative)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_common_requirements_table_definitions"><a class="anchor" href="#_common_requirements_table_definitions"></a>7.1. Common Requirements – Table Definitions</h3>
<table class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="2" style="background-color: #CACCCE;"><p class="tableblock"><strong>Requirements Class : Table Definitions</strong> </p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;"><p class="tableblock"><a href="http://www.opengis.net/spec/gpkg-rt/1.0/table-defs" class="bare">http://www.opengis.net/spec/gpkg-rt/1.0/table-defs</a> </p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Target type</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Token</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Dependency</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><a href="http://www.geopackage.org/spec121/#features" class="bare">http://www.geopackage.org/spec121/#features</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Dependency</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><a href="http://www.geopackage.org/spec121/#tiles" class="bare">http://www.geopackage.org/spec121/#tiles</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Dependency</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><a href="http://www.geopackage.org/spec121/#attributes" class="bare">http://www.geopackage.org/spec121/#attributes</a></p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="_gpkg_extensions"><a class="anchor" href="#_gpkg_extensions"></a>7.1.1. <code>gpkg_extensions</code></h4>
<div class="sect4">
<h5 id="_table_values"><a class="anchor" href="#_table_values"></a>Table Values</h5>
<table id="r1" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock"><strong>Requirement 1 – gpkg_extensions Row</strong> </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><em>/req/table-defs/extensions-ger</em><br>
<br></p>
<p class="tableblock">A GeoPackage that contains a row in the <code>gpkg_extensions</code> table for <code>gpkgext_relations</code> as described in <a href="#gpkg_extensions_records">Extensions Table Record</a> SHALL comply with the Related Tables Extension as described by this document.
 </p></td>
</tr>
</tbody>
</table>
<table id="r2" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock"><strong>Requirement 2 – gpkgext_relations Row</strong> </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">/req/table-defs/extensions-gerr<br>
<br></p>
<p class="tableblock">A GeoPackage that contains a row in the <code>gpkg_extensions</code> table for <code>gpkgext_relations</code> SHALL contain at least one related table relationship.
 </p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
<div class="paragraph">
<p>The intent of this requirement is that a GeoPackage shall not declare the Related Tables Extension unless it is used within the GeoPackage. As a consequence, if all rows are removed from  <code>gpkgext_relations</code>, that table must be dropped and all references to the extension must be removed from <code>gpkg_extensions</code> as well. However, because a related tables schema may be established without any data, empty user-defined mapping tables and/or related data tables are permitted.</p>
</div>
</td>
</tr>
</table>
</div>
<table id="r3" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock"><strong>Requirement 3 – gpkg_extensions User Defined Mapping Table Rows</strong> </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">/req/table-defs/extensions-udmt<br>
<br></p>
<p class="tableblock">A GeoPackage that complies with the Related Tables Extension SHALL contain rows in the <code>gpkg_extensions</code> table for each <a href="#user_defined_mapping_table">User Defined Mapping Table</a> as described in <a href="#gpkg_extensions_records">Extensions Table Record</a>.
 </p></td>
</tr>
</tbody>
</table>
<table id="gpkg_extensions_records" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Extensions Table Record</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">table_name</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">column_name</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">extension_name</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">definition</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">scope</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><code>gpkgext_relations</code></p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">null</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><code>related_tables</code></p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">TBD</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><code>read-write</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><em>name of actual <a href="#user_defined_mapping_table">User Defined Mapping Table</a></em></p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">null</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><code>related_tables</code></p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">TBD</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><code>read-write</code></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_gpkgext_relations"><a class="anchor" href="#_gpkgext_relations"></a>7.1.2. <code>gpkgext_relations</code></h4>
<table id="r4" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock"><strong>Requirement 4 – gpkgext_relations Table</strong> </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">/req/table-defs/ger<br>
<br></p>
<p class="tableblock"> A GeoPackage that complies with this extension SHALL contain a <code>gpkgext_relations</code> table as per <a href="#gpkgext_relations_table">Extended Relations Table Definition</a> and <a href="#gpkgext_relations_sql">Extended Relations Table Definition SQL (Normative)</a>.
 </p></td>
</tr>
</tbody>
</table>
<div class="sect4">
<h5 id="_table_definition"><a class="anchor" href="#_table_definition"></a>Table Definition</h5>
<table id="gpkgext_relations_table" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. Extended Relations Table Definition</caption>
<colgroup>
<col style="width: 13.3333%;">
<col style="width: 6.6666%;">
<col style="width: 53.3333%;">
<col style="width: 6.6666%;">
<col style="width: 6.6666%;">
<col style="width: 6.6666%;">
<col style="width: 6.667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Column Name</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Column Type</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Column Description</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Null</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Default</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Key</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Unique</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><code>id</code></p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">INTEGER</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Autoincrement primary key</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">PK</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">yes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><code>base_table_name</code></p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Name of the table containing the base data (e.g., features) to relate</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">no</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><code>base_primary_column</code></p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Name of the primary key column in <code>base_table_name</code></p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><code>id</code></p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">no</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><code>related_table_name</code></p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Name of the table containing the related content</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">no</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><code>related_primary_column</code></p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Name of the primary key column in <code>related_table_name</code></p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><code>id</code></p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">no</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><code>relation_name</code></p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Name (profile) of the relationship</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">no</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><code>mapping_table_name</code></p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Name of a mapping table</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">yes</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_table_values_2"><a class="anchor" href="#_table_values_2"></a>Table Values</h5>
<table id="r5" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock"><strong>Requirement 5 – gpkgext_relations Base Table</strong> </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">/req/table-defs/ger-base<br>
<br></p>
<p class="tableblock">For each row in <code>gpkgext_relations</code>, there SHALL be a table or view of the name referenced in <code>base_table_name</code> and that table or view SHALL have an entry in <code>gpkg_contents</code>.
 </p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>See <a href="#gpkg_features_sql">Example User Defined Features Table Definition SQL (Informative)</a> for example SQL for creating a features table for use with this extension.</p>
</div>
</td>
</tr>
</table>
</div>
<table id="r6" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock"><strong>Requirement 6 – gpkgext_relations Related Table</strong> </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">/req/table-defs/ger_related<br>
<br></p>
<p class="tableblock">For each row in <code>gpkgext_relations</code>, there SHALL be a table or view of the name referenced in <code>related_table_name</code> and that table or view SHALL have an entry in <code>gpkg_contents</code>.</p></td>
</tr>
</tbody>
</table>
<table id="r7" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock"><strong>Requirement 7 – gpkgext_relations User Defined Mapping Table</strong> </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">/req/table-defs/ger_udmt<br>
<br></p>
<p class="tableblock">For each row in <code>gpkgext_relations</code>, the <code>mapping_table_name</code> column SHALL contain the name of a user-defined mapping table or view as described by <a href="#user_defined_mapping_table">User-Defined Mapping Tables</a>.
 </p></td>
</tr>
</tbody>
</table>
<table id="r8" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock"><strong>Requirement 8 – gpkgext_relations Relation Name</strong> </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">/req/table-defs/ger_relname<br>
<br>
Each <code>relation_name</code> column in a <code>gpkgext_relations</code> row SHALL either match a <code>relation_name</code> from the Requirements Classes for User-Defined Related Data Tables in this or other OGC standards (e.g. <code>media</code> for <a href="#Media Requirement Class">[Media Requirement Class]</a>), or be of the form <code>x-</code>&lt;author&gt;_&lt;relation_name&gt; where &lt;author&gt; indicates the person or organization that developed and maintains this set of User-Defined Related Tables.
 </p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="user_defined_mapping_table"><a class="anchor" href="#user_defined_mapping_table"></a>7.1.3. User-Defined Mapping Tables</h4>
<div class="sect4">
<h5 id="_table_definition_2"><a class="anchor" href="#_table_definition_2"></a>Table Definition</h5>
<table id="r9" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock"><strong>Requirement 9 – User Defined Mapping Table</strong> </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">/req/table-defs/udmt<br>
<br></p>
<p class="tableblock">A user-defined mapping table or view SHALL contain all of the columns described in <a href="#gpkgext_user_defined_mapping_table">User-Defined Mapping Table Definition</a>.
</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>A user-defined mapping table MAY contain no rows. This is intended to support declaring a conceptual relationship where no instances of that relationship currently exist in the GeoPackage (e.g. no related data has been added, or all applicable data has been deleted).</p>
</div>
</td>
</tr>
</table>
</div>
<table id="gpkgext_user_defined_mapping_table" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 3. User-Defined Mapping Table Definition</caption>
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 14.2858%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Column Name</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Column Type</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Column Description</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Null</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Default</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Key</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Unique</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><code>base_id</code></p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">INTEGER</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">The primary key value of the base data table</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">no</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><code>related_id</code></p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">INTEGER</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">The primary key value of the related data table</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">no</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>See <a href="#gpkgext_user_defined_mapping_table_sql">Extended Relations Mapping Table SQL (Informative)</a> for example SQL for defining a user-defined mapping table.
A user-defined mapping table MAY be implemented as a GPKG <a href="http://www.geopackage.org/spec121/#attributes">attributes</a> table type, and MAY contain other columns not listed here.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_table_values_3"><a class="anchor" href="#_table_values_3"></a>Table Values</h5>
<table id="r10" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock"><strong>Requirement 10 – User Defined Mapping Table Base ID</strong> </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">/req/table-defs/udmt_base<br>
<br></p>
<p class="tableblock">For each row of a user-defined mapping table, the <code>base_id</code> column SHALL correlate to the primary key of the corresponding base table (as identified by the <code>base_primary_column</code> of the associated row in <code>gpkgext_relations</code>).
 </p></td>
</tr>
</tbody>
</table>
<table id="r11" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock"><strong>Requirement 11 – User Defined Mapping Table Related ID</strong> </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">/req/table-defs/udmt_related<br>
<br></p>
<p class="tableblock">For each row of a user-defined mapping table, the <code>related_id</code> column SHALL correlate to the primary key of the corresponding related data table (as identified by the <code>related_primary_column</code> of the associated row in <code>gpkgext_relations</code>).
 </p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>This specification makes no statement on the cardinality of a user-defined mapping table. It MAY contain no rows or have a one-to-many, many-to-one, or many-to-many relationship. While it is possible to enforce a one-to-many or many-to-one relationship by applying a UNIQUE constraint to the <code>attributes_id</code> or <code>base_id</code> respectively, this is NOT RECOMMENDED because the presence of these constraints is not exposed by SQLite in an easy-to-query manner.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="user_defined_related_data_table"><a class="anchor" href="#user_defined_related_data_table"></a>7.1.4. User-Defined Related Data Tables</h4>
<div class="paragraph">
<p>There are no explicit requirements for a generic user-defined related data table. However, interoperability is improved if a specific requirements class is used. The following subsections describe currently defined requirements classes.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#media_rc">Media Requirements Class</a> (for multimedia files)</p>
</li>
<li>
<p><a href="#sa_rc">Simple Attributes Requirements Class</a> (for text and numeric data)</p>
</li>
<li>
<p><a href="#f_rc">Related Features Requirements Class</a> (for features)</p>
</li>
<li>
<p><a href="#attr_rc">Related Attributes Requirements class</a> (for attributes metadata)</p>
</li>
<li>
<p><a href="#tiles_rc">Related Tiles Requirements class</a> (for tiles)</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="media_rc"><a class="anchor" href="#media_rc"></a>7.2. Media Requirements Class</h3>
<table class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="2" style="background-color: #CACCCE;"><p class="tableblock"><strong>Requirements Class : Media</strong> </p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;"><p class="tableblock"><a href="http://www.opengis.net/spec/gpkg-rt/1.0/media" class="bare">http://www.opengis.net/spec/gpkg-rt/1.0/media</a> </p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Target type</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Token</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Dependency</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">www.opengis.net/spec/gpkg-rt/1.0/table-defs</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>This requirements class allows a GeoPackage producer or editor to relate features or attributes to multimedia files such as pictures and videos. For example, this could relate building features with pictures or videos taken of those areas.</p>
</div>
<div class="sect3">
<h4 id="_user_defined_media_tables"><a class="anchor" href="#_user_defined_media_tables"></a>7.2.1. User-Defined Media Tables</h4>
<div class="sect4">
<h5 id="_table_definition_3"><a class="anchor" href="#_table_definition_3"></a>Table Definition</h5>
<table id="r12" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock"><strong>Requirement 12 – Media Relation Name</strong> </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">/req/media/udmt<br>
<br></p>
<p class="tableblock">A user-defined related data table or view SHALL be a user-defined media table or view if the row in <code>gpkgext_relations</code> with a corresponding <code>related_table_name</code> has a <code>relation_name</code> of "media".</p>
<p class="tableblock">A user-defined media table or view SHALL meet all requirements of a GPKG <a href="http://www.geopackage.org/spec120/#attributes">attributes</a> table type.
 </p></td>
</tr>
</tbody>
</table>
<table id="r13" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock"><strong>Requirement 13 – Media Table Definition</strong> </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">/req/media/table_def<br>
<br></p>
<p class="tableblock">A user-defined media table or view SHALL contain all of the columns described in <a href="#gpkg_user_defined_media_table">User-Defined Media Table Definition</a>.</p></td>
</tr>
</tbody>
</table>
<table id="gpkg_user_defined_media_table" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 4. User-Defined Media Table Definition</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Column Name</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Column Type</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Column Description</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Null</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Key</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><em>any</em></p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">INTEGER</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Autoincrement primary key</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">PK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><code>data</code></p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">BLOB</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Multimedia content</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><code>content_type</code></p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Mime-type of data</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>See <a href="#gpkgext_user_defined_media_table_sql">Example User Defined Media Table Definition SQL (Informative)</a> for example SQL for defining a user-defined media table.
A user-defined media table MAY also contain other columns not listed here. Refer to the Dublin Core profile (Informative) for
a set of additional columns that may be provided.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="sa_rc"><a class="anchor" href="#sa_rc"></a>7.3. Simple Attributes Requirements Class</h3>
<table class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="2" style="background-color: #CACCCE;"><p class="tableblock"><strong>Requirements Class : Simple Attributes</strong> </p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;"><p class="tableblock"><a href="http://www.opengis.net/spec/gpkg-rt/1.0/simpleattr" class="bare">http://www.opengis.net/spec/gpkg-rt/1.0/simpleattr</a> </p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Target type</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Token</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Dependency</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">www.opengis.net/spec/gpkg-rt/1.0/table-defs</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>This requirements class allows a GeoPackage producer or editor to relate sets of tabular text or numeric data. For example, this could relate land parcels with statistical information that is collected over different boundaries, or at different times.</p>
</div>
<div class="sect3">
<h4 id="_user_defined_simple_attribute_tables"><a class="anchor" href="#_user_defined_simple_attribute_tables"></a>7.3.1. User-Defined Simple Attribute Tables</h4>
<div class="sect4">
<h5 id="_table_definition_4"><a class="anchor" href="#_table_definition_4"></a>Table Definition</h5>
<table id="r14" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock"><strong>Requirement 14 – Simple Attributes Relation Name</strong> </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">/req/simpleattr/udat<br>
<br></p>
<p class="tableblock">A user-defined related data table or view SHALL be a user-defined simple attribute table or view if the row in <code>gpkgext_relations</code> with a corresponding <code>related_table_name</code> has a <code>relation_name</code> of "simple_attributes".</p>
<p class="tableblock">A user-defined simple attributes table or view SHALL meet all requirements of a GPKG <a href="http://www.geopackage.org/spec120/#attributes">attributes</a> table type.
 </p></td>
</tr>
</tbody>
</table>
<table id="r15" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock"><strong>Requirement 15 – Simple Attributes Table Definition</strong> </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">/req/simpleattr/table_def<br>
<br></p>
<p class="tableblock">A user-defined simple attribute table or view SHALL contain the primary key column and at least one other column as defined in <a href="#gpkg_user_defined_simpleattr_table">User-Defined Simple Attributes Table Definition</a>. A user-defined simple attribute table SHALL only contain data belonging to the TEXT, INTEGER, or REAL storage classes and SHALL NOT contain NULL or BLOB storage classes (e.g., GEOMETRY).</p></td>
</tr>
</tbody>
</table>
<table id="gpkg_user_defined_simpleattr_table" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 5. User-Defined Simple Attributes Table Definition</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Column Name</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Column Type</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Column Description</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Null</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Key</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><em>any</em></p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">INTEGER</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Autoincrement primary key</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">PK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><em>any</em></p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Text attribute content</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><em>any</em></p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">INTEGER</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Integer attribute content</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><em>any</em></p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">REAL</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Floating point number attribute content</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>See <a href="#gpkgext_user_defined_simpleattr_table_sql">Example User Defined Simple Attribute Table Definition SQL (Informative)</a> for example SQL for defining a user-defined simple attributes table.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="f_rc"><a class="anchor" href="#f_rc"></a>7.4. Related Features Requirements Class</h3>
<table class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="2" style="background-color: #CACCCE;"><p class="tableblock"><strong>Requirements Class : Related Features</strong> </p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;"><p class="tableblock"><a href="http://www.opengis.net/spec/gpkg-rt/1.0/relatedfeat" class="bare">http://www.opengis.net/spec/gpkg-rt/1.0/relatedfeat</a> </p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Target type</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Token</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Dependency</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">www.opengis.net/spec/gpkg-rt/1.0/table-defs</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>This requirements class allows a GeoPackage producer or editor to link features with other features. For example, this could link road features with related pylon features.</p>
</div>
<div class="sect3">
<h4 id="_user_defined_related_features_tables"><a class="anchor" href="#_user_defined_related_features_tables"></a>7.4.1. User-Defined Related Features Tables</h4>
<div class="sect4">
<h5 id="_table_definition_5"><a class="anchor" href="#_table_definition_5"></a>Table Definition</h5>
<table id="r16" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock"><strong>Requirement 16 – Features Relation Name</strong> </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">/req/relatedfeat/udat<br>
<br></p>
<p class="tableblock">A user-defined related data table or view SHALL be a user-defined related features table or view if the row in <code>gpkgext_relations</code> with a corresponding <code>related_table_name</code> has a <code>relation_name</code> of "features".
 </p></td>
</tr>
</tbody>
</table>
<table id="r17" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock"><strong>Requirement 17 – Features Table Definition</strong> </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">/req/relatedfeat/table_def<br>
<br></p>
<p class="tableblock">A user-defined related features table or view SHALL be a GPKG <a href="http://www.geopackage.org/spec120/#feature_user_tables">vector feature</a> table type.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="attr_rc"><a class="anchor" href="#attr_rc"></a>7.5. Related Attributes Requirements class</h3>
<table class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="2" style="background-color: #CACCCE;"><p class="tableblock"><strong>Requirements Class : Attributes</strong> </p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;"><p class="tableblock"><a href="http://www.opengis.net/spec/gpkg-rt/1.0/attr" class="bare">http://www.opengis.net/spec/gpkg-rt/1.0/attr</a> </p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Target type</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Token</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Dependency</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">www.opengis.net/spec/gpkg-rt/1.0/table-defs</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>This requirements class allows a GeoPackage producer or editor to link metadata which may already exist in a GPKG Attributes table, including data types beyond the Simple Attributes set (e.g. BLOB data).</p>
</div>
<div class="sect3">
<h4 id="_user_defined_related_attributes_tables"><a class="anchor" href="#_user_defined_related_attributes_tables"></a>7.5.1. User-Defined Related Attributes Tables</h4>
<div class="sect4">
<h5 id="_table_definition_6"><a class="anchor" href="#_table_definition_6"></a>Table Definition</h5>
<table id="r18" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock"><strong>Requirement 18 – Attributes Relation Name</strong> </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">/req/relatedattr/udat<br>
<br></p>
<p class="tableblock">A user-defined related data table or view SHALL be a user-defined related attributes table or view if the row in <code>gpkgext_relations</code> with a corresponding <code>related_table_name</code> has a <code>relation_name</code> of "attributes".
 </p></td>
</tr>
</tbody>
</table>
<table id="r19" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock"><strong>Requirement 19 – Attributes Table Definition</strong> </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">/req/relatedattr/table_def<br>
<br></p>
<p class="tableblock">A user-defined related attributes table or view SHALL be a GPKG <a href="http://www.geopackage.org/spec121/#_attributes_user_tables">attributes</a> table type.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="tiles_rc"><a class="anchor" href="#tiles_rc"></a>7.6. Related Tiles Requirements class</h3>
<table class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="2" style="background-color: #CACCCE;"><p class="tableblock"><strong>Requirements Class : Tiles</strong> </p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="2" style="background-color: #FFFFFF;"><p class="tableblock"><a href="http://www.opengis.net/spec/gpkg-rt/1.0/tiles" class="bare">http://www.opengis.net/spec/gpkg-rt/1.0/tiles</a> </p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Target type</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Token</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Dependency</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">www.opengis.net/spec/gpkg-rt/1.0/table-defs</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>This requirements class allows a GeoPackage producer or editor to link to individual tiles in a GPKG tile pyramid user data table.</p>
</div>
<div class="sect3">
<h4 id="_user_defined_related_tiles_tables"><a class="anchor" href="#_user_defined_related_tiles_tables"></a>7.6.1. User-Defined Related Tiles Tables</h4>
<div class="sect4">
<h5 id="_table_definition_7"><a class="anchor" href="#_table_definition_7"></a>Table Definition</h5>
<table id="r20" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock"><strong>Requirement 20 – Tiles Relation Name</strong> </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">/req/relatedtiles/udat<br>
<br></p>
<p class="tableblock">A user-defined related data table or view SHALL be a user-defined related tiles table or view if the row in <code>gpkgext_relations</code> with a corresponding <code>related_table_name</code> has a <code>relation_name</code> of "tiles".
 </p></td>
</tr>
</tbody>
</table>
<table id="r21" class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #CACCCE;"><p class="tableblock"><strong>Requirement 21 – Tiles Table Definition</strong> </p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">/req/relatedtiles/table_def<br>
<br></p>
<p class="tableblock">A user-defined related features table or view SHALL be a GPKG <a href="http://www.geopackage.org/spec/#tiles_user_tables">tile pyramid</a> table type.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_media_types_for_any_data_encodings"><a class="anchor" href="#_media_types_for_any_data_encodings"></a>8. Media Types for any data encoding(s)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This standard provides an extension to GeoPackage and does not affect the GeoPackage data encoding.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect1">
<h2 id="_conformance_class_abstract_test_suite_normative"><a class="anchor" href="#_conformance_class_abstract_test_suite_normative"></a>Annex A: Conformance Class Abstract Test Suite (Normative)</h2>
<div class="sectionbody">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Ensure that there is a conformance class for each requirements class and a test for each requirement (identified by requirement name and number)
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_common_requirements"><a class="anchor" href="#_common_requirements"></a>A.1. Common Requirements</h3>
<div class="sect3">
<h4 id="_gpkg_extensions_row"><a class="anchor" href="#_gpkg_extensions_row"></a>A.1.1. <a href="#r1">gpkg_extensions Row</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Test id:</p></th>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">/conf/table-defs/applicability</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Requirement:</p></th>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">/req/table-defs/extensions-ger</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Test purpose:</p></th>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Verify whether the Related Tables Extension is applicable.</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Test method:</p></th>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><code>SELECT COUNT(*) FROM gpkg_extensions WHERE extension_name IN ('related_tables', 'gpkg_related_tables')</code></p>
<p class="tableblock">Extension not in use if count is empty</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Test id:</p></th>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">/conf/table-defs/extensions-ger</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Requirement:</p></th>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">/req/table-defs/extensions-ger</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Test purpose:</p></th>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Verify that the <code>gpkg_extensions</code> table contains the required <code>gpkgext_relations</code> table.</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Test method:</p></th>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><code>SELECT * FROM gpkg_extensions WHERE table_name = 'gpkgext_relations'</code></p>
<p class="tableblock">Fail if number of rows returned is not 1.</p>
<p class="tableblock">Pass if results match required content from <a href="#gpkg_extensions_records">Extensions Table Record</a>, else Fail.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_gpkgext_relations_row"><a class="anchor" href="#_gpkgext_relations_row"></a>A.1.2. <a href="#r2">gpkgext_relations Row</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Test id:</p></th>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">/conf/table-defs/extensions-gerr</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Requirement:</p></th>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">/req/table-defs/extensions-gerr</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Test purpose:</p></th>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Verify that the <code>gpkg_extensions</code> table contains at least one user defined mapping table.</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Test method:</p></th>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">1. <code>SELECT table_name FROM gpkg_extensions WHERE (extension_name IN ('related_tables', 'gpkg_related_tables') AND table_name != 'gpkgext_relations')</code></p>
<p class="tableblock">2. Fail if number of rows returned is 0.</p>
<p class="tableblock">3. For each <code>table_name</code> row returned in Step 1:</p>
<p class="tableblock">  - <code>SELECT tbl_name FROM sqlite_master WHERE tbl_name = '{table_name}'</code></p>
<p class="tableblock">  - Fail if no rows returned.</p>
<p class="tableblock">4. Pass if no fails.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_gpkg_extensions_user_defined_mapping_table_rows"><a class="anchor" href="#_gpkg_extensions_user_defined_mapping_table_rows"></a>A.1.3. <a href="#r3">gpkg_extensions User Defined Mapping Table Rows</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Test id:</p></th>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">/conf/table-defs/extensions-udmt</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Requirement:</p></th>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">/req/table-defs/extensions-udmt</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Test purpose:</p></th>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Verify that the <code>gpkg_extensions</code> table contains the required user defined mapping table contents</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Test method:</p></th>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">1. <code>SELECT column_name, definition, scope FROM gpkg_extensions WHERE (extension_name IN ('related_tables', 'gpkg_related_tables') AND table_name != 'gpkgext_relations')</code></p>
<p class="tableblock">2. Fail if number of rows returned is 0.</p>
<p class="tableblock">3. For each row returned in Step 1, fail if <code>column_name</code> is not null, <code>definition</code> is not "TBD" or <code>scope</code> is not "read-write".</p>
<p class="tableblock">4. Pass if no fails.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_gpkgext_relations_table"><a class="anchor" href="#_gpkgext_relations_table"></a>A.1.4. <a href="#r4">gpkgext_relations Table</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Test id:</p></th>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">/conf/table-defs/ger</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Requirement:</p></th>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">/req/table-defs/ger</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Test purpose:</p></th>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Verify that the <code>gpkgext_relations</code> table has the required table definition.</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Test method:</p></th>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">1. <code>PRAGMA table_info(gpkgext_relations)</code></p>
<p class="tableblock">2. Fail if returns an empty result set.</p>
<p class="tableblock">3. Pass if the column names, types, nullability, default values, primary key, and unique key constraints match all of those in the contents of <a href="#gpkgext_relations_table">Extended Relations Table Definition</a>. Column order, check constraint and trigger definitions, and other column definitions in the returned sql are irrelevant.</p>
<p class="tableblock">4. Fail otherwise.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_gpkgext_relations_base_table"><a class="anchor" href="#_gpkgext_relations_base_table"></a>A.1.5. <a href="#r5">gpkgext_relations Base Table</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Test id:</p></th>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">/conf/table-defs/ger-base</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Requirement:</p></th>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">/req/table-defs/ger-base</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Test purpose:</p></th>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Verify that the base tables listed in <code>gpkgext_relations</code> table are in the GeoPackage database</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Test method:</p></th>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">1. <code>SELECT base_table_name FROM gpkgext_relations</code></p>
<p class="tableblock">2. Fail if returns an empty result set.</p>
<p class="tableblock">3. For each <code>base_table_name</code> row returned in Step 1:</p>
<p class="tableblock">  - <code>SELECT tbl_name FROM sqlite_master WHERE tbl_name = '{base_table_name}'</code></p>
<p class="tableblock">  - Fail if no rows returned.</p>
<p class="tableblock">4. Pass if no fails.</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Test id:</p></th>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">/conf/table-defs/ger-base-contents</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Requirement:</p></th>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">/req/table-defs/ger-base</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Test purpose:</p></th>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Verify that the base tables listed in <code>gpkgext_relations</code> table are in the GeoPackage contents table</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Test method:</p></th>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">1. <code>SELECT base_table_name FROM gpkgext_relations</code></p>
<p class="tableblock">2. Fail if returns an empty result set.</p>
<p class="tableblock">3. For each <code>base_table_name</code> row returned in Step 1:</p>
<p class="tableblock">  - <code>SELECT table_name FROM gpkg_contents WHERE table_name = '{base_table_name}'</code></p>
<p class="tableblock">  - Fail if no rows returned.</p>
<p class="tableblock">4. Pass if no fails.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_gpkgext_relations_related_table"><a class="anchor" href="#_gpkgext_relations_related_table"></a>A.1.6. <a href="#r6">gpkgext_relations Related Table</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Test id:</p></th>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">/conf/table-defs/ger-related</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Requirement:</p></th>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">/req/table-defs/ger_related</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Test purpose:</p></th>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Verify that the related tables listed in <code>gpkgext_relations</code> table are in the GeoPackage database</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Test method:</p></th>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">1. <code>SELECT related_table_name FROM gpkgext_relations</code></p>
<p class="tableblock">2. Fail if returns an empty result set.</p>
<p class="tableblock">3. For each <code>related_table_name</code> row returned in Step 1:</p>
<p class="tableblock">  - <code>SELECT tbl_name FROM sqlite_master WHERE tbl_name = '{related_table_name}'</code></p>
<p class="tableblock">  - Fail if no rows returned.</p>
<p class="tableblock">4. Pass if no fails.</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Test id:</p></th>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">/conf/table-defs/ger-related-contents</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Requirement:</p></th>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">/req/table-defs/ger_related</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Test purpose:</p></th>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Verify that the related tables listed in <code>gpkgext_relations</code> table are in the GeoPackage contents table</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Test method:</p></th>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">1. <code>SELECT related_table_name FROM gpkgext_relations</code></p>
<p class="tableblock">2. Fail if returns an empty result set.</p>
<p class="tableblock">3. For each <code>related_table_name</code> row returned in Step 1:</p>
<p class="tableblock">  - <code>SELECT table_name FROM gpkg_contents WHERE table_name = '{related_table_name}'</code></p>
<p class="tableblock">  - Fail if no rows returned.</p>
<p class="tableblock">4. Pass if no fails.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_gpkgext_relations_user_defined_mapping_table"><a class="anchor" href="#_gpkgext_relations_user_defined_mapping_table"></a>A.1.7. <a href="#r7">gpkgext_relations User Defined Mapping Table</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Test id:</p></th>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">/conf/table-defs/ger-udmt</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Requirement:</p></th>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">/req/table-defs/ger_udmt</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Test purpose:</p></th>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Verify that the mapping tables listed in <code>gpkgext_relations</code> table are in the GeoPackage database</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Test method:</p></th>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">1. <code>SELECT mapping_table_name FROM gpkgext_relations</code></p>
<p class="tableblock">2. Fail if returns an empty result set.</p>
<p class="tableblock">3. For each <code>mapping_table_name</code> row returned in Step 1:</p>
<p class="tableblock">  - <code>SELECT tbl_name FROM sqlite_master WHERE tbl_name = '{mapping_table_name}'</code></p>
<p class="tableblock">  - Fail if no rows returned.</p>
<p class="tableblock">4. Pass if no fails.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_gpkgext_relations_relation_name"><a class="anchor" href="#_gpkgext_relations_relation_name"></a>A.1.8. <a href="#r8">gpkgext_relations Relation Name</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Test id:</p></th>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">/conf/table-defs/ger-relname</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Requirement:</p></th>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">/req/table-defs/ger_relname</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Test purpose:</p></th>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Verify that the relation_name entries listed in <code>gpkgext_relations</code> table are valid.</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Test method:</p></th>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">1. <code>SELECT base_table_name, relation_name FROM gpkgext_relations WHERE (relation_name NOT IN ('features', 'simple_attributes', 'media') AND relation_name NOT LIKE 'x-<em>%\_</em>%' ESCAPE '\')</code></p>
<p class="tableblock">2. Fail if returns any rows</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_user_defined_mapping_table"><a class="anchor" href="#_user_defined_mapping_table"></a>A.1.9. <a href="#r9">User Defined Mapping Table</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Test id:</p></th>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">/conf/table-defs/udmt</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Requirement:</p></th>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">/req/table-defs/udmt</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Test purpose:</p></th>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Verify that the mapping tables listed in <code>gpkgext_relations</code> table have the correct structure</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Test method:</p></th>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">1. <code>SELECT mapping_table_name FROM gpkgext_relations</code></p>
<p class="tableblock">2. Fail if returns an empty result set.</p>
<p class="tableblock">3. For each <code>mapping_table_name</code> row returned in Step 1:</p>
<p class="tableblock">  - <code>PRAGMA table_info({mapping_table_name})</code></p>
<p class="tableblock">  - Fail if returns an empty result set.</p>
<p class="tableblock">  - Fail if the column names, types, nullability, default values, primary key, and unique key constraints do match all of those in the contents of <a href="#gpkgext_user_defined_mapping_table">User-Defined Mapping Table Definition</a>. Additional columns, column order, check constraint and trigger definitions, and other column definitions in the returned sql are irrelevant.</p>
<p class="tableblock">4. Pass if no fails.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_user_defined_mapping_table_base_id"><a class="anchor" href="#_user_defined_mapping_table_base_id"></a>A.1.10. <a href="#r10">User Defined Mapping Table Base ID</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Test id:</p></th>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">/conf/table-defs/udmt-base</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Requirement:</p></th>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">/req/table-defs/udmt_base</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Test purpose:</p></th>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Verify that the contents of mapping tables listed in <code>gpkgext_relations</code> table correlate to base table rows</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Test method:</p></th>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">1. <code>SELECT base_table_name, base_primary_column, mapping_table_name FROM gpkgext_relations</code></p>
<p class="tableblock">2. Fail if returns an empty result set.</p>
<p class="tableblock">3. For each row returned in Step 1, fail if any <code>base_id</code> value in {mapping_table_name} does not match an entry in the {base_primary_column} column of the {base_table_name} table.</p>
<p class="tableblock">4. Pass if no fails.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_user_defined_mapping_table_related_id"><a class="anchor" href="#_user_defined_mapping_table_related_id"></a>A.1.11. <a href="#r11">User Defined Mapping Table Related ID</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Test id:</p></th>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">/conf/table-defs/udmt-related</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Requirement:</p></th>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">/req/table-defs/udmt_related</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Test purpose:</p></th>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Verify that the contents of mapping tables listed in <code>gpkgext_relations</code> table correlate to related table rows</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Test method:</p></th>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">1. <code>SELECT related_table_name, related_primary_column, mapping_table_name FROM gpkgext_relations</code></p>
<p class="tableblock">2. Fail if returns an empty result set.</p>
<p class="tableblock">3. For each row returned in Step 1, fail if any <code>related_id</code> value in {mapping_table_name} does not match an entry in the {related_primary_column} column of the {related_table_name} table.</p>
<p class="tableblock">4. Pass if no fails.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_media_relation_name"><a class="anchor" href="#_media_relation_name"></a>A.1.12. <a href="#r12">Media Relation Name</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Test id:</p></th>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">/conf/media/udmt</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Requirement:</p></th>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">/req/media/udmt</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Test purpose:</p></th>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Verify whether the requirements class applies for user-defined media tables</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Test method:</p></th>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><code>SELECT COUNT(*) FROM gpkgext_relations WHERE relation_name = 'media'</code></p>
<p class="tableblock">Requirement class is not in use if count is zero</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_media_table_definition"><a class="anchor" href="#_media_table_definition"></a>A.1.13. <a href="#r13">Media Table Definition</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Test id:</p></th>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">/conf/media/table_def</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Requirement:</p></th>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">/req/media/table_def</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Test purpose:</p></th>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Verify that the user-defined media tables have the correct structure</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Test method:</p></th>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">1. <code>SELECT related_table_name FROM gpkgext_relations WHERE relation_name = 'media'</code></p>
<p class="tableblock">2. For each related_table_name row returned in Step 1:</p>
<p class="tableblock">- <code>PRAGMA table_info({related_table_name})</code></p>
<p class="tableblock">- Fail if returns an empty result set.</p>
<p class="tableblock">- Fail if the column names, types, nullability, default values, primary key, and unique key constraints do match all of those in the contents of <a href="#gpkg_user_defined_media_table">User-Defined Media Table Definition</a>. Additional columns, column order, check constraints, trigger definitions, and other column definitions in the returned sql are irrelevant.</p>
<p class="tableblock">3. Pass if no fails.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_simple_attributes_relation_name"><a class="anchor" href="#_simple_attributes_relation_name"></a>A.1.14. <a href="#r14">Simple Attributes Relation Name</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Test id:</p></th>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">/conf/simpleattr/udat</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Requirement:</p></th>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">/req/simpleattr/udat</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Test purpose:</p></th>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Verify whether the requirements class applies for user-defined simple attributes tables</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Test method:</p></th>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><code>SELECT COUNT(*) FROM gpkgext_relations WHERE relation_name = 'simple_attributes'</code></p>
<p class="tableblock">Requirement class is not in use if count is zero</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_simple_attributes_table_definition"><a class="anchor" href="#_simple_attributes_table_definition"></a>A.1.15. <a href="#r15">Simple Attributes Table Definition</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Test id:</p></th>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">/conf/simpleattr/table_def</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Requirement:</p></th>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">/req/simpleattr/table_def</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Test purpose:</p></th>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Verify that the user-defined simple attribute tables have the correct structure</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Test method:</p></th>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">1. <code>SELECT related_table_name FROM gpkgext_relations WHERE relation_name = 'simple_attributes'</code></p>
<p class="tableblock">2. For each related_table_name row returned in Step 1:</p>
<p class="tableblock">- <code>PRAGMA table_info({related_table_name})</code></p>
<p class="tableblock">- Fail if returns an empty result set.</p>
<p class="tableblock">- Fail if the column names, types, nullability, default values, primary key, and unique key constraints do match all of those in the contents of <a href="#gpkg_user_defined_simpleattr_table">User-Defined Simple Attributes Table Definition</a>.</p>
<p class="tableblock">- Fail if <code>Column Type</code> includes storage classes other than <code>TEXT</code>, <code>INTEGER</code>, or <code>REAL</code>.</p>
<p class="tableblock">3. Pass if no fails.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_features_relation_name"><a class="anchor" href="#_features_relation_name"></a>A.1.16. <a href="#r16">Features Relation Name</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Test id:</p></th>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">/conf/relatedfeat/udat</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Requirement:</p></th>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">/req/relatedfeat/udat</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Test purpose:</p></th>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Verify whether the requirements class applies for user-defined features tables</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Test method:</p></th>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><code>SELECT COUNT(*) FROM gpkgext_relations WHERE relation_name = 'features'</code></p>
<p class="tableblock">Requirement class is not in use if count is zero</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_features_table_definition"><a class="anchor" href="#_features_table_definition"></a>A.1.17. <a href="#r17">Features Table Definition</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Test id:</p></th>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">/conf/relatedfeat/table_def</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Requirement:</p></th>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">/req/relatedfeat/table_def</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Test purpose:</p></th>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Verify that the user-defined related features tables have the correct structure</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">Test method:</p></th>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">1. <code>SELECT related_table_name FROM gpkgext_relations WHERE relation_name = 'features'</code></p>
<p class="tableblock">2. For each related_table_name row returned in Step 1:</p>
<p class="tableblock">- <code>PRAGMA table_info({related_table_name})</code></p>
<p class="tableblock">- Fail if returns an empty result set.</p>
<p class="tableblock">- Fail if the column names, types, nullability, default values, primary key, and unique key constraints do match all of those in the contents of [<a href="http://www.geopackage.org/spec/#feature_user_tables" class="bare">http://www.geopackage.org/spec/#feature_user_tables</a>].</p>
<p class="tableblock">3. Pass if no fails.</p></td>
</tr>
</tbody>
</table>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_example_informative"><a class="anchor" href="#_example_informative"></a>Annex B: Example (Informative)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This example illustrates support for many-to-many relationships but the concept may be used in a degenerative way to support one-to-many or many-to-one relationships.
The content of the <code>gpkgext_relations</code> includes a <a href="#features_to_media">features_to_media table</a> that relates the <a href="#features">features table values</a> and <a href="#media">media table values</a> using their respective <code>id</code> columns.</p>
</div>
<div class="paragraph">
<p>In this example, there are four features (ID 1, 2, 3 and 4) and three PNG media items (ID 17, 18, and 19).
Using the <a href="#features_to_media">features_to_media table</a>,</p>
</div>
<div class="ulist">
<ul>
<li>
<p>feature 1 relates to media 17 and 18</p>
</li>
<li>
<p>feature 2 relates to media 18</p>
</li>
<li>
<p>feature 3 relates to media 18</p>
</li>
<li>
<p>feature 4 relates to media 17 and 19</p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 6. gpkgext_relations table values</caption>
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">base_table_name</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">base_column</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">related_table_name</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">related_column</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">relation_name</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">mapping_table_name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">features</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">id</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">media</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">id</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">media</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">features_to_media</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The following SQL query will reveal this information:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>select base_table_name,
    base_primary_column,
    related_table_name,
    related_primary_column,
    mapping_table_name
from gpkgext_relations;</pre>
</div>
</div>
<table id="features" class="tableblock frame-all grid-all" style="width: 50%;">
<caption class="title">Table 7. features table values</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">id</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">geom</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">&lt;BLOB&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">&lt;BLOB&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">&lt;BLOB&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">&lt;BLOB&gt;</p></td>
</tr>
</tbody>
</table>
<table id="media" class="tableblock frame-all grid-all" style="width: 80%;">
<caption class="title">Table 8. media table values</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">id</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">data</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">content_type</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">17</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">&lt;BLOB&gt;</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">image/png</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">18</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">&lt;BLOB&gt;</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">image/png</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">19</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">&lt;BLOB&gt;</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">image/png</p></td>
</tr>
</tbody>
</table>
<table id="features_to_media" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 9. features_to_media table</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">base_id</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">related_id</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">17</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">19</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">18</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">18</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">18</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">17</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The <a href="#features_to_media">features_to_media table</a> table relates the <code>id</code> columns between the features table and the media table.</p>
</div>
<div class="paragraph">
<p>The following SQL query will reveal this information:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>select features.id, features_to_media.related_id
    from features, features_to_media
where features.id=features_to_media.base_id;</pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect1">
<h2 id="_dublin_core_profile_informative"><a class="anchor" href="#_dublin_core_profile_informative"></a>Annex C: Dublin Core Profile (Informative)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Related Tables Extension intends to be flexible in which columns are required. The goal is to support a wide variety of input data. However, with loose control over the columns it can be difficult for users to understand why a specific relationship exists. This annex presents a recommendation that is designed to improve interoperability while maintaining as flexible a structure as possible. It is based on <a href="http://dublincore.org/documents/dcmi-terms/">Dublin Core</a> elements.</p>
</div>
<div class="paragraph">
<p>Columns for the following Dublin Core elements are RECOMMENDED to be present in a mapping table or a related data table. Clients SHOULD look for these elements and attempt to present them to the user where possible.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>date</p>
</li>
<li>
<p>description</p>
</li>
<li>
<p>source</p>
</li>
<li>
<p>title</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Some columns use different names from Dublin Core elements, as shown in <a href="#column_dublin_synonyms">Column Name / Dublin Core Synonyms</a>.</p>
</div>
<table id="column_dublin_synonyms" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 10. Column Name / Dublin Core Synonyms</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Related Table Column Name</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Synonymous Dublin Core Element</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><code>id</code></p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><code>identifier</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><code>content_type</code></p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock"><code>format</code></p></td>
</tr>
</tbody>
</table>
<table id="gpkgext_user_defined_media_table_dublin_core_sql" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 11. Example User Defined Media Table Definition SQL - Dublin Core (Informative)</caption>
</table>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="sql">CREATE TABLE 'sample_media_with_metadata' (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  data BLOB NOT NULL,
  content_type TEXT NOT NULL,
  title TEXT NOT NULL,
  description TEXT NOT NULL,
  date INTEGER NOT NULL,
  source TEXT NOT NULL)</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
There are three ways to store dates in SQLite (and in GeoPackage) - as TEXT (ISO-8601), as REAL (days relative to Gregorian calendar start) and INTEGER (seconds relative to Unix epoch). See SQLite documentation for more information including conversion between forms.
</td>
</tr>
</table>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect1">
<h2 id="_table_definition_sql"><a class="anchor" href="#_table_definition_sql"></a>Annex D: Table Definition SQL</h2>
<div class="sectionbody">
<table id="gpkgext_relations_sql" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 12. Extended Relations Table Definition SQL (Normative)</caption>
</table>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="sql">CREATE TABLE 'gpkgext_relations' (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  base_table_name TEXT NOT NULL,
  base_primary_column TEXT NOT NULL DEFAULT 'id',
  related_table_name TEXT NOT NULL,
  related_primary_column TEXT NOT NULL DEFAULT 'id',
  relation_name TEXT NOT NULL,
  mapping_table_name TEXT NOT NULL UNIQUE
 );</code></pre>
</div>
</div>
<table id="gpkgext_user_defined_mapping_table_sql" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 13. Extended Relations Mapping Table SQL (Informative)</caption>
</table>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="sql">CREATE TABLE 'sample_mapping_table' (
  base_id INTEGER NOT NULL,
  related_id INTEGER NOT NULL
 );</code></pre>
</div>
</div>
<table id="gpkg_features_sql" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 14. Example User Defined Features Table Definition SQL (Informative)</caption>
</table>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="sql">CREATE TABLE 'sample_feature_table' (
  id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
  geometry GEOMETRY,
  text_attribute TEXT,
  real_attribute REAL,
  boolean_attribute BOOLEAN)</code></pre>
</div>
</div>
<div class="paragraph">
<p>This table is a modified version of <a href="http://www.geopackage.org/spec120/#_sample_feature_table_informative">the informative example in the core document</a>. The <code>raster_or_photo</code> column is removed with the intent of making the binary data available as per this extension.</p>
</div>
<table id="gpkgext_user_defined_media_table_sql" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 15. Example User Defined Media Table Definition SQL (Informative)</caption>
</table>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="sql">CREATE TABLE 'sample_media' (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  data BLOB NOT NULL,
  content_type TEXT NOT NULL)</code></pre>
</div>
</div>
<table id="gpkgext_user_defined_simpleattr_table_sql" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 16. Example User Defined Simple Attribute Table Definition SQL (Informative)</caption>
</table>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="sql">CREATE TABLE 'sample_attributes' (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  label TEXT NOT NULL,
  description TEXT NOT NULL,
  arisings INTEGER NOT NULL)</code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect1">
<h2 id="_revision_history"><a class="anchor" href="#_revision_history"></a>Annex E: Revision History</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Date</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Release</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Editor</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Primary clauses modified</th>
<th class="tableblock halign-left valign-top" style="background-color: #FFFFFF;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">2017-12</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">0.1</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">J. Yutzler</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">all</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">initial version</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">2018-06</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">0.2</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">J. Yutzler</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">all</p></td>
<td class="tableblock halign-left valign-top" style="background-color: #FFFFFF;"><p class="tableblock">post-IE</p></td>
</tr>
</tbody>
</table>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect1">
<h2 id="Bibliography"><a class="anchor" href="#Bibliography"></a>Annex F: Bibliography</h2>
<div class="sectionbody">
<div id="GEOPACKAGE" class="dlist">
<dl>
<dt class="hdlist1">GEOPACKAGE </dt>
<dd>
<p><a href="http://www.geopackage.org/" class="bare">http://www.geopackage.org/</a></p>
</dd>
</dl>
</div>
<div id="SQLITE" class="dlist">
<dl>
<dt class="hdlist1">SQLITE </dt>
<dd>
<p><a href="http://www.sqlite.org/" class="bare">http://www.sqlite.org/</a></p>
</dd>
</dl>
</div>
<div id="GPKG-RTE_IE" class="dlist">
<dl>
<dt class="hdlist1">GPKG-RTE_IE </dt>
<dd>
<p><a href="http://www.opengeospatial.org/projects/initiatives/gpkg-rteie">GeoPackage Related Tables Extension Interoperability Experiment</a></p>
</dd>
</dl>
</div>
<div id="GPKG-RTE_IE_ER" class="dlist">
<dl>
<dt class="hdlist1">GPKG-RTE_IE_ER </dt>
<dd>
<p>OGC: OGC 17-093r1, GeoPackage Related Tables Extension Interoperability Experiment Engineering Report, 2018.</p>
</dd>
</dl>
</div>
<div id="OGC-TJS-IS" class="dlist">
<dl>
<dt class="hdlist1">OGC-TJS-IS </dt>
<dd>
<p><a href="http://portal.opengeospatial.org/files/?artifact_id=40095">OGC: OGC 10-070r2 Table Joining Service Interface Standard, 2010</a></p>
</dd>
</dl>
</div>
<div id="CITE" class="dlist">
<dl>
<dt class="hdlist1">CITE </dt>
<dd>
<p><a href="http://www.opengeospatial.org/cite" class="bare">http://www.opengeospatial.org/cite</a></p>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2022-08-25 20:29:29 UTC
</div>
</div>
</body>
</html>