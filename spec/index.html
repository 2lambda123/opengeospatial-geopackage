<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="generator" content="Asciidoctor 0.1.4">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>OGC® GeoPackage Encoding Standard</title>
<link rel="stylesheet" href="./asciidoctor.css">
<link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/font-awesome/3.2.1/css/font-awesome.min.css">
<link rel="stylesheet" href="./asciidoctor-coderay.css">
</head>
<body class="book">
<div id="header">
</div>
<div id="content">
<div id="ogcname" class="paragraph">
<p>Open Geospatial Consortium<br></p>
</div>
<div id="ogcheading" class="paragraph">
<p>External identifier of this OGC® document: <a href="http://www.opengis.net/doc/IS/geopackage/1.2">http://www.opengis.net/doc/IS/geopackage/1.2</a><br>
URL for this OGC® document: <a href="http://www.geopackage.org/spec">http://www.geopackage.org/spec</a><br>
Internal reference number of this OGC® document: OGC 12-128r15<br>
Version: 1.3_SNAPSHOT<br>
Category: OGC® Encoding Standard<br>
Editor:   Jeff Yutzler<br>
Editor Emeritus: Paul Daisey<br>
<em>Previous Version: <a href="http://www.opengis.net/doc/IS/geopackage/1.2.0">http://www.opengis.net/doc/IS/geopackage/1.2.0</a></em><br>
<em>Publication Date: 2017-08-25</em><br>
<em>Approval Date:   2017-08-06</em><br>
<em>Submission Date: 2017-06-07</em><br>
<em>Original Version: <a href="http://www.opengis.net/doc/IS/geopackage/1.0">http://www.opengis.net/doc/IS/geopackage/1.0</a></em><br></p>
</div>
<div class="sect1">
<h2 id="_ogc_geopackage_encoding_standard">OGC® GeoPackage Encoding Standard</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Copyright © 2017 Open Geospatial Consortium.<br>
To obtain additional rights of use, visit <a href="http://www.opengeospatial.org/legal/">http://www.opengeospatial.org/legal/</a><br></p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>This document is not an OGC Standard. This document is distributed for review and comment. This document is subject to change without notice and may not be referred to as an OGC Standard. This is a revision to <a href="http://www.geopackage.org/spec120/index.html">GeoPackage 1.2 (OGC 12-128r14)</a>. At this time there are only administrative differences between this version and the adopted version.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Document type:   	OGC® Standard<br>
Document subtype:   	Encoding Standard <br>
Document stage:   	Approved<br>
Document language: 	English<br></p>
</div>
<div class="sect1">
<h2 id="_license_agreement">License Agreement</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Permission is hereby granted by the Open Geospatial Consortium, ("Licensor"), free of charge and subject to the terms set forth below, to any person obtaining a copy of this Intellectual Property and any associated documentation, to deal in the Intellectual Property without restriction (except as set forth below), including without limitation the rights to implement, use, copy, modify, merge, publish, distribute, and/or sublicense copies of the Intellectual Property, and to permit persons to whom the Intellectual Property is furnished to do so, provided that all copyright notices on the intellectual property are retained intact and that each person to whom the Intellectual Property is furnished agrees to the terms of this Agreement.</p>
</div>
<div class="paragraph">
<p>If you modify the Intellectual Property, all copies of the modified Intellectual Property must include, in addition to the above copyright notice, a notice that the Intellectual Property includes modifications that have not been approved or adopted by LICENSOR.</p>
</div>
<div class="paragraph">
<p>THIS LICENSE IS A COPYRIGHT LICENSE ONLY, AND DOES NOT CONVEY ANY RIGHTS UNDER ANY PATENTS THAT MAY BE IN FORCE ANYWHERE IN THE WORLD.</p>
</div>
<div class="paragraph">
<p>THE INTELLECTUAL PROPERTY IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, AND NONINFRINGEMENT OF THIRD PARTY RIGHTS. THE COPYRIGHT HOLDER OR HOLDERS INCLUDED IN THIS NOTICE DO NOT WARRANT THAT THE FUNCTIONS CONTAINED IN THE INTELLECTUAL PROPERTY WILL MEET YOUR REQUIREMENTS OR THAT THE OPERATION OF THE INTELLECTUAL PROPERTY WILL BE UNINTERRUPTED OR ERROR FREE. ANY USE OF THE INTELLECTUAL PROPERTY SHALL BE MADE ENTIRELY AT THE USER&#8217;S OWN RISK. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR ANY CONTRIBUTOR OF INTELLECTUAL PROPERTY RIGHTS TO THE INTELLECTUAL PROPERTY BE LIABLE FOR ANY CLAIM, OR ANY DIRECT, SPECIAL, INDIRECT OR CONSEQUENTIAL DAMAGES, OR ANY DAMAGES WHATSOEVER RESULTING FROM ANY ALLEGED INFRINGEMENT OR ANY LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR UNDER ANY OTHER LEGAL THEORY, ARISING OUT OF OR IN CONNECTION WITH THE IMPLEMENTATION, USE, COMMERCIALIZATION OR PERFORMANCE OF THIS INTELLECTUAL PROPERTY.</p>
</div>
<div class="paragraph">
<p>This license is effective until terminated. You may terminate it at any time by destroying the Intellectual Property together with all copies in any form. The license will also terminate if you fail to comply with any term or condition of this Agreement. Except as provided in the following sentence, no such termination of this license shall require the termination of any third party end-user sublicense to the Intellectual Property which is in force as of the date of notice of such termination. In addition, should the Intellectual Property, or the operation of the Intellectual Property, infringe, or in LICENSOR&#8217;s sole opinion be likely to infringe, any patent, copyright, trademark or other right of a third party, you agree that LICENSOR, in its sole discretion, may terminate this license without any compensation or liability to you, your licensees or any other party. You agree upon termination of any kind to destroy or cause to be destroyed the Intellectual Property together with all copies in any form, whether held by you or by any third party.</p>
</div>
<div class="paragraph">
<p>Except as contained in this notice, the name of LICENSOR or of any other holder of a copyright in all or part of the Intellectual Property shall not be used in advertising or otherwise to promote the sale, use or other dealings in this Intellectual Property without prior written authorization of LICENSOR or such copyright holder. LICENSOR is and shall at all times be the sole entity that may authorize you or any third party to use certification marks, trademarks or other special designations to indicate compliance with any LICENSOR standards or specifications.</p>
</div>
<div class="paragraph">
<p>This Agreement is governed by the laws of the Commonwealth of Massachusetts. The application to this Agreement of the United Nations Convention on Contracts for the International Sale of Goods is hereby expressly excluded. In the event any provision of this Agreement shall be deemed unenforceable, void or invalid, such provision shall be modified so as to make it valid and enforceable, and as so modified the entire Agreement shall remain in full force and effect. No decision, action or inaction by LICENSOR shall be construed to be a waiver of any rights or remedies available to it. None of the Intellectual Property or underlying information or technology may be downloaded or otherwise exported or reexported in violation of U.S. export laws and regulations. In addition, you are responsible for complying with any local laws in your jurisdiction which may impact your right to import, export or use the Intellectual Property, and you represent that you have complied with any regulations or registration procedures required by applicable law to make this license enforceable.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_patent_call">Patent Call</h2>
<div class="sectionbody">
<div class="paragraph">
<p><em>Attention is drawn to the possibility that some of the elements of this document may be the subject of patent rights. The Open Geospatial Consortium shall not be held responsible for identifying any or all such patent rights.</em></p>
</div>
<div class="paragraph">
<p><em>Recipients of this document are requested to submit, with their comments, notification of any relevant patent claims or other intellectual property rights of which they may be aware that might be infringed by any implementation of the standard set forth in this document, and to provide supporting documentation.</em></p>
</div>
<div id="toc" class="toc2">
<div id="toctitle" class="title">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_ogc_geopackage_encoding_standard">OGC® GeoPackage Encoding Standard</a></li>
<li>
<ul class="sectlevel1">
<li><a href="#_license_agreement">License Agreement</a></li>
<li><a href="#_patent_call">Patent Call</a></li>
<li><a href="#_abstract">Abstract</a></li>
<li><a href="#_keywords">Keywords</a></li>
<li><a href="#_introduction">Introduction</a></li>
<li><a href="#_base">1. Base</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#_core">1.1. Core</a></li>
<li>
<ul class="sectlevel3">
<li><a href="#_sqlite_container">1.1.1. SQLite Container</a></li>
<li><a href="#spatial_ref_sys">1.1.2. Spatial Reference Systems</a></li>
<li><a href="#_contents">1.1.3. Contents</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_options">2. Options</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#features">2.1. Features</a></li>
<li>
<ul class="sectlevel3">
<li><a href="#sfsql_intro">2.1.1. Simple Features SQL Introduction</a></li>
<li><a href="#_contents_2">2.1.2. Contents</a></li>
<li><a href="#gpb_format">2.1.3. Geometry Encoding</a></li>
<li><a href="#sql_geometry_types">2.1.4. SQL Geometry Types</a></li>
<li><a href="#_geometry_columns">2.1.5. Geometry Columns</a></li>
<li><a href="#feature_user_tables">2.1.6. Vector Feature User Data Tables</a></li>
</ul>
</li>
<li><a href="#tiles">2.2. Tiles</a></li>
<li>
<ul class="sectlevel3">
<li><a href="#_tile_matrix_introduction">2.2.1. Tile Matrix Introduction</a></li>
<li><a href="#_contents_3">2.2.2. Contents</a></li>
<li><a href="#zoom_levels">2.2.3. Zoom Levels</a></li>
<li><a href="#tile_enc_png">2.2.4. Tile Encoding PNG</a></li>
<li><a href="#tile_enc_jpeg">2.2.5. Tile Encoding JPEG</a></li>
<li><a href="#_tile_matrix_set">2.2.6. Tile Matrix Set</a></li>
<li><a href="#tile_matrix">2.2.7. Tile Matrix</a></li>
<li><a href="#tiles_user_tables">2.2.8. Tile Pyramid User Data Tables</a></li>
</ul>
</li>
<li><a href="#extension_mechanism">2.3. Extension Mechanism</a></li>
<li>
<ul class="sectlevel3">
<li><a href="#_introduction_2">2.3.1. Introduction</a></li>
<li><a href="#_extensions">2.3.2. Extensions</a></li>
</ul>
</li>
<li><a href="#attributes">2.4. Attributes</a></li>
<li>
<ul class="sectlevel3">
<li><a href="#_introduction_3">2.4.1. Introduction</a></li>
<li><a href="#_contents_4">2.4.2. Contents</a></li>
<li><a href="#_attributes_user_data_tables">2.4.3. Attributes User Data Tables</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_security_considerations">3. Security Considerations</a></li>
<li><a href="#abstract_test_suite"> Annex A: Conformance / Abstract Test Suite (Normative)</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#_base_2">A.1. Base</a></li>
<li>
<ul class="sectlevel3">
<li><a href="#_core_2">A.1.1. Core</a></li>
</ul>
</li>
<li><a href="#_options_2">A.2. Options</a></li>
<li>
<ul class="sectlevel3">
<li><a href="#_features">A.2.1. Features</a></li>
<li><a href="#_tiles">A.2.2. Tiles</a></li>
<li><a href="#_extension_mechanism">A.2.3. Extension Mechanism</a></li>
<li><a href="#_attributes">A.2.4. Attributes</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#background_and_context"> Annex B: Background and Context (Normative)</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#_background">B.1. Background</a></li>
<li><a href="#_document_terms_and_definitions">B.2. Document terms and definitions</a></li>
<li><a href="#_conventions">B.3. Conventions</a></li>
<li><a href="#_submitting_organizations_informative">B.4. Submitting Organizations (Informative)</a></li>
<li><a href="#_document_contributor_contact_points_informative">B.5. Document contributor contact points (Informative)</a></li>
<li><a href="#_revision_history_informative">B.6. Revision History (Informative)</a></li>
<li><a href="#_changes_to_the_ogc_abstract_specification">B.7. Changes to the OGC® Abstract Specification</a></li>
<li><a href="#_changes_to_ogc_implementation_standards">B.8. Changes to OGC® Implementation Standards</a></li>
<li><a href="#_potential_future_work_informative">B.9. Potential Future Work (Informative)</a></li>
<li><a href="#_uml_notation">B.10. UML Notation</a></li>
<li><a href="#_geopackage_tables_detailed_diagram">B.11. GeoPackage Tables Detailed Diagram</a></li>
<li><a href="#_geopackage_minimal_tables_for_features_diagram">B.12. GeoPackage Minimal Tables for Features Diagram</a></li>
<li><a href="#_geopackage_minimal_tables_for_tiles_diagram">B.13. GeoPackage Minimal Tables for Tiles Diagram</a></li>
</ul>
</li>
<li><a href="#table_definition_sql"> Annex C: Table Definition SQL (Normative)</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#_gpkg_spatial_ref_sys">C.1. gpkg_spatial_ref_sys</a></li>
<li><a href="#_gpkg_contents">C.2. gpkg_contents</a></li>
<li><a href="#_gpkg_geometry_columns">C.3. gpkg_geometry_columns</a></li>
<li><a href="#_sample_feature_table_informative">C.4. sample_feature_table (Informative)</a></li>
<li><a href="#_gpkg_tile_matrix_set">C.5. gpkg_tile_matrix_set</a></li>
<li><a href="#_gpkg_tile_matrix">C.6. gpkg_tile_matrix</a></li>
<li><a href="#_sample_tile_pyramid_informative">C.7. sample_tile_pyramid (Informative)</a></li>
<li><a href="#_gpkg_extensions">C.8. gpkg_extensions</a></li>
<li><a href="#_sample_attributes_table_informative">C.9. sample_attributes_table (Informative)</a></li>
</ul>
</li>
<li><a href="#_trigger_definition_sql_informative"> Annex D: Trigger Definition SQL (Informative)</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#_gpkg_tile_matrix_2">D.1. gpkg_tile_matrix</a></li>
<li><a href="#_sample_feature_table">D.2. sample_feature_table</a></li>
<li><a href="#_sample_tile_pyramid">D.3. sample_tile_pyramid</a></li>
</ul>
</li>
<li><a href="#extension_template"> Annex E: GeoPackage Extension Template (Informative)</a></li>
<li><a href="#registered_extensions"> Annex F: Registered Extensions (Normative)</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#extension_geometry_types">F.1. GeoPackage Non-Linear Geometry Types</a></li>
<li><a href="#extension_geometry_encoding">F.2. User Defined Geometry Types Extension of GeoPackageBinary Geometry Encoding</a></li>
<li><a href="#extension_rtree">F.3. RTree Spatial Indexes</a></li>
<li><a href="#extension_geometry_type_triggers">F.4. Geometry Type Triggers</a></li>
<li><a href="#extension_geometry_srsid_triggers">F.5. Geometry SRS ID Triggers</a></li>
<li><a href="#extension_zoom_other_intervals">F.6. Zoom Other Intervals</a></li>
<li><a href="#extension_tiles_webp">F.7. Tiles Encoding WebP</a></li>
<li><a href="#extension_metadata">F.8. Metadata</a></li>
<li><a href="#extension_schema">F.9. Schema</a></li>
<li><a href="#extension_crs_wkt">F.10. WKT for Coordinate Reference Systems</a></li>
<li><a href="#extension_tiled_gridded_coverage_data">F.11. Tiled Gridded Coverage Data</a></li>
</ul>
</li>
<li><a href="#geometry_types"> Annex G: Geometry Types (Normative)</a></li>
<li><a href="#tiles_example_appendix"> Annex H: Tiles Zoom Times Two Example (Informative)</a></li>
<li><a href="#_normative_references_normative"> Annex I: Normative References (Normative)</a></li>
<li><a href="#_bibliography_informative"> Annex J: Bibliography (Informative)</a></li>
<li><a href="#_endnotes"> Annex K: Endnotes</a></li>
</ul>
</li>
</ul>
</div>

</div>
</div>
<div class="sect1">
<h2 id="_abstract">Abstract</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This OGC® Encoding Standard defines GeoPackages for exchange and GeoPackage SQLite Extensions for direct use of vector geospatial features and / or tile matrix sets of earth images and raster maps at various scales. Direct use means the ability to access and update data in a "native" storage format without intermediate format translations in an environment (e.g. through an API) that guarantees data model and data set integrity and identical access and update results in response to identical requests from different client applications.  GeoPackages are interoperable across all enterprise and personal computing environments, and are particularly useful on mobile devices like cell phones and tablets in communications environments with limited connectivity and bandwidth.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_keywords">Keywords</h2>
<div class="sectionbody">
<div class="paragraph">
<p>ogcdoc, geopackage, sqlite, raster, tiles, vector, feature, data, storage, exchange, mobile, smartphone, tablet</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_introduction">Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A <strong>GeoPackage</strong> is an open, standards-based, platform-independent, portable, self-describing, compact format for transferring geospatial information.
It is a platform-independent SQLite <a href="#5">[5]</a> database file that contains the GeoPackage data and metadata tables shown in <a href="#geopackage_tables_figure">GeoPackage Tables Overview</a> below.</p>
</div>
<div class="paragraph">
<p>The GeoPackage Encoding Standard (this document) describes a set of conventions for storing the following within an SQLite database:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>vector features</p>
</li>
<li>
<p>tile matrix sets of imagery and raster maps at various scales</p>
</li>
<li>
<p>attributes (non-spatial data)</p>
</li>
<li>
<p>extensions</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These conventions include table definitions, integrity assertions, format limitations, and content constraints. The required and supported content of a GeoPackage is entirely defined in the standard. These capabilities are built on a common base and the extension mechanism provides implementors a way to include additional functionality in their GeoPackages.</p>
</div>
<div class="paragraph">
<p>Since a GeoPackage is a database container, it supports direct use. This means that the data in a GeoPackage can be accessed and updated in a "native" storage format without intermediate format translations. GeoPackages that comply with the requirements in the standard and do not implement vendor-specific extensions are interoperable across all enterprise and personal computing environments. GeoPackages are particularly useful on mobile devices such as cell phones and tablets in communications environments where there is limited connectivity and bandwidth.Mobile device users who require map/geospatial application services and operate in disconnected or limited network connectivity environments are challenged by limited storage capacity and the lack of open format geospatial data to support these applications.</p>
</div>
<div class="paragraph">
<p>This standard is intended to facilitate widespread adoption and use of GeoPackages by both COTS and open-source software applications on enterprise production platforms as well as mobile hand-held devices <a href="#B1">[B1]</a> <a href="#B2">[B2]</a>, given that mobile hand held devices do not yet have the processing power or battery life to effectively tackle difficult geospatial product production and analysis tasks.</p>
</div>
<div class="paragraph">
<p>An <strong>Extended GeoPackage</strong> is a <strong>GeoPackage</strong> that contains any additional data elements (tables or columns) or SQL constructs (views, data types, functions, indexes, constraints or triggers) that are not automatically maintained within the SQLite data file or that result in a change in behavior not specified in this encoding standard.</p>
</div>
<div class="paragraph">
<p>A <strong>GeoPackage</strong> MAY be "empty" (contain user data table(s) for vector features, non-spatial attributes, and/or tile matrix pyramids with no row record content) or contain one or many vector feature type records and /or one or many tile matrix pyramid tile images.
GeoPackage metadata CAN describe GeoPackage data contents and identify external data synchronization sources and targets.
A GeoPackage MAY contain spatial indexes on feature geometries and SQL triggers to maintain indexes and enforce content constraints.</p>
</div>
<div class="paragraph">
<p>A <strong>GeoPackage SQLite Configuration</strong> consists of the SQLite 3 software library and a set of compile- and runtime configurations options.</p>
</div>
<div class="paragraph">
<p>A <strong>GeoPackage SQLite Extension</strong> is a SQLite loadable extension that MAY provide SQL functions <a href="#12">[12]</a> to support spatial indexes and SQL triggers linked to a SQLite library with specified configuration requirements to provide SQL API <a href="#1">[1]</a> <a href="#2">[2]</a> <a href="#3">[3]</a> <a href="#4">[4]</a> access to a GeoPackage file. This standard does not address the issues listed in the <a href="#_potential_future_work">[_potential_future_work]</a> clause in <a href="#background_and_context">Background and Context (Normative)</a>, which MAY be addressed in a subsequent version of this standard or by other specifications.</p>
</div>
<div id="geopackage_tables_figure" class="imageblock">
<div class="content">
<img src="geopackage-overview.png" alt="GeoPackage Tables">
</div>
<div class="title">Figure 1. GeoPackage Tables Overview</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_base">1. Base</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The required capabilities specified in this clause serve as the base for options specified in clause <a href="#_options">Options</a> and extensions specified in clause <a href="#registered_extensions">Registered Extensions (Normative)</a>.
All gpkg_* tables and views and all tiles user data tables specified in this standard SHALL have only the specified columns and table constraints. Any features user data tables MAY have columns in addition to those specified.
All specified table, view, column, trigger, and constraint name values SHALL be lowercase.</p>
</div>
<div class="sect2">
<h3 id="_core">1.1. Core</h3>
<div class="paragraph">
<p>The mandatory core capabilities defined in sub clauses and requirement statements of this clause SHALL be implemented by every <strong>GeoPackage</strong> and <strong>GeoPackage SQLite Configuration</strong>.</p>
</div>
<div class="sect3">
<h4 id="_sqlite_container">1.1.1. SQLite Container</h4>
<div class="paragraph">
<p>The SQLite software library provides a self-contained, single-file, cross-platform, serverless, transactional, open source RDBMS container.
The GeoPackage standard defines a SQL database schema designed for use with the SQLite software library.
Using SQLite as the basis for GeoPackage simplifies production, distribution and use of GeoPackages and assists in guaranteeing the integrity of the data they contain.</p>
</div>
<div class="paragraph">
<p>"Self-contained" means that container software requires very minimal support from external libraries or from the operating system.
"Single-file" means that a container not currently opened by any software application consists of a single file in a file system supported by a computing platform operating system.
"Cross-platform" means that a container file MAY be created and loaded with data on one computing platform, and used and updated on another, even if they use different operating systems, file systems, and byte order (endian) conventions.
"Serverless" means that the RDBMS container is implemented without any intermediary server process, and accessed directly by application software.
"Transactional" means that RDBMS transactions guarantee that all changes to data in the container are Atomic, Consistent, Isolated, and Durable (ACID) despite program crashes, operating system crashes, and power failures.</p>
</div>
<div class="sect4">
<h5 id="_data">1.1.1.1. Data</h5>
<div class="sect5">
<h6 id="_file_format">1.1.1.1.1. File Format</h6>
<div id="r1" class="exampleblock">
<div class="title">Requirement 1</div>
<div class="content">
<div class="paragraph">
<p>A GeoPackage SHALL be a <a href="http://www.sqlite.org/">SQLite</a> <a href="#5">[5]</a> database file using <a href="http://sqlite.org/fileformat2.html">version 3 of the SQLite file format</a> <a href="#6">[6]</a> <a href="#7">[7]</a>.
The first 16 bytes of a GeoPackage SHALL be the null-terminated ASCII <a href="#B4">[B4]</a> string "SQLite format 3" <sup><a href="#K1">[K1]</a></sup> <sup><a href="#K2">[K2]</a></sup></p>
</div>
</div>
</div>
<div id="r2" class="exampleblock">
<div class="title">Requirement 2</div>
<div class="content">
<div class="paragraph">
<p>A GeoPackage SHALL contain a value of 0x47504B47 ("GPKG" in ASCII) in the "application_id" field of the SQLite database header to indicate that it is a GeoPackage. <sup><a href="#K3">[K3]</a></sup> A GeoPackage SHALL contain an appropriate value in "user_version" field of the SQLite database header to indicate its version. The value SHALL be in integer with a major version, two-digit minor version, and two-digit bug-fix. For GeoPackage Version 1.2 this value is 0x000027D8 (the hexadecimal value for 10200). <sup><a href="#K4">[K4]</a></sup></p>
</div>
</div>
</div>
<div class="paragraph">
<p>The maximum size of a GeoPackage file is about 140TB <sup><a href="#K4a">[K4a]</a></sup>.
In practice a lower size limit MAY be imposed by the filesystem to which the file is written.
Many mobile devices require external memory cards to be formatted using the FAT32 file system which imposes a maximum size limit of 4GB.</p>
</div>
</div>
<div class="sect5">
<h6 id="_file_extension_name">1.1.1.1.2. File Extension Name</h6>
<div id="r3" class="exampleblock">
<div class="title">Requirement 3</div>
<div class="content">
<div class="paragraph">
<p>A GeoPackage SHALL have the file extension name ".gpkg".</p>
</div>
</div>
</div>
<div class="paragraph">
<p><span class="line-through">It is RECOMMENDED that Extended GeoPackages use the file extension ".gpkx", but this is NOT a GeoPackage requirement.</span></p>
</div>
</div>
<div class="sect5">
<h6 id="_file_contents">1.1.1.1.3. File Contents</h6>
<div id="r4" class="exampleblock">
<div class="title">Requirement 4</div>
<div class="content">
<div class="paragraph">
<p>A GeoPackage SHALL only contain the data elements (tables, columns, or values) and SQL constructs (views, constraints, or triggers) specified in the core of this encoding standard (<a href="#features">Features</a>, <a href="#tiles">Tiles</a>, and <a href="#attributes">Attributes</a>). Extended GeoPackages MAY contain additional data elements and SQL constructs as specified through the <a href="#extension_mechanism">Extension Mechanism</a>.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>The <strong>GeoPackage</strong> designation is designed to provide maximum interoperability between applications. In an <strong>Extended GeoPackage</strong>, the extension mechanism is used to provide additional capabilities in a way that maintains interoperability as much as possible. Developers are encouraged to consider the implications of extensions when designing their applications. Best practices include the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Designing in a way that anticipates the presence of unexpected extensions, e.g., gracefully handling unexpected columns, values, or encodings.</p>
</li>
<li>
<p>Using the <a href="#extension_rtree">RTree Spatial Indexes</a> extension for GeoPackages containing a non-trivial amount of vector data.</p>
</li>
<li>
<p>Using the <a href="#extension_crs_wkt">WKT for Coordinate Reference Systems</a> extension, which is strongly recommended due to inherent weaknesses in the original standard for encoding coordinate reference systems.</p>
</li>
</ul>
</div>
<div id="r5" class="exampleblock">
<div class="title">Requirement 5</div>
<div class="content">
<div class="paragraph">
<p>The columns of tables in a GeoPackage SHALL only be declared using one of the data types specified in table <a href="#table_column_data_types">GeoPackage Data Types</a>. Extended GeoPackages MAY contain additional data types as specified through the <a href="#extension_mechanism">Extension Mechanism</a>.</p>
</div>
</div>
</div>
<table id="table_column_data_types" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 1. GeoPackage Data Types</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Data Type</th>
<th class="tableblock halign-left valign-top">Size and Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">BOOLEAN</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A boolean value representing true or false. Stored as SQLite INTEGER with value 0 for false or 1 for true.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TINYINT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8-bit signed two&#8217;s complement integer. Stored as SQLite INTEGER with values in the range [-128, 127].</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SMALLINT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">16-bit signed two&#8217;s complement integer. Stored as SQLite INTEGER with values in the range [-32768, 32767].</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MEDIUMINT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">32-bit signed two&#8217;s complement integer. Stored as SQLite INTEGER with values in the range [-2147483648, 2147483647].</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">INT, INTEGER</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">64-bit signed two&#8217;s complement integer. Stored as SQLite INTEGER with values in the range [-9223372036854775808, 9223372036854775807].</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">FLOAT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">32-bit IEEE floating point number. Stored as SQLite REAL limited to values that can be represented as a 4-byte IEEE floating point number.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DOUBLE, REAL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">64-bit IEEE floating point number. Stored as SQLite REAL.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT{(maxchar_count)}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Variable length string encoded in either UTF-8 or UTF-16, determined by PRAGMA encoding; see <a href="http://www.sqlite.org/pragma.html#pragma_encoding">http://www.sqlite.org/pragma.html#pragma_encoding</a>. The optional maxchar_count defines the maximum number of characters in the string. If not specified, the length is unbounded. The count is provided for informational purposes, and applications MAY choose to truncate longer strings if encountered. When present, it is best practice for applications to adhere to the character count. Stored as SQLite TEXT.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">BLOB{(max_size)}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Variable length binary data. The optional max_size defines the maximum number of bytes in the blob. If not specified, the length is unbounded. The size is provided for informational purposes. When present, it is best practice for applications adhere to the maximum blob size. Stored as SQLite BLOB.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;geometry_type_name&gt;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Geometry encoded as per clause <a href="#gpb_format">Geometry Encoding</a>. &lt;geometry type_name&gt; is one of the core geometry types listed in <a href="#geometry_types">Geometry Types (Normative)</a> encoded per clause 2.1.3 or a geometry type encoded per an extension such as <a href="#extension_geometry_types">GeoPackage Non-Linear Geometry Types</a>. Geometry Types XY, XYZ, XYM and XYZM geometries use the same data type. Stored as SQLite BLOB.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DATE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ISO-8601 date string in the form YYYY-MM-DD encoded in either UTF-8 or UTF-16. See TEXT. Stored as SQLite TEXT.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DATETIME</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ISO-8601 date/time string in the form YYYY-MM-DDTHH:MM:SS.SSSZ with T separator character and Z suffix for coordinated universal time (UTC) encoded in either UTF-8 or UTF-16. See TEXT. Stored as SQLite TEXT.</p></td>
</tr>
</tbody>
</table>

</div>
<div class="sect5">
<h6 id="_file_integrity">1.1.1.1.4. File Integrity</h6>
<div id="r6" class="exampleblock">
<div class="title">Requirement 6</div>
<div class="content">
<div class="paragraph">
<p>The SQLite PRAGMA integrity_check SQL command SHALL return "ok" for a GeoPackage file. <sup><a href="#K5">[K5]</a></sup></p>
</div>
</div>
</div>
<div id="r7" class="exampleblock">
<div class="title">Requirement 7</div>
<div class="content">
<div class="paragraph">
<p>The SQLite PRAGMA foreign_key_check SQL with no parameter value SHALL return an empty result set indicating no invalid foreign key values for a GeoPackage file.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_api">1.1.1.2. API</h5>
<div class="sect5">
<h6 id="api_sql">1.1.1.2.1. Structured Query Language (SQL)</h6>
<div id="r8" class="exampleblock">
<div class="title">Requirement 8</div>
<div class="content">
<div class="paragraph">
<p>A GeoPackage SQLite Configuration SHALL provide SQL access to GeoPackage contents via <a href="http://www.sqlite.org/download.html">SQLite version 3</a> <a href="#6">[6]</a> software APIs. <sup><a href="#K6">[K6]</a></sup></p>
</div>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_every_gpkg_sqlite_configuration">1.1.1.2.2. Every GPKG SQLite Configuration</h6>
<div class="paragraph">
<p>The <a href="http://www.sqlite.org/download.html">SQLite</a> <a href="#8">[8]</a> library has many <a href="http://www.sqlite.org/compile.html">compile time</a> and <a href="http://www.sqlite.org/pragma.html">run time</a> options that MAY be used to configure SQLite for different uses. Use of <a href="http://www.sqlite.org/compile.html#omitfeatures">SQLITE_OMIT options</a> is not recommended because certain elements of the GeoPackage standard depend on the availability of SQLite functionality at runtime.</p>
</div>
<div id="r9" class="exampleblock">
<div class="title">Requirement 9</div>
<div class="content">
<div class="paragraph">
<p><span class="line-through">Every GeoPackage SQLite Configuration SHALL have the SQLite library compile time options specified in clause 1.1.1.2.2 table <a href="#every_gpkg_sqlite_config_table">[every_gpkg_sqlite_config_table]</a>.</span></p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="spatial_ref_sys">1.1.2. Spatial Reference Systems</h4>
<div class="sect4">
<h5 id="_data_2">1.1.2.1. Data</h5>
<div class="sect5">
<h6 id="spatial_ref_sys_data_table_definition">1.1.2.1.1. Table Definition</h6>
<div id="r10" class="exampleblock">
<div class="title">Requirement 10</div>
<div class="content">
<div class="paragraph">
<p>A GeoPackage SHALL include a <code>gpkg_spatial_ref_sys</code> table per clause 1.1.2.1.1 <a href="#spatial_ref_sys_data_table_definition">Table Definition</a>, Table <a href="#gpkg_spatial_ref_sys_cols">Spatial Ref Sys Table Definition</a> and Table <a href="#gpkg_spatial_ref_sys_sql">gpkg_spatial_ref_sys Table Definition SQL</a>.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>A table named <code>gpkg_spatial_ref_sys</code> is the first component of the standard SQL schema for simple features described in clause <a href="#sfsql_intro">Simple Features SQL Introduction</a> below.
The coordinate reference system definitions it contains are referenced by the GeoPackage <code>gpkg_contents</code> and <code>gpkg_geometry_columns</code> tables to relate the vector and tile data in user tables to locations on the earth.</p>
</div>
<div class="paragraph">
<p>The <code>gpkg_spatial_ref_sys</code> table includes the columns specified in SQL/MM (ISO 13249-3) <a href="#12">[12]</a> and shown in <a href="#gpkg_spatial_ref_sys_cols">Spatial Ref Sys Table Definition</a> below containing data that defines spatial reference systems.
Views of this table MAY be used to provide compatibility with the <a href="http://www.iso.org/iso/home/store/catalogue_ics/catalogue_detail_ics.htm?csnumber=53698">SQL/MM</a> <a href="#12">[12]</a> (see <a href="#sqlmm_gpkg_spatial_ref_sys_sql">SQL/MM View of gpkg_spatial_ref_sys Definition SQL (Informative)</a>) and OGC <a href="http://portal.opengeospatial.org/files/?artifact_id=25354">Simple Features SQL</a> <a href="#9">[9]</a><a href="#10">[10]</a><a href="#11">[11]</a> (Table 21) standards.</p>
</div>
<table id="gpkg_spatial_ref_sys_cols" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 2. Spatial Ref Sys Table Definition</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Column Name</th>
<th class="tableblock halign-left valign-top">Column Type</th>
<th class="tableblock halign-left valign-top">Column Description</th>
<th class="tableblock halign-left valign-top">Null</th>
<th class="tableblock halign-left valign-top">Key</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>srs_name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Human readable name of this SRS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>srs_id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">INTEGER</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique identifier for each Spatial Reference System within a GeoPackage</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>organization</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Case-insensitive name of the defining organization e.g. EPSG or epsg</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>organization_coordsys_id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">INTEGER</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Numeric ID of the Spatial Reference System assigned by the organization</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>definition</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Well-known Text <a href="#32">[32]</a> Representation of the Spatial Reference System</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>description</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Human readable description of this SRS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p>See <a href="#gpkg_spatial_ref_sys_sql">gpkg_spatial_ref_sys Table Definition SQL</a>.</p>
</div>
</div>
<div class="sect5">
<h6 id="gpkg_srs_table_data_values">1.1.2.1.2. Table Data Values</h6>
<div class="paragraph">
<p>Definition column WKT values in the <code>gpkg_spatial_ref_sys</code> table define the Spatial Reference Systems used by feature geometries and tile images, unless these SRSs are unknown and therefore undefined as specified in <a href="#r11">Requirement 11</a>. Values are constructed per the EBNF syntax in <a href="#32">[32]</a> clause 7. EBNF name and number values may be obtained from any specified authority, e.g. <a href="#13">[13]</a><a href="#14">[14]</a>. For example, see the return value in <a href="#spatial_ref_sys_data_values_default">[spatial_ref_sys_data_values_default]</a> Test Method step (3) used to test the definition for WGS-84 per <a href="#r11">Requirement 11</a>:</p>
</div>
<div id="r11" class="exampleblock">
<div class="title">Requirement 11</div>
<div class="content">
<div class="paragraph">
<p>The <code>gpkg_spatial_ref_sys</code> table SHALL contain at a minimum the records listed in <a href="#gpkg_spatial_ref_sys_records">Spatial Ref Sys Table Records</a>. The record with an <code>srs_id</code> of 4326 SHALL correspond to <a href="http://www.google.com/search?as_q=WGS-84">WGS-84</a> <a href="#15">[15]</a> as defined by  <a href="http://www.epsg.org/Geodetic.html">EPSG</a> <a href="#B3">[B3]</a> in <a href="http://www.epsg-registry.org/report.htm?type=selection&amp;entity=urn:ogc:def:crs:EPSG::4326&amp;reportDetail=long&amp;title=WGS%2084&amp;style=urn:uuid:report-style:default-with-code&amp;style_name=OGP%20Default%20With%20Code">4326</a> <a href="#13">[13]</a><a href="#14">[14]</a>. The record with an <code>srs_id</code> of -1 SHALL be used for undefined Cartesian coordinate reference systems. The record with an <code>srs_id</code> of 0 SHALL be used for undefined geographic coordinate reference systems.</p>
</div>
</div>
</div>
<table id="gpkg_spatial_ref_sys_records" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 3. Spatial Ref Sys Table Records</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code>srs_name</code></th>
<th class="tableblock halign-left valign-top"><code>srs_id</code></th>
<th class="tableblock halign-left valign-top"><code>organization</code></th>
<th class="tableblock halign-left valign-top"><code>organization_coordsys_id</code></th>
<th class="tableblock halign-left valign-top"><code>definition</code></th>
<th class="tableblock halign-left valign-top"><code>description</code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">any</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4326</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>EPSG</code> or <code>epsg</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4326</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">any</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">any</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">any</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>NONE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>undefined</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">any</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">any</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>NONE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>undefined</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">any</p></td>
</tr>
</tbody>
</table>

<div id="r12" class="exampleblock">
<div class="title">Requirement 12</div>
<div class="content">
<div class="paragraph">
<p>The <code>gpkg_spatial_ref_sys</code> table in a GeoPackage SHALL contain records to define all spatial reference systems used by features and tiles in a GeoPackage.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_contents">1.1.3. Contents</h4>
<div class="paragraph">
<p>The <code>gpkg_contents</code> table is intended to provide a list of all geospatial contents in a GeoPackage. It provides identifying and descriptive information that an application can display to a user as a menu of geospatial data that is available for access and/or update.</p>
</div>
<div class="sect4">
<h5 id="_data_3">1.1.3.1. Data</h5>
<div class="sect5">
<h6 id="_table_definition">1.1.3.1.1. Table Definition</h6>
<div id="r13" class="exampleblock">
<div class="title">Requirement 13</div>
<div class="content">
<div class="paragraph">
<p>A GeoPackage file SHALL include a <code>gpkg_contents</code> table per table <a href="#gpkg_contents_cols">Contents Table Definition</a> and <a href="#gpkg_contents_sql">gpkg_contents Table Definition SQL</a>.</p>
</div>
</div>
</div>
<table id="gpkg_contents_cols" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 4. Contents Table Definition</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Column Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Null</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Key</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>table_name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the actual content (e.g., tiles, features, or attributes) table</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>data_type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type of data stored in the table</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>identifier</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A human-readable identifier (e.g. short name) for the table_name content</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UNIQUE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>description</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A human-readable description for the table_name content</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">''</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>last_change</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DATETIME</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">timestamp of last change to content, in ISO 8601 format</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>strftime('%Y-%m-%dT%H:%M:%fZ', 'now')</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>min_x</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DOUBLE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bounding box minimum easting or longitude for all content in table_name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>min_y</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DOUBLE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bounding box minimum northing or latitude for all content in table_name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>max_x</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DOUBLE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bounding box maximum easting or longitude for all content in table_name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>max_y</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DOUBLE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bounding box maximum northing or latitude for all content in table_name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>srs_id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">INTEGER</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Spatial Reference System ID: <code>gpkg_spatial_ref_sys.srs_id</code>; when <code>data_type</code> is features, SHALL also match <code>gpkg_geometry_columns.srs_id</code>; When data_type is tiles, SHALL also match <code>gpkg_tile_matrix_set.srs_id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">FK</p></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p>See <a href="#gpkg_contents_sql">gpkg_contents Table Definition SQL</a>.</p>
</div>
</div>
<div class="sect5">
<h6 id="_table_data_values">1.1.3.1.2. Table Data Values</h6>
<div id="r14" class="exampleblock">
<div class="title">Requirement 14</div>
<div class="content">
<div class="paragraph">
<p>The <code>table_name</code> column value in a <code>gpkg_contents</code> table row SHALL contain the name of a SQLite table or view.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>The <code>data_type</code> specifies the type of content contained in the table, for example "features" per clause <a href="#features">Features</a>, "attributes" per clause <a href="#attributes">Attributes</a>, "tiles" per clause <a href="#tiles">Tiles</a>, or an implementer-defined value for other data tables per clause in an Extended GeoPackage.</p>
</div>
<div class="paragraph">
<p>The <code>last_change</code> SHOULD contain the timestamp of when the content in the referenced table was last updated, in ISO8601 format. Note that since it is not practical to ensure that this value is maintained properly in all cases, this value should be treated as informative.</p>
</div>
<div id="r15" class="exampleblock">
<div class="title">Requirement 15</div>
<div class="content">
<div class="paragraph">
<p>Values of the <code>gpkg_contents</code> table <code>last_change</code> column SHALL be in <a href="http://www.iso.org/iso/catalogue_detail?csnumber=40874">ISO 8601</a> <a href="#29">[29]</a> format containing a complete date plus UTC hours, minutes, seconds and a decimal fraction of a second, with a <em>Z</em> (<em>zulu</em>) suffix indicating UTC. The ISO8601 format is as defined by the strftime function <em>%Y-%m-%dT%H:%M:%fZ</em> format string applied to the current time. <sup><a href="#K7">[K7]</a></sup></p>
</div>
</div>
</div>
<div class="paragraph">
<p>The bounding box (<code>min_x</code>, <code>min_y</code>, <code>max_x</code>, <code>max_y</code>) provides an informative bounding box of the content. Applications may use this bounding box as the extents of a default view but there are no requirements that this bounding box be exact or represent the minimum bounding box of the content. The values are in the units specified by that CRS.</p>
</div>
<div id="r16" class="exampleblock">
<div class="title">Requirement 16</div>
<div class="content">
<div class="paragraph">
<p>Values of the <code>gpkg_contents</code> table <code>srs_id</code> column SHALL reference values in the <code>gpkg_spatial_ref_sys</code> table <code>srs_id</code> column.</p>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_options">2. Options</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The optional capabilities specified in this clause depend on the required capabilities specified in clause <a href="#_base">Base</a> above.
Each subclause of this clause defines an indivisible module of functionality that can be used in GeoPackages. These modules are referred to as options.
GeoPackages MAY use one or more options defined in this section.
GeoPackages MAY omit the tables for options that are not used.
At a minimum, a GeoPackage SHOULD contain at least one user data table as defined by the Features, Tiles, or Attributes options in clauses <a href="#features">Features</a>, <a href="#tiles">Tiles</a>, and <a href="#attributes">Attributes</a> respectively.</p>
</div>
<div id="r17" class="exampleblock">
<div class="title">Requirement 17</div>
<div class="content">
<div class="paragraph">
<p><span class="line-through">A GeoPackage or Extended GeoPackage SHALL contain features per clause <a href="#features">Features</a> and/or tiles per clause <a href="#tiles">Tiles</a> and row(s) in the <code>gpkg_contents</code> table with lowercase <code>data_type</code> column values of "features" and/or "tiles" describing the user data tables.</span></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="features">2.1. Features</h3>
<div class="sect3">
<h4 id="sfsql_intro">2.1.1. Simple Features SQL Introduction</h4>
<div class="paragraph">
<p>Vector feature data represents geolocated entities including conceptual ones such as districts, real world objects such as roads and rivers, and observations thereof.
International standards <a href="#9">[9]</a><a href="#10">[10]</a><a href="#11">[11]</a><a href="#12">[12]</a> have standardized practices for the storage, access and use of vector geospatial features and geometries via SQL in relational databases.
The first component of the SQL schema for vector features in a GeoPackage is the <code>gpkg_spatial_ref_sys</code> table defined in clause <a href="#spatial_ref_sys">Spatial Reference Systems</a> above.
Other components are defined below.</p>
</div>
<div class="paragraph">
<p>In a GeoPackage, "simple" features are geolocated using a linear geometry subset of the SQL/MM (ISO 13249-3) <a href="#12">[12]</a> geometry model shown in <a href="#core_geometry_model_figure">Core Geometry Model</a> below.</p>
</div>
<div id="core_geometry_model_figure" class="imageblock">
<div class="content">
<img src="core-geometry-model.png" alt="Core geometry model">
</div>
<div class="title">Figure 2. Core Geometry Model</div>
</div>
<div class="paragraph">
<p>The instantiable (not abstract) geometry types defined in this Standard are restricted to 0, 1 and 2-dimensional geometric objects that exist in 2, 3 or 4-dimensional coordinate space (R2, R3 or R4).
Geometry values in R2 have points with coordinate values for x and y.
Geometry values in R3 have points with coordinate values for x, y and z or for x, y and m.
Geometry values in R4 have points with coordinate values for x, y, z and m.
The interpretation of the coordinates is subject to the coordinate reference systems associated to the point.
All coordinates within a geometry object should be in the same coordinate reference systems.</p>
</div>
<div class="paragraph">
<p>Geometries MAY include z coordinate values.
The z coordinate value traditionally represents the third dimension (i.e. 3D).
In a Geographic Information System (GIS) this may be height above or below sea level.
For example: A map might have a point identifying the position of a mountain peak by its location on the earth, with the x and y coordinate values, and the height of the mountain, with the z coordinate value.</p>
</div>
<div class="paragraph">
<p>Geometries MAY include m coordinate values.
The m coordinate value allows the application environment to associate some measure with the point values.
For example: A stream network may be modeled as multilinestring value with the m coordinate values measuring the distance from the mouth of stream.</p>
</div>
<div class="paragraph">
<p>A brief description of each geometry type is provided below.
A more detailed description can be found in ISO 13249-3 <a href="#12">[12]</a>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Geometry: the root of the geometry type hierarchy.</p>
</li>
<li>
<p>Point: a single location in space.
Each point has an X and Y coordinate.
A point MAY optionally also have a Z and/or an M value.</p>
</li>
<li>
<p>Curve: the base type for all 1-dimensional geometry types.
A 1-dimensional geometry is a geometry that has a length, but no area.
A curve is considered simple if it does not intersect itself (except at the start and end point).
A curve is considered closed its start and end point are coincident.
A simple, closed curve is called a ring.</p>
</li>
<li>
<p>LineString: A Curve that connects two or more points in space.</p>
</li>
<li>
<p>Surface: the base type for all 2-dimensional geometry types.
A 2-dimensional geometry is a geometry that has an area.</p>
</li>
<li>
<p>CurvePolygon: A planar surface defined by an exterior ring and zero or more interior ring.
Each ring is defined by a Curve instance.</p>
</li>
<li>
<p>Polygon: A restricted form of CurvePolygon where each ring is defined as a simple, closed LineString.</p>
</li>
<li>
<p>GeometryCollection: A collection of zero or more Geometry instances. <sup><a href="#K8">[K8]</a></sup></p>
</li>
<li>
<p>MultiSurface: A restricted form of GeometryCollection where each Geometry in the collection must be of type Surface.</p>
</li>
<li>
<p>MultiPolygon: A restricted form of MultiSurface where each Surface in the collection must be of type Polygon.</p>
</li>
<li>
<p>MultiCurve: A restricted form of GeometryCollection where each Geometry in the collection must be of type Curve.</p>
</li>
<li>
<p>MultiLineString: A restricted form of MultiCurve where each Curve in the collection must be of type LineString.</p>
</li>
<li>
<p>MultiPoint: A restricted form of GeometryCollection where each Geometry in the collection must be of type Point.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_contents_2">2.1.2. Contents</h4>
<div class="sect4">
<h5 id="_data_4">2.1.2.1. Data</h5>
<div class="sect5">
<h6 id="_contents_table_features_row">2.1.2.1.1. Contents Table – Features Row</h6>
<div id="r18" class="exampleblock">
<div class="title">Requirement 18</div>
<div class="content">
<div class="paragraph">
<p>The <code>gpkg_contents</code> table SHALL contain a row with a lowercase <code>data_type</code> column value of "features" for each vector features user data table or view.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="gpb_format">2.1.3. Geometry Encoding</h4>
<div class="sect4">
<h5 id="_data_5">2.1.3.1. Data</h5>
<div class="sect5">
<h6 id="gpb_data_blob_format">2.1.3.1.1. BLOB Format</h6>
<div id="r19" class="exampleblock">
<div class="title">Requirement 19</div>
<div class="content">
<div class="paragraph">
<p>A GeoPackage SHALL store feature table geometries with or without optional elevation (Z) and/or measure (M) values in SQL BLOBs using the Standard GeoPackageBinary format specified in table <a href="#gpb_spec">GeoPackage SQL Geometry Binary Format</a> and clause <a href="#gpb_data_blob_format">BLOB Format</a>.</p>
</div>
</div>
</div>
<div id="gpb_spec" class="listingblock">
<div class="title">GeoPackage SQL Geometry Binary Format</div>
<div class="content">
<pre>GeoPackageBinaryHeader {
  byte[2] magic = 0x4750; <i class="conum" data-value="1"></i><b>(1)</b>
  byte version;           <i class="conum" data-value="2"></i><b>(2)</b>
  byte flags;             <i class="conum" data-value="3"></i><b>(3)</b>
  int32 srs_id;
  double[] envelope;      <i class="conum" data-value="4"></i><b>(4)</b>
}

StandardGeoPackageBinary {
  GeoPackageBinaryHeader header; <i class="conum" data-value="5"></i><b>(5)</b>
  WKBGeometry geometry;          <i class="conum" data-value="6"></i><b>(6)</b>
}</pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><em>GP</em> in ASCII</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>8-bit unsigned integer, 0 = version 1</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>see <a href="#flags_layout">bit layout of GeoPackageBinary flags byte</a></td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>see flags envelope contents indicator code below</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>The X bit in the header flags field must be set to 0.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>per  OGC 06-103r4 <a href="#9">[9]</a>  <sup><a href="#K9">[K9]</a></sup> <sup><a href="#K10">[K10]</a></sup> <sup><a href="#K11">[K11]</a></sup></td>
</tr>
</table>
</div>
<table id="flags_layout" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 5. bit layout of GeoPackageBinary flags byte</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">bit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">use</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">E</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">E</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">E</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">B</p></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p><strong>flag bits use:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>R: reserved for future use; set to 0</p>
</li>
<li>
<p>X: GeoPackageBinary type</p>
<div class="ulist">
<ul>
<li>
<p>0: StandardGeoPackageBinary. For all core and extended geometry types. See <a href="#geometry_types">Geometry Types (Normative)</a>.</p>
</li>
<li>
<p>1: ExtendedGeoPackageBinary. For user-defined geometry types. See <a href="#extension_geometry_encoding">User Defined Geometry Types Extension of GeoPackageBinary Geometry Encoding</a>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Y: empty geometry flag</p>
<div class="ulist">
<ul>
<li>
<p>0: non-empty geometry</p>
</li>
<li>
<p>1: empty geometry</p>
</li>
</ul>
</div>
</li>
<li>
<p>E: envelope contents indicator code (3-bit unsigned integer)</p>
<div class="ulist">
<ul>
<li>
<p>0: no envelope (space saving slower indexing option), 0 bytes</p>
</li>
<li>
<p>1: envelope is [minx, maxx, miny, maxy], 32 bytes</p>
</li>
<li>
<p>2: envelope is [minx, maxx, miny, maxy, minz, maxz], 48 bytes</p>
</li>
<li>
<p>3: envelope is [minx, maxx, miny, maxy, minm, maxm], 48 bytes</p>
</li>
<li>
<p>4: envelope is [minx, maxx, miny, maxy, minz, maxz, minm, maxm], 64 bytes</p>
</li>
<li>
<p>5-7: invalid</p>
</li>
</ul>
</div>
</li>
<li>
<p>B: byte order for header values (1-bit Boolean)</p>
<div class="ulist">
<ul>
<li>
<p>0: Big Endian (most significant byte first)</p>
</li>
<li>
<p>1: Little Endian (least significant byte first)</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Well-Known Binary as defined in OGC 06-103r4 <a href="#9">[9]</a> does not provide a standardized encoding for an empty point set (i.e., <em>Point Empty</em> in Well-Known Text).
In GeoPackages these points SHALL be encoded as a Point where each coordinate value is set to an IEEE-754 quiet NaN value.
GeoPackages SHALL use big endian 0x7ff8000000000000 or little endian 0x000000000000f87f as the binary encoding of the NaN values.</p>
</div>
<div class="paragraph">
<p>When the WKBGeometry in a GeoPackageBinary is empty, either the envelope contents indicator code SHALL be 0 indicating no envelope, or the envelope SHALL have its values set to NaN as defined for an empty point.</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="sql_geometry_types">2.1.4. SQL Geometry Types</h4>
<div class="sect4">
<h5 id="_data_6">2.1.4.1. Data</h5>
<div class="sect5">
<h6 id="_core_types">2.1.4.1.1. Core Types</h6>
<div id="r20" class="exampleblock">
<div class="title">Requirement 20</div>
<div class="content">
<div class="paragraph">
<p>A GeoPackage SHALL store feature table geometries with the basic simple feature geometry types (Geometry, Point, LineString, Polygon, MultiPoint, MultiLineString, MultiPolygon, GeomCollection) in <a href="#geometry_types">Geometry Types (Normative)</a> <a href="#geometry_types_core">Geometry Type Codes (Core)</a> in the GeoPackageBinary geometry encoding format.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_geometry_columns">2.1.5. Geometry Columns</h4>
<div class="sect4">
<h5 id="_data_7">2.1.5.1. Data</h5>
<div class="sect5">
<h6 id="_table_definition_2">2.1.5.1.1. Table Definition</h6>
<div id="r21" class="exampleblock">
<div class="title">Requirement 21</div>
<div class="content">
<div class="paragraph">
<p>A GeoPackage with a <code>gpkg_contents</code> table row with a "features" <code>data_type</code> SHALL contain a <code>gpkg_geometry_columns</code> table per <a href="#gpkg_geometry_columns_cols">Geometry Columns Table Definition</a> and <a href="#gpkg_geometry_columns_sql">gpkg_geometry_columns Table Definition SQL</a>.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>The second component of the SQL schema for vector features in a GeoPackage is a <code>gpkg_geometry_columns</code> table that
identifies the geometry columns and geometry types in tables that contain user data representing features.</p>
</div>
<table id="gpkg_geometry_columns_cols" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 6. Geometry Columns Table Definition</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Column Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Null</th>
<th class="tableblock halign-left valign-top">Key</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>table_name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the table containing the geometry column</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PK, FK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>column_name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of a column in the feature table that is a Geometry Column</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>geometry_type_name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name from <a href="#geometry_types_core">Geometry Type Codes (Core)</a> or <a href="#geometry_types_extension">Geometry Type Codes (Extension)</a> in <a href="#geometry_types">Geometry Types (Normative)</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>srs_id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">INTEGER</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Spatial Reference System ID: <code>gpkg_spatial_ref_sys.srs_id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">FK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>z</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TINYINT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0: z values prohibited; 1: z values mandatory; 2: z values optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>m</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TINYINT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0: m values prohibited; 1: m values mandatory; 2: m values optional</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p>The FK on <code>gpkg_geometry_columns.srs_id</code> references the PK on <code>gpkg_spatial_ref_sys.srs_id</code> to ensure that geometry columns are only defined in feature tables for defined spatial reference systems.</p>
</div>
<div class="paragraph">
<p>Views of this table MAY be used to provide compatibility with the SQL/MM <a href="#12">[12]</a> <a href="#sqlmm_gpkg_geometry_columns_sql">SQL/MM View of gpkg_geometry_columns Definition SQL (Informative)</a> and OGC Simple Features SQL <a href="#9">[9]</a><a href="#10">[10]</a><a href="#11">[11]</a> <a href="#sfsql_gpkg_geometry_columns_sql">SF/SQL VIEW of gpkg_geometry_columns Definition SQL (Informative)</a> specifications.</p>
</div>
<div class="paragraph">
<p>See <a href="#gpkg_geometry_columns_sql">gpkg_geometry_columns Table Definition SQL</a>.</p>
</div>
</div>
<div class="sect5">
<h6 id="_table_data_values_2">2.1.5.1.2. Table Data Values</h6>
<div id="r22" class="exampleblock">
<div class="title">Requirement 22</div>
<div class="content">
<div class="paragraph">
<p>The <code>gpkg_geometry_columns</code> table SHALL contain one row record for the geometry column in each vector feature data table (clause <a href="#feature_user_tables">Vector Feature User Data Tables</a>) in a GeoPackage.</p>
</div>
</div>
</div>
<div id="r23" class="exampleblock">
<div class="title">Requirement 23</div>
<div class="content">
<div class="paragraph">
<p>Values of the <code>gpkg_geometry_columns</code> <code>table_name</code> column SHALL reference values in the <code>gpkg_contents</code> <code>table_name</code> column for rows with a <code>data_type</code> of <em>features</em>.</p>
</div>
</div>
</div>
<div id="r24" class="exampleblock">
<div class="title">Requirement 24</div>
<div class="content">
<div class="paragraph">
<p>The <code>column_name</code> column value in a <code>gpkg_geometry_columns</code> row SHALL be the name of a column in the table or view specified by the <code>table_name</code> column value for that row.</p>
</div>
</div>
</div>
<div id="r25" class="exampleblock">
<div class="title">Requirement 25</div>
<div class="content">
<div class="paragraph">
<p>The <code>geometry_type_name</code> value in a <code>gpkg_geometry_columns</code> row SHALL be one of the uppercase geometry type names specified in <a href="#geometry_types">Geometry Types (Normative)</a>.</p>
</div>
</div>
</div>
<div id="r26" class="exampleblock">
<div class="title">Requirement 26</div>
<div class="content">
<div class="paragraph">
<p>The <code>srs_id</code> value in a <code>gpkg_geometry_columns</code> table row SHALL be an <code>srs_id</code> column value from the <code>gpkg_spatial_ref_sys</code> table.</p>
</div>
</div>
</div>
<div id="r27" class="exampleblock">
<div class="title">Requirement 27</div>
<div class="content">
<div class="paragraph">
<p>The z value in a <code>gpkg_geometry_columns</code> table row SHALL be one of 0, 1, or 2.</p>
</div>
</div>
</div>
<div id="r28" class="exampleblock">
<div class="title">Requirement 28</div>
<div class="content">
<div class="paragraph">
<p>The m value in a <code>gpkg_geometry_columns</code> table row SHALL be one of 0, 1, or 2.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="feature_user_tables">2.1.6. Vector Feature User Data Tables</h4>
<div class="sect4">
<h5 id="_data_8">2.1.6.1. Data</h5>
<div class="sect5">
<h6 id="_table_definition_3">2.1.6.1.1. Table Definition</h6>
<div class="paragraph">
<p>The third component of the SQL schema for vector features in a GeoPackage described in clause <a href="#sfsql_intro">Simple Features SQL Introduction</a> above are tables that contain user data representing features.
Feature attributes are columns in a feature table, including geometries.
Features are rows in a feature table.
<sup><a href="#K12">[K12]</a></sup></p>
</div>
<div id="r29" class="exampleblock">
<div class="title">Requirement 29</div>
<div class="content">
<div class="paragraph">
<p>A GeoPackage MAY contain tables or views<sup><a href="#K17">[K17]</a></sup> containing vector features.
Every such feature table or view in a GeoPackage SHALL be structured consistently with <a href="#example_feature_table_cols">EXAMPLE : Sample Feature Table or View<sup><a href="#K17">[K17]</a></sup> Definition</a> and <a href="#example_feature_table_sql">sample_feature_table Table Definition SQL (Informative)</a>.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>The integer primary key of a feature table allows features to be linked to row level metadata records in the <code>gpkg_metadata</code> table by rowid <a href="#B5">[B5]</a> values in the <code>gpkg_metadata_reference</code> table as described in clause <a href="#_metadata_reference_table">Metadata Reference Table</a> below.</p>
</div>
<div id="r30" class="exampleblock">
<div class="title">Requirement 30</div>
<div class="content">
<div class="paragraph">
<p>A feature table SHALL have only one geometry column.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>Feature data models <a href="#B23">[B23]</a> from non-GeoPackage implementations that have multiple geometry columns per feature table MAY be transformed into GeoPackage implementations with a separate feature table for each geometry type whose rows have matching integer primary key values that allow them to be joined in a view with the same column definitions as the non-GeoPackage feature data model with multiple geometry columns.</p>
</div>
<div id="r31" class="exampleblock">
<div class="title">Requirement 31</div>
<div class="content">
<div class="paragraph">
<p>The declared SQL type of the geometry column in a vector feature user data table SHALL be specified by the <code>geometry_type_name</code> column for that <code>column_name</code> and <code>table_name</code> in the <code>gpkg_geometry_columns</code> table.</p>
</div>
</div>
</div>
<table id="example_feature_table_cols" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 7. EXAMPLE : Sample Feature Table or View<sup><a href="#K17">[K17]</a></sup> Definition</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Column Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Null</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Key</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">INTEGER</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Autoincrement primary key</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>geometry</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GEOMETRY</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GeoPackage Geometry</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>text_attribute</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Text attribute of feature</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>real_attribute</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">REAL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Real attribute of feature</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>boolean_attribute</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BOOLEAN</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean attribute of feature</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>raster_or_photo</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BLOB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Photograph of the area</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p>See <a href="#example_feature_table_sql">sample_feature_table Table Definition SQL (Informative)</a>.</p>
</div>
</div>
<div class="sect5">
<h6 id="_table_data_values_3">2.1.6.1.2. Table Data Values</h6>
<div class="paragraph">
<p>A feature geometry is stored in a geometry column specified by the <code>geometry_column</code> value for the feature table in the <code>gpkg_geometry_columns</code> table defined in clause <a href="#_geometry_columns">Geometry Columns</a> above.</p>
</div>
<div class="paragraph">
<p>The geometry type of a feature geometry column specified in the <code>gpkg_geometry_columns</code> table <code>geometry_type_name</code> column is a name from <a href="#geometry_types">Geometry Types (Normative)</a>.</p>
</div>
<div id="r32" class="exampleblock">
<div class="title">Requirement 32</div>
<div class="content">
<div class="paragraph">
<p>Feature table geometry columns SHALL contain geometries of the type or assignable for the type specified for the column by the <code>gpkg_geometry_columns</code> table <code>geometry_type_name</code> uppercase column value <sup><a href="#K13">[K13]</a></sup></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Geometry subtypes are assignable as defined in <a href="#geometry_types">Geometry Types (Normative)</a> and shown in part in <a href="#core_geometry_model_figure">Core Geometry Model</a>.
For example, if the <code>geometry_type_name</code> value in the <code>gpkg_geometry_columns</code> table is for a geometry type like POINT that has no subtypes, then the feature table geometry column MAY only contain geometries of that type.
If the geometry <code>type_name</code> value in the <code>gpkg_geometry_columns</code> table is for a geometry type like GEOMCOLLECTION that has subtypes, then the feature table geometry column MAY only contain geometries of that type or any of its direct or indirect subtypes.
If the geometry <code>type_name</code> is GEOMETRY (the root of the geometry type hierarchy) then the feature table geometry column MAY contain geometries of any geometry type.</p>
</div>
<div class="paragraph">
<p>The presence or absence of optional elevation (Z) and/or measure (M) values in a geometry does not change its type or assignability. The unit of measure for optional elevation(Z) values is determined by the CRS of the geometry; it is as-defined by a 3D CRS, and undefined for a 2D CRS. The unit of measure for optional measure (M) values is determined by the CRS of the geometry.</p>
</div>
<div class="paragraph">
<p>The spatial reference system type of a feature geometry column specified by a <code>gpkg_geometry_columns</code> table <code>srs_id</code> column value is a code from the <code>gpkg_spatial_ref_sys</code> table <code>srs_id</code> column.</p>
</div>
<div id="r33" class="exampleblock">
<div class="title">Requirement 33</div>
<div class="content">
<div class="paragraph">
<p>Feature table geometry columns SHALL contain geometries with the <code>srs_id</code> specified for the column by the <code>gpkg_geometry_columns</code> table <code>srs_id</code> column value.</p>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="tiles">2.2. Tiles</h3>
<div class="sect3">
<h4 id="_tile_matrix_introduction">2.2.1. Tile Matrix Introduction</h4>
<div class="paragraph">
<p>The Tiles option specifies a mechanism for storing raster data in tile pyramids. "Tile pyramid" refers to the concept of pyramid structure of tiles of different spatial extent and resolution at different zoom levels, and the tile data itself. "Tile" refers to an individual raster image such as a PNG or JPEG that covers a specific geographic area. "Tile matrix" refers to rows and columns of tiles that all have the same spatial extent and resolution at a particular zoom level<sup><a href="#K14">[K14]</a></sup> "Tile matrix set" refers to the definition of a tile pyramid&#8217;s tiling structure. This mechanism is based on the model for tile matrix sets described in Section 6 of <a href="#16">[16]</a>.</p>
</div>
<div class="paragraph">
<p>The GeoPackage tile store data model MAY be implemented directly as SQL tables in a SQLite database for maximum performance, or as SQL views on top of tables in an existing SQLite tile store for maximum adaptability and loose coupling to enable widespread implementation. A GeoPackage CAN store multiple raster and tile pyramid data sets in different tables or views in the same container. The tables or views that implement the GeoPackage tile store data / metadata model are described and discussed individually in the following subsections.</p>
</div>
<div class="paragraph">
<p>The tile store data / metadata model and conventions described below support direct use of tiles in a GeoPackage in two ways. First, they specify how existing application MAY create SQL Views of the data / metadata model on top of existing application tables that that follow different interface conventions. Second, they include and expose enough metadata information at both the dataset and record level to allow applications that use GeoPackage data to discover its characteristics without having to parse all of the stored images. Applications that store GeoPackage tile data, which are presumed to have this information available, should store sufficient metadata to enable its intended use.</p>
</div>
</div>
<div class="sect3">
<h4 id="_contents_3">2.2.2. Contents</h4>
<div class="sect4">
<h5 id="_data_9">2.2.2.1. Data</h5>
<div class="sect5">
<h6 id="_contents_table_tiles_row">2.2.2.1.1. Contents Table – Tiles Row</h6>
<div id="r34" class="exampleblock">
<div class="title">Requirement 34</div>
<div class="content">
<div class="paragraph">
<p>The <code>gpkg_contents</code> table SHALL contain a row with a <code>data_type</code> column value of "tiles" for each tile pyramid user data table or view.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="zoom_levels">2.2.3. Zoom Levels</h4>
<div class="paragraph">
<p>In a GeoPackage, zoom levels are integers in sequence from 0 to n that identify tile matrix layers in a tile matrix set that contain tiles of decreasing spatial extent and finer spatial resolution.
Adjacent zoom levels immediately precede or follow each other and differ by a value of 1.
Pixel sizes are real numbers in the terrain units of the spatial reference system of a tile image specifying the dimensions of the real world area represented by one pixel.
Pixel size MAY vary by a constant factor or by different factors or intervals between some or all adjacent zoom levels in a tile matrix set.
In the commonly used "zoom times two" convention, pixel sizes vary by a factor of 2 between all adjacent zoom levels, as shown in the example in <a href="#tiles_factor2_example_appendix">[tiles_factor2_example_appendix]</a>.
Other "zoom other intervals" conventions use different factors or irregular intervals with pixel sizes chosen for intuitive cartographic representation of raster data, or to coincide with the original pixel size of commonly used global image products.
See Web Map Tile Service (WMTS) <a href="#16">[16]</a> Annex E for additional examples of both conventions.</p>
</div>
<div class="sect4">
<h5 id="_data_10">2.2.3.1. Data</h5>
<div class="sect5">
<h6 id="_zoom_times_two">2.2.3.1.1. Zoom Times Two</h6>
<div id="r35" class="exampleblock">
<div class="title">Requirement 35</div>
<div class="content">
<div class="paragraph">
<p>In a GeoPackage that contains a tile pyramid user data table that contains tile data, by default <sup><a href="#K15">[K15]</a></sup>, zoom level pixel sizes for that table SHALL vary by a factor of 2 between adjacent zoom levels in the tile matrix metadata table.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="tile_enc_png">2.2.4. Tile Encoding PNG</h4>
<div class="sect4">
<h5 id="_data_11">2.2.4.1. Data</h5>
<div class="sect5">
<h6 id="_mime_type_png">2.2.4.1.1. MIME Type PNG</h6>
<div id="r36" class="exampleblock">
<div class="title">Requirement 36</div>
<div class="content">
<div class="paragraph">
<p>In a GeoPackage that contains a tile pyramid user data table that contains tile data that is not <a href="http://www.ietf.org/rfc/rfc2046.txt">MIME type</a> <a href="http://www.jpeg.org/public/jfif.pdf">image/jpeg</a> <a href="#17">[17]</a><a href="#18">[18]</a><a href="#19">[19]</a>, by default SHALL store that tile data in <a href="http://www.iana.org/assignments/media-types/index.html">MIME type</a> <a href="http://libpng.org/pub/png/">image/png</a> <a href="#20">[20]</a><a href="#21">[21]</a>. <sup><a href="#K16">[K16]</a></sup></p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="tile_enc_jpeg">2.2.5. Tile Encoding JPEG</h4>
<div class="sect4">
<h5 id="_data_12">2.2.5.1. Data</h5>
<div class="sect5">
<h6 id="_mime_type_jpeg">2.2.5.1.1. MIME Type JPEG</h6>
<div id="r37" class="exampleblock">
<div class="title">Requirement 37</div>
<div class="content">
<div class="paragraph">
<p>In a GeoPackage that contains a tile pyramid user data table that contains tile data that is not <a href="http://www.iana.org/assignments/media-types/index.html">MIME type</a> <a href="http://libpng.org/pub/png/">image/png</a> <a href="#20">[20]</a><a href="#21">[21]</a>, by default SHALL store that tile data in <a href="http://www.ietf.org/rfc/rfc2046.txt">MIME type</a> <a href="http://www.jpeg.org/public/jfif.pdf">image/jpeg</a> <a href="#17">[17]</a><a href="#18">[18]</a><a href="#19">[19]</a>. <sup><a href="#K16">[K16]</a></sup></p>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Requirements 36 and 37 in combination allow a tile pyramid user data table to contain PNG or JPG tiles. They may be mixed and matched within the same table.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_tile_matrix_set">2.2.6. Tile Matrix Set</h4>
<div class="sect4">
<h5 id="_data_13">2.2.6.1. Data</h5>
<div class="sect5">
<h6 id="tile_matrix_set_data_table_definition">2.2.6.1.1. Table Definition</h6>
<div class="paragraph">
<p>The gpkg_tile_matrix_set table defines the spatial reference system (srs_id) and the maximum bounding box (min_x, min_y, max_x, max_y) for all possible tiles in a tile pyramid user data table.</p>
</div>
<div id="r38" class="exampleblock">
<div class="title">Requirement 38</div>
<div class="content">
<div class="paragraph">
<p>A GeoPackage that contains a tile pyramid user data table SHALL contain  <code>gpkg_tile_matrix_set</code> table per <a href="#tile_matrix_set_data_table_definition">Table Definition</a>, <a href="#gpkg_tile_matrix_set_cols">Tile Matrix Set Table Definition</a> and <a href="#gpkg_tile_matrix_set_sql">gpkg_tile_matrix_set Table Creation SQL</a>.</p>
</div>
</div>
</div>
<table id="gpkg_tile_matrix_set_cols" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 8. Tile Matrix Set Table Definition</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Column Name</th>
<th class="tableblock halign-left valign-top">Column Type</th>
<th class="tableblock halign-left valign-top">Column Description</th>
<th class="tableblock halign-left valign-top">Null</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Key</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>table_name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tile Pyramid User Data Table Name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PK, FK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>srs_id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">INTEGER</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Spatial Reference System ID: gpkg_spatial_ref_sys.srs_id</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">FK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>min_x</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DOUBLE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bounding box minimum easting or longitude for the tile matrix set</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>min_y</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DOUBLE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bounding box minimum northing or latitude for the tile matrix set</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>max_x</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DOUBLE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bounding box maximum easting or longitude for the tile matrix set</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>max_y</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DOUBLE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bounding box maximum northing or latitude for the tile matrix set</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p>See <a href="#gpkg_tile_matrix_set_sql">gpkg_tile_matrix_set Table Creation SQL</a>.</p>
</div>
</div>
<div class="sect5">
<h6 id="clause_tile_matrix_set_table_data_values">2.2.6.1.2. Table Data Values</h6>
<div id="r144" class="exampleblock">
<div class="title">Requirement 144</div>
<div class="content">
<div class="paragraph">
<p>The bounding box defined by <code>min_x</code>, <code>max_x</code>, <code>min_y</code>, and <code>max_y</code> SHALL be exact so that the bounding box coordinates for individual tiles in a tile pyramid MAY be calculated from those values. All tiles present in the tile pyramid SHALL fall within this bounding box.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>Since GeoPackages use the upper left tile origin convention defined in clause <a href="#clause_tile_matrix_table_data_values">Table Data Values</a> below, the gpkg_tile_matrix_set (<code>min_x</code>, <code>max_y</code>) ordinate is the upper-left corner of tile (0,0) for all zoom levels in a <code>table_name</code> tile pyramid user data table.</p>
</div>
<div class="paragraph">
<p>A bounding box MAY be larger than the minimum bounding rectangle around the actual tiles in that pyramid. This allows tile matrix pyramids to be sparsely populated or even empty.</p>
</div>
<div id="r39" class="exampleblock">
<div class="title">Requirement 39</div>
<div class="content">
<div class="paragraph">
<p>Values of the <code>gpkg_tile_matrix_set</code> <code>table_name</code> column SHALL reference values in the <code>gpkg_contents</code> <code>table_name</code> column <span class="line-through">for rows with a data type of "tiles"</span><sup><a href="#K18">[K18]</a></sup>.</p>
</div>
</div>
</div>
<div id="r40" class="exampleblock">
<div class="title">Requirement 40</div>
<div class="content">
<div class="paragraph">
<p>The gpkg_tile_matrix_set table SHALL contain one row record for each tile pyramid user data table.</p>
</div>
</div>
</div>
<div id="r41" class="exampleblock">
<div class="title">Requirement 41</div>
<div class="content">
<div class="paragraph">
<p>Values of the <code>gpkg_tile_matrix_set</code> <code>srs_id</code> column SHALL reference values in the <code>gpkg_spatial_ref_sys</code> <code>srs_id</code> column.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="tile_matrix">2.2.7. Tile Matrix</h4>
<div class="sect4">
<h5 id="_data_14">2.2.7.1. Data</h5>
<div class="sect5">
<h6 id="tile_matrix_data_table_definition">2.2.7.1.1. Table Definition</h6>
<div id="r42" class="exampleblock">
<div class="title">Requirement 42</div>
<div class="content">
<div class="paragraph">
<p>A GeoPackage that contains a tile pyramid user data table SHALL contain a <code>gpkg_tile_matrix</code> table per clause 2.2.7.1.1 <a href="#tile_matrix_data_table_definition">Table Definition</a>, Table <a href="#gpkg_tile_matrix_cols">Tile Matrix Metadata Table Definition</a> and Table <a href="#gpkg_tile_matrix_sql">gpkg_tile_matrix Table Creation SQL</a>.</p>
</div>
</div>
</div>
<table id="gpkg_tile_matrix_cols" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 9. Tile Matrix Metadata Table Definition</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Column Name</th>
<th class="tableblock halign-left valign-top">Column Type</th>
<th class="tableblock halign-left valign-top">Column Description</th>
<th class="tableblock halign-left valign-top">Null</th>
<th class="tableblock halign-left valign-top">Key</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>table_name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tile Pyramid User Data Table Name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PK, FK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>zoom_level</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">INTEGER</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0 &lt;= <code>zoom_level</code> &lt;= max_level for <code>table_name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>matrix_width</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">INTEGER</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of columns (&gt;= 1) in tile matrix at this zoom level</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>matrix_height</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">INTEGER</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of rows (&gt;= 1) in tile matrix at this zoom level</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tile_width</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">INTEGER</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tile width in pixels (&gt;= 1)for this zoom level</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tile_height</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">INTEGER</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tile height in pixels (&gt;= 1) for this zoom level</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pixel_x_size</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DOUBLE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">In <code>t_table_name</code> srid units or default meters for srid 0 (&gt;0)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pixel_y_size</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DOUBLE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">In <code>t_table_name</code> srid units or default meters for srid 0 (&gt;0)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p>The <code>gpkg_tile_matrix</code> table documents the structure of the tile matrix at each zoom level in each tiles table.
It allows GeoPackages to contain rectangular as well as square tiles (e.g. for better representation of polar regions).
It allows tile pyramids with zoom levels that differ in resolution by factors of 2, irregular intervals, or regular intervals other than factors of 2.</p>
</div>
<div class="paragraph">
<p>See <a href="#gpkg_tile_matrix_sql">gpkg_tile_matrix Table Creation SQL</a></p>
</div>
</div>
<div class="sect5">
<h6 id="clause_tile_matrix_table_data_values">2.2.7.1.2. Table Data Values</h6>
<div id="r43" class="exampleblock">
<div class="title">Requirement 43</div>
<div class="content">
<div class="paragraph">
<p>Values of the <code>gpkg_tile_matrix</code> <code>table_name</code> column SHALL reference values in the <code>gpkg_contents</code> <code>table_name</code> column <span class="line-through">for rows with a <code>data_type</code> of "tiles"</span>.<sup><a href="#K19">[K19]</a></sup></p>
</div>
</div>
</div>
<div id="r44" class="exampleblock">
<div class="title">Requirement 44</div>
<div class="content">
<div class="paragraph">
<p>The <code>gpkg_tile_matrix</code> table SHALL contain one row record for each zoom level that contains one or more tiles in each tile pyramid user data table or view.</p>
</div>
</div>
</div>
<div id="r45" class="exampleblock">
<div class="title">Requirement 45</div>
<div class="content">
<div class="paragraph">
<p>The width of a tile matrix (the difference between <code>min_x</code> and <code>max_x</code> in <code>gpkg_tile_matrix_set</code>) SHALL equal the product of <code>matrix_width</code>, <code>tile_width</code>, and <code>pixel_x_size</code> for that zoom level.
Similarly, height of a tile matrix (the difference between <code>min_y</code> and <code>max_y</code> in <code>gpkg_tile_matrix_set</code>) SHALL equal the product of <code>matrix_height</code>, <code>tile_height</code>, and <code>pixel_y_size</code> for that zoom level.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>Tile matrices are numbered from top left to bottom right (zero-indexed) so the top left tile is (0,0).
(This follows the convention used by by <a href="http://portal.opengeospatial.org/files/?artifact_id=35326">WMTS</a> <a href="#16">[16]</a>.)
Tile matrices may be sparsely populated – no specific tile or even tile matrix must be present.
If the global tile matrix set covers the whole earth, then zoom level 0, tile (0,0) is the whole world.</p>
</div>
<div id="r46" class="exampleblock">
<div class="title">Requirement 46</div>
<div class="content">
<div class="paragraph">
<p>The <code>zoom_level</code> column value in a <code>gpkg_tile_matrix</code> table row SHALL not be negative.</p>
</div>
</div>
</div>
<div id="r47" class="exampleblock">
<div class="title">Requirement 47</div>
<div class="content">
<div class="paragraph">
<p>The <code>matrix_width</code> column value in a <code>gpkg_tile_matrix</code> table row SHALL be greater than 0.</p>
</div>
</div>
</div>
<div id="r48" class="exampleblock">
<div class="title">Requirement 48</div>
<div class="content">
<div class="paragraph">
<p>The <code>matrix_height</code> column value in a <code>gpkg_tile_matrix</code> table row SHALL be greater than 0.</p>
</div>
</div>
</div>
<div id="r49" class="exampleblock">
<div class="title">Requirement 49</div>
<div class="content">
<div class="paragraph">
<p>The <code>tile_width</code> column value in a <code>gpkg_tile_matrix</code> table row SHALL be greater than 0.</p>
</div>
</div>
</div>
<div id="r50" class="exampleblock">
<div class="title">Requirement 50</div>
<div class="content">
<div class="paragraph">
<p>The <code>tile_height</code> column value in a <code>gpkg_tile_matrix</code> table row SHALL be greater than 0.</p>
</div>
</div>
</div>
<div id="r51" class="exampleblock">
<div class="title">Requirement 51</div>
<div class="content">
<div class="paragraph">
<p>The <code>pixel_x_size</code> column value in a <code>gpkg_tile_matrix</code> table row SHALL be greater than 0.</p>
</div>
</div>
</div>
<div id="r52" class="exampleblock">
<div class="title">Requirement 52</div>
<div class="content">
<div class="paragraph">
<p>The <code>pixel_y_size</code> column value in a <code>gpkg_tile_matrix</code> table row SHALL be greater than 0.</p>
</div>
</div>
</div>
<div id="r53" class="exampleblock">
<div class="title">Requirement 53</div>
<div class="content">
<div class="paragraph">
<p>When <code>zoom_level</code> column values in the <code>gpkg_tile_matrix</code> table are sorted in ascending order, the <code>pixel_x_size</code> and <code>pixel_y_size</code> column values in the <code>gpkg_tile_matrix</code> table SHALL appear sorted in descending order.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>Tiles MAY or MAY NOT be provided for level 0 or any other particular zoom level. <sup><a href="#K21">[K21]</a></sup>
This means that a tile matrix set can be sparse, i.e. not contain a tile for any particular position at a certain tile zoom level.
<sup><a href="#K22">[K22]</a></sup> This does not affect the informative spatial extent stated by the min/max x/y columns values in the <code>gpkg_contents</code> record for the same <code>table_name</code>, the exact spatial extent stated by the min/max x/y columns values in the <code>gpkg_tile_matrix_set</code> record for the same table name, or the tile matrix width and height at that level. <sup><a href="#K23">[K23]</a></sup></p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="tiles_user_tables">2.2.8. Tile Pyramid User Data Tables</h4>
<div class="sect4">
<h5 id="_data_15">2.2.8.1. Data</h5>
<div class="sect5">
<h6 id="tiles_user_tables_data_table_definition">2.2.8.1.1. Table Definition</h6>
<div id="r54" class="exampleblock">
<div class="title">Requirement 54</div>
<div class="content">
<div class="paragraph">
<p>Each tile matrix set in a GeoPackage SHALL be stored in a different tile pyramid user data table or view<sup><a href="#K17">[K17]</a></sup> with a unique name that SHALL be structured consistently with <a href="#tiles_user_tables_data_table_definition">Table Definition</a>, <a href="#example_tiles_table_cols">Tiles Table or View Definition</a>, and <a href="#example_tiles_table_sql">EXAMPLE: tiles table Create Table SQL (Informative)</a>.</p>
</div>
</div>
</div>
<table id="example_tiles_table_cols" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 10. Tiles Table or View Definition</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Column Name</th>
<th class="tableblock halign-left valign-top">Column Type</th>
<th class="tableblock halign-left valign-top">Column Description</th>
<th class="tableblock halign-left valign-top">Null</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Key</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">INTEGER</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Autoincrement primary key</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>zoom_level</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">INTEGER</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">min(zoom_level) &lt;= <code>zoom_level</code> &lt;= max(zoom_level) for <code>t_table_name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tile_column</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">INTEGER</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0 to <code>tile_matrix</code> <code>matrix_width</code> – 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tile_row</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">INTEGER</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0 to <code>tile_matrix</code> <code>matrix_height</code> - 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tile_data</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BLOB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Of an image MIME type specified in clauses <a href="#tile_enc_png">Tile Encoding PNG</a>, <a href="#tile_enc_jpeg">Tile Encoding JPEG</a>, <a href="#tile_enc_webp">[tile_enc_webp]</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p>See <a href="#example_tiles_table_sql">EXAMPLE: tiles table Create Table SQL (Informative)</a>.</p>
</div>
</div>
<div class="sect5">
<h6 id="_table_data_values_4">2.2.8.1.2. Table Data Values</h6>
<div class="paragraph">
<p>Each tile pyramid user data table or view <sup><a href="#K24">[K24]</a></sup> MAY contain tile matrices at zero or more zoom levels of different spatial resolution (map scale).</p>
</div>
<div id="r55" class="exampleblock">
<div class="title">Requirement 55</div>
<div class="content">
<div class="paragraph">
<p>For each distinct <code>table_name</code> from the <code>gpkg_tile_matrix</code> (tm) table, the tile pyramid (tp) user data table <code>zoom_level</code> column value in a GeoPackage SHALL be in the range min(tm.zoom_level) &lt;= tp.zoom_level &lt;= max(tm.zoom_level).</p>
</div>
</div>
</div>
<div id="r56" class="exampleblock">
<div class="title">Requirement 56</div>
<div class="content">
<div class="paragraph">
<p>For each distinct <code>table_name</code> from the <code>gpkg_tile_matrix</code> (tm) table, the tile pyramid (tp) user data table <code>tile_column</code> column value in a GeoPackage SHALL be in the range 0 &lt;= tp.tile_column &lt;= tm.matrix_width – 1 where the tm and tp <code>zoom_level</code> column values are equal.</p>
</div>
</div>
</div>
<div id="r57" class="exampleblock">
<div class="title">Requirement 57</div>
<div class="content">
<div class="paragraph">
<p>For each distinct <code>table_name</code> from the <code>gpkg_tile_matrix</code> (tm) table, the tile pyramid (tp) user data table <code>tile_row</code> column value in a GeoPackage SHALL be in the range 0 &lt;= tp.tile_row &lt;= tm.matrix_height – 1 where the tm and tp <code>zoom_level</code> column values are equal.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>All tiles at a particular zoom level have the same <code>pixel_x_size</code> and <code>pixel_y_size</code> values specified in the <code>gpkg_tile_matrix</code> row record for that tiles table and zoom level. <sup><a href="#K25">[K25]</a></sup></p>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="extension_mechanism">2.3. Extension Mechanism</h3>
<div class="sect3">
<h4 id="_introduction_2">2.3.1. Introduction</h4>
<div class="paragraph">
<p>A GeoPackage extension is a set of one or more requirements clauses that either profiles / extends existing requirements clauses in the GeoPackage standard or adds new requirements clauses. Existing requirement clause extension examples include additional geometry types, additional SQL geometry functions, and additional tile image formats. New requirement clause extension examples include spatial indexes, triggers, additional tables, other BLOB column encodings, and other SQL functions. Files that use one or more extensions are by definition Extended GeoPackages. Extensions that have been already approved by OGC are presented in <a href="#registered_extensions">Registered Extensions (Normative)</a>. However, additional extensions MAY be approved by OGC outside of the release cycle of this document.</p>
</div>
<div class="paragraph">
<p>We acknowledge that there are use cases not covered by this standard. Implementers are welcome to use the extension mechanism defined here to develop their own extensions. The extension mechanism provides advantages including discoverability (the extensions in use can be discovered by scanning a single table) and uniformity (declaring that an extension is in use indicates that a defined set of requirements are being met). However, this is a decision that should be made carefully as custom extensions do introduce interoperability risks.</p>
</div>
<div class="paragraph">
<p><span class="underline">OGC is unable to endorse extensions developed externally. Therefore an Extended GeoPackage containing extensions not developed by OGC will fail <a href="#r4">Requirement 4</a>.</span> However, a community of interest MAY waive that requirement in its own GeoPackage profile, with the caveat that it must bear the responsibility of endorsing the new extension(s).</p>
</div>
<div class="paragraph">
<p>Implementers that are interested in developing their own extensions are encouraged to contact OGC to ensure that the extensions are developed in accordance with OGC policies and in a way that minimizes risks to interoperability. OGC will consider adopting externally developed extensions that address a clear use case, have a sound technical approach, and have a commitment to implementation by multiple implementers.</p>
</div>
<div class="paragraph">
<p>GeoPackage extensions are documented using the GeoPackage Extension Template in <a href="#extension_template">GeoPackage Extension Template (Informative)</a>. Extensions are identified by a name of the form &lt;author&gt;_&lt;extension name&gt; where &lt;author&gt; indicates the person or organization that developed and maintains the extension. The author value "gpkg" is reserved for extensions that are developed, maintained, and approved by OGC. Implementers must use their own author names to register other extensions used in Extended GeoPackages.</p>
</div>
</div>
<div class="sect3">
<h4 id="_extensions">2.3.2. Extensions</h4>
<div class="sect4">
<h5 id="_data_16">2.3.2.1. Data</h5>
<div class="sect5">
<h6 id="extensions_table_definition">2.3.2.1.1. Table Definition</h6>
<div id="r58" class="exampleblock">
<div class="title">Requirement 58</div>
<div class="content">
<div class="paragraph">
<p>A GeoPackage MAY contain a table named <code>gpkg_extensions</code>.
If present this table SHALL be defined per clause 2.3.2.1.1 <a href="#extensions_table_definition">Table Definition</a>, <a href="#gpkg_extensions_cols">GeoPackage Extensions Table Definition (Table Name: gpkg_extensions)</a>, and <a href="#gpkg_extensions_sql">gpkg_extensions Table Definition SQL</a>. An extension SHALL NOT modify the definition or semantics of existing columns. An extension MAY define additional tables or columns. An extension MAY allow new values or encodings for existing columns.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>The <code>gpkg_extensions</code> table in a GeoPackage is used to indicate that a particular extension applies to a GeoPackage, a table in a GeoPackage, or a column of a table in a GeoPackage.
An application that accesses a GeoPackage can query the <code>gpkg_extensions</code> table instead of the contents of all the user data tables to determine if it has the required capabilities to read or write to tables with extensions, and to "fail fast" and return an error message if it does not.</p>
</div>
<table id="gpkg_extensions_cols" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 11. GeoPackage Extensions Table Definition (Table Name: gpkg_extensions)</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Column Name</th>
<th class="tableblock halign-left valign-top">Col Type</th>
<th class="tableblock halign-left valign-top">Column Description</th>
<th class="tableblock halign-left valign-top">Null</th>
<th class="tableblock halign-left valign-top">Key</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>table_name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the table that requires the extension. When NULL, the extension is required for the entire GeoPackage. SHALL NOT be NULL when the column_name is not NULL.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jointly Unique</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>column_name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the column that requires the extension. When NULL, the extension is required for the entire table.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jointly Unique</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>extension_name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The case sensitive name of the extension that is required, in the form &lt;author&gt;_&lt;extension_name&gt;.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jointly Unique</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>definition</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Permalink, URI, or reference to a document that defines the extension</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>scope</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates scope of extension effects on readers / writers: <em>read-write</em> or <em>write-only</em> in lowercase.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p>See <a href="#gpkg_extensions_sql">gpkg_extensions Table Definition SQL</a>.</p>
</div>
</div>
<div class="sect5">
<h6 id="_table_data_values_5">2.3.2.1.2. Table Data Values</h6>
<div id="r59" class="exampleblock">
<div class="title">Requirement 59</div>
<div class="content">
<div class="paragraph">
<p>In an Extended GeoPackage, every extension SHALL be registered in a corresponding row in the <code>gpkg_extensions</code> table. An extension SHALL NOT modify the definition or semantics of existing columns. An extension MAY define additional tables or columns. An extension MAY allow new values or encodings for existing columns.
Either the absence of a <code>gpkg_extensions</code> table or the absence of rows in the <code>gpkg_extensions</code> table SHALL indicate that the file is a GeoPackage (as opposed to an Extended GeoPackage).</p>
</div>
</div>
</div>
<div id="r60" class="exampleblock">
<div class="title">Requirement 60</div>
<div class="content">
<div class="paragraph">
<p>Values of the <code>gpkg_extensions</code> <code>table_name</code> column MAY reference values in the <code>gpkg_contents</code> <code>table_name</code>, reference new tables required by that extension, or be NULL (to indicate an extension that requires no new tables).</p>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Implementers should be aware of the fact that SQLite table names are not case sensitive and that table names in <code>sqlite_master</code> and <code>gpkg_extensions</code> may not have the same case. When searching for table name references, it is recommended to transform table names to lower case with the <code>lower()</code> function. See the Abstract Test Suite for an example.</p>
</div>
</td>
</tr>
</table>
</div>
<div id="r61" class="exampleblock">
<div class="title">Requirement 61</div>
<div class="content">
<div class="paragraph">
<p>The <code>column_name</code> column value in a <code>gpkg_extensions</code> row SHALL be the name of a column in the table specified by the <code>table_name</code> column value for that row, or be NULL.</p>
</div>
</div>
</div>
<div id="r62" class="exampleblock">
<div class="title">Requirement 62</div>
<div class="content">
<div class="paragraph">
<p>Each <code>extension_name</code> column value in a <code>gpkg_extensions</code> row SHALL be a unique case sensitive value of the form &lt;author&gt;_&lt;extension_name&gt; where &lt;author&gt; indicates the person or organization that developed and
maintains the extension. The valid character set for &lt;author&gt; SHALL be [a-zA-Z0-9].
The valid character set for &lt;extension_name&gt; SHALL be [a-zA-Z0-9_].
An <code>extension_name</code> for the "gpkg" author name SHALL be one of those defined in this encoding standard or in an OGC document (e.g. Best Practices Document or Encoding Standard) that extends it.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>The author value "gpkg" is reserved for GeoPackage extensions that are developed and maintained by OGC.
GeoPackage implementers use their own author names to register other extensions.</p>
</div>
<div id="r63" class="exampleblock">
<div class="title">Requirement 63</div>
<div class="content">
<div class="paragraph">
<p>The definition column value in a <code>gpkg_extensions</code> row SHALL contain a permalink, URI <a href="#23">[23]</a>, or reference to a document defining the extension as per the <a href="#extension_template">GeoPackage Extension Template (Informative)</a>.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>Examples of how to fill out the GeoPackage Extension Template in <a href="#extension_template">GeoPackage Extension Template (Informative)</a> are provided in Annex F. This column is not unique because an extension may define multiple tables.</p>
</div>
<div id="r64" class="exampleblock">
<div class="title">Requirement 64</div>
<div class="content">
<div class="paragraph">
<p>The scope column value in a <code>gpkg_extensions</code> row SHALL be lowercase "read-write" for an extension that affects both readers and writers, or "write-only" for an extension that affects only writers.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>Some extensions do not impose any additional requirements on software that accesses a GeoPackage in a read-only fashion.
An example of this is an extension that defines an SQL trigger that uses a non-standard SQL function defined in a GeoPackage SQLite Extension.
Triggers are only invoked when data is written to the GeoPackage, so usage of this type of extension can be safely ignored for read-only access.
This is indicated by a gpkg_extensions.scope column value of "write_only".</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="attributes">2.4. Attributes</h3>
<div class="sect3">
<h4 id="_introduction_3">2.4.1. Introduction</h4>
<div class="paragraph">
<p>Non-spatial attribute data are sets (or tuples or rows) of observations that may not have an explicit geometry property. In GeoPackage, this data is stored in user-defined attribute tables. These tables may contain properties such as an ID or geo-locatable address that allow them to be relationally linkable to rows in other attribute, feature or tile tables.</p>
</div>
<div class="paragraph">
<p>Examples of attribute data include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>meteorological readings from a weather station</p>
</li>
<li>
<p>flow readings from a stream gauge</p>
</li>
<li>
<p>traffic volumes from embedded highway sensors</p>
</li>
<li>
<p>lists of customers</p>
</li>
<li>
<p>delivery stops</p>
</li>
<li>
<p>work orders</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_contents_4">2.4.2. Contents</h4>
<div class="sect4">
<h5 id="_data_17">2.4.2.1. Data</h5>
<div class="sect5">
<h6 id="_contents_table_attributes_row">2.4.2.1.1. Contents Table - Attributes Row</h6>
<div id="r118" class="exampleblock">
<div class="title">Requirement 118</div>
<div class="content">
<div class="paragraph">
<p>The gpkg_contents table SHALL contain a row with a data_type column value of "attributes" for each attributes data table or view.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_attributes_user_data_tables">2.4.3. Attributes User Data Tables</h4>
<div class="sect4">
<h5 id="_data_18">2.4.3.1. Data</h5>
<div class="sect5">
<h6 id="attributes_table_definition">2.4.3.1.1. Table Definition</h6>
<div class="paragraph">
<p>Non-spatial attribute data is stored in user-defined Attribute tables. Attribute sets are rows in an Attribute table. The attributes are columns in a Attribute table. (A GeoPackage is not required to contain any Attribute data tables. Attribute data tables in a GeoPackage may be empty.)</p>
</div>
<div id="r119" class="exampleblock">
<div class="title">Requirement 119</div>
<div class="content">
<div class="paragraph">
<p>A GeoPackage MAY contain tables or updatable views containing attribute sets. Every such Attribute table or view in a GeoPackage SHALL have a column with column type INTEGER and PRIMARY KEY AUTOINCREMENT column constraints per <a href="#gpkg_attributes_example">GeoPackage Attributes Example Table or View Definition</a> and <a href="#example_attributes_table_sql">EXAMPLE: Attributes table Create Table SQL (Informative)</a>.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>The integer primary key of an Attribute table allows attribute sets to be linked to row level metadata records in the gpkg_metadata table by rowid <a href="#B5">[B5]</a> values in the gpkg_metadata_reference table as described in clause <a href="#extension_metadata">Metadata</a> below.</p>
</div>
<table id="gpkg_attributes_example" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 12. GeoPackage Attributes Example Table or View Definition</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Column Name</th>
<th class="tableblock halign-left valign-top">Col Type</th>
<th class="tableblock halign-left valign-top">Column Description</th>
<th class="tableblock halign-left valign-top">Null</th>
<th class="tableblock halign-left valign-top">Key</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">INTEGER</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Autoincrement primary key</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>text_attribute</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Text attribute of feature</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>real_attribute</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">REAL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Real attribute of feature</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>boolean_attribute</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BOOLEAN</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean attribute of feature</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>raster_or_photo</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BLOB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Photo of the area</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_security_considerations">3. Security Considerations</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Security considerations for implementations utilizing GeoPackages are in the domain of the implementing application, deployment platform, operating system and networking environment.
The GeoPackage standard does not place any constraints on application, platform, operating system level or network security.</p>
</div>
<div class="paragraph">
<p>Since GeoPackage is dependent on SQLite, implementors should monitor for security alerts related to SQLite and respond accordingly.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="abstract_test_suite"> Annex A: Conformance / Abstract Test Suite (Normative)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_base_2">A.1. Base</h3>
<div class="sect3">
<h4 id="_core_2">A.1.1. Core</h4>
<div class="sect4">
<h5 id="_sqlite_container_2">A.1.1.1. SQLite Container</h5>
<div class="sect5">
<h6 id="_data_19">A.1.1.1.1. Data</h6>
<div class="paragraph">
<p><strong>File Format</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/base/core/container/data/file_format</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the GeoPackage is an SQLite version_3 database</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Pass if the first 16 bytes of the file contain "SQLite format 3" in ASCII.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 1.1.1.1.1 Req 1:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Basic</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/base/core/container/data/file_format/application_id</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the SQLite database header application id field indicates GeoPackage version 1.0</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>Retrieve the bytes at the application id of the SQLite database header</p>
</li>
<li>
<p>If the string is "GP10" in ASCII, fall back to the tests for GeoPackage 1.0.</p>
</li>
<li>
<p>If the string is "GP11" in ASCII, fall back to the tests for GeoPackage 1.1.</p>
</li>
<li>
<p>If the string is "GPKG" in ASCII</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>PRAGMA user_version</p>
</li>
<li>
<p>Fail if the integer representation of the user_version string is less than 10200.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Fail if the string is not one of those values</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 1.1.1.1.1 Req 2:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Basic</p>
</div></div></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p><strong>File Extension Name</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/base/core/container/data/file_extension_name</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the GeoPackage extension is ".gpkg"</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Pass if the GeoPackage file extension is ".gpkg"</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 1.1.1.1.2 Req 3:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Basic</p>
</div></div></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p><strong>File Contents</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/base/core/container/data/file_contents</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the GeoPackage only contains specified contents</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT COUNT(*) from gpkg_extensions;</p>
</li>
<li>
<p>Not testable if table exists and count &gt; 0</p>
</li>
<li>
<p>For each gpkg_* table_name</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>PRAGMA table_info(table_name)</p>
</li>
<li>
<p>Continue if returns an empty result set</p>
</li>
<li>
<p>Fail if column definitions returned by "PRAGMA table_info" do not match column definitions for the table in Annex C.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if no fails</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 1.1.1.1.3 Req 4:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Basic</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/base/core/container/data/table_data_types</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the data types of GeoPackage columns include only the types specified by <a href="#table_column_data_types">[table_column_data_types]</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p><code>SELECT table_name FROM gpkg_contents WHERE data_type IN ('tiles','features','attributes')</code></p>
</li>
<li>
<p>Not testable if returns empty set</p>
</li>
<li>
<p>For each row table name from step 1</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>PRAGMA table_info(table_name)</p>
</li>
<li>
<p>For each row type column value</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Fail if value is not one of the data type names specified by <a href="#table_column_data_types">[table_column_data_types]</a></p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if no fails</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><a href="#table_column_data_types">[table_column_data_types]</a> Req 5:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Basic</p>
</div></div></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p><strong>Integrity Check</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/base/core/container/data/file_integrity</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the GeoPackage passes the SQLite integrity check.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Pass if "PRAGMA integrity_check" returns "ok"</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause <a href="#_file_integrity">[_file_integrity]</a> Req 6:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/base/core/container/data/foreign_key_integrity</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the GeoPackage passes the SQLite foreign_key_check.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Pass if "PRAGMA foreign_key_check" (with no parameter value) returns an empty result set</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause <a href="#_file_integrity">[_file_integrity]</a> Req 7:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

</div>
<div class="sect5">
<h6 id="_api_2">A.1.1.1.2. API</h6>
<div class="paragraph">
<p><strong>Structured Query Language</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/base/core/container/api/sql</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Test that the GeoPackage SQLite Extension provides the SQLite SQL API interface.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>sqlite3_exec('SELECT * FROM sqlite_master;)</p>
</li>
<li>
<p>Fail if returns an SQL error.</p>
</li>
<li>
<p>Pass otherwise</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 1.1.1.2.1 Req 8:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

</div>
</div>
<div class="sect4">
<h5 id="_spatial_reference_systems">A.1.1.2. Spatial Reference Systems</h5>
<div class="sect5">
<h6 id="_data_20">A.1.1.2.1. Data</h6>
<div class="paragraph">
<p><strong>Table Definition</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/base/core/gpkg_spatial_ref_sys/data/table_def</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the <code>gpkg_spatial_ref_sys</code> table exists and has the correct definition.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p><code>SELECT sql FROM sqlite_master WHERE type = 'table' AND tbl_name = 'gpkg_spatial_ref_sys'</code></p>
</li>
<li>
<p>Fail if returns an empty result set</p>
</li>
<li>
<p>Pass if column names and column definitions in the returned <code>CREATE TABLE statement</code> in the sql column value, including data type, nullability, and primary key constraints match all of those in the contents of C.1 Table 15. Column order, check constraint and trigger definitions, and other column definitions in the returned sql are irrelevant.</p>
</li>
<li>
<p>Fail otherwise.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 1.1.2.1.1 Req 10:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Basic</p>
</div></div></td>
</tr>
</tbody>
</table>

<div id="spatial_ref_sys_data_values_default" class="paragraph">
<p><strong>Table Data Values</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/base/core/gpkg_spatial_ref_sys/data_values_default</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the <code>spatial_ref_sys</code> table contains the required default contents.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p><code>SELECT srs_id, organization, organization_coordsys_id, description FROM gpkg_spatial_ref_sys WHERE srs_id = -1 returns -1 "NONE" -1 "undefined", AND</code></p>
</li>
<li>
<p><code>SELECT srs_id, organization, organization_coordsys_id, description FROM gpkg_spatial_ref_sys WHERE srs_id = 0 returns 0 "NONE" 0 "undefined", AND</code></p>
</li>
<li>
<p><code>SELECT definition FROM gpkg_spatial_ref_sys WHERE organization IN ("epsg","EPSG") AND organization_coordsys_id 4326</code></p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Confirm that this is a valid CRS</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if tests 1-3 are met</p>
</li>
<li>
<p>Fail otherwise</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 1.1.2.1.2 Requirement 11:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/base/core/spatial_ref_sys/data_values_required</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the <code>spatial_ref_sys</code> table contains rows to define all <code>srs_id</code> values used by features and tiles in a GeoPackage.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT DISTINCT gc.srs_id, srs.srs_id FROM gpkg_contents AS gc LEFT OUTER JOIN gpkg_spatial_ref_sys AS srs ON srs.srs_id = gc.srs_id WHERE gc.data_type IN (<em>tiles</em>, <em>features</em>)</p>
</li>
<li>
<p>Pass if no returned srs.srs_id values are NULL.</p>
</li>
<li>
<p>Fail otherwise</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause Clause 1.1.2.1.2 Req 12:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

</div>
</div>
<div class="sect4">
<h5 id="_contents_5">A.1.1.3. Contents</h5>
<div class="sect5">
<h6 id="_data_21">A.1.1.3.1. Data</h6>
<div class="paragraph">
<p><strong>Table Definition</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/base/core/contents/data/table_def</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the <code>gpkg_contents</code> table exists and has the correct definition.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT sql FROM sqlite_master WHERE type = <em>table</em> AND tbl_name = <em>gpkg_contents</em></p>
</li>
<li>
<p>Fail if returns an empty result set.</p>
</li>
<li>
<p>Pass if the column names and column definitions in the returned CREATE TABLE statement, including data type, nullability, default values and primary, foreign and unique key constraints match all of those in the contents of C.2 Table <a href="#gpkg_contents_sql">[gpkg_contents_sql]</a>. Column order, check constraint and trigger definitions, and other column definitions in the returned sql are irrelevant.</p>
</li>
<li>
<p>Fail Otherwise</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 1.1.3.1.1 Req 13:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Basic</p>
</div></div></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p><strong>Table Data Values</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/base/core/contents/data/data_values_table_name</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the <code>table_name</code> column values in the <code>gpkg_contents</code> table are valid.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT DISTINCT table_name FROM gpkg_contents WHERE table_name NOT IN (SELECT name FROM sqlite_master)</p>
</li>
<li>
<p>Fail if there are any results</p>
</li>
<li>
<p>Pass otherwise.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 1.1.3.1.2 Req 14:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/base/core/contents/data/data_values_last_change</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the <code>gpkg_contents</code> table <code>last_change</code> column values are in ISO 8601 [29]format containing a complete date plus UTC hours, minutes, seconds and a decimal fraction of a second, with a <em>Z</em> ("zulu") suffix indicating UTC.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT last_change from gpkg_contents.</p>
</li>
<li>
<p>Not testable if returns an empty result set.</p>
</li>
<li>
<p>For each row from step 1</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Fail if format of returned value does not match yyyy-mm-ddThh:mm:ss.hhhZ</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if no fails.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 1.1.3.1.2 Req 15:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/base/core/contents/data/data_values_srs_id</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the <code>gpkg_contents</code> table <code>srs_id</code> column values reference <code>gpkg_spatial_ref_sys</code> <code>srs_id</code> column values.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>PRAGMA foreign_key_check(<em>gpkg_contents</em>)</p>
</li>
<li>
<p>Fail if does not return an empty result set</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 1.1.3.1.2 Req 16:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_options_2">A.2. Options</h3>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/valid_geopackage</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that a GeoPackage contains a features or tiles table and <code>gpkg_contents</code> table row describing it.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT COUNT(*) FROM gpkg_contents WHERE data_type IN (<em>tiles</em>, <em>features</em>)</p>
</li>
<li>
<p>Pass if result &gt; 0</p>
</li>
<li>
<p>Fail otherwise</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2 Req 17:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<div class="sect3">
<h4 id="_features">A.2.1. Features</h4>
<div class="paragraph">
<p>Note: Some of these tests require a spatial engine or custom code beyond simple SQL. These tests are marked with a *.</p>
</div>
<div class="sect4">
<h5 id="_simple_features_sql_introduction">A.2.1.1. Simple Features SQL Introduction</h5>

</div>
<div class="sect4">
<h5 id="_contents_6">A.2.1.2. Contents</h5>
<div class="sect5">
<h6 id="_data_22">A.2.1.2.1. Data</h6>
<div class="paragraph">
<p><strong>Contents Table Feature Row</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/features/contents/data/features_row</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the <code>gpkg_contents</code> table_name value table exists, and is apparently a feature table for every row with a <code>data_type</code> column value of "features"</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>Execute test /opt/features/vector_features/data/feature_table_integer_primary_key</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.1.2.1.1 Req 18:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

</div>
</div>
<div class="sect4">
<h5 id="_geometry_encoding">A.2.1.3. Geometry Encoding</h5>
<div class="sect5">
<h6 id="_data_23">A.2.1.3.1. Data</h6>
<div class="paragraph">
<p><strong>BLOB Format</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/features/geometry_encoding/data/blob</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that geometries stored in feature table geometry columns are encoded in the StandardGeoPackageBinary format.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name AS tn, column_name AS cn FROM gpkg_geometry_columns WHERE table_name IN (SELECT table_name FROM gpkg_contents WHERE data_type = <em>features</em>)</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>For each row from step 1</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>SELECT cn FROM tn</p>
</li>
<li>
<p>Not testable if none found</p>
</li>
<li>
<p>For each cn value from step a</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Fail if the first two bytes of each gc are not "GP"</p>
</li>
<li>
<p>Fail if gc.version_number is not 0</p>
</li>
<li>
<p>Fail if gc.flags.GeopackageBinary type != 0</p>
</li>
<li>
<p>Fail if cn.flags.E is 5-7</p>
</li>
<li>
<p>*Fail if the geometry is empty but the envelope is not empty (gc.flags.envelope != 0 and envelope values are not NaN)</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if no fails</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.1.3.1.1 Req 19:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

</div>
</div>
<div class="sect4">
<h5 id="_sql_geometry_types">A.2.1.4. SQL Geometry Types</h5>
<div class="sect5">
<h6 id="_data_24">A.2.1.4.1. Data</h6>
<div class="paragraph">
<p><strong>Core Types</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/features/geometry_encoding/data/core_types_existing_sparse_data</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that existing basic simple feature geometries are stored in valid GeoPackageBinary format encodings.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name FROM gpkg_geometry_columns</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>SELECT table_name AS tn, column_name AS cn FROM gpkg_geometry_columns WHERE table_name IN (SELECT table_name FROM gpkg_contents WHERE data_type = <em>features</em>),</p>
</li>
<li>
<p>Fail if returns an empty result set</p>
</li>
<li>
<p>For each row from step 3</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>SELECT cn FROM tn;</p>
</li>
<li>
<p>For each row from step a, if bytes 2-5 of cn.wkb as uint32 in endianness of gc.wkb byte 1of cn from #1 are a geometry type value from Annex G Table 42, then</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Log cn.header values, wkb endianness and geometry type</p>
</li>
<li>
<p>*If cn.wkb is not correctly encoded per ISO 13249-3 clause 5.1.46 then log fail</p>
</li>
<li>
<p>Otherwise log pass</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if log contanins pass and no fails</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.1.4.1.1 Req 20:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

</div>
</div>
<div class="sect4">
<h5 id="_geometry_columns_2">A.2.1.5. Geometry Columns</h5>
<div class="sect5">
<h6 id="_data_25">A.2.1.5.1. Data</h6>
<div class="paragraph">
<p><strong>Table Definition</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/features/geometry_columns/data/table_def</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the <code>gpkg_geometry_columns</code> table exists and has the correct definition.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>PRAGMA table_info(<em>gpkg_geometry_columns</em>)</p>
</li>
<li>
<p>Fail if returns an empty result set.</p>
</li>
<li>
<p>Fail if the columns described in <a href="#gpkg_geometry_columns_cols">[gpkg_geometry_columns_cols]</a> are missing or have non-matching definitions. Column order and other column definitions in the returned sql are irrelevant. Primary key constraints are as per <a href="#gpkg_geometry_columns_sql">[gpkg_geometry_columns_sql]</a>.</p>
</li>
<li>
<p>Pass otherwise.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.1.5.1.1 Req 21:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Basic</p>
</div></div></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p><strong>Table Data Values</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/features/geometry_columns/data/data_values_geometry_columns</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that <code>gpkg_geometry_columns</code> contains one row record for each geometry column in each vector feature user data table.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name FROM gpkg_contents WHERE data_type = 'features'</p>
</li>
<li>
<p>Not testable  if returns an empty result set</p>
</li>
<li>
<p>SELECT table_name FROM gpkg_contents WHERE data_type = 'features' AND table_name NOT IN (SELECT table_name FROM gpkg_geometry_columns)</p>
</li>
<li>
<p>Fail if result set is not empty</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.1.5.1.2 Req 22:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/features/geometry_columns/data/data_values_table_name</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the <code>table_name</code> column values in the <code>gpkg_geometry_columns</code> table are valid.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>PRAGMA foreign_key_list(<em>gpkg_geometry_columns</em>);</p>
</li>
<li>
<p>Fail if there is no row designating <code>table_name</code> as a foreign key to <code>table_name</code> in <code>gpkg_contents</code></p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.1.5.1.2 Req 23:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/features/geometry_columns/data/data_values_column_name</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the <code>column_name</code> column values in the <code>gpkg_geometry_columns</code> table are valid.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name, column_name FROM gpkg_geometry_columns</p>
</li>
<li>
<p>Not testable  if returns an empty result set</p>
</li>
<li>
<p>For each row from step 1</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>PRAGMA table_info(table_name)</p>
</li>
<li>
<p>Fail if gpkg_geometry_columns.column_name value does not equal a name column value returned by PRAGMA table_info.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if no fails.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.1.5.1.2 Req 24:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/features/geometry_columns/data/data_values_geometry_type_name</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the <code>geometry_type_name</code> column values in the <code>gpkg_geometry_columns</code> table are valid.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT DISTINCT geometry_type_name from gpkg_geometry_columns</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>For each row from step 1</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Fail if a returned geometry_type_name value is not in Table 28 in Annex G</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if no fails.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.1.5.1.2 Req 25:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/features/geometry_columns/data/data_values_srs_id</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the <code>gpkg_geometry_columns</code> table <code>srs_id</code> column values are valid.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>PRAGMA foreign_key_check(<em>gpkg_geometry_columns</em>)</p>
</li>
<li>
<p>Fail if returns any rows with a fourth column foreign key index value of 0</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.1.5.1.2 Req 26:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/features/geometry_columns/data/data_values_z</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the <code>gpkg_geometry_columns</code> table <code>z</code> column values are valid.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT z FROM gpkg_geometry_columns</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>SELECT z FROM gpkg_geometry_columns WHERE z NOT IN (0,1,2)</p>
</li>
<li>
<p>Fail if does not return an empty result set</p>
</li>
<li>
<p>Pass otherwise.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.1.5.1.2 Req 27:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/features/geometry_columns/data/data_values_m</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the <code>gpkg_geometry_columns</code> table <code>m</code> column values are valid.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT m FROM gpkg_geometry_columns</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>SELECT m FROM gpkg_geometry_columns WHERE m NOT IN (0,1,2)</p>
</li>
<li>
<p>Fail if does not return an empty result set</p>
</li>
<li>
<p>Pass otherwise.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.1.5.1.2 Req 28:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

</div>
</div>
<div class="sect4">
<h5 id="_vector_features_user_data_tables">A.2.1.6. Vector Features User Data Tables</h5>
<div class="sect5">
<h6 id="_data_26">A.2.1.6.1. Data</h6>
<div class="paragraph">
<p><strong>Table Definition</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/features/vector_features/data/feature_table_integer_primary_key</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that every vector features user data table has an integer primary key.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name FROM gpkg_contents WHERE data_type = <em>features</em></p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>For each row from step 1</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>PRAGMA table_info(table_name)</p>
</li>
<li>
<p>Fail if returns an empty result set</p>
</li>
<li>
<p>Fail if result set does not contain one row where the pk column value is 1 and the not null column value is 1 and the type column value is "INTEGER"</p>
</li>
<li>
<p>SELECT COUNT(*) - COUNT(DISTINCT id) from table_name</p>
</li>
<li>
<p>Fail if result is nonzero</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if no fails.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.1.6.1.1 Req 29:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Basic</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/features/vector_features/data/feature_table_one_geometry_column</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that every vector features user data table has one geometry column.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name FROM gpkg_contents WERE data_type = <em>features</em></p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>For each row table name from step 1</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>SELECT column_name from gpkg_geometry_columns where table_name = row table name</p>
</li>
<li>
<p>Fail if returns more than one column name</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if no fails</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.1.6.1.1 Req 30:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/features/vector_features/data/feature_table_geometry_column_type</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the declared SQL type of a feature table geometry column is the uppercase geometry type name from Annex G specified by the <code>geometry_type_name</code>
column for that <code>column_name</code> and <code>table_name</code> in the <code>gpkg_geometry_columns</code> table.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name, column_name, geometry_type_name table_name
FROM gpkg_geometry_columns WHERE table_name IN
(SELECT table_name FROM gpkg_contents WHERE data_type = <em>features</em>)</p>
</li>
<li>
<p>For each row selected in (1):</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>PRAGMA table_info(<em>{selected table_name}</em>)</p>
</li>
<li>
<p>Fail if declared type of column_name selected in (1) is not the geometry_type_name selected in (1)</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if no fails</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.1.6.1.1 Req 31:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p><strong>Table Data Values</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/features/vector_features/data/data_values_geometry_type</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the geometry type of feature geometries are of the type or are assignable for the geometry type specified by the <code>gpkg_geometry</code> columns table <code>geometry_type_name</code> column value.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name AS tn, column_name AS cn, geometry_type_name AS gt_name FROM gpkg_geometry_columns WHERE table_name IN (SELECT table_name FROM gpkg_contents WHERE data_type = <em>features</em>)</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>For each row from step 1</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>*Select the set of geometry types in use for the values in cn</p>
</li>
<li>
<p>For each row actual_type_name from step a</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>*Determine if each geometry type is assignable to the actual_type_name</p>
</li>
<li>
<p>Fail if any are not assignable</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if no fails</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.1.6.1.2 Req 32:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/features/vector_features/data/data_value_geometry_srs_id</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify the the srs_id of feature geometries are the srs_id specified for the <code>gpkg_geometry_columns</code> table <code>srs_id</code> column value.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name AS tn, column_name AS cn, srs_id AS gc_srs_id FROM gpkg_geometry_columns WHERE table_name IN (SELECT table_name FROM gpkg_contents where data_type = <em>features</em>)</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>For each row from step 1</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>*Select the set of SRIDs in use for the values in cn</p>
</li>
<li>
<p>For each row from step a</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>*Fail if any SRID is not equal to gc_srs_id</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if no fails</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.1.6.1.2 Req 33:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="sect3">
<h4 id="_tiles">A.2.2. Tiles</h4>
<div class="sect4">
<h5 id="_contents_7">A.2.2.1. Contents</h5>
<div class="sect5">
<h6 id="_data_27">A.2.2.1.1. Data</h6>
<div class="paragraph">
<p><strong>Contents Table – Tiles Row</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/tiles/contents/data/tiles_row</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the <code>gpkg_contents</code> <code>table_name</code> value table exists and is apparently a tiles table for every row with a <code>data_type</code> column value of "tiles".</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>Execute test /opt/tiles/tile_pyramid/data/table_def</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.2.2.1.1 Req 34:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

</div>
</div>
<div class="sect4">
<h5 id="_zoom_levels">A.2.2.2. Zoom Levels</h5>
<div class="sect5">
<h6 id="_data_28">A.2.2.2.1. Data</h6>
<div class="paragraph">
<p><strong>Zoom Times Two</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/tiles/zoom_levels/data/zoom_times_two</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that zoom level pixel sizes for tile matrix user data tables vary by factors of 2 between adjacent zoom levels in the tile matrix metadata table.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name FROM gpkg_contents WHERE data_type = <em>tiles</em></p>
</li>
<li>
<p>Not testable  if returns empty result set</p>
</li>
<li>
<p>For each row table_name from step 1</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>SELECT zoom_level, pixel_x_size, pixel_y_size FROM gpkg_tile_matrix WHERE table_name = selected table name ORDER BY zoom_level ASC</p>
</li>
<li>
<p>Not testable  if returns empty result set, or only one row</p>
</li>
<li>
<p>Not testable  if there are not two rows with adjacent zoom levels</p>
</li>
<li>
<p>Fail if any pair of rows for adjacent zoom levels have pixel_x_size or pixel_y_size values that differ by other than factors of two</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if no fails</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.2.3.1.1 Req 35:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

</div>
</div>
<div class="sect4">
<h5 id="_tile_encoding_png">A.2.2.3. Tile Encoding PNG</h5>
<div class="sect5">
<h6 id="_data_29">A.2.2.3.1. Data</h6>
<div class="paragraph">
<p><strong>MIME Type PNG</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/tiles/tiles_encoding/data/mime_type_png</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that a tile matrix user data table that contains tile data that is not MIME type "image/jpeg" by default contains tile data in MIME type "image/png".</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name AS tn FROM gpkg_contents WHERE data_type = 'tiles'</p>
</li>
<li>
<p>For each row tbl_name from step 1</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>WHEN (SELECT tbl_name FROM sqlite_master WHERE tbl_name = 'gpkg_extensions') = 'gpkg_extensions' THEN (SELECT extension_name FROM gpkg_extensions WHERE table_name = 'tn' AND column_name = 'tile_data')
END;</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Not testable unless it returns empty result set</p>
</li>
</ol>
</div>
</li>
<li>
<p>SELECT tile_data FROM tn</p>
</li>
<li>
<p>For each row tile_data from step a</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Pass if tile data in MIME type image/jpeg</p>
</li>
<li>
<p>Pass if tile data in MIME type image/png</p>
</li>
<li>
<p>Fail if no passes</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.2.4.1.1 Req 36:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

</div>
</div>
<div class="sect4">
<h5 id="_tile_encoding_jpeg">A.2.2.4. Tile Encoding JPEG</h5>
<div class="sect5">
<h6 id="_data_30">A.2.2.4.1. Data</h6>
<div class="paragraph">
<p><strong>MIME Type JPEG</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/tiles/tiles_encoding/data/mime_type_jpeg</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that a tile matrix user data table that contains tile data that is not MIME type "image/png" by default contains tile data in MIME type "image/jpeg".</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name AS tn FROM gpkg_contents WHERE data_type = <em>tiles</em></p>
</li>
<li>
<p>For each row tbl_name from step 1</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>WHEN (SELECT tbl_name FROM sqlite_master WHERE tbl_name = <em>gpkg_extensions</em>) = <em>gpkg_extensions</em> THEN (SELECT extension_name FROM gpkg_extensions WHERE table_name = <em>tn</em> AND column_name = <em>tile_data</em>)
END;</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Not testable unless it returns empty result set</p>
</li>
</ol>
</div>
</li>
<li>
<p>SELECT tile_data FROM tn</p>
</li>
<li>
<p>For each row tile_data from step a</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Pass if tile data in MIME type image/jpeg</p>
</li>
<li>
<p>Pass if tile data in MIME type image/png</p>
</li>
<li>
<p>Fail if no passes</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.2.5.1.1 Req 37:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

</div>
</div>
<div class="sect4">
<h5 id="_tile_matrix_set_2">A.2.2.5. Tile Matrix Set</h5>
<div class="sect5">
<h6 id="_data_31">A.2.2.5.1. Data</h6>
<div class="paragraph">
<p><strong>Table Definition</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/tiles/gpkg_tile_matrix_set/data/table_def</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the <code>gpkg_tile_matrix_set</code> table exists and has the correct definition.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT sql FROM sqlite_master WHERE type = <em>table</em> AND tbl_name = <em>gpkg_tile_matrix_set</em></p>
</li>
<li>
<p>Fail if returns an empty result set.</p>
</li>
<li>
<p>Pass if the column names and column definitions in the returned CREATE TABLE statement in the sql column value, including data type, nullability, default values and primary, foreign and unique key constraints match all of those in the contents of <a href="#example_feature_table_sql">[example_feature_table_sql]</a>. Column order, check constraint and trigger definitions, and other column definitions in the returned sql are irrelevant.</p>
</li>
<li>
<p>Fail otherwise.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.2.6.1.1 Req 38:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p><strong>Table Data Values</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/tiles/gpkg_tile_matrix_set/data/data_values_table_name</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that values of the <code>gpkg_tile_matrix_set</code> <code>table_name</code> column reference values in the <code>gpkg_contents</code> <code>table_name</code> column.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name FROM gpkg_tile_matrix_set</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>SELECT table_name FROM gpkg_tile_matrix_set tms WHERE table_name NOT IN (SELECT table_name FROM gpkg_contents gc WHERE tms.table_name = gc.table_name)</p>
</li>
<li>
<p>Fail if result set contains any rows</p>
</li>
<li>
<p>Pass otherwise</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.2.6.1.2 Req 39:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/tiles/gpkg_tile_matrix_set/data/data_values_row_record</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the <code>gpkg_tile_matrix_set</code> table contains a row record for each tile pyramid user data table.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name AS &lt;user_data_tiles_table&gt; from gpkg_contents where data_type = <em>tiles</em></p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>For each row from step 1</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>SELECT sql FROM sqlite_master WHERE type=<em>table</em> AND tbl_name = <em>&lt;user_data_tiles_table&gt;</em></p>
</li>
<li>
<p>Fail if returns an empty result set</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if no fails</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.2.6.1.2 Req 40:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/tiles/gpkg_tile_matrix_set/data/data_values_srs_id</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the <code>gpkg_tile_matrix_set</code> table <code>srs_id</code> column values reference <code>gpkg_spatial_ref_sys</code> <code>srs_id</code> column values.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>PRAGMA foreign_key_check(<em>gpkg_geometry_columns</em>)</p>
</li>
<li>
<p>Fail if returns any rows with a fourth column foreign key index value of 1 (gpkg_spatial_ref_sys)</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.2.6.1.2 Req 41:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

</div>
</div>
<div class="sect4">
<h5 id="_tile_matrix">A.2.2.6. Tile Matrix</h5>
<div class="sect5">
<h6 id="_data_32">A.2.2.6.1. Data</h6>
<div class="paragraph">
<p><strong>Table Definition</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/tiles/gpkg_tile_matrix/data/table_def</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the <code>gpkg_tile_matrix</code> table exists and has the correct definition.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT sql FROM sqlite_master WHERE type = 'table' AND tbl_name = 'gpkg_tile_matrix'</p>
</li>
<li>
<p>Fail if returns an empty result set.</p>
</li>
<li>
<p>Pass if the column names and column definitions in the returned CREATE TABLE statement in the sql column value, including data type, nullability, default values, primary, and foreign key constraints match all of those in the contents of Annex C Table 23.</p>
</li>
<li>
<p>Fail otherwise.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.2.7.1.1 Req 42:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Basic</p>
</div></div></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p><strong>Table Data Values</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/tiles/gpkg_tile_matrix/data/data_values_table_name</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that values of the <code>gpkg_tile_matrix</code> <code>table_name</code> column reference values in the <code>gpkg_contents</code> <code>table_name</code> column.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name FROM gpkg_tile_matrix</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>SELECT table_name FROM gpkg_tile_matrix tmm WHERE table_name NOT IN (SELECT table_name FROM gpkg_contents gc WHERE tmm.table_name = gc.table_name)</p>
</li>
<li>
<p>Fail if result set contains any rows</p>
</li>
<li>
<p>Pass otherwise</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.2.7.1.2 Req 43:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/tiles/gpkg_tile_matrix/data/data_values_zoom_level_rows</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the <code>gpkg_tile_matrix</code> table contains a row record for each zoom level that contains one or more tiles in each tile pyramid user data table.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name AS &lt;user_data_tiles_table&gt; from gpkg_contents where data_type = <em>tiles</em></p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>For each row from step 1</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>SELECT DISTINCT gtmm.zoom_level AS gtmm_zoom, udt.zoom_level AS udtt_zoom FROM gpkg_tile_matrix AS gtmm
LEFT OUTER JOIN &lt;user_data_tiles_table&gt; AS udtt ON udtt.zoom_level =  gtmm.zoom_level AND gtmm.t_table_name = <em>&lt;user_data_tiles_table&gt;</em></p>
</li>
<li>
<p>Fail if any gtmm_zoom column value in the result set is NULL</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if no fails</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.2.7.1.2 Req 44:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/tiles/gpkg_tile_matrix/data/data_values_width_height</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the tile matrix extents in <code>gpkg_tile_matrix_set</code> match the contents of the <code>gpkg_tile_matrix</code> table.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name AS &lt;user_data_tiles_table&gt; from gpkg_contents where data_type = <em>tiles</em></p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>For each row from step 1</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>SELECT max_x - min_x from gpkg_tile_matrix_set where table_name = <em>&lt;user_data_tiles_table&gt;</em></p>
</li>
<li>
<p>SELECT zoom_level, matrix_width * tile_width * pixel_x_size from gpkg_tile_matrix where table_name = <em>&lt;user_data_tiles_table&gt;</em></p>
</li>
<li>
<p>SELECT max_y - min_y from gpkg_tile_matrix_set where table_name = <em>&lt;user_data_tiles_table&gt;</em></p>
</li>
<li>
<p>SELECT zoom_level, matrix_height * tile_height * pixel_y_size from gpkg_tile_matrix where table_name = <em>&lt;user_data_tiles_table&gt;</em></p>
</li>
<li>
<p>Fail if, for any zoom level, the difference for an axis does not equal the product for that axis at that zoom level</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if no fails</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.2.7.1.2 Req 45:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/tiles/gpkg_tile_matrix/data/data_values_zoom_level</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that zoom level column values in the <code>gpkg_tile_matrix</code> table are not negative.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT zoom_level FROM gpkg_tile_matrix</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>SELECT min(zoom_level) FROM gpkg_tile_matrix_metadata.</p>
</li>
<li>
<p>Fail if less than 0.</p>
</li>
<li>
<p>Pass otherwise.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.2.7.1.2 Req 46:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/tiles/gpkg_tile_matrix/data/data_values_matrix_width</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the <code>matrix_width</code> values in the <code>gpkg_tile_matrix</code> table are valid.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT matrix_width FROM gpkg_tile_matrix</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>SELECT min(matrix_width) FROM gpkg_tile_matrix.</p>
</li>
<li>
<p>Fail if less than 1.</p>
</li>
<li>
<p>Pass otherwise.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference:</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.2.7.1.2 Req 47:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type:</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/tiles/gpkg_tile_matrix/data/data_values_matrix_height</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the <code>matrix_height</code> values in the <code>gpkg_tile_matrix</code> table are valid.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT matrix_height FROM gpkg_tile_matrix</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>SELECT min(matrix_height) FROM gpkg_tile_matrix.</p>
</li>
<li>
<p>Fail if less than 1.</p>
</li>
<li>
<p>Pass otherwise.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.2.7.1.2 Req 48:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/tiles/gpkg_tile_matrix/data/data_values_tile_width</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the <code>tile_width</code> values in the <code>gpkg_tile_matrix</code> table are valid.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT tile_width FROM gpkg_tile_matrix</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>SELECT min(tile_width) FROM gpkg_tile_matrix.</p>
</li>
<li>
<p>Fail if less than 1.</p>
</li>
<li>
<p>Pass otherwise.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.2.7.1.2 Req 49:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/tiles/gpkg_tile_matrix/data/data_values_tile_height</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the <code>tile_height</code> values in the <code>gpkg_tile_matrix</code> table are valid.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT tile_height FROM gpkg_tile_matrix</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>SELECT min(tile_height) FROM gpkg_tile_matrix.</p>
</li>
<li>
<p>Fail if less than 1.</p>
</li>
<li>
<p>Pass otherwise.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.2.7.1.2 Req 50:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/tiles/gpkg_tile_matrix/data/data_values_pixel_x_size</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the <code>pixel_x_size</code> values in the <code>gpkg_tile_matrix</code> table are valid.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT pixel_x_size FROM gpkg_tile_matrix</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>SELECT min(pixel_x_size) FROM gpkg_tile_matrix.</p>
</li>
<li>
<p>Fail if less than 0.</p>
</li>
<li>
<p>Pass otherwise.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.2.7.1.2 Req 51:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/tiles/gpkg_tile_matrix/data/data_values_pixel_y_size</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the <code>pixel_y_size</code> values in the <code>gpkg_tile_matrix</code> table are valid.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT pixel_y_size FROM gpkg_tile_matrix</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>SELECT min(pixel_y_size) FROM gpkg_tile_matrix.</p>
</li>
<li>
<p>Fail if less than 0.</p>
</li>
<li>
<p>Pass otherwise.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.2.7.1.2 Req 52:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/tiles/gpkg_tile_matrix/data/data_values_pixel_size_sort</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the <code>pixel_x_size</code> and <code>pixel_y_size</code> column values for zoom level column values in a <code>gpkg_tile_matrix</code> table sorted in ascending order are sorted in descending order, showing that lower zoom levels are zoomed "out".</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name FROM gpkg_contents WHERE data_type = <em>tiles</em></p>
</li>
<li>
<p>Not testable if returns empty result set</p>
</li>
<li>
<p>For each row table_name from step 1</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>SELECT zoom_level, pixel_x_size, pixel_y_size from gpkg_tile_matrix WHERE table_name = row table name ORDER BY zoom_level ASC</p>
</li>
<li>
<p>Not testable if returns empty result set</p>
</li>
<li>
<p>Fail if pixel_x_sizes are not sorted in descending order</p>
</li>
<li>
<p>Fail if pixel_y_sizes are not sorted in descending order</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if testable and no fails</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.2.7.1.2 Req 53:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

</div>
</div>
<div class="sect4">
<h5 id="_tile_pyramid_user_data">A.2.2.7. Tile Pyramid User Data</h5>
<div class="sect5">
<h6 id="_data_33">A.2.2.7.1. Data</h6>
<div class="paragraph">
<p><strong>Table Definition</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/tiles/tile_pyramid/data/table_def</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that multiple tile pyramids are stored in different tiles tables with unique names containing the required columns.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT COUNT(table_name) FROM gpkg_contents WERE data_type = "tiles"</p>
</li>
<li>
<p>Not testable if less than 1</p>
</li>
<li>
<p>SELECT table_name FROM gpkg_contents WHERE data_type = "tiles"</p>
</li>
<li>
<p>For each row from step 3</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>PRAGMA table_info(table_name)</p>
</li>
<li>
<p>Fail if returns an empty result set</p>
</li>
<li>
<p>Fail if result set does not contain one row where the pk column value is 1 and the not null column value is 1 and the type column value is "INTEGER"and the name column value is "id"</p>
</li>
<li>
<p>Fail if result set does not contain four other rows where the name column values are "zoom_level","tile_column","tile_row", and "tile_data".</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if no fails</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.2.8.1.1 Req 54:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Basic</p>
</div></div></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p><strong>Table Data Values</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/tiles/tile_pyramid/data/data_values_zoom_levels</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the zoom level column values in each tile pyramid user data table are within the range of zoom levels defined by rows in the <code>gpkg_tile_matrix</code> table.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT DISTINCT table_name AS &lt;user_data_tiles_table&gt; FROM gpkg_tile_matrix</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>For each row &lt;user_data_tiles_table&gt; from step 1</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>SELECT zoom_level FROM &lt;user_data_tiles_table&gt;</p>
</li>
<li>
<p>If result set not empty</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>SELECT MIN(gtmm.zoom_level) AS min_gtmm_zoom, MAX(gtmm.zoom_level) AS max_gtmm_zoom FROM gpkg_tile_matrix WHERE table_name = &lt;user_data_tiles_table&gt;</p>
</li>
<li>
<p>SELECT id FROM &lt;user_data_tiles_table&gt; WHERE zoom_level &lt; min_gtmm_zoom</p>
</li>
<li>
<p>Fail if result set not empty</p>
</li>
<li>
<p>SELECT id FROM &lt;user_data_tiles_table&gt; WHERE zoom_level &gt; max_gtmm_zoom</p>
</li>
<li>
<p>Fail if result set not empty</p>
</li>
<li>
<p>Log pass otherwise</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if logged pas and no fails</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.2.8.1.2 Req 55:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/tiles/tile_pyramid/data/data_values_tile_column</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the <code>tile_column</code> column values for each zoom level value in each tile pyramid user data table are within the range of columns defined by rows in the <code>gpkg_tile_matrix</code> table.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT DISTINCT table_name AS &lt;user_data_tiles_table&gt; FROM gpkg_tile_matrix</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>For each row &lt;user_data_tiles_table&gt; from step 1</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>SELECT DISTINCT gtmm.zoom_level AS gtmm_zoom, gtmm.matrix_width AS gtmm_width, udt.zoom_level AS udt_zoom, udt.tile_column AS udt_column FROM gpkg_tile_matrix AS gtmm LEFT OUTER JOIN &lt;user_data_tiles_table&gt; AS udt ON udt.zoom_level = gtmm.zoom_level AND gtmm.t_table_name = <em>&lt;user_data_tiles_table&gt;</em> AND (udt_column &lt; 0 OR udt_column &gt; (gtmm_width - 1))</p>
</li>
<li>
<p>Fail if any udt_column value in the result set is not NULL</p>
</li>
<li>
<p>Log pass otherwise</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if logged pass and no fails</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.2.8.1.2 Req 56:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/tiles/tile_pyramid_data/data_values_tile_row</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the <code>tile_row</code> column values for each zoom level value in each tile pyramid user data table are within the range of rows defined by rows in the <code>gpkg_tile_matrix</code> table.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT DISTINCT table_name AS &lt;user_data_tiles_table&gt; FROM gpkg_tile_matrix</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>For each row &lt;user_data_tiles_table&gt; from step 1</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>SELECT DISTINCT gtmm.zoom_level AS gtmm_zoom, gtmm.matrix_height AS gtmm_height, udt.zoom_level AS udt_zoom, udt.tile_row AS udt_row FROM gpkg_tile_matrix AS gtmm LEFT OUTER JOIN &lt;user_data_tiles_table&gt;  AS udt ON udt.zoom_level = gtmm.zoom_level AND gtmm.t_table_name = '&lt;user_data_tiles_table&gt; ' AND (udt_row &lt; 0 OR udt_row &gt; (gtmm_height - 1))</p>
</li>
<li>
<p>Fail if any udt_row value in the result set is not NULL</p>
</li>
<li>
<p>Log pass otherwise</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if logged pass and no fails</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.2.8.1.2 Req 57:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="sect3">
<h4 id="_extension_mechanism">A.2.3. Extension Mechanism</h4>
<div class="sect4">
<h5 id="_extensions_2">A.2.3.1. Extensions</h5>
<div class="sect5">
<h6 id="_data_34">A.2.3.1.1. Data</h6>
<div class="paragraph">
<p><strong>Table Definition</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/extension_mechanism/data/table_def</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that a <code>gpkg_extensions</code> table exists and has the correct definition.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT sql FROM sqlite_master WHERE type = <em>table</em> AND tbl_name = <em>gpkg_extensions</em></p>
</li>
<li>
<p>Fail if returns an empty result set.</p>
</li>
<li>
<p>Pass if the column names and column definitions in the returned Create TABLE statement in the sql column value, including data type, nullability, default values and primary, foreign and unique key constraints match all of those in the contents of <a href="#extensions_table_definition">[extensions_table_definition]</a>. Column order, check constraint and trigger definitions, and other column definitions in the returned sql are irrelevant.</p>
</li>
<li>
<p>Fail otherwise.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.3.2.1.1 Req 58:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Basic</p>
</div></div></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p><strong>Table Data Values</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/extension_mechanism/data/data_values_for_extensions</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that every extension of a GeoPackage is registered in a row in the <code>gpkg_extensions</code> table</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>Manual inspection</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.3.2.1.2 Req 59:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/extension_mechanism/data/data_values_table_name</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the <code>table_name</code> column values in the <code>gpkg_extensions</code> table are valid.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT lower(table_name) AS table_name, column_name FROM gpkg_extensions;</p>
</li>
<li>
<p>Not testable if table does not exist or query returns an empty result set.</p>
</li>
<li>
<p>For each row from step one</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>"SELECT DISTINCT lower(ge.table_name) AS ge_table, lower(sm.tbl_name) AS tbl_name FROM gpkg_extensions AS ge LEFT OUTER JOIN sqlite_master AS sm ON lower(ge.table_name) = lower(sm.tbl_name);</p>
</li>
<li>
<p>Fail if <code>ge_table</code> and <code>tbl_name</code> are not equal (or both null).</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if no fails.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.3.2.1.2 Req 60:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/extension_mechanism/data/data_values_column_name</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the <code>column_name</code> column values in the <code>gpkg_extensions</code> table are valid.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name, column_name FROM gpkg_extensions WHERE column_name IS NOT NULL</p>
</li>
<li>
<p>Pass if returns an empty result set</p>
</li>
<li>
<p>For each row from step 3</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>SELECT count(column_name) FROM table_name</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Fail if query is invalid, suggesting an invalid column name</p>
</li>
</ol>
</div>
</li>
<li>
<p>Log pass otherwise</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if logged pass and no fails.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.3.2.1.2 Req 61:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/extension_mechanism/data/data_values_extension_name</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the <code>extension_name</code> column values in the <code>gpkg_extensions</code> table are valid.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT extension_name FROM gpkg_extensions</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>For each row returned from step 1</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Log pass if extension_name is one of those listed in Annex F.</p>
</li>
<li>
<p>Separate extension_name into &lt;author&gt; and &lt;extension&gt; at the first "_"</p>
</li>
<li>
<p>Fail if &lt;author&gt; is "gpkg"</p>
</li>
<li>
<p>Fail if &lt;author&gt; contains characters other than [a-zA-Z0-9]</p>
</li>
<li>
<p>Fail if &lt;extension&gt; contains characters other than [a-zA-Z0-9_]</p>
</li>
<li>
<p>Log pass otherwise</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if logged pass and no fails.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.3.2.1.2 Req 62:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/extension_mechanism/data/data_values_definition</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the <code>definition</code> column value contains or references extension documentation</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT definition FROM gpkg_extensions</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>For each row returned from step 1</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Inspect if definition value is not like "Annex %", or "http%" or mailto:% or "Extension Title%"</p>
</li>
<li>
<p>Fail if definition value does not contain or reference extension documentation</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if no fails</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.3.2.1.2 Req 63:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/extension_mechanism/data/data_values_scope</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the <code>scope</code> column value is "read-write" or "write-only"</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT scope FROM gpkg_extensions</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>For each row returned from step 1</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Fail if value is not "read-write" or "write-only"</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if no fails</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.3.2.1.2 Req 64:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="sect3">
<h4 id="_attributes">A.2.4. Attributes</h4>
<div class="sect4">
<h5 id="_contents_8">A.2.4.1. Contents</h5>
<div class="sect5">
<h6 id="_data_35">A.2.4.1.1. Data</h6>
<div class="paragraph">
<p><strong>Contents Table – Attributes Row</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/opt/attributes/contents/data/attributes_row</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the <code>gpkg_contents</code> <code>table_name</code> value table exists and is apparently an attributes table for every row with a <code>data_type</code> column value of "attributes".</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name FROM gpkg_contents WHERE data_type = "attributes"</p>
</li>
<li>
<p>Not testable if returns empty result set</p>
</li>
<li>
<p>For each row from step 1</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>PRAGMA table_info(table_name)</p>
</li>
<li>
<p>Fail if returns an empty result set</p>
</li>
<li>
<p>Fail if result set does not contain one row where the <code>pk</code> column value is 1 and the <code>notnull</code> column value is 1 and the <code>type</code> column value is "INTEGER" and the <code>name</code> column value is "id"</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if no fails.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.4.2.1.1 Req 64a</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clause 2.4.3.1.1 Req 64b</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="background_and_context"> Annex B: Background and Context (Normative)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_background">B.1. Background</h3>
<div class="paragraph">
<p>An open standard non-proprietary platform-independent GeoPackage container for distribution and direct use of all kinds of geospatial data will increase the cross-platform interoperability of geospatial applications and web services. Standard APIs for access and management of GeoPackage data will provide consistent query and update results across such applications and services. Increased interoperability and result consistency will enlarge the potential market for such  applications and services, particularly in resource-constrained mobile computing environments like cell phones and tablets. GeoPackages will become the standard containers for "MyGeoData" that are used as a transfer format by users and Geospatial Web Services and a storage format on personal and enterprise devices.</p>
</div>
<div class="paragraph">
<p>This OGC® GeoPackage Encoding Standard defines a GeoPackage as a self-contained, single-file,
cross-platform, serverless, transactional, open source SQLite data container with table definitions, relational
integrity constraints, an SQL API exposed via a "C" CLI and JDBC, and manifest tables that together act as an exchange and direct-use format for multiple types of geospatial data including vector features, features with raster attributes and tile matrix pyramids, especially on mobile / hand held devices in disconnected or limited network connectivity environments.</p>
</div>
<div class="paragraph">
<p>Table formats, definitions of geometry types and metadata tables, relational integrity constraints, and SQL API are interdependent specification facets of the SF-SQL <a href="#9">[9]</a><a href="#10">[10]</a><a href="#11">[11]</a> and SQL-MM (Spatial) <a href="#12">[12]</a> standards that serve as normative references for the vector feature portion of this standard.</p>
</div>
<div class="paragraph">
<p>This standard attempts to support and use relevant raster types, storage table definitions, and metadata from widely adopted implementations and existing standards such as WMTS <a href="#16">[16]</a> and ISO metadata <a href="#28">[28]</a>, to integrate use of rasters as attributes of geospatial features, and to define relational integrity constraints and an SQL API thereon to provide a raster analogy to the SF-SQL and SF-MM data access and data quality assurance capabilities.</p>
</div>
<div class="paragraph">
<p>Conformance classes for this standard are classified as core (mandatory) and extension (optional). The simple core of an Empty GeoPackage contains two SQL tables.</p>
</div>
<div class="paragraph">
<p>Future versions of this standard may include requirements for elevation data and routes. Future enhancements to this standard, a future GeoPackage Web Service specification, and modifications to existing OGC Web Service (OWS) specifications to use GeoPackages as exchange formats may allow OWS to support provisioning of GeoPackages throughout an enterprise or information community.</p>
</div>
</div>
<div class="sect2">
<h3 id="_document_terms_and_definitions">B.2. Document terms and definitions</h3>
<div class="paragraph">
<p>This document uses the standard terms defined in Subclause 5.3 of [OGC 06-121], which is based on the ISO/IEC Directives, Part 2. Rules for the structure and drafting of International Standards. In particular, the word "shall" (not "must") is the verb form used to indicate a requirement to be strictly followed to conform to this standard.</p>
</div>
<div class="paragraph">
<p>For the purposes of this document, the following terms and definitions apply.</p>
</div>
<div class="dlist glossary">
<dl>
<dt>Empty GeoPackage</dt>
<dd>
<p>A GeoPackage that contains a <code>gpkg_spatial_ref_sys</code> table, a <code>gpkg_contents</code> table with row record(s) with <code>data_type</code> column values of "features" or "tiles", and corresponding features tables per clause <a href="#features">Features</a> and/or tiles tables per clause <a href="#tiles">Tiles</a> where the user data tables per clauses 2.1.6. and 2.2.8 exist but contain no rows.</p>
</dd>
<dt>Extended GeoPackage</dt>
<dd>
<p>A GeoPackage that contains any additional data elements (tables or columns) or SQL constructs (data types, indexes, constraints or triggers) that are not specified in this encoding standard.</p>
</dd>
<dt>geolocate</dt>
<dd>
<p>identify a real-world geographic location</p>
</dd>
<dt>GeoPackage file</dt>
<dd>
<p>a platform-independent SQLite database file that contains GeoPackage data and metadata tables with specified definitions, integrity assertions, format limitations and content constraints.</p>
</dd>
<dt>GeoPackage SQLite Configuration</dt>
<dd>
<p>consists of the SQLite 3 software library and a set of compile- and runtime configurations options.</p>
</dd>
<dt>GeoPackage SQLite Extension</dt>
<dd>
<p>a SQLite loadable extension that MAY provide SQL functions to support spatial indexes and SQL triggers linked to a SQLite library with specified configuration requirements to provide SQL API access to a GeoPackage.</p>
</dd>
<dt>georectified</dt>
<dd>
<p>raster whose pixels have been regularly spaced in a geographic (i.e., latitude / longitude) or projected map coordinate system using ground control points so that any pixel can be geolocated given its grid coordinate and the grid origin, cell spacing, and orientation.</p>
</dd>
<dt>orthorectified</dt>
<dd>
<p>georectified raster that has also been corrected to remove image perspective (camera angle tilt), camera and lens induced distortions, and terrain induced distortions using camera calibration parameters and DEM elevation data to accurately align with real world coordinates, have constant scale, and support direct measurement of distances, angles, and areas.</p>
</dd>
<dt>tile</dt>
<dd>
<p>a rectangular pictorial representation of geographic data, often part of a set of such elements, covering a spatially contiguous extent and sharing similar information content and graphical styling, which can be uniquely defined by a pair of indices for the column and row along with an identifier for the tile matrix.</p>
</dd>
<dt>tile matrix</dt>
<dd>
<p>a collection of tiles for a fixed scale</p>
</dd>
<dt>tile pyramid</dt>
<dd>
<p>a collection of tile matrices defined at different scales</p>
</dd>
<dt>Valid GeoPackage</dt>
<dd>
<p>A GeoPackage that contains features per clause <a href="#_features">Features</a> and/or tiles per clause <a href="#tiles">Tiles</a> and row(s) in the <code>gpkg_contents</code> table with <code>data_type</code> column values of "features" and/or "tiles" describing the user data tables.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_conventions">B.3. Conventions</h3>
<div class="paragraph">
<p>Symbols (and abbreviated terms)</p>
</div>
<div class="dlist terms">
<dl>
<dt>ACID</dt>
<dd>
<p>Atomic, Consistent, Isolated, and Durable</p>
</dd>
<dt>ASCII</dt>
<dd>
<p>American Standard Code for Information Interchange</p>
</dd>
<dt>API</dt>
<dd>
<p>Application Program Interface</p>
</dd>
<dt>BLOB</dt>
<dd>
<p>Binary Large OBject</p>
</dd>
<dt>CLI</dt>
<dd>
<p>Call-Level Interface</p>
</dd>
<dt>COTS</dt>
<dd>
<p>Commercial Off The Shelf</p>
</dd>
<dt>DEM</dt>
<dd>
<p>Digital Elevation Model</p>
</dd>
<dt>GPKG</dt>
<dd>
<p>GeoPackage</p>
</dd>
<dt>GRD</dt>
<dd>
<p>Ground Resolved Distance</p>
</dd>
<dt>EPSG</dt>
<dd>
<p>European Petroleum Survey Group</p>
</dd>
<dt>FK</dt>
<dd>
<p>Foreign Key</p>
</dd>
<dt>IETF</dt>
<dd>
<p>Internet Engineering Task Force</p>
</dd>
<dt>IIRS</dt>
<dd>
<p>Image Interpretability Rating Scale</p>
</dd>
<dt>IRARS</dt>
<dd>
<p>Imagery Resolution Assessments and Reporting Standards (Committee)</p>
</dd>
<dt>ISO</dt>
<dd>
<p>International Organization for Standardization</p>
</dd>
<dt>JDBC</dt>
<dd>
<p>Java Data Base Connectivity</p>
</dd>
<dt>JPEG</dt>
<dd>
<p>Joint Photographics Expert Group (image format)</p>
</dd>
<dt>MIME</dt>
<dd>
<p>Multipurpose Internet Mail Extensions</p>
</dd>
<dt>NIIRS</dt>
<dd>
<p>National Imagery Interpretability Rating Scale</p>
</dd>
<dt>OGC</dt>
<dd>
<p>Open Geospatial Consortium</p>
</dd>
<dt>PK</dt>
<dd>
<p>Primary Key</p>
</dd>
<dt>PNG</dt>
<dd>
<p>Portable Network Graphics (image format)</p>
</dd>
<dt>RDBMS</dt>
<dd>
<p>Relational Data Base Management System</p>
</dd>
<dt>RFC</dt>
<dd>
<p>Request For Comments</p>
</dd>
<dt>SQL</dt>
<dd>
<p>Structured Query Language</p>
</dd>
<dt>SRID</dt>
<dd>
<p>Spatial Reference (System) Identifier</p>
</dd>
<dt>UML</dt>
<dd>
<p>Unified Modeling Language</p>
</dd>
<dt>UTC</dt>
<dd>
<p>Coordinated Universal Time</p>
</dd>
<dt>XML</dt>
<dd>
<p>eXtensible Markup Language</p>
</dd>
<dt>1D</dt>
<dd>
<p>One Dimensional</p>
</dd>
<dt>2D</dt>
<dd>
<p>Two Dimensional</p>
</dd>
<dt>3D</dt>
<dd>
<p>Three Dimensional</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_submitting_organizations_informative">B.4. Submitting Organizations (Informative)</h3>
<div class="paragraph">
<p>The following organizations submitted this Encoding Standard to the Open Geospatial Consortium as a
Request For Comment (RFC).</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Envitia</p>
</li>
<li>
<p>Luciad</p>
</li>
<li>
<p>Sigma Bravo</p>
</li>
<li>
<p>The Carbon Project</p>
</li>
<li>
<p>U.S. Army Geospatial Center</p>
</li>
<li>
<p>U.S. National Geospatial Intelligence Agency</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_document_contributor_contact_points_informative">B.5. Document contributor contact points (Informative)</h3>
<div class="paragraph">
<p>All questions regarding this document should be directed to the editor or the contributors:</p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 13. Document contributors</caption>
<colgroup>
<col style="width:20%;">
<col style="width:40%;">
<col style="width:40%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Organization</th>
<th class="tableblock halign-left valign-top">Email</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Brett Antonides</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LNM Solutions</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>brett.antonides&lt;at&gt;lmnsolutions.com</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Kevin Backe</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">U.S. Army Geospatial Center GASD</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Kevin.Backe&lt;at&gt;usace.army.mil</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Roger Brackin</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Envitia</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>roger.brackin&lt;at&gt;envitia.com</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Chris Clark</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compusult</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>chrisc&lt;at&gt;compusult.net</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Scott Clark</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LNM Solutions</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>scott.clark&lt;at&gt;lmnsolutions.com</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">David Cray</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">U.S. Army Geospatial Center GASD</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>David.Cray&lt;at&gt;usace.army.mil</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Paul Daisey</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Image Matters</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>pauld&lt;at&gt;imagemattersllc.com</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Nathan P. Frantz</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">U.S. Army Geospatial Center ERDC</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Nathan.P.Frantz&lt;at&gt;usace.army.mil</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Alessandro Furieri</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Spatialite</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>a.furieri&lt;at&gt;lqt.it</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Randy Gladish</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Image Matters</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>randyg&lt;at&gt;imagemattersllc.com</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Eric Gundersen</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MapBox</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>eric&lt;at&gt;mapbox.com</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Brad Hards</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sigma Bravo</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>bhards&lt;at&gt;sigmabravo.com</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jeff Harrison</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Carbon Project</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>jharrison&lt;at&gt;thecarbonproject.com</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Chris Holmes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OpenGeo</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>cholmes&lt;at&gt;9eo.org</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Frederic Houbie</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Luciad</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>frederic.houbie&lt;at&gt;luciad.com</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sean Hogan</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compusult</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>sean&lt;at&gt;compusult.net</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Kirk Jensen</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Image Matters</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>kirkj&lt;at&gt;imagemattersllc.com</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">(chinese chars not working) Joshua</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Feng China University</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>joshua&lt;at&gt;gis.tw</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Terry A. Idol</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">U.S. National Geospatial Intelligence Agency</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Terry.A.Idol&lt;at&gt;nga.mil</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Drew Kurry</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Digital Globe</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>dkurry&lt;at&gt;digitalglobe.com</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Steven Lander</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reinventing Geospatial</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>steven.lander&lt;at&gt;rgi-corp.com</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tom MacWright</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MapBox</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>tom&lt;at&gt;mapbox.com</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Joan Maso Pau</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Universitat Autònoma de Barcelona (CREAF)</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>joan.maso&lt;at&gt;uab.es</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Kevin S. Mullane</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">U.S. Army Geospatial Center GASD</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Kevin.S.Mullane&lt;at&gt;usace.army.mil</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Brian Osborn</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CACI</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>bosborn&lt;at&gt;caci.com</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">(chinese chars not working) Yi-Min Huang</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Feng China University</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>niner&lt;at&gt;gis.tw</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Andrea Peri</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Regione Toscana Italy</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>andrea.peri&lt;at&gt;regione.toscana.it</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Paul Ramsey</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OpenGeo</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>pramsey&lt;at&gt;opengeo.org</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Matthew L. Renner</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">U.S. Army Geospatial Center ERDC</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Matthew.L.Renner&lt;at&gt;usace.army.mil</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Even Rouault</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mines-Paris</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>even.rouault&lt;at&gt;mines-paris.org</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Keith Ryden</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Environmental Systems Research Institute</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>kryden&lt;at&gt;esri.com</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Scott Simmons</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CACI</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>scsimmons&lt;at&gt;caci.com</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ingo Simonis</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">International Geospatial Services Institute</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>ingo.simonis&lt;at&gt;igsi.eu</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Raj Singh</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Open Geospatial Consortium</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>rsingh&lt;at&gt;opengeospatial.org</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Steve Smyth</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Open Site Plan</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>steve&lt;at&gt;opensiteplan.org</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Donald V. Sullivan</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">U.S. National Aeronautics and Space Administration</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>donald.v.sullivan&lt;at&gt;nasa.gov</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Christopher Tucker</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mapstory</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>tucker&lt;at&gt;mapstory.org</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Benjamin T. Tuttle</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">U.S. National Geospatial Intelligence Agency</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Benjamin.T.Tuttle&lt;at&gt;nga.mil</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pepijn Van Eeckhoudt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Luciad</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>pepijn.vaneeckhoudt&lt;at&gt;luciad.com</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">David G. Wesloh</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">U.S. National Geospatial Intelligence Agency</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>David.G.Wesloh&lt;at&gt;nga.mil</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jeff Yutzler</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Image Matters</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>jeffy&lt;at&gt;imagemattersllc.com</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Eric Zimmerman</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">U.S. Army Geospatial Center ERDC</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Eric.Zimmerman&lt;at&gt;usace.army.mil</p>
</div></div></td>
</tr>
</tbody>
</table>

</div>
<div class="sect2">
<h3 id="_revision_history_informative">B.6. Revision History (Informative)</h3>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 14. Revision History</caption>
<colgroup>
<col style="width:16%;">
<col style="width:8%;">
<col style="width:16%;">
<col style="width:16%;">
<col style="width:41%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Date</th>
<th class="tableblock halign-left valign-top">Rel</th>
<th class="tableblock halign-left valign-top">Editor</th>
<th class="tableblock halign-left valign-top">Paragraph modified</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2014-02-10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Paul Daisey</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>1.0.0</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2015-04-20</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Paul Daisey</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>1.0.1</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2015-08-04</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R12</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jeff Yutzler</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>1.1.0</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2017-08-25</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R14</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jeff Yutzler</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>1.2.0</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2017-11-22</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R15</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jeff Yutzler</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.1.1.1.1</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Adding reference to database limits <a href="https://github.com/opengeospatial/geopackage/issues/391">https://github.com/opengeospatial/geopackage/issues/391</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2017-11-22</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R15</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jeff Yutzler</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Annex F.8</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>fixing DDL in metadata example <a href="https://github.com/opengeospatial/geopackage/issues/382">https://github.com/opengeospatial/geopackage/issues/382</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2017-11-22</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R15</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jeff Yutzler</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A.2.1.5.1., Annex F.1</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>updating incorrect table references to Annex G <a href="https://github.com/opengeospatial/geopackage/issues/390">https://github.com/opengeospatial/geopackage/issues/390</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2017-12-18</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R15</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jeff Yutzler</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">multiple</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clarifying "non null" constraint for views <a href="https://github.com/opengeospatial/geopackage/issues/395">https://github.com/opengeospatial/geopackage/issues/395</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2017-12-18</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R15</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jeff Yutzler</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Annex F.3</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Rewriting introduction to extension <a href="https://github.com/opengeospatial/geopackage/pull/401">https://github.com/opengeospatial/geopackage/pull/401</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2018-01-22</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R15</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jeff Yutzler</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.1.3.1.1.</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Clarifying GeoPackageBinary <em>X</em> bit <a href="https://github.com/opengeospatial/geopackage/issues/402">https://github.com/opengeospatial/geopackage/issues/402</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2018-01-22</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R15</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jeff Yutzler</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Annex F.2, F.4, F.5</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Providing links to deprecated extensions <a href="https://github.com/opengeospatial/geopackage/pull/404">https://github.com/opengeospatial/geopackage/pull/404</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2018-03-05</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R15</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jeff Yutzler</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.2.1</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Fixing broken internal link <a href="https://github.com/opengeospatial/geopackage/pull/407">https://github.com/opengeospatial/geopackage/pull/407</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2018-03-29</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R15</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jeff Yutzler</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Annex F.11</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Updating references to adopted tiled gridded coverage data extension <a href="https://github.com/opengeospatial/geopackage/pull/421">https://github.com/opengeospatial/geopackage/pull/421</a>, <a href="https://github.com/opengeospatial/geopackage/pull/422">https://github.com/opengeospatial/geopackage/pull/422</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2018-04-09</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R15</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jeff Yutzler</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Annex F.3</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Removing erroneous part of trigger <a href="https://github.com/opengeospatial/geopackage/issues/414">https://github.com/opengeospatial/geopackage/issues/414</a></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2018-04-19</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">R15</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jeff Yutzler</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Annex F.8</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Updating Table 19 to fix typos and improve clarity <a href="https://github.com/opengeospatial/geopackage/pull/427">https://github.com/opengeospatial/geopackage/pull/427</a></p>
</div></div></td>
</tr>
</tbody>
</table>

</div>
<div class="sect2">
<h3 id="_changes_to_the_ogc_abstract_specification">B.7. Changes to the OGC® Abstract Specification</h3>
<div class="paragraph">
<p>The OGC® Abstract Specification does not require changes to accommodate this OGC® standard.</p>
</div>
</div>
<div class="sect2">
<h3 id="_changes_to_ogc_implementation_standards">B.8. Changes to OGC® Implementation Standards</h3>
<div class="paragraph">
<p>None at present.</p>
</div>
</div>
<div class="sect2">
<h3 id="_potential_future_work_informative">B.9. Potential Future Work (Informative)</h3>
<div class="paragraph">
<p>Future versions of this standard MAY do the following:
* investigate GeoPackage implementation on SQLite version 4 <a href="#B25">[B25]</a>.
* include requirements for elevation data and routes.
* Future enhancements to this standard, a future GeoPackage Web Service specification and modifications to existing OGC Web Service (OWS) specifications to use GeoPackages as exchange formats MAY allow OWS to support provisioning of GeoPackages throughout an enterprise.
* include additional raster / image formats, including fewer restrictions on the image/tiff format.
* include additional SQL API routines for interrogation and conversion of raster / image BLOBs.
* add infrastructure to the metadata tables such as a <code>temporal_columns</code> table that refers to the time properties of data records.
* specify a streaming synchronization protocol for GeoPackage as part of a future GeoPackage Web Service specification, and/or a future version of the GeoPackage and/or Web Synchronization Service specification(s).
* address symbology and styling information.
* include geographic / geodesic geometry types.
* create a GeoPackage Abstract Object Model to support data encodings other than SQL.
* add <a href="https://github.com/mapbox/utfgrid-spec">UTFGrid</a> support.</p>
</div>
<div class="paragraph">
<p>Future versions of this standard and/or one for a GeoPackage Web Service MAY do the following:
* address utilities for importing and exporting vector, raster and tile data in various formats.
* address encryption of GeoPackages and/or individual tables or column values.</p>
</div>
</div>
<div class="sect2">
<h3 id="_uml_notation">B.10. UML Notation</h3>
<div class="paragraph">
<p>The diagrams that appear in this standard are presented using the Unified Modeling Language (UML) <a href="#B14">[B14]</a> static structure diagrams.
The UML notations used in this standard for RDBMS tables in a GeoPackage are described in <a href="#uml_notation_rdbms">UML Notation for RDBMS Tables</a> below.</p>
</div>
<div id="uml_notation_rdbms" class="imageblock">
<div class="content">
<img src="umlnotationforrdbmstables.png" alt="umlnotationforrdbmstables">
</div>
<div class="title">Figure 3. UML Notation for RDBMS Tables</div>
</div>
<div class="paragraph">
<p>In this standard, the following two stereotypes of UML classes are used to represent RDBMS tables:</p>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>&lt;&lt;table&gt;&gt; An instantiation of a UML class as an RDMBS table.</p>
</li>
<li>
<p>&lt;&lt;column&gt;&gt; An instantiation of a UML attribute as an RDBMS table column.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>In this standard, the following standard data types are used for RDBMS
columns:</p>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>NULL – The value is a NULL value.</p>
</li>
<li>
<p>INTEGER – A signed integer, stored in 1, 2, 3, 4, 6, or 8 bytes depending on the magnitude of the value</p>
</li>
<li>
<p>REAL – The value is a floating point value, stored as an 8-byte IEEE floating point number.</p>
</li>
<li>
<p>TEXT – A sequence of characters, stored using the database encoding (UTF-8, UTF-16BE or UTF-16LE).</p>
</li>
<li>
<p>BLOB – The value is a blob of data, stored exactly as it was input.</p>
</li>
<li>
<p>NONE – The value is a Date / Time Timestamp</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_geopackage_tables_detailed_diagram">B.11. GeoPackage Tables Detailed Diagram</h3>
<div class="imageblock">
<div class="content">
<img src="geopackage-uml.png" alt="geopackage uml">
</div>
<div class="title">Figure 4. GeoPackage Tables Details</div>
</div>
</div>
<div class="sect2">
<h3 id="_geopackage_minimal_tables_for_features_diagram">B.12. GeoPackage Minimal Tables for Features Diagram</h3>
<div class="imageblock">
<div class="content">
<img src="geopackage-features.png" alt="geopackage features">
</div>
<div class="title">Figure 5. GeoPackage Minimal Tables for Features</div>
</div>
</div>
<div class="sect2">
<h3 id="_geopackage_minimal_tables_for_tiles_diagram">B.13. GeoPackage Minimal Tables for Tiles Diagram</h3>
<div class="imageblock">
<div class="content">
<img src="geopackage-tiles.png" alt="geopackage tiles">
</div>
<div class="title">Figure 6. GeoPackage Minimal Tables for Tiles</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="table_definition_sql"> Annex C: Table Definition SQL (Normative)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_gpkg_spatial_ref_sys">C.1. gpkg_spatial_ref_sys</h3>
<div id="gpkg_spatial_ref_sys_sql" class="listingblock">
<div class="title">gpkg_spatial_ref_sys Table Definition SQL</div>
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">CREATE</span> <span class="type">TABLE</span> gpkg_spatial_ref_sys (
  srs_name <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  srs_id <span class="predefined-type">INTEGER</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span> <span class="directive">PRIMARY</span> <span class="type">KEY</span>,
  organization <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  organization_coordsys_id <span class="predefined-type">INTEGER</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  definition  <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  description <span class="predefined-type">TEXT</span>
);</code></pre>
</div>
</div>
<div id="sqlmm_gpkg_spatial_ref_sys_sql" class="listingblock">
<div class="title">SQL/MM View of gpkg_spatial_ref_sys Definition SQL (Informative)</div>
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">CREATE</span> <span class="type">VIEW</span> st_spatial_ref_sys <span class="keyword">AS</span>
  <span class="class">SELECT</span>
    srs_name,
    srs_id,
    organization,
    organization_coordsys_id,
    definition,
    description
  <span class="keyword">FROM</span> gpkg_spatial_ref_sys;</code></pre>
</div>
</div>
<div id="sfsql_gpkg_spatial_ref_sys_sql" class="listingblock">
<div class="title">SF/SQL View of gpkg_spatial_ref_sys Definition SQL (Informative)</div>
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">CREATE</span> <span class="type">VIEW</span> spatial_ref_sys <span class="keyword">AS</span>
  <span class="class">SELECT</span>
    srs_id <span class="keyword">AS</span> srid,
    organization <span class="keyword">AS</span> auth_name,
    organization_coordsys_id <span class="keyword">AS</span> auth_srid,
    definition <span class="keyword">AS</span> srtext
  <span class="keyword">FROM</span> gpkg_spatial_ref_sys;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_gpkg_contents">C.2. gpkg_contents</h3>
<div id="gpkg_contents_sql" class="listingblock">
<div class="title">gpkg_contents Table Definition SQL</div>
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">CREATE</span> <span class="type">TABLE</span> gpkg_contents (
  table_name <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span> <span class="directive">PRIMARY</span> <span class="type">KEY</span>,
  data_type <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  identifier <span class="predefined-type">TEXT</span> <span class="directive">UNIQUE</span>,
  description <span class="predefined-type">TEXT</span> <span class="directive">DEFAULT</span> <span class="string"><span class="delimiter">'</span><span class="delimiter">'</span></span>,
  last_change <span class="predefined-type">DATETIME</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span> <span class="directive">DEFAULT</span> (strftime(<span class="string"><span class="delimiter">'</span><span class="content">%Y-%m-%dT%H:%M:%fZ</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">now</span><span class="delimiter">'</span></span>)),
  min_x <span class="predefined-type">DOUBLE</span>,
  min_y <span class="predefined-type">DOUBLE</span>,
  max_x <span class="predefined-type">DOUBLE</span>,
  max_y <span class="predefined-type">DOUBLE</span>,
  srs_id <span class="predefined-type">INTEGER</span>,
  <span class="type">CONSTRAINT</span> fk_gc_r_srs_id <span class="directive">FOREIGN</span> <span class="type">KEY</span> (srs_id) <span class="keyword">REFERENCES</span> gpkg_spatial_ref_sys(srs_id)
);</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_gpkg_geometry_columns">C.3. gpkg_geometry_columns</h3>
<div id="gpkg_geometry_columns_sql" class="listingblock">
<div class="title">gpkg_geometry_columns Table Definition SQL</div>
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">CREATE</span> <span class="type">TABLE</span> gpkg_geometry_columns (
  table_name <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  column_name <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  geometry_type_name <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  srs_id <span class="predefined-type">INTEGER</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  z <span class="predefined-type">TINYINT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  m <span class="predefined-type">TINYINT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  <span class="type">CONSTRAINT</span> pk_geom_cols <span class="directive">PRIMARY</span> <span class="type">KEY</span> (table_name, column_name),
  <span class="type">CONSTRAINT</span> uk_gc_table_name <span class="directive">UNIQUE</span> (table_name),
  <span class="type">CONSTRAINT</span> fk_gc_tn <span class="directive">FOREIGN</span> <span class="type">KEY</span> (table_name) <span class="keyword">REFERENCES</span> gpkg_contents(table_name),
  <span class="type">CONSTRAINT</span> fk_gc_srs <span class="directive">FOREIGN</span> <span class="type">KEY</span> (srs_id) <span class="keyword">REFERENCES</span> gpkg_spatial_ref_sys (srs_id)
);</code></pre>
</div>
</div>
<div id="sqlmm_gpkg_geometry_columns_sql" class="listingblock">
<div class="title">SQL/MM View of gpkg_geometry_columns Definition SQL (Informative)</div>
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">CREATE</span> <span class="type">VIEW</span> st_geometry_columns <span class="keyword">AS</span>
  <span class="class">SELECT</span>
    table_name,
    column_name,
    <span class="string"><span class="delimiter">&quot;</span><span class="content">ST_</span><span class="delimiter">&quot;</span></span> || geometry_type_name,
    g.srs_id,
    srs_name
  <span class="keyword">FROM</span> gpkg_geometry_columns <span class="keyword">as</span> g <span class="keyword">JOIN</span> gpkg_spatial_ref_sys <span class="keyword">AS</span> s
  <span class="keyword">WHERE</span> g.srs_id = s.srs_id;</code></pre>
</div>
</div>
<div id="sfsql_gpkg_geometry_columns_sql" class="listingblock">
<div class="title">SF/SQL VIEW of gpkg_geometry_columns Definition SQL (Informative)</div>
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">CREATE</span> <span class="type">VIEW</span> geometry_columns <span class="keyword">AS</span>
  <span class="class">SELECT</span>
    table_name <span class="keyword">AS</span> f_table_name,
    column_name <span class="keyword">AS</span> f_geometry_column,
    code4name (geometry_type_name) <span class="keyword">AS</span> geometry_type,
    <span class="integer">2</span> + (<span class="keyword">CASE</span> z <span class="keyword">WHEN</span> <span class="integer">1</span> <span class="keyword">THEN</span> <span class="integer">1</span> <span class="keyword">WHEN</span> <span class="integer">2</span> <span class="keyword">THEN</span> <span class="integer">1</span> <span class="keyword">ELSE</span> <span class="integer">0</span> <span class="keyword">END</span>) + (<span class="keyword">CASE</span> m <span class="keyword">WHEN</span> <span class="integer">1</span> <span class="keyword">THEN</span> <span class="integer">1</span> <span class="keyword">WHEN</span> <span class="integer">2</span> <span class="keyword">THEN</span> <span class="integer">1</span> <span class="keyword">ELSE</span> <span class="integer">0</span> <span class="keyword">END</span>) <span class="keyword">AS</span> coord_dimension,
    srs_id <span class="keyword">AS</span> srid
  <span class="keyword">FROM</span> gpkg_geometry_columns;</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="icon-note" title="Note"></i>
</td>
<td class="content">
Implementer must provide code4name(geometry_type_name) SQL function
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_sample_feature_table_informative">C.4. sample_feature_table (Informative)</h3>
<div id="example_feature_table_sql" class="listingblock">
<div class="title">sample_feature_table Table Definition SQL (Informative)</div>
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">CREATE</span> <span class="type">TABLE</span> sample_feature_table (
  id <span class="predefined-type">INTEGER</span> <span class="directive">PRIMARY</span> <span class="type">KEY</span> AUTOINCREMENT <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  geometry GEOMETRY,
  text_attribute <span class="predefined-type">TEXT</span>,
  real_attribute REAL,
  boolean_attribute <span class="predefined-type">BOOLEAN</span>,
  raster_or_photo <span class="predefined-type">BLOB</span>
);</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_gpkg_tile_matrix_set">C.5. gpkg_tile_matrix_set</h3>
<div id="gpkg_tile_matrix_set_sql" class="listingblock">
<div class="title">gpkg_tile_matrix_set Table Creation SQL</div>
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">CREATE</span> <span class="type">TABLE</span> gpkg_tile_matrix_set (
  table_name <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span> <span class="directive">PRIMARY</span> <span class="type">KEY</span>,
  srs_id <span class="predefined-type">INTEGER</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  min_x <span class="predefined-type">DOUBLE</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  min_y <span class="predefined-type">DOUBLE</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  max_x <span class="predefined-type">DOUBLE</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  max_y <span class="predefined-type">DOUBLE</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  <span class="type">CONSTRAINT</span> fk_gtms_table_name <span class="directive">FOREIGN</span> <span class="type">KEY</span> (table_name) <span class="keyword">REFERENCES</span> gpkg_contents(table_name),
  <span class="type">CONSTRAINT</span> fk_gtms_srs <span class="directive">FOREIGN</span> <span class="type">KEY</span> (srs_id) <span class="keyword">REFERENCES</span> gpkg_spatial_ref_sys (srs_id)
);</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_gpkg_tile_matrix">C.6. gpkg_tile_matrix</h3>
<div id="gpkg_tile_matrix_sql" class="listingblock">
<div class="title">gpkg_tile_matrix Table Creation SQL</div>
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">CREATE</span> <span class="type">TABLE</span> gpkg_tile_matrix (
  table_name <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  zoom_level <span class="predefined-type">INTEGER</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  matrix_width <span class="predefined-type">INTEGER</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  matrix_height <span class="predefined-type">INTEGER</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  tile_width <span class="predefined-type">INTEGER</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  tile_height <span class="predefined-type">INTEGER</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  pixel_x_size <span class="predefined-type">DOUBLE</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  pixel_y_size <span class="predefined-type">DOUBLE</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  <span class="type">CONSTRAINT</span> pk_ttm <span class="directive">PRIMARY</span> <span class="type">KEY</span> (table_name, zoom_level),
  <span class="type">CONSTRAINT</span> fk_tmm_table_name <span class="directive">FOREIGN</span> <span class="type">KEY</span> (table_name) <span class="keyword">REFERENCES</span> gpkg_contents(table_name)
);</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">EXAMPLE: gpkg_tile_matrix Insert Statement (Informative)</div>
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">INSERT</span> <span class="class">INTO</span> gpkg_tile_matrix <span class="keyword">VALUES</span> (
  <span class="string"><span class="delimiter">&quot;</span><span class="content">sample_tile_pyramid</span><span class="delimiter">&quot;</span></span>,
  <span class="integer">0</span>,
  <span class="integer">1</span>,
  <span class="integer">1</span>,
  <span class="integer">512</span>,
  <span class="integer">512</span>,
  <span class="float">2.0</span>,
  <span class="float">2.0</span>
);</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_sample_tile_pyramid_informative">C.7. sample_tile_pyramid (Informative)</h3>
<div id="example_tiles_table_sql" class="listingblock">
<div class="title">EXAMPLE: tiles table Create Table SQL (Informative)</div>
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">CREATE</span> <span class="type">TABLE</span> sample_tile_pyramid (
  id <span class="predefined-type">INTEGER</span> <span class="directive">PRIMARY</span> <span class="type">KEY</span> AUTOINCREMENT <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  zoom_level <span class="predefined-type">INTEGER</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  tile_column <span class="predefined-type">INTEGER</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  tile_row <span class="predefined-type">INTEGER</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  tile_data <span class="predefined-type">BLOB</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  <span class="directive">UNIQUE</span> (zoom_level, tile_column, tile_row)
)</code></pre>
</div>
</div>
<div id="example_tiles_table_insert_sql" class="listingblock">
<div class="title">EXAMPLE: tiles table Insert Statement (Informative)</div>
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">INSERT</span> <span class="class">INTO</span> sample_matrix_pyramid <span class="keyword">VALUES</span> (
  <span class="integer">1</span>,
  <span class="integer">1</span>,
  <span class="integer">1</span>,
  <span class="integer">1</span>,
  <span class="string"><span class="delimiter">&quot;</span><span class="content">BLOB VALUE</span><span class="delimiter">&quot;</span></span>
)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_gpkg_extensions">C.8. gpkg_extensions</h3>
<div id="gpkg_extensions_sql" class="listingblock">
<div class="title">gpkg_extensions Table Definition SQL</div>
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">CREATE</span> <span class="type">TABLE</span> gpkg_extensions (
  table_name <span class="predefined-type">TEXT</span>,
  column_name <span class="predefined-type">TEXT</span>,
  extension_name <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  definition <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  scope <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  <span class="type">CONSTRAINT</span> ge_tce <span class="directive">UNIQUE</span> (table_name, column_name, extension_name)
);</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_sample_attributes_table_informative">C.9. sample_attributes_table (Informative)</h3>
<div id="example_attributes_table_sql" class="listingblock">
<div class="title">EXAMPLE: Attributes table Create Table SQL (Informative)</div>
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">CREATE</span> <span class="type">TABLE</span> sample_attributes (
  id <span class="predefined-type">INTEGER</span> <span class="directive">PRIMARY</span> <span class="type">KEY</span> AUTOINCREMENT <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  text_attribute <span class="predefined-type">TEXT</span>,
  real_attribute REAL,
  boolean_attribute <span class="predefined-type">BOOLEAN</span>,
  raster_or_photo <span class="predefined-type">BLOB</span>
)</code></pre>
</div>
</div>
<div id="example_attributes_table_insert_sql" class="listingblock">
<div class="title">EXAMPLE: attributes table Insert Statement (Informative)</div>
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">INSERT</span> <span class="class">INTO</span> sample_attributes(text_attribute, real_attribute, boolean_attribute, raster_or_photo) <span class="keyword">VALUES</span> (
  <span class="string"><span class="delimiter">&quot;</span><span class="content">place</span><span class="delimiter">&quot;</span></span>,
  <span class="integer">1</span>,
  <span class="predefined-constant">true</span>,
  <span class="string"><span class="delimiter">&quot;</span><span class="content">BLOB VALUE</span><span class="delimiter">&quot;</span></span>
)</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_trigger_definition_sql_informative"> Annex D: Trigger Definition SQL (Informative)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_gpkg_tile_matrix_2">D.1. gpkg_tile_matrix</h3>
<table class="tableblock frame-none grid-none" style="width:100%; ">
<caption class="title">Table 15. gpkg_tile_matrix Trigger Definition SQL</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>

<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_tile_matrix_zoom_level_insert</span><span class="delimiter">'</span></span>
<span class="keyword">BEFORE</span> <span class="class">INSERT</span> <span class="keyword">ON</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_tile_matrix</span><span class="delimiter">'</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">insert on table ''gpkg_tile_matrix'' violates constraint: zoom_level cannot be less than 0</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> (NEW.zoom_level &lt; <span class="integer">0</span>);
<span class="keyword">END</span>

<span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_tile_matrix_zoom_level_update</span><span class="delimiter">'</span></span>
<span class="keyword">BEFORE</span> <span class="class">UPDATE</span> <span class="keyword">of</span> zoom_level <span class="keyword">ON</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_tile_matrix</span><span class="delimiter">'</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">update on table ''gpkg_tile_matrix'' violates constraint: zoom_level cannot be less than 0</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> (NEW.zoom_level &lt; <span class="integer">0</span>);
<span class="keyword">END</span>

<span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_tile_matrix_matrix_width_insert</span><span class="delimiter">'</span></span>
<span class="keyword">BEFORE</span> <span class="class">INSERT</span> <span class="keyword">ON</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_tile_matrix</span><span class="delimiter">'</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">insert on table ''gpkg_tile_matrix'' violates constraint: matrix_width cannot be less than 1</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> (NEW.matrix_width &lt; <span class="integer">1</span>);
<span class="keyword">END</span>

<span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_tile_matrix_matrix_width_update</span><span class="delimiter">'</span></span>
<span class="keyword">BEFORE</span> <span class="class">UPDATE</span> <span class="keyword">OF</span> matrix_width <span class="keyword">ON</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_tile_matrix</span><span class="delimiter">'</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">update on table ''gpkg_tile_matrix'' violates constraint: matrix_width cannot be less than 1</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> (NEW.matrix_width &lt; <span class="integer">1</span>);
<span class="keyword">END</span>

<span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_tile_matrix_matrix_height_insert</span><span class="delimiter">'</span></span>
<span class="keyword">BEFORE</span> <span class="class">INSERT</span> <span class="keyword">ON</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_tile_matrix</span><span class="delimiter">'</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">insert on table ''gpkg_tile_matrix'' violates constraint: matrix_height cannot be less than 1</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> (NEW.matrix_height &lt; <span class="integer">1</span>);
<span class="keyword">END</span>

<span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_tile_matrix_matrix_height_update</span><span class="delimiter">'</span></span>
<span class="keyword">BEFORE</span> <span class="class">UPDATE</span> <span class="keyword">OF</span> matrix_height <span class="keyword">ON</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_tile_matrix</span><span class="delimiter">'</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">update on table ''gpkg_tile_matrix'' violates constraint: matrix_height cannot be less than 1</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> (NEW.matrix_height &lt; <span class="integer">1</span>);
<span class="keyword">END</span>

<span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_tile_matrix_pixel_x_size_insert</span><span class="delimiter">'</span></span>
<span class="keyword">BEFORE</span> <span class="class">INSERT</span> <span class="keyword">ON</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_tile_matrix</span><span class="delimiter">'</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">insert on table ''gpkg_tile_matrix'' violates constraint: pixel_x_size must be greater than 0</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> <span class="keyword">NOT</span> (NEW.pixel_x_size &gt; <span class="integer">0</span>);
<span class="keyword">END</span>

<span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_tile_matrix_pixel_x_size_update</span><span class="delimiter">'</span></span>
<span class="keyword">BEFORE</span> <span class="class">UPDATE</span> <span class="keyword">OF</span> pixel_x_size <span class="keyword">ON</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_tile_matrix</span><span class="delimiter">'</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">update on table ''gpkg_tile_matrix'' violates constraint: pixel_x_size must be greater than 0</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> <span class="keyword">NOT</span> (NEW.pixel_x_size &gt; <span class="integer">0</span>);
<span class="keyword">END</span>

<span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_tile_matrix_pixel_y_size_insert</span><span class="delimiter">'</span></span>
<span class="keyword">BEFORE</span> <span class="class">INSERT</span> <span class="keyword">ON</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_tile_matrix</span><span class="delimiter">'</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">insert on table ''gpkg_tile_matrix'' violates constraint: pixel_y_size must be greater than 0</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> <span class="keyword">NOT</span> (NEW.pixel_y_size &gt; <span class="integer">0</span>);
<span class="keyword">END</span>

<span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_tile_matrix_pixel_y_size_update</span><span class="delimiter">'</span></span>
<span class="keyword">BEFORE</span> <span class="class">UPDATE</span> <span class="keyword">OF</span> pixel_y_size <span class="keyword">ON</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_tile_matrix</span><span class="delimiter">'</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">update on table ''gpkg_tile_matrix'' violates constraint: pixel_y_size must be greater than 0</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> <span class="keyword">NOT</span> (NEW.pixel_y_size &gt; <span class="integer">0</span>);
<span class="keyword">END</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_sample_feature_table">D.2. sample_feature_table</h3>
<table class="tableblock frame-none grid-none" style="width:100%; ">
<caption class="title">Table 16. EXAMPLE: features table Trigger Definition SQL</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>

<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">sample_feature_table_real_insert</span><span class="delimiter">&quot;</span></span>
<span class="keyword">BEFORE</span> <span class="class">INSERT</span> <span class="keyword">ON</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">sample_feature_table</span><span class="delimiter">&quot;</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">insert on table ''sample_feature_table''
violates constraint: real_attribute must be greater than 0</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> <span class="keyword">NOT</span> (NEW.real_attribute &gt; <span class="integer">0</span>);
<span class="keyword">END</span>

<span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">sample_feature_table_real_update</span><span class="delimiter">&quot;</span></span>
<span class="keyword">BEFORE</span> <span class="class">UPDATE</span> <span class="keyword">OF</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">real_attribute</span><span class="delimiter">&quot;</span></span> <span class="keyword">ON</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">sample_feature_table</span><span class="delimiter">&quot;</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE (ABORT, <span class="string"><span class="delimiter">'</span><span class="content">update of ''real_attribute'' on table
''sample_feature_table'' violates constraint: real_attribute value
must be &gt; 0</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> <span class="keyword">NOT</span> (NEW.real_attribute &gt; <span class="integer">0</span>);
<span class="keyword">END</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>where &lt;t&gt; and &lt;c&gt; are replaced with the names of the feature table and geometry column being inserted or updated.</p>
</div>
</div>
<div class="sect2">
<h3 id="_sample_tile_pyramid">D.3. sample_tile_pyramid</h3>
<table class="tableblock frame-none grid-none" style="width:100%; ">
<caption class="title">Table 17. tiles table Trigger Definition SQL</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>

<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">sample_tile_pyramid_zoom_insert</span><span class="delimiter">&quot;</span></span>
<span class="keyword">BEFORE</span> <span class="class">INSERT</span> <span class="keyword">ON</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">sample_tile_pyramid</span><span class="delimiter">&quot;</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">insert on table ''sample_tile_pyramid'' violates constraint: zoom_level not specified for table in gpkg_tile_matrix</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> <span class="keyword">NOT</span> (NEW.zoom_level <span class="keyword">IN</span> (<span class="class">SELECT</span> zoom_level <span class="keyword">FROM</span> gpkg_tile_matrix <span class="keyword">WHERE</span> table_name = <span class="string"><span class="delimiter">'</span><span class="content">sample_tile_pyramid</span><span class="delimiter">'</span></span>)) ;
<span class="keyword">END</span>

<span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">sample_tile_pyramid_zoom_update</span><span class="delimiter">&quot;</span></span>
<span class="keyword">BEFORE</span> <span class="class">UPDATE</span> <span class="keyword">OF</span> zoom_level <span class="keyword">ON</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">sample_tile_pyramid</span><span class="delimiter">&quot;</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">update on table ''sample_tile_pyramid'' violates constraint: zoom_level not specified for table in gpkg_tile_matrix</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> <span class="keyword">NOT</span> (NEW.zoom_level <span class="keyword">IN</span> (<span class="class">SELECT</span> zoom_level <span class="keyword">FROM</span> gpkg_tile_matrix <span class="keyword">WHERE</span> table_name = <span class="string"><span class="delimiter">'</span><span class="content">sample_tile_pyramid</span><span class="delimiter">'</span></span>)) ;
<span class="keyword">END</span>

<span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">sample_tile_pyramid_tile_column_insert</span><span class="delimiter">&quot;</span></span>
<span class="keyword">BEFORE</span> <span class="class">INSERT</span> <span class="keyword">ON</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">sample_tile_pyramid</span><span class="delimiter">&quot;</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">insert on table ''sample_tile_pyramid'' violates constraint: tile_column cannot be &lt; 0</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> (NEW.tile_column &lt; <span class="integer">0</span>) ;
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">insert on table ''sample_tile_pyramid'' violates constraint: tile_column must by &lt; matrix_width specified for table and zoom level in gpkg_tile_matrix</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> <span class="keyword">NOT</span> (NEW.tile_column &lt; (<span class="class">SELECT</span> matrix_width <span class="keyword">FROM</span> gpkg_tile_matrix <span class="keyword">WHERE</span> table_name = <span class="string"><span class="delimiter">'</span><span class="content">sample_tile_pyramid</span><span class="delimiter">'</span></span> <span class="keyword">AND</span> zoom_level = NEW.zoom_level));
<span class="keyword">END</span>

<span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">sample_tile_pyramid_tile_column_update</span><span class="delimiter">&quot;</span></span>
<span class="keyword">BEFORE</span> <span class="class">UPDATE</span> <span class="keyword">OF</span> tile_column <span class="keyword">ON</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">sample_tile_pyramid</span><span class="delimiter">&quot;</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">update on table ''sample_tile_pyramid'' violates constraint: tile_column cannot be &lt; 0</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> (NEW.tile_column &lt; <span class="integer">0</span>) ;
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">update on table ''sample_tile_pyramid'' violates constraint: tile_column must by &lt; matrix_width specified for table and zoom level in gpkg_tile_matrix</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> <span class="keyword">NOT</span> (NEW.tile_column &lt; (<span class="class">SELECT</span> matrix_width <span class="keyword">FROM</span> gpkg_tile_matrix <span class="keyword">WHERE</span> table_name = <span class="string"><span class="delimiter">'</span><span class="content">sample_tile_pyramid</span><span class="delimiter">'</span></span> <span class="keyword">AND</span> zoom_level = NEW.zoom_level));
<span class="keyword">END</span>

<span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">sample_tile_pyramid_tile_row_insert</span><span class="delimiter">&quot;</span></span>
<span class="keyword">BEFORE</span> <span class="class">INSERT</span> <span class="keyword">ON</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">sample_tile_pyramid</span><span class="delimiter">&quot;</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">insert on table ''sample_tile_pyramid'' violates constraint: tile_row cannot be &lt; 0</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> (NEW.tile_row &lt; <span class="integer">0</span>) ;
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">insert on table ''sample_tile_pyramid'' violates constraint: tile_row must by &lt; matrix_height specified for table and zoom level in gpkg_tile_matrix</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> <span class="keyword">NOT</span> (NEW.tile_row &lt; (<span class="class">SELECT</span> matrix_height <span class="keyword">FROM</span> gpkg_tile_matrix <span class="keyword">WHERE</span> table_name = <span class="string"><span class="delimiter">'</span><span class="content">sample_tile_pyramid</span><span class="delimiter">'</span></span> <span class="keyword">AND</span> zoom_level = NEW.zoom_level));
<span class="keyword">END</span>

<span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">sample_tile_pyramid_tile_row_update</span><span class="delimiter">&quot;</span></span>
<span class="keyword">BEFORE</span> <span class="class">UPDATE</span> <span class="keyword">OF</span> tile_row <span class="keyword">ON</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">sample_tile_pyramid</span><span class="delimiter">&quot;</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">update on table ''sample_tile_pyramid'' violates constraint: tile_row cannot be &lt; 0</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> (NEW.tile_row &lt; <span class="integer">0</span>) ;
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">update on table ''sample_tile_pyramid'' violates constraint: tile_row must by &lt; matrix_height specified for table and zoom level in gpkg_tile_matrix</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> <span class="keyword">NOT</span> (NEW.tile_row &lt; (<span class="class">SELECT</span> matrix_height <span class="keyword">FROM</span> gpkg_tile_matrix <span class="keyword">WHERE</span> table_name = <span class="string"><span class="delimiter">'</span><span class="content">sample_tile_pyramid</span><span class="delimiter">'</span></span> <span class="keyword">AND</span> zoom_level = NEW.zoom_level));
<span class="keyword">END</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="extension_template"> Annex E: GeoPackage Extension Template (Informative)</h2>
<div class="sectionbody">
<h3 id="_extension_title" class="float">Extension Title</h3>
<div class="paragraph">
<p>Title of the Extension</p>
</div>
<h3 id="_introduction_4" class="float">Introduction</h3>
<div class="paragraph">
<p>Description of extension</p>
</div>
<h3 id="_extension_author" class="float">Extension Author</h3>
<div class="paragraph">
<p>Author of extension, author_name.</p>
</div>
<h3 id="_extension_name_or_template" class="float">Extension Name or Template</h3>
<div class="paragraph">
<p>Name of the extension or definition of the template to create the name of extensions that should be used in gpkg_extensions</p>
</div>
<h3 id="_extension_type" class="float">Extension Type</h3>
<div class="paragraph">
<p>"Extension of Existing Requirement in Clause(s) XXX" or "New Requirement Dependent on Clause(s) YYY"</p>
</div>
<h3 id="_applicability" class="float">Applicability</h3>
<div class="paragraph">
<p>Tables and/or columns on which this extension may be applied</p>
</div>
<h3 id="_scope" class="float">Scope</h3>
<div class="paragraph">
<p>Read-write or write-only with clarification if necessary</p>
</div>
<h3 id="_requirements" class="float">Requirements</h3>
<div class="paragraph">
<p>Definition of extension and interdependencies with other extensions if any.</p>
</div>
<h4 id="_geopackage" class="float">GeoPackage</h4>
<div class="paragraph">
<p>Definition of extension data or MIME type(s)</p>
</div>
<div class="paragraph">
<p>Definition of extension tables or table templates</p>
</div>
<div class="paragraph">
<p>Definition of triggers or trigger templates</p>
</div>
<h4 id="_geopackage_sqlite_configuration" class="float">GeoPackage SQLite Configuration</h4>
<div class="paragraph">
<p>Definition of SQLite configuration settings</p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting compile or runtime</th>
<th class="tableblock halign-left valign-top">Option</th>
<th class="tableblock halign-left valign-top">Shall / Not (Value)</th>
<th class="tableblock halign-left valign-top">Discussion</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>

<h4 id="_geopackage_sqlite_extension" class="float">GeoPackage SQLite Extension</h4>
<div class="paragraph">
<p>Definition of SQL functions</p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">SQL Function</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Use</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">foo(bar, baz) : datatype</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns r when w</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>

<h3 id="_abstract_test_suite" class="float">Abstract Test Suite</h3>
<div class="paragraph">
<p>All test cases required to verify conformance to this extension.</p>
</div>
<h3 id="_examples_informative" class="float">Examples (Informative)</h3>
<div class="paragraph">
<p>Any example or samples demonstrating the extension in use.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="registered_extensions"> Annex F: Registered Extensions (Normative)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This clause specifies requirements for GeoPackage extensions.
Definitions of those extensions are in the form specified by the template in <a href="#extension_template">GeoPackage Extension Template (Informative)</a>.</p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Extension Name</th>
<th class="tableblock halign-left valign-top">Content Type</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#extension_geometry_types">GeoPackage Non-Linear Geometry Types</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">features</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#extension_rtree">RTree Spatial Indexes</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">features</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#extension_zoom_other_intervals">Zoom Other Intervals</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tiles</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#extension_tiles_webp">Tiles Encoding WebP</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tiles</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#extension_metadata">Metadata</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">general</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#extension_schema">Schema</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">features</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#extension_crs_wkt">WKT for Coordinate Reference Systems</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">spatial reference systems</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#extension_tiled_gridded_coverage_data">Tiled Gridded Coverage Data</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">coverages</p></td>
</tr>
</tbody>
</table>

<div class="sect2">
<h3 id="extension_geometry_types">F.1. GeoPackage Non-Linear Geometry Types</h3>
<h4 id="_introduction_5" class="float">Introduction</h4>
<div class="paragraph">
<p>This extension of clause <a href="#sql_geometry_types">SQL Geometry Types</a> defines additional geometry types.</p>
</div>
<div class="paragraph">
<p>Clause 2.1.4 of the GeoPackage Version 1 Encoding Standard specifies support for the Geometry, Point, LineString, Polygon, MultiPoint, MultiLineString, MultiPolygon, and GeomCollection geometry types in the GeoPackageBinary geometry encoding format specified in clause 2.1.3.
This extension specifies support for the additional CircularString, CompoundCurve, CurvePolygon, MultiCurve, MultiSurface, Curve, and Surface geometry types in the GeoPackage Binary geometry encoding format using the codes from <a href="#geometry_types_extension">Geometry Type Codes (Extension)</a>.</p>
</div>
<h4 id="_extension_author_2" class="float">Extension Author</h4>
<div class="paragraph">
<p>GeoPackage SWG, author_name <code>gpkg</code></p>
</div>
<h4 id="_extension_name_or_template_2" class="float">Extension Name or Template</h4>
<div class="paragraph">
<p>Extension names are constructed from the gpkg_geom_&lt;gname&gt; template where &lt;gname&gt; is the uppercase name of the extension geometry type from <a href="#geometry_types_extension">Geometry Type Codes (Extension)</a>.</p>
</div>
<h4 id="_extension_type_2" class="float">Extension Type</h4>
<div class="paragraph">
<p>Extension of Existing Requirement in clause <a href="#sql_geometry_types">SQL Geometry Types</a></p>
</div>
<h4 id="_applicability_2" class="float">Applicability</h4>
<div class="paragraph">
<p>This extension applies to any column specified in the <code>gpkg_geometry_columns</code> table.</p>
</div>
<h4 id="_scope_2" class="float">Scope</h4>
<div class="paragraph">
<p>Read-write</p>
</div>
<h4 id="_requirements_2" class="float">Requirements</h4>
<h5 id="_geopackage_2" class="float">GeoPackage</h5>
<div id="r65" class="exampleblock">
<div class="title">Requirement 65</div>
<div class="content">
<div class="paragraph">
<p>(extends <a href="http://www.geopackage.org/spec/#r25">GPKG-25</a>) The <code>geometry_type_name</code> value in a <code>gpkg_geometry_columns</code> row MAY be one of the uppercase extended non-linear geometry type names specified in <a href="#geometry_types">Geometry Types (Normative)</a>.</p>
</div>
</div>
</div>
<div id="r66" class="exampleblock">
<div class="title">Requirement 66</div>
<div class="content">
<div class="paragraph">
<p>The GeoPackageBinary geometry encoding format specified in clause <a href="#gpb_format">Geometry Encoding</a> SHALL be used to encode non-linear geometry types using the type codes in <a href="#geometry_types">Geometry Types (Normative)</a> table <a href="#geometry_types_extension">Geometry Type Codes (Extension)</a>.</p>
</div>
</div>
</div>
<div id="r67" class="exampleblock">
<div class="title">Requirement 67</div>
<div class="content">
<div id="extension_geometry_types_extensions_name" class="paragraph">
<p>An extension name to specify a feature geometry extension type SHALL be defined for the "gpkg" author name using the "gpkg_geom_&lt;gname&gt;" template where &lt;gname&gt; is the uppercase name of the extension geometry type from <a href="#geometry_types">Geometry Types (Normative)</a> used in a GeoPackage.</p>
</div>
</div>
</div>
<div id="r68" class="exampleblock">
<div class="title">Requirement 68</div>
<div class="content">
<div class="paragraph">
<p>A GeoPackage that contains a <code>gpkg_geometry_columns</code> table or view with row records that specify extension <code>geometry_type_name</code> column values SHALL contain a <code>gpkg_extensions</code> table that contains row records with <code>table_name</code> and <code>column_name</code> values from the <code>gpkg_geometry_columns</code> row records that identify extension type uses, and <code>extension_name</code> column values for each of those geometry types constructed per the previous requirement <a href="#extension_geometry_types_extensions_name">[extension_geometry_types_extensions_name]</a>.</p>
</div>
</div>
</div>
<h5 id="_geopackage_sqlite_configuration_2" class="float">GeoPackage SQLite Configuration</h5>
<div class="paragraph">
<p>None</p>
</div>
<h5 id="_geopackage_sqlite_extension_2" class="float">GeoPackage SQLite Extension</h5>
<div id="r69" class="exampleblock">
<div class="title">Requirement 69</div>
<div class="content">
<div class="paragraph">
<p><span class="line-through">SQL functions that operate on GeoPackageBinary geometries as specified in other extensions SHALL operate correctly on the non-linear geometries specified in this extension</span>.</p>
</div>
</div>
</div>
<h4 id="_abstract_test_suite_2" class="float">Abstract Test Suite</h4>
<h5 id="_geopackage_extension_types" class="float">GeoPackage Extension Types</h5>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/extensions/geometry_types/data_values_geometry_type_name</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that only allowed geometry types (including extended non-linear geometry types) are in use.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>Run test /opt/features/geometry_columns/data/data_values_geometry_type_name, but the values in 3a may also include the values from Table 28 in Annex G.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Annex F.1 Req 65:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/extensions/geometry_types/all_types_test_data</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that geometries non-linear geometry types are stored in valid GeoPackageBinary format encodings.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name FROM gpkg_geometry_columns</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>SELECT table_name AS tn, column_name AS cn FROM gpkg_geometry_columns WHERE table_name IN (SELECT table_name FROM gpkg_contents WHERE data_type = <em>features</em>),</p>
</li>
<li>
<p>Fail if returns an empty result set</p>
</li>
<li>
<p>For each row from step 3</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>SELECT cn FROM tn;</p>
</li>
<li>
<p>For each row from step a, log fail if GeoPackageBinary "X" type flag is 1</p>
</li>
<li>
<p>For each row from step a, if bytes 2-5 of cn.wkb as uint32 in endianness of gc.wkb byte 1of cn from #1 are a geometry type value from Annex G Table 28, then</p>
</li>
<li>
<p>Log cn.header values, wkb endianness and geometry type
ii. If cn.wkb is not correctly encoded per ISO 13249-3 clause 5.1.46 then log fail
iii. If cn.flags.E is 1 - 4 and some cn.wkbx is outside of cn.envelope.minx,maxx then log fail
iv. If cn.flags.E is 1 - 4 and some gc.wkby is outside of cn.envelope.miny,maxy then log fail</p>
</li>
<li>
<p>If cn.flags.E is 2,4 and some gc.wkb.z is outside of cnenvelope.minz,maxz then log fail
vi. If cn.flags.E is 3,4 and some gc.wkb.m is outside of cn.envelope.minm,maxm then log fail
vii. If cn.flags.E is 5-7 then log fail
viii. Otherwise log pass</p>
</li>
</ol>
</div>
</li>
<li>
<p>Log pass if log contains pass and no fails</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Annex F.1 Req 66:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<h5 id="_extensions_name" class="float">Extensions Name</h5>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/extensions/geometry_types/extension_name</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that an extension name in the form gpkg_geom_&lt;gname&gt; is defined for each &lt;gname&gt; extension geometry type from Annex G used in a GeoPackage.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name, column_name FROM gpkg_geometry_columns WHERE table_name IN (SELECT table_name FROM gpkg_contents WHERE data_type  == <em>features</em>))</p>
</li>
<li>
<p>Not testable if result set is empty</p>
</li>
<li>
<p>For each row result set table_name, column_name from step 3</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>SELECT result_set_column_name FROM result_set_table_name</p>
</li>
<li>
<p>For each geometry column value from step a</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>If the first two bytes of each geometry column value are "GP", then</p>
<div class="olist upperalpha">
<ol class="upperalpha" type="A">
<li>
<p>/opt/extension_mechanism/extensions/data/table_def</p>
</li>
<li>
<p>Fail if failed</p>
</li>
<li>
<p>SELECT ST_GeometryType(geometry column value) AS &lt;gtype&gt;;</p>
</li>
<li>
<p>SELECT extension_name FROM gpkg_extensions WERE table_name = result_set_table_name AND column_name = result_set_column_name AND extension_name = 'gpkg_geom_' || &lt;gtype&gt;</p>
<div class="olist upperroman">
<ol class="upperroman" type="I">
<li>
<p>Fail if result set is empty</p>
</li>
<li>
<p>Log pass otherwise</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if logged pass and no fails</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Annex F.1 Req 67:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Basic</p>
</div></div></td>
</tr>
</tbody>
</table>

<h5 id="_extensions_row" class="float">Extensions Row</h5>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/extensions/geometry_types/extension_row</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the gpkg_extensions table contains a row with an extension_name in the form gpkg_geom_&lt;gname&gt; for each table_name and column_name in the gpkg_geometry_columns table with a &lt;gname&gt; geometry_type_name.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name, column_name, geometry_type_name FROM gpkg_geometry_columns</p>
</li>
<li>
<p>Not testable if no results</p>
</li>
<li>
<p>For each result</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>If geometry_type_name is an extended geometry type</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>SELECT extension_name FROM gpkg_extensions WHERE table_name = <em>{table_name}</em> AND column_name = '{column_name}"</p>
</li>
<li>
<p>Fail if result set does not contain a row with an extension_name of gpkg_geom_{geometry_type_name}</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if no fails</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Annex F.1 Req 68:</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

</div>
<div class="sect2">
<h3 id="extension_geometry_encoding">F.2. User Defined Geometry Types Extension of GeoPackageBinary Geometry Encoding</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>On August 15, 2016 the GeoPackage SWG voted to remove this extension from the standard due to interoperability concerns. For more information see the release notes. The original extension may be found in <a href="http://www.geopackage.org/spec110/#extension_geometry_encoding">http://www.geopackage.org/spec110/#extension_geometry_encoding</a>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="extension_rtree">F.3. RTree Spatial Indexes</h3>
<h4 id="_introduction_6" class="float">Introduction</h4>
<div class="paragraph">
<p>The RTree Spatial Indexes extension provides a means to encode an RTree index for geometry values in a GeoPackage. An RTree index provides a significant performance advantage for searches with basic envelope spatial criteria that return subsets of the rows in a feature table with a non-trivial number (thousands or more) of rows.<sup><a href="#K26">[K26]</a></sup></p>
</div>
<h4 id="_extension_author_3" class="float">Extension Author</h4>
<div class="paragraph">
<p>GeoPackage SWG, author_name <code>gpkg</code>.</p>
</div>
<h4 id="_extension_name_or_template_3" class="float">Extension Name or Template</h4>
<div class="paragraph">
<p><code>gpkg_rtree_index</code></p>
</div>
<h4 id="_extension_type_3" class="float">Extension Type</h4>
<div class="paragraph">
<p>New Requirement dependent on clauses <a href="#gpb_format">Geometry Encoding</a> and <a href="#extension_geometry_encoding">User Defined Geometry Types Extension of GeoPackageBinary Geometry Encoding</a>.</p>
</div>
<h4 id="_applicability_3" class="float">Applicability</h4>
<div class="paragraph">
<p>This extension applies to any column specified in the <code>gpkg_geometry_columns</code> table.</p>
</div>
<h4 id="_scope_3" class="float">Scope</h4>
<div class="paragraph">
<p>Write-only, because it does not change the result of reads, although it may improve their performance.</p>
</div>
<h4 id="_requirements_3" class="float">Requirements</h4>
<div class="paragraph">
<p>This extension uses the rtree implementation provided by the SQLite R*Tree Module extension documented at <a href="http://www.sqlite.org/rtree.html">http://www.sqlite.org/rtree.html</a>.</p>
</div>
<h5 id="_geopackage_3" class="float">GeoPackage</h5>
<div id="r75" class="exampleblock">
<div class="title">Requirement 75</div>
<div class="content">
<div class="paragraph">
<p>The "gpkg_rtree_index" extension name SHALL be used as a <code>gpkg_extensions</code> table <code>extension_name</code> column value to specify implementation of spatial indexes on a geometry column.</p>
</div>
</div>
</div>
<div id="r76" class="exampleblock">
<div class="title">Requirement 76</div>
<div class="content">
<div class="paragraph">
<p>A GeoPackage that implements spatial indexes SHALL have a <code>gpkg_extensions</code> table that contains a row for each spatially indexed column with <code>extension_name</code> "gpkg_rtree_index", the <code>table_name</code> of the table with a spatially indexed column, the <code>column_name</code> of the spatially indexed column, and a <code>scope</code> of "write-only".</p>
</div>
</div>
</div>
<div id="r77" class="exampleblock">
<div class="title">Requirement 77</div>
<div class="content">
<div class="paragraph">
<p>A GeoPackage SHALL implement spatial indexes on feature table geometry columns using the SQLite Virtual Table RTrees and triggers specified below.
The tables below contain SQL templates with variables.
Replace the following template variables with the specified values to create the required SQL statements:<br>
&lt;t&gt;: The name of the feature table containing the geometry column<br>
&lt;c&gt;: The name of the geometry column in &lt;t&gt; that is being indexed<br>
&lt;i&gt;: The name of the integer primary key column in &lt;t&gt; as specified in <a href="#r29">Requirement 29</a></p>
</div>
</div>
</div>
<h6 id="_create_virtual_table" class="float">Create Virtual Table</h6>
<div class="paragraph">
<p>RTree spatial indexes on geometry columns SHALL be created using the SQLite Virtual Table RTree extension.
An application that creates a spatial index SHALL create it using the following SQL statement template:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">CREATE</span> VIRTUAL <span class="type">TABLE</span> rtree_&lt;t&gt;_&lt;c&gt; <span class="keyword">USING</span> rtree(id, minx, maxx, miny, maxy)</code></pre>
</div>
</div>
<div class="paragraph">
<p>where &lt;t&gt; and &lt;c&gt; are replaced with the names of the feature table and geometry column being indexed.
The rtree function id parameter becomes the virtual table 64-bit signed integer primary key id column, and the min/max x/y parameters are min- and max-value pairs (stored as 32-bit floating point numbers) for each dimension that become the virtual table data columns that are populated to create the spatial rtree index.</p>
</div>
<h6 id="_load_spatial_index_values" class="float">Load Spatial Index Values</h6>
<div class="paragraph">
<p>The indexes provided by the SQLite Virtual Table RTree extension are not automatic indices.
This means the index data structure needs to be manually populated, updated and queried.
Each newly created spatial index SHALL be populated using the following SQL statement</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">INSERT</span> <span class="keyword">OR</span> <span class="class">REPLACE</span> <span class="class">INTO</span> rtree_&lt;t&gt;_&lt;c&gt;
  <span class="class">SELECT</span> &lt;i&gt;, st_minx(&lt;c&gt;), st_maxx(&lt;c&gt;), st_miny(&lt;c&gt;), st_maxy(&lt;c&gt;) <span class="keyword">FROM</span> &lt;t&gt;;</code></pre>
</div>
</div>
<div class="paragraph">
<p>where &lt;t&gt; and &lt;c&gt; are replaced with the names of the feature table and geometry column being indexed and &lt;i&gt; is replaced with the name of the feature table integer primary key column.</p>
</div>
<h6 id="_define_triggers_to_maintain_spatial_index_values" class="float">Define Triggers to Maintain Spatial Index Values</h6>
<div class="paragraph">
<p>For each spatial index in a GeoPackage, corresponding insert, update and delete triggers that update the spatial index SHALL be present on the indexed geometry column.
These spatial index triggers SHALL be defined as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="comment">/* Conditions: Insertion of non-empty geometry
   Actions   : Insert record into rtree */</span>
<span class="class">CREATE</span> <span class="type">TRIGGER</span> rtree_&lt;t&gt;_&lt;c&gt;_insert <span class="directive">AFTER</span> <span class="class">INSERT</span> <span class="keyword">ON</span> &lt;t&gt;
  <span class="keyword">WHEN</span> (new.&lt;c&gt; <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span> <span class="keyword">AND</span> <span class="keyword">NOT</span> ST_IsEmpty(NEW.&lt;c&gt;))
<span class="class">BEGIN</span>
  <span class="class">INSERT</span> <span class="keyword">OR</span> <span class="class">REPLACE</span> <span class="class">INTO</span> rtree_&lt;t&gt;_&lt;c&gt; <span class="keyword">VALUES</span> (
    NEW.&lt;i&gt;,
    ST_MinX(NEW.&lt;c&gt;), ST_MaxX(NEW.&lt;c&gt;),
    ST_MinY(NEW.&lt;c&gt;), ST_MaxY(NEW.&lt;c&gt;)
  );
<span class="keyword">END</span>;

<span class="comment">/* Conditions: Update of geometry column to non-empty geometry
               No row ID change
   Actions   : Update record in rtree */</span>
<span class="class">CREATE</span> <span class="type">TRIGGER</span> rtree_&lt;t&gt;_&lt;c&gt;_update1 <span class="directive">AFTER</span> <span class="class">UPDATE</span> <span class="keyword">OF</span> &lt;c&gt; <span class="keyword">ON</span> &lt;t&gt;
  <span class="keyword">WHEN</span> OLD.&lt;i&gt; = NEW.&lt;i&gt; <span class="keyword">AND</span>
       (NEW.&lt;c&gt; NOTNULL <span class="keyword">AND</span> <span class="keyword">NOT</span> ST_IsEmpty(NEW.&lt;c&gt;))
<span class="class">BEGIN</span>
  <span class="class">INSERT</span> <span class="keyword">OR</span> <span class="class">REPLACE</span> <span class="class">INTO</span> rtree_&lt;t&gt;_&lt;c&gt; <span class="keyword">VALUES</span> (
    NEW.&lt;i&gt;,
    ST_MinX(NEW.&lt;c&gt;), ST_MaxX(NEW.&lt;c&gt;),
    ST_MinY(NEW.&lt;c&gt;), ST_MaxY(NEW.&lt;c&gt;)
  );
<span class="keyword">END</span>;

<span class="comment">/* Conditions: Update of geometry column to empty geometry
               No row ID change
   Actions   : Remove record from rtree */</span>
<span class="class">CREATE</span> <span class="type">TRIGGER</span> rtree_&lt;t&gt;_&lt;c&gt;_update2 <span class="directive">AFTER</span> <span class="class">UPDATE</span> <span class="keyword">OF</span> &lt;c&gt; <span class="keyword">ON</span> &lt;t&gt;
  <span class="keyword">WHEN</span> OLD.&lt;i&gt; = NEW.&lt;i&gt; <span class="keyword">AND</span>
       (NEW.&lt;c&gt; ISNULL <span class="keyword">OR</span> ST_IsEmpty(NEW.&lt;c&gt;))
<span class="class">BEGIN</span>
  <span class="class">DELETE</span> <span class="keyword">FROM</span> rtree_&lt;t&gt;_&lt;c&gt; <span class="keyword">WHERE</span> id = OLD.&lt;i&gt;;
<span class="keyword">END</span>;

<span class="comment">/* Conditions: Update of any column
               Row ID change
               Non-empty geometry
   Actions   : Remove record from rtree for old &lt;i&gt;
               Insert record into rtree for new &lt;i&gt; */</span>
<span class="class">CREATE</span> <span class="type">TRIGGER</span> rtree_&lt;t&gt;_&lt;c&gt;_update3 <span class="directive">AFTER</span> <span class="class">UPDATE</span> <span class="keyword">ON</span> &lt;t&gt;
  <span class="keyword">WHEN</span> OLD.&lt;i&gt; != NEW.&lt;i&gt; <span class="keyword">AND</span>
       (NEW.&lt;c&gt; NOTNULL <span class="keyword">AND</span> <span class="keyword">NOT</span> ST_IsEmpty(NEW.&lt;c&gt;))
<span class="class">BEGIN</span>
  <span class="class">DELETE</span> <span class="keyword">FROM</span> rtree_&lt;t&gt;_&lt;c&gt; <span class="keyword">WHERE</span> id = OLD.&lt;i&gt;;
  <span class="class">INSERT</span> <span class="keyword">OR</span> <span class="class">REPLACE</span> <span class="class">INTO</span> rtree_&lt;t&gt;_&lt;c&gt; <span class="keyword">VALUES</span> (
    NEW.&lt;i&gt;,
    ST_MinX(NEW.&lt;c&gt;), ST_MaxX(NEW.&lt;c&gt;),
    ST_MinY(NEW.&lt;c&gt;), ST_MaxY(NEW.&lt;c&gt;)
  );
<span class="keyword">END</span>;

<span class="comment">/* Conditions: Update of any column
               Row ID change
               Empty geometry
   Actions   : Remove record from rtree for old and new &lt;i&gt; */</span>
<span class="class">CREATE</span> <span class="type">TRIGGER</span> rtree_&lt;t&gt;_&lt;c&gt;_update4 <span class="directive">AFTER</span> <span class="class">UPDATE</span> <span class="keyword">ON</span> &lt;t&gt;
  <span class="keyword">WHEN</span> OLD.&lt;i&gt; != NEW.&lt;i&gt; <span class="keyword">AND</span>
       (NEW.&lt;c&gt; ISNULL <span class="keyword">OR</span> ST_IsEmpty(NEW.&lt;c&gt;))
<span class="class">BEGIN</span>
  <span class="class">DELETE</span> <span class="keyword">FROM</span> rtree_&lt;t&gt;_&lt;c&gt; <span class="keyword">WHERE</span> id <span class="keyword">IN</span> (OLD.&lt;i&gt;, NEW.&lt;i&gt;);
<span class="keyword">END</span>;

<span class="comment">/* Conditions: Row deleted
   Actions   : Remove record from rtree for old &lt;i&gt; */</span>
<span class="class">CREATE</span> <span class="type">TRIGGER</span> rtree_&lt;t&gt;_&lt;c&gt;_delete <span class="directive">AFTER</span> <span class="class">DELETE</span> <span class="keyword">ON</span> &lt;t&gt;
  <span class="keyword">WHEN</span> old.&lt;c&gt; <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>
<span class="class">BEGIN</span>
  <span class="class">DELETE</span> <span class="keyword">FROM</span> rtree_&lt;t&gt;_&lt;c&gt; <span class="keyword">WHERE</span> id = OLD.&lt;i&gt;;
<span class="keyword">END</span>;</code></pre>
</div>
</div>
<div class="paragraph">
<p>where &lt;t&gt; and &lt;c&gt; are replaced with the names of the feature table and geometry column being indexed and &lt;i&gt; is replaced with the name of the feature table integer primary key column.</p>
</div>
<h5 id="_geopackage_sqlite_configuration_3" class="float">GeoPackage SQLite Configuration</h5>
<div class="paragraph">
<p>Definition of SQLite configuration settings</p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting compile or runtime</th>
<th class="tableblock halign-left valign-top">Option</th>
<th class="tableblock halign-left valign-top">Shall / Not (Value)</th>
<th class="tableblock halign-left valign-top">Discussion</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">compile</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SQLITE_ENABLE_RTREE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Shall</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RTrees ares used for GeoPackage Spatial Indexes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">compile</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SQLITE_RTREE_INT_ONLY</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Not</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RTrees with floating point values are used for GeoPackage spatial indexes</p></td>
</tr>
</tbody>
</table>

<h5 id="_geopackage_sqlite_extension_3" class="float">GeoPackage SQLite Extension</h5>
<div class="paragraph">
<p>Definition of SQL functions</p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">SQL Function</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Use</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST_IsEmpty(geom Geometry): integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns 1 if geometry value is empty, 0 if not empty, NULL if geometry value is NULL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Test if a geometry value corresponds to the empty set</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST_MinX(geom Geometry): real</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns the minimum X value of the bounding envelope of a geometry</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Update the spatial index on a geometry column in a feature table</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST_MaxX(geom Geometry): real</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns the maximum Y value of the bounding envelope of a geometry</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Update the spatial index on a geometry column in a feature table</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST_MinY(geom Geometry): real</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns the minimum X value of the bounding envelope of a geometry</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Update the spatial index on a geometry column in a feature table</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ST_MaxY(geom Geometry): real</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns the maximum Y value of the bounding envelope of a geometry</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Update the spatial index on a geometry column in a feature table</p></td>
</tr>
</tbody>
</table>

<div id="r78" class="exampleblock">
<div class="title">Requirement 78</div>
<div class="content">
<div class="paragraph">
<p><span class="line-through">The SQL functions on geometries in this SQLite Extension SHALL operate correctly on extended geometry types specified by <a href="#extension_geometry_encoding">User Defined Geometry Types Extension of GeoPackageBinary Geometry Encoding</a> and/or <a href="#extension_geometry_types">GeoPackage Non-Linear Geometry Types</a> when those extensions are also implemented.</span></p>
</div>
</div>
</div>
<h4 id="_abstract_test_suite_3" class="float">Abstract Test Suite</h4>
<h5 id="_extension_name" class="float">Extension Name</h5>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/extensions/rtree/extension_name</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that spatial index extensions are registered using the "gpkg_rtree_index" name in the gpkg_extensions table.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT COUNT(*) FROM gpkg_extensions WHERE extension_name = <em>gpkg_rtree_index</em>;</p>
</li>
<li>
<p>Extension not testable if count = 0</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Annex F.3 Req 75</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<h5 id="_extensions_row_2" class="float">Extensions Row</h5>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/extensions/rtree/extension_row</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the "gpkg_rtree_index" extension name is used to register spatial index extensions.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name, column_name, scope FROM gpkg_extensions WHERE extension_name = <em>gpkg_rtree_index</em></p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Not testable if result set is empty</p>
</li>
<li>
<p>Fail if any column_name is NULL</p>
</li>
<li>
<p>Fail if any scope is not <em>write-only</em></p>
</li>
<li>
<p>Fail if any column_name is not a column in table_name</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass otherwise</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Annex F.3 Req 76</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Basic</p>
</div></div></td>
</tr>
</tbody>
</table>

<h5 id="_implementation" class="float">Implementation</h5>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/reg_ext/features/spatial_indexes/implementation</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify the correct implementation of spatial indexes on feature table geometry columns.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name, column_name FROM gpkg_geometry_columns WHERE table_name IN (SELECT table_name FROM gpkg_extensions WHERE extension_name == <em>gpkg_rtree_index</em>)</p>
</li>
<li>
<p>Not testable if result set is empty</p>
</li>
<li>
<p>For each row table_name, column_name from step 1</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>SELECT sql FROM sqlite_master WHERE tbl_name = <em>rtree_</em> || result_set_table_name || <em>_</em> || result_set_column_name</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Fail if returned sql != <em>CREATE VIRTUAL TABLE "rtree_</em> || result_set_table_name || <em>_</em> || result_set_column_name ||<em>" USING rtree(id, minx, maxx, miny, maxy)</em></p>
</li>
</ol>
</div>
</li>
<li>
<p>SELECT sql FROM sqlite_master WHERE type = <em>trigger</em> AND name = <em>rtree_</em> || result_set_table_name || <em>_</em> || result_set_column_name || <em>_insert</em></p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Fail if returned sql != result of populating insert triggers template using result_set_table_name for &lt;t&gt; and result_set_column_name for &lt;c&gt;</p>
</li>
</ol>
</div>
</li>
<li>
<p>SELECT sql FROM sqlite_master WHERE type = <em>trigger</em> AND name LIKE <em>rtree_</em> || result_set_table_name || <em>_</em> || result_set_column_name || <em>_update%</em> ORDER BY name ASC</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Fail if returned sql != result of populating 4 update triggers templates using result_set_table_name for &lt;t&gt; and result_set_column_name for &lt;c&gt;</p>
</li>
</ol>
</div>
</li>
<li>
<p>SELECT sql FROM sqlite_master WHERE type=<em>trigger</em> AND name = <em>rtree_</em> || result_set_table_name || <em>_</em> || result_set_column_name || <em>_delete</em></p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Fail if returned sql != result of populating delete trigger template using result_set_table_name for &lt;t&gt; and result_set_column_name for &lt;c&gt;</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if no fails</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Annex F.3 Req 77</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/reg_ext/features/spatial_indexes/implementation/sql_functions</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify the correct implementation of sql functions used in spatial indexes on feature table geometry columns.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>Open Geometry Test Data Set GeoPackage with GeoPackage SQLite Extension</p>
</li>
<li>
<p>For each Geometry Test Data Set &lt;gtype_test&gt; data table row for each geometry type in Annex G, for an assortment of srs_ids, for an assortment of coordinate values including empty geometries, without and with z and / or m values, in both big and little endian encodings:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>SELECT <em>Fail</em> FROM &lt;gtype_test&gt; WHERE ST_IsEmpty(geom.) != empty</p>
</li>
<li>
<p>SELECT <em>Fail</em> FROM &lt;gtype_test&gt;  WHERE ST_MinX(geom) != minx</p>
</li>
<li>
<p>SELECT <em>Fail</em> FROM &lt;gtype_test&gt;  WHERE ST_MaxX(geom) != maxx</p>
</li>
<li>
<p>SELECT <em>Fail</em> FROM &lt;gtype_test&gt;  WHERE ST_MinY(geom) != miny</p>
</li>
<li>
<p>SELECT <em>Fail</em> FROM &lt;gtype_test&gt;  WHERE ST_MaxY(geom) != maxy</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if no <em>Fail</em> selected from step 2</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Annex F.3 Req 78</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

</div>
<div class="sect2">
<h3 id="extension_geometry_type_triggers">F.4. Geometry Type Triggers</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>On August 15, 2016 the GeoPackage SWG voted to remote this extension from the standard due to interoperability concerns. For more information see the release notes. The original extension may be found in <a href="http://www.geopackage.org/spec110/#extension_geometry_type_triggers">http://www.geopackage.org/spec110/#extension_geometry_type_triggers</a>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="extension_geometry_srsid_triggers">F.5. Geometry SRS ID Triggers</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>On August 15, 2016 the GeoPackage SWG voted to remote this extension from the standard due to interoperability concerns. For more information see the release notes. The original extension may be found in <a href="http://www.geopackage.org/spec110/#extension_geometry_srsid_triggers">http://www.geopackage.org/spec110/#extension_geometry_srsid_triggers</a>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="extension_zoom_other_intervals">F.6. Zoom Other Intervals</h3>
<h4 id="_introduction_7" class="float">Introduction</h4>
<div class="paragraph">
<p>This extension of clause <a href="#zoom_levels">Zoom Levels</a> allows zoom level intervals other than a factor of two.</p>
</div>
<div class="paragraph">
<p>In a GeoPackage, zoom levels are integers in sequence from 0 to n that identify tile matrix layers in a tile matrix set that contain tiles of decreasing spatial extent and finer spatial resolution.
Adjacent zoom levels immediately precede or follow each other and differ by a value of 1.
Pixel sizes are real numbers in the terrain units of the spatial reference system of a tile image specifying the dimensions of the real world area represented by one pixel.
Pixel sizes MAY vary by a constant factor or by different factors or intervals between some or all adjacent zoom levels in a tile matrix set.
In the commonly used "zoom times two" convention, pixel sizes vary by a factor of 2 between all adjacent zoom levels, as shown in the example in <a href="#tiles_factor2_example_appendix">[tiles_factor2_example_appendix]</a>.</p>
</div>
<div class="paragraph">
<p>This extension enables use of "zoom other intervals" conventions with different factors or irregular intervals with pixel sizes chosen for intuitive cartographic representation of raster data, or to coincide with the original pixel size of commonly used global image products.
See WMTS <a href="#16">[16]</a> Annex E for additional examples of both conventions.</p>
</div>
<h4 id="_extension_author_4" class="float">Extension Author</h4>
<div class="paragraph">
<p>GeoPackage SWG, author_name <code>gpkg</code></p>
</div>
<h4 id="_extension_name_or_template_4" class="float">Extension Name or Template</h4>
<div class="paragraph">
<p><code>gpkg_zoom_other</code></p>
</div>
<h4 id="_extension_type_4" class="float">Extension Type</h4>
<div class="paragraph">
<p>Extension of Existing Requirement in clause 2.2.3.</p>
</div>
<h4 id="_applicability_4" class="float">Applicability</h4>
<div class="paragraph">
<p>This extension applies to any table listed in the <code>gpkg_contents</code> table with a data_type of <code>tiles</code>.</p>
</div>
<h4 id="_scope_4" class="float">Scope</h4>
<div class="paragraph">
<p>Read-write</p>
</div>
<h4 id="_requirements_4" class="float">Requirements</h4>
<h5 id="_geopackage_4" class="float">GeoPackage</h5>
<div id="r87" class="exampleblock">
<div class="title">Requirement 87</div>
<div class="content">
<div class="paragraph">
<p>The "gpkg_zoom_other" extension name SHALL be used as a gpkg_extensions table extension name column value to specify implementation of other zoom intervals on a tile pyramid user data table as specified in <a href="#extension_zoom_other_intervals">Zoom Other Intervals</a>.</p>
</div>
</div>
</div>
<div id="r88" class="exampleblock">
<div class="title">Requirement 88</div>
<div class="content">
<div class="paragraph">
<p>A GeoPackage that implements other zoom intervals SHALL have a gpkg_extensions table that contains a row for each tile pyramid user data table with other zoom intervals with extension_name "gpkg_zoom_other", the table_name of the table with other zoom intervals, and the "tile_data" column_name.</p>
</div>
</div>
</div>
<div id="r89" class="exampleblock">
<div class="title">Requirement 89</div>
<div class="content">
<div class="paragraph">
<p>Tile pyramid user data tables MAY have pixel sizes that vary by irregular intervals or by regular intervals other than a factor of two (the default) between adjacent zoom levels. Extends <a href="#r35">Requirement 35</a>.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>The <code>pixel_x_size</code> and / or <code>pixel_y_size</code> column values in the <code>gpkg_tile_matrix</code> table vary by irregular intervals or by regular intervals other than a factor of two (the default) between adjacent zoom levels for a particular tile matrix set pyramid table.</p>
</div>
<h5 id="_geopackage_sqlite_configuration_4" class="float">GeoPackage SQLite Configuration</h5>
<div class="paragraph">
<p>None</p>
</div>
<h5 id="_geopackage_sqlite_extension_4" class="float">GeoPackage SQLite Extension</h5>
<div class="paragraph">
<p>None</p>
</div>
<h4 id="_abstract_test_suite_4" class="float">Abstract Test Suite</h4>
<h5 id="_extensions_name_2" class="float">Extensions Name</h5>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/reg_ext/tiles/zoom_levels/data/zoom_other_ext_name</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the "gpkg_zoom_other" extension name is used to register tiles tables with other than factors of two zoom intervals.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name FROM gpkg_contents WHERE data_type = 'tiles'</p>
</li>
<li>
<p>Not testable if empty result set</p>
</li>
<li>
<p>For each row table_name from step 1</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>SELECT zoom_level, pixel_x_size, pixel_y_size FROM gpkg_tile_matrix WHERE table_name = selected table name ORDER BY zoom_level ASC</p>
</li>
<li>
<p>Not testable if returns empty result set</p>
</li>
<li>
<p>Not testable if there are not two rows with adjacent zoom levels</p>
</li>
<li>
<p>Not testable if no pair of rows for adjacent zoom levels have pixel_x_size or pixel_y_size values that differ by other than factors of two</p>
</li>
<li>
<p>/opt/extension_mechanism/extensions/data/table_def</p>
</li>
<li>
<p>Fail if failed</p>
</li>
<li>
<p>SELECT * FROM gpkg_extensions WHERE table_name = selected table name AND extension_name = 'gpkg_zoom_other'</p>
</li>
<li>
<p>Fail if returns an empty result set</p>
</li>
<li>
<p>Log pass otherwise</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if logged pass and no fails</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Annex F.6 Req 87</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Basic</p>
</div></div></td>
</tr>
</tbody>
</table>

<h5 id="_extensions_row_3" class="float">Extensions Row</h5>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/reg_ext/tiles/zoom_levels/data/zoom_other_ext_row</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that tiles tables with other than factors of two zoom intervals are registered using the "gpkg_zoom_other" extension name.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>/reg_ext/tiles/zoom_levels/data/zoom_other_ext_name</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Annex F.6 Req 88</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type:</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<h5 id="_zoom_interval" class="float">Zoom Interval</h5>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/reg_ext/tiles/zoom_levels/data/zoom_intervals</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that zoom level pixel sizes for tile matrix user data tables vary by factors of 2 between adjacent zoom levels in the tile matrix metadata table only for tile matrix sets that this extension does not apply to.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>Override test <code>/opt/tiles/zoom_levels/data/zoom_times_two</code></p>
</li>
<li>
<p>SELECT table_name AS tn FROM gpkg_contents WHERE data_type = 'tiles'</p>
</li>
<li>
<p>For each row tn from step 2</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>WHEN (SELECT tbl_name FROM sqlite_master WHERE tbl_name = 'gpkg_extensions') = 'gpkg_extensions' THEN (SELECT table_name from gpkg_extensions WHERE extension_name = 'gpkg_zoom_other' AND table_name = 'tn')
END;</p>
</li>
<li>
<p>If returns empty result set, execute test <code>/opt/tiles/zoom_levels/data/zoom_times_two</code></p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if no fails</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Annex F.6 Req 89</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

</div>
<div class="sect2">
<h3 id="extension_tiles_webp">F.7. Tiles Encoding WebP</h3>
<h4 id="_introduction_8" class="float">Introduction</h4>
<div class="paragraph">
<p>This extension of clauses <a href="#tile_enc_png">Tile Encoding PNG</a> and <a href="#tile_enc_jpeg">Tile Encoding JPEG</a> allows encoding of tile images in WebP format.</p>
</div>
<div class="paragraph">
<p>PNG and JPEG are the default MIME types for encoding images in tile pyramid user data tables.
This extension allows the use of <code>image/x-webp</code> as an additional encoding type.</p>
</div>
<h4 id="_extension_author_5" class="float">Extension Author</h4>
<div class="paragraph">
<p>GeoPackage SWG, author_name <code>gpkg</code>.</p>
</div>
<h4 id="_extension_name_or_template_5" class="float">Extension Name or Template</h4>
<div class="paragraph">
<p><code>gpkg_webp</code></p>
</div>
<h4 id="_extension_type_5" class="float">Extension Type</h4>
<div class="paragraph">
<p>Extension of Existing Requirement in clauses <a href="#tile_enc_png">Tile Encoding PNG</a> and <a href="#tile_enc_jpeg">Tile Encoding JPEG</a>.</p>
</div>
<h4 id="_applicability_5" class="float">Applicability</h4>
<div class="paragraph">
<p>This extension applies to any table listed in the <code>gpkg_contents</code> table with a data_type of <code>tiles</code>.</p>
</div>
<h4 id="_scope_5" class="float">Scope</h4>
<div class="paragraph">
<p>Read-write</p>
</div>
<h4 id="_requirements_5" class="float">Requirements</h4>
<h5 id="_geopackage_5" class="float">GeoPackage</h5>
<div id="r90" class="exampleblock">
<div class="title">Requirement 90</div>
<div class="content">
<div class="paragraph">
<p>GeoPackages with one or more rows in the <code>gpkg_extensions</code> table with an <code>extension_name</code> of "gpkg_webp" SHALL comply with this extension.</p>
</div>
</div>
</div>
<div id="r91" class="exampleblock">
<div class="title">Requirement 91</div>
<div class="content">
<div class="paragraph">
<p>A GeoPackage that contains tile pyramid user data tables with <code>tile_data</code> columns that contain images in WebP format SHALL contain a <code>gpkg_extensions</code> table that contains row records with <code>table_name</code> values for each such table, <code>column_name</code> values of "tile_data", <code>extension_name</code> column values of "gpkg_webp", and <code>scope</code> column values of "read-write".</p>
</div>
</div>
</div>
<div id="r92" class="exampleblock">
<div class="title">Requirement 92</div>
<div class="content">
<div class="paragraph">
<p>(extends <a href="http://www.geopackage.org/spec/#r36">GPKG-36</a> and <a href="http://www.geopackage.org/spec/#r37">GPKG-37</a>) A GeoPackage that contains a tile pyramid user data table that contains tile data MAY store tile_data in the WebP format<a href="#22">[22]</a>. Files complying with the WebP format SHALL have the <a href="http://www.ietf.org/rfc/rfc2046.txt">MIME type</a> <code>image/x-webp</code>.</p>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="icon-note" title="Note"></i>
</td>
<td class="content">
Requirements 36 and 37 allow a tile pyramid user data table to contain PNG or JPG tiles. This requirement allows for WebP tiles as well.
</td>
</tr>
</table>
</div>
<h5 id="_geopackage_sqlite_configuration_5" class="float">GeoPackage SQLite Configuration</h5>
<div class="paragraph">
<p>None</p>
</div>
<h5 id="_geopackage_sqlite_extension_5" class="float">GeoPackage SQLite Extension</h5>
<div class="paragraph">
<p>None</p>
</div>
<h4 id="_abstract_test_suite_5" class="float">Abstract Test Suite</h4>
<h5 id="_extensions_name_3" class="float">Extensions Name</h5>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/extensions/tile_encoding_webp/data/webp_ext_name</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose:</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the "gpkg_webp" extensions name is used to register WEBP tile encoding implementations.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method:</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT COUNT(*) FROM gpkg_extensions WHERE extension_name = <em>gpkg_webp</em>;</p>
</li>
<li>
<p>Extension not in use if count is empty</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Annex F.7 Req 90</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Basic</p>
</div></div></td>
</tr>
</tbody>
</table>

<h5 id="_extensions_row_4" class="float">Extensions Row</h5>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/extensions/tile_encoding_webp/data/webp_ext_row</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose:</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that this extension is registered using proper rows in the <code>gpkg_extensions</code> table.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method:</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>/opt/extension_mechanism/data/data_values_table_name will test whether the <code>table_name</code> values are valid.</p>
</li>
<li>
<p>SELECT column_name, scope FROM gpkg_extensions where extension_name = <em>gpkg_webp</em>;</p>
</li>
<li>
<p>For each row table_name from step 1</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Fail if <code>column_name</code> is not "tile_data"</p>
</li>
<li>
<p>Fail if <code>scope</code> is not "read-write"</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if no fails</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference:</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Annex F.7 Req 91</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<h5 id="_extensions_mime_type" class="float">Extensions Mime Type</h5>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/extensions/tiles_encoding_webp/data/mime_type_webp</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that a tile matrix user data table that conforms to this extension contains a valid image type, including images of MIME type image/x-webp.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name FROM gpkg_extensions WHERE extension_name = <em>gpkg_webp</em></p>
</li>
<li>
<p>For each table_name from step 1</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Run test /opt/tiles/tiles_encoding/data/mime_type_jpeg step 2 but allow an extra MIME type (step 2c) of "image/x-webp"</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if no fails</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Annex F.7 Req 92</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

</div>
<div class="sect2">
<h3 id="extension_metadata">F.8. Metadata</h3>
<h4 id="_introduction_9" class="float">Introduction</h4>
<div class="paragraph">
<p>Two tables in a GeoPackage provide a means of storing metadata in MIME <a href="#21">[21]</a> encodings that are defined in accordance with any authoritative metadata specifications, and relating it to the features, rasters, and tiles data in a GeoPackage.
These tables are intended to provide the support necessary to implement the hierarchical metadata models as defined in ISO 19115 <a href="#28">[28]</a> and illustrated in <a href="#metadata_example_appendix">Hierarchical Metadata Example One - ISO19115.</a> and <a href="#raster_or_tile_metadata_example_appendix">Raster or Tile Metadata Example</a>. As GeoPackage data is captured and updated, the most local and specific detailed metadata changes associated with the new or modified data MAY be captured separately, and referenced to existing global and general metadata.</p>
</div>
<div class="paragraph">
<p>The <code>gpkg_metadata</code> table that contains metadata is described in clause <a href="#_metadata_table">Metadata Table</a>, and the <code>gpkg_metadata_reference</code> table that relates <code>gpkg_metadata</code> to GeoPackage data is described in clause <a href="#_metadata_reference_table">Metadata Reference Table</a>.
There is no GeoPackage requirement that such metadata be provided or that defined metadata be structured in a hierarchical fashion <sup><a href="#K27">[K27]</a></sup>. This extension simply provides a mechanism for storing this information. If this extension is used, such metadata <sup><a href="#K28">[K28]</a></sup> and data that relates it to GeoPackage contents should not be stored in other tables.</p>
</div>
<h4 id="_extension_author_6" class="float">Extension Author</h4>
<div class="paragraph">
<p>GeoPackage SWG, author_name <code>gpkg</code></p>
</div>
<h4 id="_extension_name_or_template_6" class="float">Extension Name or Template</h4>
<div class="paragraph">
<p><code>gpkg_metadata</code></p>
</div>
<h4 id="_extension_type_6" class="float">Extension Type</h4>
<div class="paragraph">
<p>New Requirement</p>
</div>
<h4 id="_applicability_6" class="float">Applicability</h4>
<div class="paragraph">
<p>This extension applies to any content in the GeoPackage.</p>
</div>
<h4 id="_scope_6" class="float">Scope</h4>
<div class="paragraph">
<p>Read-write</p>
</div>
<h4 id="_requirements_6" class="float">Requirements</h4>
<h5 id="_table_definitions" class="float">Table Definitions</h5>
<h6 id="metadata_table_table_definition" class="float">Metadata Table</h6>
<div id="r93" class="exampleblock">
<div class="title">Requirement 93</div>
<div class="content">
<div class="paragraph">
<p>A GeoPackage A GeoPackage MAY contain a table named <code>gpkg_metadata</code>. If present it SHALL be defined per clauses <a href="#metadata_table_table_definition">Metadata Table</a>, <a href="#gpkg_metadata_cols">Metadata Table Definition</a>, and <a href="#gpkg_metadata_sql">gpkg_metadata Table Definition SQL</a>.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>The first component of GeoPackage metadata is the <code>gpkg_metadata</code> table that MAY contain metadata in MIME <a href="#21">[21]</a> encodings structured in accordance with any authoritative metadata specification, such as ISO 19115 <a href="#28">[28]</a>, ISO 19115-2 <a href="#B6">[B6]</a>, ISO 19139 <a href="#B7">[B7]</a>, Dublin Core <a href="#B8">[B8]</a>, CSDGM <a href="#B10">[B10]</a>, DDMS <a href="#B12">[B12]</a>, NMF/NMIS <a href="#B13">[B13]</a>, etc.
The GeoPackage interpretation of what constitutes "metadata" is a broad one that includes UML models <a href="#B14">[B14]</a> encoded in XMI <a href="#B15">[B15]</a>, GML Application Schemas <a href="#30">[30]</a>, ISO 19110 feature catalogues <a href="#B18">[B18]</a>, OWL <a href="#B20">[B20]</a> and SKOS <a href="#B21">[B21]</a> taxonomies, etc.</p>
</div>
<table id="gpkg_metadata_cols" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 18. Metadata Table Definition</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Column Name</th>
<th class="tableblock halign-left valign-top">Column Type</th>
<th class="tableblock halign-left valign-top">Column Description</th>
<th class="tableblock halign-left valign-top">Null</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Key</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">INTEGER</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Metadata primary key</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>md_scope</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Case sensitive name of the data scope to which this metadata applies; see <a href="#metadata_scopes">Metadata Scopes</a> below</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>dataset</em></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>md_standard_uri</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URI <a href="#23">[23]</a> reference to the metadata structure definition authority <sup><a href="#K29">[K29]</a></sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">any</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mime_type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MIME <a href="#21">[21]</a> encoding of metadata</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>text/xml</em> <a href="#24">[24]</a></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>metadata</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">metadata</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">''</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p>The md_standard_uri data value provides an identifier for the metadata structure (schema) specified by its definition authority.
The structure (schema) information could be in whatever encoding is used by the definition authority, e.g. UML <a href="#B14">[B14]</a>, or IDEF1x <a href="#B16">[B16]</a>, or XML/Schema <a href="#25">[25]</a><a href="#26">[26]</a><a href="#27">[27]</a>, or RDF/S <a href="#B19">[B19]</a>.</p>
</div>
<div class="paragraph">
<p>See <a href="#gpkg_metadata_sql">gpkg_metadata Table Definition SQL</a>.</p>
</div>
<h6 id="metadata_reference_table_table_definition" class="float">Metadata Reference Table</h6>
<div id="r95" class="exampleblock">
<div class="title">Requirement 95</div>
<div class="content">
<div class="paragraph">
<p>A GeoPackage that contains a <code>gpkg_metadata</code> table SHALL contain a <code>gpkg_metadata_reference</code> table per clauses <a href="#metadata_reference_table_table_definition">Metadata Reference Table</a>, <a href="#gpkg_metadata_reference_cols">Metadata Reference Table Definition (Table Name: gpkg_metadata_reference)</a>, and <a href="#gpkg_metadata_reference_sql">gpkg_metadata_reference Table Definition SQL</a>.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>The second component of GeoPackage metadata is the <code>gpkg_metadata_reference</code> table that links metadata in the <code>gpkg_metadata</code> table to data in the feature, and tiles tables defined in clauses 2.1.6 and 2.2.7.
The <code>gpkg_metadata_reference</code> table is not required to contain any rows.</p>
</div>
<table id="gpkg_metadata_reference_cols" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 19. Metadata Reference Table Definition (Table Name: gpkg_metadata_reference)</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Column Name</th>
<th class="tableblock halign-left valign-top">Col Type</th>
<th class="tableblock halign-left valign-top">Column Description</th>
<th class="tableblock halign-left valign-top">Null</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Key</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>reference_scope</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Lowercase metadata reference scope; one of <em>geopackage</em>, <em>table</em>, <em>column</em>, <em>row</em>, <em>row/col</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>table_name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the table to which this metadata reference applies, or NULL for reference_scope of <em>geopackage</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>column_name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">For <code>reference_scope</code> of <em>column</em> or <em>row/col</em>, name of the column to which this metadata reference applies (NULL otherwise)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>row_id_value</code> <sup><a href="#K30">[K30]</a></sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">INTEGER</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">For <code>reference_scope</code> of <em>row</em> or <em>row/col</em>, the rowid of a row record in the table referenced by <code>table_name</code> (NULL otherwise)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>timestamp</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DATETIME</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Timestamp value in ISO 8601 format as defined by the strftime function '%Y-%m-%dT%H:%M:%fZ' format string applied to the current time</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">strftime('%Y-%m-%dT%H:%M:%fZ', 'now')</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>md_file_id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">INTEGER</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>gpkg_metadata</code> table id column value for the metadata to which this <code>gpkg_metadata_reference</code> applies</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">FK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>md_parent_id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">INTEGER</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>gpkg_metadata</code> table id column value for the hierarchical parent <code>gpkg_metadata</code> for the <code>gpkg_metadata</code> to which this <code>gpkg_metadata_reference</code> applies, or NULL if <code>md_file_id</code> forms the root of a metadata hierarchy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">FK</p></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p>Every row in <code>gpkg_metadata_reference</code> that has null value as <code>md_parent_id</code> forms the root of a metadata hierarchy.<sup><a href="#K31">[K31]</a></sup></p>
</div>
<div class="paragraph">
<p>See <a href="#table_definition_sql">Table Definition SQL (Normative)</a> clause <a href="#gpkg_metadata_reference_sql">gpkg_metadata_reference Table Definition SQL</a>.</p>
</div>
<h5 id="_table_data_values_6" class="float">Table Data Values</h5>
<h6 id="_gpkg_extensions_2" class="float">gpkg_extensions</h6>
<div id="r140" class="exampleblock">
<div class="title">Requirement 140</div>
<div class="content">
<div class="paragraph">
<p>GeoPackages with a row in the <code>gpkg_extensions</code> table with an <code>extension_name</code> of "gpkg_metadata" SHALL comply with this extension. The row SHALL have a <code>scope</code> of "read-write".</p>
</div>
</div>
</div>
<h6 id="_gpkg_metadata" class="float">gpkg_metadata</h6>
<div class="paragraph">
<p>The <code>md_scope</code> column in the <code>gpkg_metadata</code> table is the name of the applicable scope for the contents of the metadata column for a given row.
The list of valid scope names and their definitions is provided in <a href="#metadata_scopes">Metadata Scopes</a> below.
The initial contents of this table were obtained from the ISO 19115 <a href="#28">[28]</a>, Annex B B.5.25 MD_ScopeCode code list, which was extended <sup><a href="#K32">[K32]</a></sup> for use in the GeoPackage specification by addition of entries with "NA" as the scope code column in <a href="#gpkg_metadata_cols">Metadata Table Definition</a>.</p>
</div>
<table id="metadata_scopes" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 20. Metadata Scopes</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name (md_scope)</th>
<th class="tableblock halign-left valign-top">Scope Code</th>
<th class="tableblock halign-left valign-top">Definition</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">undefined</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NA</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Metadata information scope is undefined</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">fieldSession</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">012</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Information applies to the field session</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">collectionSession</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">004</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Information applies to the collection session</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">series</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">006</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Information applies to the (dataset) series <sup><a href="#K33">[K33]</a></sup></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">dataset</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">005</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Information applies to the (geographic feature) dataset</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">featureType</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">010</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Information applies to a feature type (class)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">feature</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">009</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Information applies to a feature (instance)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">attributeType</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">002</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Information applies to the attribute class</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">attribute</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">001</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Information applies to the characteristic of a feature (instance)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">tile</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">016</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Information applies to a tile, a spatial subset of geographic data</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">model</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">015</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Information applies to a copy or imitation of an existing or hypothetical object</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">catalog</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NA</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Metadata applies to a feature catalog <sup><a href="#K34">[K34]</a></sup></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">schema</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NA</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Metadata applies to an application schema <sup><a href="#K35">[K35]</a></sup></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">taxonomy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NA</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Metadata applies to a taxonomy or knowledge system <sup><a href="#K36">[K36]</a></sup></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">software</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">013</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Information applies to a computer program or routine</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">service</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">014</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Information applies to a capability which a service provider entity makes available to a service user entity through a set of interfaces that define a behavior, such as a use case</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">collectionHardware</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">003</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Information applies to the collection hardware class</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nonGeographicDataset</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">007</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Information applies to non-geographic data</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">dimensionGroup</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">008</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Information applies to a dimension group</p></td>
</tr>
</tbody>
</table>

<div id="r94" class="exampleblock">
<div class="title">Requirement 94</div>
<div class="content">
<div class="paragraph">
<p>Each <code>md_scope</code> column value in a <code>gpkg_metadata</code> table SHALL be one of the name column values from <a href="#metadata_scopes">Metadata Scopes</a>.</p>
</div>
</div>
</div>
<h6 id="_gpkg_metadata_reference" class="float">gpkg_metadata_reference</h6>
<div id="r96" class="exampleblock">
<div class="title">Requirement 96</div>
<div class="content">
<div class="paragraph">
<p>Every <code>gpkg_metadata_reference</code> table reference scope column value SHALL be one of <em>geopackage</em>, <em>table</em>, <em>column</em>, <em>row</em>, <em>row/col</em> in lowercase.</p>
</div>
</div>
</div>
<div id="r97" class="exampleblock">
<div class="title">Requirement 97</div>
<div class="content">
<div class="paragraph">
<p>Every <code>gpkg_metadata_reference</code> table row with a <code>reference_scope</code> column value of <em>geopackage</em> SHALL have a <code>table_name</code> column value that is NULL.
Every other <code>gpkg_metadata_reference</code> table row SHALL have a <code>table_name</code> column value that references a value in the <code>gpkg_contents</code> <code>table_name</code> column.</p>
</div>
</div>
</div>
<div id="r98" class="exampleblock">
<div class="title">Requirement 98</div>
<div class="content">
<div class="paragraph">
<p>Every <code>gpkg_metadata_reference</code> table row with a <code>reference_scope</code> column value of <em>geopackage</em>,<em>table</em> or <em>row</em> SHALL have a <code>column_name</code> column value that is NULL.
Every other <code>gpkg_metadata_reference</code> table row SHALL have a <code>column_name</code> column value that contains the name of a column in the SQLite table or view identified by the <code>table_name</code> column value.</p>
</div>
</div>
</div>
<div id="r99" class="exampleblock">
<div class="title">Requirement 99</div>
<div class="content">
<div class="paragraph">
<p>Every <code>gpkg_metadata_reference</code> table row with a <code>reference_scope</code> column value of <em>geopackage</em>, <em>table</em> or <em>column</em> SHALL have a <code>row_id_value</code> column value that is NULL.
Every other <code>gpkg_metadata_reference</code> table row SHALL have a <code>row_id_value</code> column value that contains the ROWID of a row in the SQLite table or view identified by the <code>table_name</code> column value.</p>
</div>
</div>
</div>
<div id="r100" class="exampleblock">
<div class="title">Requirement 100</div>
<div class="content">
<div class="paragraph">
<p>Every <code>gpkg_metadata_reference</code> table row timestamp column value SHALL be in ISO 8601 <a href="#29">[29]</a> format containing a complete date plus UTC hours, minutes, seconds and a decimal fraction of a second, with a <em>Z</em> (<em>zulu</em>) suffix indicating UTC.<sup><a href="#K37">[K37]</a></sup></p>
</div>
</div>
</div>
<div id="r101" class="exampleblock">
<div class="title">Requirement 101</div>
<div class="content">
<div class="paragraph">
<p>Every <code>gpkg_metadata_reference</code> table row <code>md_file_id</code> column value SHALL be an id column value from the <code>gpkg_metadata</code> table.</p>
</div>
</div>
</div>
<div id="r102" class="exampleblock">
<div class="title">Requirement 102</div>
<div class="content">
<div class="paragraph">
<p>Every <code>gpkg_metadata_reference</code> table row <code>md_parent_id</code> column value that is NOT NULL SHALL be an id column value from the <code>gpkg_metadata</code> table that is not equal to the <code>md_file_id</code> column value for that row.</p>
</div>
</div>
</div>
<h4 id="_abstract_test_suite_6" class="float">Abstract Test Suite</h4>
<h5 id="_table_definition_4" class="float">Table Definition</h5>
<h6 id="_metadata_table" class="float">Metadata Table</h6>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/extensions/metadata/metadata/table_def</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the gpkg_metadata table exists and has the correct definition.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>PRAGMA TABLE_INFO(gpkg_metadata)</p>
</li>
<li>
<p>Fail if returns an empty result set.</p>
</li>
<li>
<p>Pass if the column names, types, nullability, default values, and primary, foreign and unique key constraints match all of those in the contents of Table 18. Column order, check constraint and trigger definitions, and other column definitions in the returned sql are irrelevant.</p>
</li>
<li>
<p>Fail otherwise.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Annex F.8 Req 93</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Basic</p>
</div></div></td>
</tr>
</tbody>
</table>

<h6 id="_metadata_reference_table" class="float">Metadata Reference Table</h6>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/extensions/metadata/metadata_reference/table_def</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the gpkg_metadata_reference table exists and has the correct definition.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT sql FROM sqlite_master WHERE type = <em>table</em> AND tbl_name = <em>gpkg_metadata_reference</em></p>
</li>
<li>
<p>Fail if returns an empty result set.</p>
</li>
<li>
<p>Pass if the column names and column definitions in the returned Create TABLE statement in the sql column value, including data type, nullability, default values and primary, foreign and unique key constraints match all of those in the contents of Table 33.  Column order, check constraint and trigger definitions, and other column definitions in the returned sql are irrelevant.</p>
</li>
<li>
<p>Fail otherwise.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Annex F.8 Req 95</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Basic</p>
</div></div></td>
</tr>
</tbody>
</table>

<h5 id="_table_data_values_7" class="float">Table Data Values</h5>
<h6 id="_gpkg_extensions_3" class="float">gpkg_extensions</h6>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/extensions/metadata/extensions/data_values_scope</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the gpkg_extensions table has the required row.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT scope FROM gpkg_extensions WHERE extension_name = <em>gpkg_metadata</em>;</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>For each row returned from step 1</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Fail if scope is not "read-write".</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if no fails</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Annex F.8 Req 140</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type:</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capabilities</p>
</div></div></td>
</tr>
</tbody>
</table>

<h6 id="_gpkg_metadata_2" class="float">gpkg_metadata</h6>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/extensions/metadata/metadata/data_values_md_scope</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that each of the md_scope column values in a gpkg_metadata table is one of the name column values from <a href="#metadata_scopes">[metadata_scopes]</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT md_scope FROM gpkg_metadata</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>For each row returned from step 1</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Fail if md_scope value not one of the name column values from <a href="#metadata_scopes">[metadata_scopes]</a>.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if no fails</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Annex F.8 Req 94</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type:</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capabilities</p>
</div></div></td>
</tr>
</tbody>
</table>

<h6 id="_gpkg_metadata_reference_2" class="float">gpkg_metadata_reference</h6>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/extensions/metadata/metadata_reference/reference_scope</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that gpkg_metadata_reference table reference_scope column values are valid.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT reference_scope FROM gpkg_metadata_reference</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>SELECT reference_scope FROM gpkg_metadata_reference WHERE reference_scope NOT IN (<em>geopackage</em>,<em>table</em>,<em>column</em>,<em>row</em>,<em>row/col</em>)</p>
</li>
<li>
<p>Fail if does not return an empty result set</p>
</li>
<li>
<p>Pass otherwise.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Annex F.8 Req 96</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/extensions/metadata/metadata_reference/table_name</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that gpkg_metadata_reference table_name column values are NULL for rows with reference_scope values of <em>geopackage</em>, and reference gpkg_contents table_name values for all other reference_scope values.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name FROM gpkg_metadata_reference</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>SELECT table_name FROM gpkg_metadata_reference WHERE reference_scope = 'geopackage'</p>
</li>
<li>
<p>Fail if result set contains any non-NULL values</p>
</li>
<li>
<p>SELECT table_name FROM metadata_reference WHERE reference_scope != 'geopackage' AND table_name NOT IN (SELECT table_name FROM gpkg_contents)</p>
</li>
<li>
<p>Fail if result set is not empty</p>
</li>
<li>
<p>Pass otherwise.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Annex F.8 Req 97</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/extensions/metadata/metadata_reference/column_name</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that gpkg_metadata_reference column_name column values are NULL for rows with reference scope values of <em>geopackage</em>, <em>table</em>, or <em>row</em>, and contain the name of a column in table_name table for other reference scope values.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT column_name FROM gpkg_metadata_reference</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>SELECT column_name FROM gpkg_metadata_reference WHERE reference_scope IN (<em>geopackage</em>, <em>table</em>, <em>row</em>)</p>
</li>
<li>
<p>Fail if result set contains any non-NULL values</p>
</li>
<li>
<p>SELECT &lt;table_name&gt;, &lt;column_name&gt; FROM metadata_reference WHERE reference_scope NOT IN (<em>geopackage</em>, <em>table</em>, <em>row</em>)</p>
</li>
<li>
<p>For each row from step 5</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>SELECT sql FROM sqlite_master WHERE type = 'table' AND tbl_name = '&lt;table_name&gt;'</p>
</li>
<li>
<p>Fail if returns an empty result set.</p>
</li>
<li>
<p>Fail if the one of the column names in the returned sql Create TABLE statement is not  &lt;column_name&gt;</p>
</li>
<li>
<p>Log pass otherwise</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if logged pass and no fails.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Annex F.8 Req 98</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/extensions/metadata/metadata_reference/row_id_value</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that gpkg_metadata_reference row_id_value column values are NULL for rows with reference scope values of <em>geopackage</em>, <em>table</em>, or <em>row</em>, and contain the ROWID of a row in the table_name for other reference scope values.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT row_id_value FROM gpkg_metadata_reference</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>SELECT row_id_value FROM gpkg_metadata_reference WHERE reference_scope IN (<em>geopackage</em>, <em>table</em>, <em>row</em>)</p>
</li>
<li>
<p>Fail if result set contains any non-NULL values</p>
</li>
<li>
<p>For each SELECT &lt;table_name&gt;, &lt;row_id_value&gt; FROM gpkg_metadata_reference WHERE reference_scope NOT IN (<em>geopackage</em>, <em>table</em>, <em>row</em>)</p>
</li>
<li>
<p>For each row from step 5</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>SELECT * FROM &lt;table_name&gt; WHERE ROWID = &lt;row_id_value&gt;</p>
</li>
<li>
<p>Fail if result set is empty</p>
</li>
<li>
<p>Log pass otherwise</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if logged pass and no fails.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Annex F.8 Req 99</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/extensions/metadata/metadata_reference/timestamp</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that every gpkg_metadata_reference table row timestamp column value is in ISO 8601 UTC format.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT timestamp from gpkg_metadata_reference.</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>For each row from step 1</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Fail if format of returned value does not match yyyy-mm-ddThh:mm:ss.hhhZ</p>
</li>
<li>
<p>Log pass otherwise</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if logged pass and no fails.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Annex F.8 Req 100</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/extensions/metadata/metadata_reference/md_file_id</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that every gpkg_metadata_reference table row md_file_id column value references a gpkg_metadata id column value.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>PRAGMA foreign_key_check(<em>geometry_columns</em>)</p>
</li>
<li>
<p>Fail if returns any rows with a fourth column foreign key index value of 0</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Annex F.8 Req 101</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/extensions/metadata/metadata_reference/md_parent_id</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that every gpkg_metadata_reference table row md_parent_id column value that is not null is an id column value from the gpkg_metadata_table that is not equal to the md_file_id column value for that row.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT md_file_id FROM gpkg_metadata_reference</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>SELECT gmr.md_file_id, gmr.md_parent_id FROM gpkg_metadata_reference AS gmr WHERE gmr.md_file_id == gmr.md_parent_id</p>
</li>
<li>
<p>Fail if result set is not empty</p>
</li>
<li>
<p>SELECT gmr.md_file_id, gmr.md_parent_id, gm.id FROM gpkg_metadata_reference  AS gmr LEFT OUTER JOIN gpkg_metadata gm ON gmr.md_parent_id =gm.id</p>
</li>
<li>
<p>Fail if any result set gm.id values are NULL</p>
</li>
<li>
<p>Pass otherwise</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Annex F.8 Req 102</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<h4 id="_table_definition_sql" class="float">Table Definition SQL</h4>
<h5 id="_gpkg_metadata_3" class="float">gpkg_metadata</h5>
<div id="gpkg_metadata_sql" class="listingblock">
<div class="title">gpkg_metadata Table Definition SQL</div>
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">CREATE</span> <span class="type">TABLE</span> gpkg_metadata (
  id <span class="predefined-type">INTEGER</span> <span class="type">CONSTRAINT</span> m_pk <span class="directive">PRIMARY</span> <span class="type">KEY</span> <span class="directive">ASC</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  md_scope <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span> <span class="directive">DEFAULT</span> <span class="string"><span class="delimiter">'</span><span class="content">dataset</span><span class="delimiter">'</span></span>,
  md_standard_uri <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  mime_type <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span> <span class="directive">DEFAULT</span> <span class="string"><span class="delimiter">'</span><span class="content">text/xml</span><span class="delimiter">'</span></span>,
  metadata <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span> <span class="directive">DEFAULT</span> <span class="string"><span class="delimiter">'</span><span class="delimiter">'</span></span>
);</code></pre>
</div>
</div>
<h5 id="_gpkg_metadata_reference_3" class="float">gpkg_metadata_reference</h5>
<div id="gpkg_metadata_reference_sql" class="listingblock">
<div class="title">gpkg_metadata_reference Table Definition SQL</div>
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">CREATE</span> <span class="type">TABLE</span> gpkg_metadata_reference (
  reference_scope <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  table_name <span class="predefined-type">TEXT</span>,
  column_name <span class="predefined-type">TEXT</span>,
  row_id_value <span class="predefined-type">INTEGER</span>,
  <span class="predefined-type">timestamp</span> <span class="predefined-type">DATETIME</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span> <span class="directive">DEFAULT</span> (strftime(<span class="string"><span class="delimiter">'</span><span class="content">%Y-%m-%dT%H:%M:%fZ</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">now</span><span class="delimiter">'</span></span>)),
  md_file_id <span class="predefined-type">INTEGER</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  md_parent_id <span class="predefined-type">INTEGER</span>,
  <span class="type">CONSTRAINT</span> crmr_mfi_fk <span class="directive">FOREIGN</span> <span class="type">KEY</span> (md_file_id) <span class="keyword">REFERENCES</span> gpkg_metadata(id),
  <span class="type">CONSTRAINT</span> crmr_mpi_fk <span class="directive">FOREIGN</span> <span class="type">KEY</span> (md_parent_id) <span class="keyword">REFERENCES</span> gpkg_metadata(id)
);</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example: gpkg_metadata_reference SQL insert statement (Informative)</div>
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">INSERT</span> <span class="class">INTO</span> gpkg_metadata_reference <span class="keyword">VALUES</span> (
  <span class="string"><span class="delimiter">'</span><span class="content">table</span><span class="delimiter">'</span></span>,
  <span class="string"><span class="delimiter">'</span><span class="content">sample_rasters</span><span class="delimiter">'</span></span>,
  <span class="predefined-constant">NULL</span>,
  <span class="predefined-constant">NULL</span>,
  <span class="string"><span class="delimiter">'</span><span class="content">2012-08-17T14:49:32.932Z</span><span class="delimiter">'</span></span>,
  <span class="integer">98</span>,
  <span class="integer">99</span>
)</code></pre>
</div>
</div>
<h4 id="_trigger_definition_sql_informative_2" class="float">Trigger Definition SQL (Informative)</h4>
<h5 id="_metadata" class="float">metadata</h5>
<div class="listingblock">
<div class="title">metadata Trigger Definition SQL</div>
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_metadata_md_scope_insert</span><span class="delimiter">'</span></span>
<span class="keyword">BEFORE</span> <span class="class">INSERT</span> <span class="keyword">ON</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_metadata</span><span class="delimiter">'</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">insert on table gpkg_metadata violates
constraint: md_scope must be one of undefined | fieldSession |
collectionSession | series | dataset | featureType | feature |
attributeType | attribute | tile | model | catalog | schema |
taxonomy software | service | collectionHardware |
nonGeographicDataset | dimensionGroup</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> <span class="keyword">NOT</span>(NEW.md_scope <span class="keyword">IN</span>
(<span class="string"><span class="delimiter">'</span><span class="content">undefined</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">fieldSession</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">collectionSession</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">series</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">dataset</span><span class="delimiter">'</span></span>,
<span class="string"><span class="delimiter">'</span><span class="content">featureType</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">feature</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">attributeType</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">attribute</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">tile</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">model</span><span class="delimiter">'</span></span>,
<span class="string"><span class="delimiter">'</span><span class="content">catalog</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">schema</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">taxonomy</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">software</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">service</span><span class="delimiter">'</span></span>,
<span class="string"><span class="delimiter">'</span><span class="content">collectionHardware</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">nonGeographicDataset</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">dimensionGroup</span><span class="delimiter">'</span></span>));
<span class="keyword">END</span>

<span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_metadata_md_scope_update</span><span class="delimiter">'</span></span>
<span class="keyword">BEFORE</span> <span class="class">UPDATE</span> <span class="keyword">OF</span> <span class="string"><span class="delimiter">'</span><span class="content">md_scope</span><span class="delimiter">'</span></span> <span class="keyword">ON</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_metadata</span><span class="delimiter">'</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">update on table gpkg_metadata violates
constraint: md_scope must be one of undefined | fieldSession |
collectionSession | series | dataset | featureType | feature |
attributeType | attribute | tile | model | catalog | schema |
taxonomy software | service | collectionHardware |
nonGeographicDataset | dimensionGroup</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> <span class="keyword">NOT</span>(NEW.md_scope <span class="keyword">IN</span>
(<span class="string"><span class="delimiter">'</span><span class="content">undefined</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">fieldSession</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">collectionSession</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">series</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">dataset</span><span class="delimiter">'</span></span>,
<span class="string"><span class="delimiter">'</span><span class="content">featureType</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">feature</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">attributeType</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">attribute</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">tile</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">model</span><span class="delimiter">'</span></span>,
<span class="string"><span class="delimiter">'</span><span class="content">catalog</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">schema</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">taxonomy</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">software</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">service</span><span class="delimiter">'</span></span>,
<span class="string"><span class="delimiter">'</span><span class="content">collectionHardware</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">nonGeographicDataset</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">dimensionGroup</span><span class="delimiter">'</span></span>));
<span class="keyword">END</span></code></pre>
</div>
</div>
<h5 id="_metadata_reference" class="float">metadata_reference</h5>
<div class="listingblock">
<div class="title">gpkg_metadata_reference Trigger Definition SQL</div>
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_metadata_reference_reference_scope_insert</span><span class="delimiter">'</span></span>
<span class="keyword">BEFORE</span> <span class="class">INSERT</span> <span class="keyword">ON</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_metadata_reference</span><span class="delimiter">'</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">insert on table gpkg_metadata_reference
violates constraint: reference_scope must be one of &quot;geopackage&quot;,
table&quot;, &quot;column&quot;, &quot;row&quot;, &quot;row/col&quot;</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> <span class="keyword">NOT</span> NEW.reference_scope <span class="keyword">IN</span>
(<span class="string"><span class="delimiter">'</span><span class="content">geopackage</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">table</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">column</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">row</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">row/col</span><span class="delimiter">'</span></span>);
<span class="keyword">END</span>

<span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_metadata_reference_reference_scope_update</span><span class="delimiter">'</span></span>
<span class="keyword">BEFORE</span> <span class="class">UPDATE</span> <span class="keyword">OF</span> <span class="string"><span class="delimiter">'</span><span class="content">reference_scope</span><span class="delimiter">'</span></span> <span class="keyword">ON</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_metadata_reference</span><span class="delimiter">'</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">update on table gpkg_metadata_reference
violates constraint: referrence_scope must be one of &quot;geopackage&quot;,
&quot;table&quot;, &quot;column&quot;, &quot;row&quot;, &quot;row/col&quot;</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> <span class="keyword">NOT</span> NEW.reference_scope <span class="keyword">IN</span>
(<span class="string"><span class="delimiter">'</span><span class="content">geopackage</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">table</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">column</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">row</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">row/col</span><span class="delimiter">'</span></span>);
<span class="keyword">END</span>

<span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_metadata_reference_column_name_insert</span><span class="delimiter">'</span></span>
<span class="keyword">BEFORE</span> <span class="class">INSERT</span> <span class="keyword">ON</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_metadata_reference</span><span class="delimiter">'</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">insert on table gpkg_metadata_reference
violates constraint: column name must be NULL when reference_scope
is &quot;geopackage&quot;, &quot;table&quot; or &quot;row&quot;</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> (NEW.reference_scope <span class="keyword">IN</span> (<span class="string"><span class="delimiter">'</span><span class="content">geopackage</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">table</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">row</span><span class="delimiter">'</span></span>)
<span class="keyword">AND</span> NEW.column_name <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>);
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">insert on table gpkg_metadata_reference
violates constraint: column name must be defined for the specified
table when reference_scope is &quot;column&quot; or &quot;row/col&quot;</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> (NEW.reference_scope <span class="keyword">IN</span> (<span class="string"><span class="delimiter">'</span><span class="content">column</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">row/col</span><span class="delimiter">'</span></span>)
<span class="keyword">AND</span> <span class="keyword">NOT</span> NEW.table_name <span class="keyword">IN</span> (
<span class="class">SELECT</span> name <span class="keyword">FROM</span> SQLITE_MASTER <span class="keyword">WHERE</span> type = <span class="string"><span class="delimiter">'</span><span class="content">table</span><span class="delimiter">'</span></span>
<span class="keyword">AND</span> name = NEW.table_name
<span class="keyword">AND</span> sql <span class="keyword">LIKE</span> (<span class="string"><span class="delimiter">'</span><span class="content">%</span><span class="delimiter">'</span></span> || NEW.column_name || <span class="string"><span class="delimiter">'</span><span class="content">%</span><span class="delimiter">'</span></span>)));
<span class="keyword">END</span>

<span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_metadata_reference_column_name_update</span><span class="delimiter">'</span></span>
<span class="keyword">BEFORE</span> <span class="class">UPDATE</span> <span class="keyword">OF</span> column_name <span class="keyword">ON</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_metadata_reference</span><span class="delimiter">'</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">update on table gpkg_metadata_reference
violates constraint: column name must be NULL when reference_scope
is &quot;geopackage&quot;, &quot;table&quot; or &quot;row&quot;</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> (NEW.reference_scope <span class="keyword">IN</span> (<span class="string"><span class="delimiter">'</span><span class="content">geopackage</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">table</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">row</span><span class="delimiter">'</span></span>)
<span class="keyword">AND</span> NEW.column_nameIS <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>);
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">update on table gpkg_metadata_reference
violates constraint: column name must be defined for the specified
table when reference_scope is &quot;column&quot; or &quot;row/col&quot;</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> (NEW.reference_scope <span class="keyword">IN</span> (<span class="string"><span class="delimiter">'</span><span class="content">column</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">row/col</span><span class="delimiter">'</span></span>)
<span class="keyword">AND</span> <span class="keyword">NOT</span> NEW.table_name <span class="keyword">IN</span> (
<span class="class">SELECT</span> name <span class="keyword">FROM</span> SQLITE_MASTER <span class="keyword">WHERE</span> type = <span class="string"><span class="delimiter">'</span><span class="content">table</span><span class="delimiter">'</span></span>
<span class="keyword">AND</span> name = NEW.table_name
<span class="keyword">AND</span> sql <span class="keyword">LIKE</span> (<span class="string"><span class="delimiter">'</span><span class="content">%</span><span class="delimiter">'</span></span> || NEW.column_name || <span class="string"><span class="delimiter">'</span><span class="content">%</span><span class="delimiter">'</span></span>)));
<span class="keyword">END</span>

<span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_metadata_reference_row_id_value_insert</span><span class="delimiter">'</span></span>
<span class="keyword">BEFORE</span> <span class="class">INSERT</span> <span class="keyword">ON</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_metadata_reference</span><span class="delimiter">'</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">insert on table gpkg_metadata_reference
violates constraint: row_id_value must be NULL when reference_scope
is &quot;geopackage&quot;, &quot;table&quot; or &quot;column&quot;</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> NEW.reference_scope <span class="keyword">IN</span> (<span class="string"><span class="delimiter">'</span><span class="content">geopackage</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">table</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">column</span><span class="delimiter">'</span></span>)
<span class="keyword">AND</span> NEW.row_id_value <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>;
<span class="keyword">END</span>

<span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_metadata_reference_row_id_value_update</span><span class="delimiter">'</span></span>
<span class="keyword">BEFORE</span> <span class="class">UPDATE</span> <span class="keyword">OF</span> <span class="string"><span class="delimiter">'</span><span class="content">row_id_value</span><span class="delimiter">'</span></span> <span class="keyword">ON</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_metadata_reference</span><span class="delimiter">'</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">update on table gpkg_metadata_reference
violates constraint: row_id_value must be NULL when reference_scope
is &quot;geopackage&quot;, &quot;table&quot; or &quot;column&quot;</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> NEW.reference_scope <span class="keyword">IN</span> (<span class="string"><span class="delimiter">'</span><span class="content">geopackage</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">table</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">column</span><span class="delimiter">'</span></span>)
<span class="keyword">AND</span> NEW.row_id_value <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>;
<span class="keyword">END</span>

<span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_metadata_reference_timestamp_insert</span><span class="delimiter">'</span></span>
<span class="keyword">BEFORE</span> <span class="class">INSERT</span> <span class="keyword">ON</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_metadata_reference</span><span class="delimiter">'</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">insert on table gpkg_metadata_reference
violates constraint: timestamp must be a valid time in ISO 8601
&quot;yyyy-mm-ddThh:mm:ss.cccZ&quot; form</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> <span class="keyword">NOT</span> (NEW.timestamp GLOB
<span class="string"><span class="delimiter">'</span><span class="content">[1-2][0-9][0-9][0-9]-[0-1][0-9]-[0-3][0-9]T[0-2][0-9]:[0-5][0-
9]:[0-5][0-9].[0-9][0-9][0-9]Z</span><span class="delimiter">'</span></span>
<span class="keyword">AND</span> strftime(<span class="string"><span class="delimiter">'</span><span class="content">%s</span><span class="delimiter">'</span></span>,NEW.timestamp) <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>);
<span class="keyword">END</span>
<span class="class">CREATE</span> <span class="type">TRIGGER</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_metadata_reference_timestamp_update</span><span class="delimiter">'</span></span>
<span class="keyword">BEFORE</span> <span class="class">UPDATE</span> <span class="keyword">OF</span> <span class="string"><span class="delimiter">'</span><span class="content">timestamp</span><span class="delimiter">'</span></span> <span class="keyword">ON</span> <span class="string"><span class="delimiter">'</span><span class="content">gpkg_metadata_reference</span><span class="delimiter">'</span></span>
<span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="class">BEGIN</span>
<span class="class">SELECT</span> RAISE(ABORT, <span class="string"><span class="delimiter">'</span><span class="content">update on table gpkg_metadata_reference
violates constraint: timestamp must be a valid time in ISO 8601
&quot;yyyy-mm-ddThh:mm:ss.cccZ&quot; form</span><span class="delimiter">'</span></span>)
<span class="keyword">WHERE</span> <span class="keyword">NOT</span> (NEW.timestamp GLOB
<span class="string"><span class="delimiter">'</span><span class="content">[1-2][0-9][0-9][0-9]-[0-1][0-9]-[0-3][0-9]T[0-2][0-9]:[0-5][0-
9]:[0-5][0-9].[0-9][0-9][0-9]Z</span><span class="delimiter">'</span></span>
<span class="keyword">AND</span> strftime(<span class="string"><span class="delimiter">'</span><span class="content">%s</span><span class="delimiter">'</span></span>,NEW.timestamp) <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>);
<span class="keyword">END</span></code></pre>
</div>
</div>
<h4 id="_examples_informative_2" class="float">Examples (Informative)</h4>
<h5 id="metadata_example_appendix" class="float">Hierarchical Metadata Example One - ISO19115.</h5>
<div class="paragraph">
<p>Suppose we have this metadata:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">CREATE</span> <span class="type">TABLE</span> gpkg_metadata (
  id <span class="predefined-type">INTEGER</span> <span class="type">CONSTRAINT</span> m_pk <span class="directive">PRIMARY</span> <span class="type">KEY</span> <span class="directive">ASC</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  md_scope <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span> <span class="directive">DEFAULT</span> <span class="string"><span class="delimiter">'</span><span class="content">dataset</span><span class="delimiter">'</span></span>,
  md_standard_uri <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  mime_type <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span> <span class="directive">DEFAULT</span> <span class="string"><span class="delimiter">'</span><span class="content">text/xml</span><span class="delimiter">'</span></span>,
  metadata <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span> <span class="directive">DEFAULT</span> <span class="string"><span class="delimiter">'</span><span class="delimiter">'</span></span>
)</code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">id</th>
<th class="tableblock halign-left valign-top">md_scope</th>
<th class="tableblock halign-left valign-top">md_standard_uri</th>
<th class="tableblock halign-left valign-top">metadata</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">undefined</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.isotc211.org/2005/gmd">http://www.isotc211.org/2005/gmd</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">series</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.isotc211.org/2005/gmd">http://www.isotc211.org/2005/gmd</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">dataset</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.isotc211.org/2005/gmd">http://www.isotc211.org/2005/gmd</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">featureType</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.isotc211.org/2005/gmd">http://www.isotc211.org/2005/gmd</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">feature</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.isotc211.org/2005/gmd">http://www.isotc211.org/2005/gmd</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">attributeType</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.isotc211.org/2005/gmd">http://www.isotc211.org/2005/gmd</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">attribute</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.isotc211.org/2005/gmd">http://www.isotc211.org/2005/gmd</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p>and this reference table definition:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">CREATE</span> <span class="type">TABLE</span> gpkg_metadata_reference (
  reference_scope <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  table_name <span class="predefined-type">TEXT</span>,
  column_name <span class="predefined-type">TEXT</span>,
  row_id_value <span class="predefined-type">INTEGER</span>,
  <span class="predefined-type">timestamp</span> <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span> <span class="directive">DEFAULT</span> (strftime(<span class="string"><span class="delimiter">'</span><span class="content">%Y-%m-%dT%H:%M:%fZ</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">now</span><span class="delimiter">'</span></span>)),
  md_file_id <span class="predefined-type">INTEGER</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  md_parent_id <span class="predefined-type">INTEGER</span>,
  <span class="type">CONSTRAINT</span> crmr_mfi_fk <span class="directive">FOREIGN</span> <span class="type">KEY</span> (md_file_id) <span class="keyword">REFERENCES</span> gpkg_metadata(id),
  <span class="type">CONSTRAINT</span> crmr_mpi_fk <span class="directive">FOREIGN</span> <span class="type">KEY</span> (md_parent_id) <span class="keyword">REFERENCES</span> gpkg_metadata(id)
)</code></pre>
</div>
</div>
<div class="paragraph">
<p>1) Consider a geographic data provider generating vector mapping data for three Administrative areas(A, B and C).  &#8230; The metadata could be carried exclusively at Dataset Series level.</p>
</div>
<div class="paragraph">
<p>Then we need a record for each layer table for the three admin areas, like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">INSERT</span> <span class="class">INTO</span> gpkg_metadata_reference <span class="keyword">VALUES</span> (
<span class="string"><span class="delimiter">'</span><span class="content">table</span><span class="delimiter">'</span></span>, <span class="comment">/* reference type */</span>
<span class="string"><span class="delimiter">'</span><span class="content">roads</span><span class="delimiter">'</span></span>, <span class="comment">/* table name */</span>
<span class="string"><span class="delimiter">'</span><span class="content">undefined</span><span class="delimiter">'</span></span>, <span class="comment">/* column_name */</span>
<span class="integer">-1</span>, <span class="comment">/* row_id_value  */</span>
(<span class="predefined-type">datetime</span>(<span class="string"><span class="delimiter">'</span><span class="content">now</span><span class="delimiter">'</span></span>)),
<span class="integer">3</span>,  <span class="comment">/* md_file_id  */</span>
<span class="integer">0</span>  <span class="comment">/* md_parent_id  */</span>
)</code></pre>
</div>
</div>
<div class="paragraph">
<p>2) After some time alternate vector mapping of Administrative area A becomes available. The metadata would then be extended for Administrative area A, to describe the new quality date values. These values would supersede those given for the Dataset series, but only for Administrative area A. The metadata for B and C would remain unchanged. This new metadata would be recorded at Dataset
level.</p>
</div>
<div class="paragraph">
<p>Then we need a record for each layer table in "A" like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">INSERT</span> <span class="class">INTO</span> gpkg_metadata_reference <span class="keyword">VALUES</span> (
<span class="string"><span class="delimiter">'</span><span class="content">table</span><span class="delimiter">'</span></span>, <span class="comment">/* reference type */</span>
<span class="string"><span class="delimiter">'</span><span class="content">roads</span><span class="delimiter">'</span></span>, <span class="comment">/* table name */</span>
<span class="string"><span class="delimiter">'</span><span class="content">undefined</span><span class="delimiter">'</span></span>, <span class="comment">/* column_name */</span>
<span class="integer">-1</span>, <span class="comment">/* row_id_value  */</span>
(<span class="predefined-type">datetime</span>(<span class="string"><span class="delimiter">'</span><span class="content">now</span><span class="delimiter">'</span></span>)),
 <span class="integer">4</span>,  <span class="comment">/* md_file_id  */</span>
<span class="integer">3</span>  <span class="comment">/* md_parent_id  */</span>
)</code></pre>
</div>
</div>
<div class="paragraph">
<p>3) Eventually further data becomes available for Administrative area A, with a complete re-survey of the road network. Again this implies new metadata for the affected feature types. This metadata would be carried at Feature type level for Administrative area A. All other metadata relating to other feature types remains unaffected. Only the metadata for roads in Administrative area A is modified. This road metadata is recorded at Feature type level.</p>
</div>
<div class="paragraph">
<p>Then we need a record for each layer table for the roads network, like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">INSERT</span> <span class="class">INTO</span> gpkg_metadata_reference <span class="keyword">VALUES</span> (
<span class="string"><span class="delimiter">'</span><span class="content">table</span><span class="delimiter">'</span></span>, <span class="comment">/* reference type */</span>
<span class="string"><span class="delimiter">'</span><span class="content">roads</span><span class="delimiter">'</span></span>, <span class="comment">/* table name */</span>
<span class="string"><span class="delimiter">'</span><span class="content">undefined</span><span class="delimiter">'</span></span>, <span class="comment">/* column_name */</span>
<span class="integer">-1</span>, <span class="comment">/* row_id_value  */</span>
(<span class="predefined-type">datetime</span>(<span class="string"><span class="delimiter">'</span><span class="content">now</span><span class="delimiter">'</span></span>)),
<span class="integer">5</span>,  <span class="comment">/* md_file_id  */</span>
<span class="integer">4</span>  <span class="comment">/* md_parent_id  */</span>
)</code></pre>
</div>
</div>
<div class="paragraph">
<p>4) An anomaly in the road survey is identified, in that all Overhead clearances for the Administrative area A have been surveyed to the nearest metre. These are re-surveyed to the nearest decimetre.  This re-survey implies new metadata for the affected attribute type <em>Overhead Clearance</em>. All other metadata for Administrative area A remains unaffected. This <em>Overhead Clearance</em> metadata is recorded at Attribute Type level.</p>
</div>
<div class="paragraph">
<p>Then we need a record for each layer table in the roads network with attribute type <em>Overhead Clearance</em>, like this;</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">INSERT</span> <span class="class">INTO</span> gpkg_metadata_reference <span class="keyword">VALUES</span> (
<span class="string"><span class="delimiter">'</span><span class="content">column</span><span class="delimiter">'</span></span>, <span class="comment">/* reference type */</span>
<span class="string"><span class="delimiter">'</span><span class="content">roads</span><span class="delimiter">'</span></span>, <span class="comment">/* table name */</span>
<span class="string"><span class="delimiter">'</span><span class="content">overhead_clearance</span><span class="delimiter">'</span></span>, <span class="comment">/* column_name */</span>
<span class="integer">-1</span>, <span class="comment">/* row_id_value  */</span>
(<span class="predefined-type">datetime</span>(<span class="string"><span class="delimiter">'</span><span class="content">now</span><span class="delimiter">'</span></span>)),
<span class="integer">7</span>,  <span class="comment">/* md_file_id  */</span>
<span class="integer">4</span>  <span class="comment">/* md_parent_id  */</span>
)</code></pre>
</div>
</div>
<div class="paragraph">
<p>5) A new bridge is constructed in Administrative area A. This new data is reflected in the geographic data for Administrative area A, and new metadata is required to record this new feature. All other metadata for Administrative area A remains unaffected. This new feature metadata is recorded at Feature instance level.</p>
</div>
<div class="paragraph">
<p>Then we need a record for the bridge layer table row for the new bridge, like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">INSERT</span> <span class="class">INTO</span> gpkg_metadata_reference <span class="keyword">VALUES</span> (
<span class="string"><span class="delimiter">'</span><span class="content">row</span><span class="delimiter">'</span></span>, <span class="comment">/* reference type */</span>
<span class="string"><span class="delimiter">'</span><span class="content">bridge</span><span class="delimiter">'</span></span>, <span class="comment">/* table name */</span>
<span class="string"><span class="delimiter">'</span><span class="content">undefined</span><span class="delimiter">'</span></span>, <span class="comment">/* column_name */</span>
<span class="integer">987</span>, <span class="comment">/* row_id_value  */</span>
(<span class="predefined-type">datetime</span>(<span class="string"><span class="delimiter">'</span><span class="content">now</span><span class="delimiter">'</span></span>)),
<span class="integer">6</span>,  <span class="comment">/* md_file_id  */</span>
<span class="integer">4</span>  <span class="comment">/* md_parent_id  */</span>
)</code></pre>
</div>
</div>
<div class="paragraph">
<p>6) The overhead clearance attribute of the new bridge was wrongly recorded, and is modified. Again this new attribute requires new metadata to describe the modification. All other metadata for Administrative area A remains unaffected. This new attribute metadata is recorded at Attribute instance level.</p>
</div>
<div class="paragraph">
<p>Then we need a record for the clearance attribute value, like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">INSERT</span> <span class="class">INTO</span> gpkg_metadata_reference <span class="keyword">VALUES</span> (
<span class="string"><span class="delimiter">'</span><span class="content">row/col</span><span class="delimiter">'</span></span>, <span class="comment">/* reference type */</span>
<span class="string"><span class="delimiter">'</span><span class="content">bridge</span><span class="delimiter">'</span></span>, <span class="comment">/* table name */</span>
<span class="string"><span class="delimiter">'</span><span class="content">overhead_clearance</span><span class="delimiter">'</span></span>, <span class="comment">/* column_name */</span>
<span class="integer">987</span>, <span class="comment">/* row_id_value  */</span>
(<span class="predefined-type">datetime</span>(<span class="string"><span class="delimiter">'</span><span class="content">now</span><span class="delimiter">'</span></span>)),
<span class="integer">8</span>,  <span class="comment">/* md_file_id  */</span>
<span class="integer">4</span>  <span class="comment">/* md_parent_id  */</span>
)</code></pre>
</div>
</div>
<h5 id="_hierarchical_metadata_example_two_field_data_collection" class="float">Hierarchical Metadata Example Two - Field Data Collection</h5>
<div class="paragraph">
<p>This use case demonstrates a mechanism to indicate which data in a GeoPackage that was originally loaded with data from one or more services has been collected or updated since the initial load, and therefore MAY need to be uploaded to update the original services (e.g. WFS, WCS, WMTS).</p>
</div>
<div class="paragraph">
<p>Suppose a user with a mobile handheld device goes out in the field and collects observations of a new "Point of Interest" (POI) feature type, and associated metadata about the field session, the new feature type, some POI instances and some of their attributes (e.g. spatial accuracy, attribute accuracy) that results in the following additional metadata:</p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">id</th>
<th class="tableblock halign-left valign-top">md_scope</th>
<th class="tableblock halign-left valign-top">md_standard_uri</th>
<th class="tableblock halign-left valign-top">metadata</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">fieldSession</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://schemas.opengis.net/iso/19139/">http://schemas.opengis.net/iso/19139/</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">featureType</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://schemas.opengis.net/iso/19139/">http://schemas.opengis.net/iso/19139/</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">feature</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://schemas.opengis.net/iso/19139/">http://schemas.opengis.net/iso/19139/</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">12</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">attribute</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://schemas.opengis.net/iso/19139/">http://schemas.opengis.net/iso/19139/</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">13</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">attribute</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://schemas.opengis.net/iso/19139/">http://schemas.opengis.net/iso/19139/</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">14</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">feature</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://schemas.opengis.net/iso/19139/">http://schemas.opengis.net/iso/19139/</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">15</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">attribute</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://schemas.opengis.net/iso/19139/">http://schemas.opengis.net/iso/19139/</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">attribute</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://schemas.opengis.net/iso/19139/">http://schemas.opengis.net/iso/19139/</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">17</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">feature</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://schemas.opengis.net/iso/19139/">http://schemas.opengis.net/iso/19139/</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">18</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">attribute</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://schemas.opengis.net/iso/19139/">http://schemas.opengis.net/iso/19139/</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">19</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">attribute</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://schemas.opengis.net/iso/19139/">http://schemas.opengis.net/iso/19139/</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p>(This example assumes that the field session data is still considered "raw" and won&#8217;t be considered a data set or part of a data series until it has been verified and cleaned, but if that is wrong then additional series and data set metadata could be added.)</p>
</div>
<div class="paragraph">
<p>Then we need a gpkg_metadata_reference record for the field session for the new POI table, whose md_parent_id is undefined:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">INSERT</span> <span class="class">INTO</span> gpkg_metadata_reference <span class="keyword">VALUES</span> (
<span class="string"><span class="delimiter">'</span><span class="content">table</span><span class="delimiter">'</span></span>, <span class="comment">/* reference type */</span>
<span class="string"><span class="delimiter">'</span><span class="content">poi</span><span class="delimiter">'</span></span>, <span class="comment">/* table name */</span>
<span class="string"><span class="delimiter">'</span><span class="content">undefined</span><span class="delimiter">'</span></span>, <span class="comment">/* column_name */</span>
<span class="integer">-1</span>, <span class="comment">/* row_id_value  */</span>
(strftime(<span class="string"><span class="delimiter">'</span><span class="content">%Y-%m-%dT%H:%M:%fZ</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">now</span><span class="delimiter">'</span></span>)),
<span class="integer">1</span>,  <span class="comment">/* md_file_id  */</span>
<span class="integer">0</span>  <span class="comment">/* md_parent_id  */</span>
)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then we need a gpkg_metadata_reference record for the feature type for the new POI table, whose md_parent_id is that of the field session:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">INSERT</span> <span class="class">INTO</span> gpkg_metadata_reference <span class="keyword">VALUES</span> (
<span class="string"><span class="delimiter">'</span><span class="content">table</span><span class="delimiter">'</span></span>, <span class="comment">/* reference type */</span>
<span class="string"><span class="delimiter">'</span><span class="content">poi</span><span class="delimiter">'</span></span>, <span class="comment">/* table name */</span>
<span class="string"><span class="delimiter">'</span><span class="content">undefined</span><span class="delimiter">'</span></span>, <span class="comment">/* column_name */</span>
<span class="integer">-1</span>, <span class="comment">/* row_id_value  */</span>
(strftime(<span class="string"><span class="delimiter">'</span><span class="content">%Y-%m-%dT%H:%M:%fZ</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">now</span><span class="delimiter">'</span></span>)),
<span class="integer">10</span>,  <span class="comment">/* md_file_id  */</span>
<span class="integer">1</span>  <span class="comment">/* md_parent_id  */</span>
)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then we need gpkg_metadata_reference records for the poi feature instance rows, whose md_parent_id is that of the field session:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">INSERT</span> <span class="class">INTO</span> gpkg_metadata_reference <span class="keyword">VALUES</span> (
<span class="string"><span class="delimiter">'</span><span class="content">row</span><span class="delimiter">'</span></span>, <span class="comment">/* reference type */</span>
<span class="string"><span class="delimiter">'</span><span class="content">poi</span><span class="delimiter">'</span></span>, <span class="comment">/* table name */</span>
<span class="string"><span class="delimiter">'</span><span class="content">undefined</span><span class="delimiter">'</span></span>, <span class="comment">/* column_name */</span>
<span class="integer">1</span>, <span class="comment">/* row_id_value  */</span>
(strftime(<span class="string"><span class="delimiter">'</span><span class="content">%Y-%m-%dT%H:%M:%fZ</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">now</span><span class="delimiter">'</span></span>)),
<span class="integer">11</span>,  <span class="comment">/* md_file_id  */</span>
<span class="integer">1</span>  <span class="comment">/* md_parent_id  */</span>
)

<span class="class">INSERT</span> <span class="class">INTO</span> gpkg_metadata_reference <span class="keyword">VALUES</span> (
<span class="string"><span class="delimiter">'</span><span class="content">row</span><span class="delimiter">'</span></span>, <span class="comment">/* reference type */</span>
<span class="string"><span class="delimiter">'</span><span class="content">poi</span><span class="delimiter">'</span></span>, <span class="comment">/* table name */</span>
<span class="string"><span class="delimiter">'</span><span class="content">undefined</span><span class="delimiter">'</span></span>, <span class="comment">/* column_name */</span>
<span class="integer">2</span>, <span class="comment">/* row_id_value  */</span>
<span class="integer">14</span>,  <span class="comment">/* md_file_id  */</span>
<span class="integer">1</span>  <span class="comment">/* md_parent_id  */</span>
)

<span class="class">INSERT</span> <span class="class">INTO</span> gpkg_metadata_reference <span class="keyword">VALUES</span> (
<span class="string"><span class="delimiter">'</span><span class="content">row</span><span class="delimiter">'</span></span>, <span class="comment">/* reference type */</span>
<span class="string"><span class="delimiter">'</span><span class="content">poi</span><span class="delimiter">'</span></span>, <span class="comment">/* table name */</span>
<span class="string"><span class="delimiter">'</span><span class="content">undefined</span><span class="delimiter">'</span></span>, <span class="comment">/* column_name */</span>
<span class="integer">3</span>, <span class="comment">/* row_id_value  */</span>
(strftime(<span class="string"><span class="delimiter">'</span><span class="content">%Y-%m-%dT%H:%M:%fZ</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">now</span><span class="delimiter">'</span></span>)),
<span class="integer">17</span>,  <span class="comment">/* md_file_id  */</span>
<span class="integer">1</span>  <span class="comment">/* md_parent_id  */</span>
)</code></pre>
</div>
</div>
<div class="paragraph">
<p>And finally we need gpkg_metadata_reference records for the poi attribute instance metadata , whose md_parent_id is that of the field session:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">INSERT</span> <span class="class">INTO</span> gpkg_metadata_reference <span class="keyword">VALUES</span> (
<span class="string"><span class="delimiter">'</span><span class="content">row/col</span><span class="delimiter">'</span></span>, <span class="comment">/* reference type */</span>
<span class="string"><span class="delimiter">'</span><span class="content">poi</span><span class="delimiter">'</span></span>, <span class="comment">/* table name */</span>
<span class="string"><span class="delimiter">'</span><span class="content">point</span><span class="delimiter">'</span></span>, <span class="comment">/* column_name */</span>
<span class="integer">1</span>, <span class="comment">/* row_id_value  */</span>
(strftime(<span class="string"><span class="delimiter">'</span><span class="content">%Y-%m-%dT%H:%M:%fZ</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">now</span><span class="delimiter">'</span></span>)),
<span class="integer">12</span>,  <span class="comment">/* md_file_id  */</span>
<span class="integer">1</span>  <span class="comment">/* md_parent_id  */</span>
)

<span class="class">INSERT</span> <span class="class">INTO</span> gpkg_metadata_reference <span class="keyword">VALUES</span> (
<span class="string"><span class="delimiter">'</span><span class="content">row/col</span><span class="delimiter">'</span></span>, <span class="comment">/* reference type */</span>
<span class="string"><span class="delimiter">'</span><span class="content">poi</span><span class="delimiter">'</span></span>, <span class="comment">/* table name */</span>
<span class="string"><span class="delimiter">'</span><span class="content">point</span><span class="delimiter">'</span></span>, <span class="comment">/* column_name */</span>
<span class="integer">2</span>, <span class="comment">/* row_id_value  */</span>
(strftime(<span class="string"><span class="delimiter">'</span><span class="content">%Y-%m-%dT%H:%M:%fZ</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">now</span><span class="delimiter">'</span></span>)),
<span class="integer">15</span>,  <span class="comment">/* md_file_id  */</span>
<span class="integer">1</span>  <span class="comment">/* md_parent_id  */</span>
)

<span class="class">INSERT</span> <span class="class">INTO</span> gpkg_metadata_reference <span class="keyword">VALUES</span> (
<span class="string"><span class="delimiter">'</span><span class="content">row/col</span><span class="delimiter">'</span></span>, <span class="comment">/* reference type */</span>
<span class="string"><span class="delimiter">'</span><span class="content">poi</span><span class="delimiter">'</span></span>, <span class="comment">/* table name */</span>
<span class="string"><span class="delimiter">'</span><span class="content">point</span><span class="delimiter">'</span></span>, <span class="comment">/* column_name */</span>
<span class="integer">3</span>, <span class="comment">/* row_id_value  */</span>
(strftime(<span class="string"><span class="delimiter">'</span><span class="content">%Y-%m-%dT%H:%M:%fZ</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">now</span><span class="delimiter">'</span></span>)),
<span class="integer">18</span>,  <span class="comment">/* md_file_id  */</span>
<span class="integer">1</span>  <span class="comment">/* md_parent_id  */</span>
)

<span class="class">INSERT</span> <span class="class">INTO</span> gpkg_metadata_reference <span class="keyword">VALUES</span> (
<span class="string"><span class="delimiter">'</span><span class="content">row/col</span><span class="delimiter">'</span></span>, <span class="comment">/* reference type */</span>
<span class="string"><span class="delimiter">'</span><span class="content">poi</span><span class="delimiter">'</span></span>, <span class="comment">/* table name */</span>
<span class="string"><span class="delimiter">'</span><span class="content">category</span><span class="delimiter">'</span></span>, <span class="comment">/* column_name */</span>
<span class="integer">1</span>, <span class="comment">/* row_id_value  */</span>
(strftime(<span class="string"><span class="delimiter">'</span><span class="content">%Y-%m-%dT%H:%M:%fZ</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">now</span><span class="delimiter">'</span></span>)),
<span class="integer">13</span>,  <span class="comment">/* md_file_id  */</span>
<span class="integer">1</span>  <span class="comment">/* md_parent_id  */</span>
)

<span class="class">INSERT</span> <span class="class">INTO</span> gpkg_metadata_reference <span class="keyword">VALUES</span> (
<span class="string"><span class="delimiter">'</span><span class="content">row/col</span><span class="delimiter">'</span></span>, <span class="comment">/* reference type */</span>
<span class="string"><span class="delimiter">'</span><span class="content">poi</span><span class="delimiter">'</span></span>, <span class="comment">/* table name */</span>
<span class="string"><span class="delimiter">'</span><span class="content">category</span><span class="delimiter">'</span></span>, <span class="comment">/* column_name */</span>
<span class="integer">2</span>, <span class="comment">/* row_id_value  */</span>
(strftime(<span class="string"><span class="delimiter">'</span><span class="content">%Y-%m-%dT%H:%M:%fZ</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">now</span><span class="delimiter">'</span></span>)),
<span class="integer">16</span>,  <span class="comment">/* md_file_id  */</span>
<span class="integer">1</span>  <span class="comment">/* md_parent_id  */</span>
)

<span class="class">INSERT</span> <span class="class">INTO</span> gpkg_metadata_reference <span class="keyword">VALUES</span> (
<span class="string"><span class="delimiter">'</span><span class="content">row/col</span><span class="delimiter">'</span></span>, <span class="comment">/* reference type */</span>
<span class="string"><span class="delimiter">'</span><span class="content">poi</span><span class="delimiter">'</span></span>, <span class="comment">/* table name */</span>
<span class="string"><span class="delimiter">'</span><span class="content">category</span><span class="delimiter">'</span></span>, <span class="comment">/* column_name */</span>
<span class="integer">3</span>, <span class="comment">/* row_id_value  */</span>
(strftime(<span class="string"><span class="delimiter">'</span><span class="content">%Y-%m-%dT%H:%M:%fZ</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">now</span><span class="delimiter">'</span></span>)),
<span class="integer">19</span>,  <span class="comment">/* md_file_id  */</span>
<span class="integer">1</span>  <span class="comment">/* md_parent_id  */</span>
)</code></pre>
</div>
</div>
<div class="paragraph">
<p>As long as all metadata collected in the field session either directly (as above) or indirectly (suppose there were a data set level metadata_reference record intermediary) refers to the field session metadata via md_parent_id values, then this chain of metadata references identifies the newly collected information, as Joan requested, in addition to the metadata.</p>
</div>
<div class="paragraph">
<p>So here is the data after both examples:</p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 21. xml_metadata</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">id</th>
<th class="tableblock halign-left valign-top">md_scope</th>
<th class="tableblock halign-left valign-top">md_standard_uri</th>
<th class="tableblock halign-left valign-top">metadata</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">undefined</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.isotc211.org/2005/gmd">http://www.isotc211.org/2005/gmd</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">fieldSession</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.isotc211.org/2005/gmd">http://www.isotc211.org/2005/gmd</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">collectionSession</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.isotc211.org/2005/gmd">http://www.isotc211.org/2005/gmd</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">series</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.isotc211.org/2005/gmd">http://www.isotc211.org/2005/gmd</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">dataset</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.isotc211.org/2005/gmd">http://www.isotc211.org/2005/gmd</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">featureType</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.isotc211.org/2005/gmd">http://www.isotc211.org/2005/gmd</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">feature</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.isotc211.org/2005/gmd">http://www.isotc211.org/2005/gmd</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">attributeType</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.isotc211.org/2005/gmd">http://www.isotc211.org/2005/gmd</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">attribute</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.isotc211.org/2005/gmd">http://www.isotc211.org/2005/gmd</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">featureType</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.isotc211.org/2005/gmd">http://www.isotc211.org/2005/gmd</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">feature</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.isotc211.org/2005/gmd">http://www.isotc211.org/2005/gmd</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">12</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">attribute</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.isotc211.org/2005/gmd">http://www.isotc211.org/2005/gmd</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">13</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">attribute</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.isotc211.org/2005/gmd">http://www.isotc211.org/2005/gmd</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">14</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">feature</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.isotc211.org/2005/gmd">http://www.isotc211.org/2005/gmd</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">15</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">attribute</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.isotc211.org/2005/gmd">http://www.isotc211.org/2005/gmd</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">attribute</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.isotc211.org/2005/gmd">http://www.isotc211.org/2005/gmd</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">17</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">feature</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.isotc211.org/2005/gmd">http://www.isotc211.org/2005/gmd</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">18</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">attribute</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.isotc211.org/2005/gmd">http://www.isotc211.org/2005/gmd</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">19</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">attribute</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.isotc211.org/2005/gmd">http://www.isotc211.org/2005/gmd</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 22. gpkg_metadata_reference</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">reference_type</th>
<th class="tableblock halign-left valign-top">table_name</th>
<th class="tableblock halign-left valign-top">column_name</th>
<th class="tableblock halign-left valign-top">row_id_value</th>
<th class="tableblock halign-left valign-top">timestamp</th>
<th class="tableblock halign-left valign-top">md_file_id</th>
<th class="tableblock halign-left valign-top">md_parent_id</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">table</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">roads</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">undefined</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">table</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">roads</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">undefined</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">table</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">roads</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">undefined</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">column</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">roads</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">overhead_clearance</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">row</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bridge</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">undefined</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">987</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">row/col</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bridge</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">overhead_clearance</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">987</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">table</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">poi</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">undefined</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">row</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">poi</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">undefined</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">row</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">poi</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">undefined</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">row</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">poi</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">undefined</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">14</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">row/col</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">poi</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">undefined</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">17</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">row/col</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">poi</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">point</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">12</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">row/col</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">poi</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">point</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">15</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">row/col</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">poi</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">point</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">18</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">row/col</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">poi</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">category</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">13</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">row/col</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">poi</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">category</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">row/col</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">poi</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">category</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">19</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
</tbody>
</table>

<h5 id="raster_or_tile_metadata_example_appendix" class="float">Raster or Tile Metadata Example</h5>
<div class="paragraph">
<p>A number of raster image processing problems MAY require the support of more metadata that is contained in the image itself.
Applications MAY use the <code>gpkg_metadata</code> and <code>gpkg_metadata_reference</code> tables defined in clause <a href="#_metadata">metadata</a> to store raster image metadata defined according to standard authoritative or application or vendor specific metadata models.
An example of the data items in such a model is shown in the following table.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Rational Polynomial Coefficient</p>
</li>
<li>
<p>Photometric Interpretation</p>
</li>
<li>
<p>No Data Value</p>
</li>
<li>
<p>Compression Quality Factor</p>
</li>
<li>
<p>Georectification</p>
</li>
<li>
<p>NIIRS</p>
</li>
<li>
<p>Min X</p>
</li>
<li>
<p>Min Y</p>
</li>
<li>
<p>Max X</p>
</li>
<li>
<p>Max Y</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="extension_schema">F.9. Schema</h3>
<h4 id="_introduction_10" class="float">Introduction</h4>
<div class="paragraph">
<p>The schema option provides a means to describe the columns of tables in a GeoPackage with more detail than can be captured by the SQL table definition directly.
The information provided by this option can be used by applications to, for instance, present data contained in a GeoPackage in a more user-friendly fashion or implement data validation logic.</p>
</div>
<h4 id="_extension_author_7" class="float">Extension Author</h4>
<div class="paragraph">
<p>GeoPackage SWG, author_name <code>gpkg</code></p>
</div>
<h4 id="_extension_name_2" class="float">Extension Name</h4>
<div class="paragraph">
<p><code>gpkg_schema</code></p>
</div>
<h4 id="_extension_type_7" class="float">Extension Type</h4>
<div class="paragraph">
<p>New Requirement Dependent on Clause <a href="#features">Features</a></p>
</div>
<h4 id="_applicability_7" class="float">Applicability</h4>
<div class="paragraph">
<p>This extension may apply to any <a href="#feature_user_tables">Vector Feature User Data Tables</a>.</p>
</div>
<h4 id="_scope_7" class="float">Scope</h4>
<div class="paragraph">
<p>Read-write</p>
</div>
<h4 id="_requirements_7" class="float">Requirements</h4>
<h5 id="_table_definitions_2" class="float">Table Definitions</h5>
<h6 id="schema_data_columns_table_definition" class="float">Data Columns</h6>
<div id="r103" class="exampleblock">
<div class="title">Requirement 103</div>
<div class="content">
<div class="paragraph">
<p>A GeoPackage MAY contain a table named <code>gpkg_data_columns</code>.
If present it SHALL be defined per <a href="#gpkg_data_columns_cols">Data Columns Table Definition</a> and <a href="#gpkg_data_columns_sql">gpkg_data_columns Table Definition SQL</a>.</p>
</div>
</div>
</div>
<table id="gpkg_data_columns_cols" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 23. Data Columns Table Definition</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Column Name</th>
<th class="tableblock halign-left valign-top">Column Type</th>
<th class="tableblock halign-left valign-top">Column Description</th>
<th class="tableblock halign-left valign-top">Null</th>
<th class="tableblock halign-left valign-top">Key</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>table_name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the tiles or feature table</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>column_name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the table column</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A human-readable identifier (e.g. short name) for the column_name content</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UNIQUE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>title</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A human-readable formal title for the column_name content</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>description</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A human-readable description for the column_name content</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mime_type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.iana.org/assignments/media-types/index.html">MIME</a> <a href="#21">[21]</a> type of column_name if BLOB type, or NULL for other types</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>constraint_name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Column value constraint name (lowercase) specified by reference to <code>gpkg_data_column_constraints.constraint</code> name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p>GeoPackage applications MAY <sup><a href="#K38">[K38]</a></sup> use the <code>gpkg_data_columns</code> table to store minimal application schema identifying, descriptive and <a href="http://www.iana.org/assignments/media-types/index.html">MIME</a> <a href="#21">[21]</a> type <sup><a href="#K39">[K39]</a></sup> information about columns in user vector feature and tile matrix data tables that supplements the data available from the SQLite <code>sqlite_master</code> table and pragma <code>table_info(table_name)</code> SQL function.
The <code>gpkg_data_columns</code> data CAN be used to provide more specific column data types and value ranges and application specific structural and semantic information to enable more informative user menu displays and more effective user decisions on the suitability of GeoPackage contents for specific purposes.</p>
</div>
<div class="paragraph">
<p>See <a href="#gpkg_data_columns_sql">gpkg_data_columns Table Definition SQL</a>.</p>
</div>
<h6 id="data_column_constraints_table_definition" class="float">Data Column Constraints</h6>
<div id="r107" class="exampleblock">
<div class="title">Requirement 107</div>
<div class="content">
<div class="paragraph">
<p>A GeoPackage MAY contain a table named <code>gpkg_data_column_constraints</code>.
If present it SHALL be defined per <a href="#gpkg_data_column_constraints_cols">Data Column Constraints Table Definition</a> and <a href="#gpkg_data_column_constraints_sql">gpkg_data_columns Table Definition SQL</a>.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>The <code>gpkg_data_column_constraints</code> table contains data to specify restrictions on basic data type column values.
The constraint_name column is referenced by the <code>constraint_name</code> column in the <code>gpkg_data_columns</code> table defined in <a href="#gpkg_data_columns_cols">Data Columns Table Definition</a>.</p>
</div>
<table id="gpkg_data_column_constraints_cols" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 24. Data Column Constraints Table Definition</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Column Name</th>
<th class="tableblock halign-left valign-top">Column Type</th>
<th class="tableblock halign-left valign-top">Column Description</th>
<th class="tableblock halign-left valign-top">Null</th>
<th class="tableblock halign-left valign-top">Key</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>constraint_name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of constraint (lowercase)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>constraint_type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type name of constraint: <em>range</em> | <em>enum</em> | <em>glob</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>value</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specified case sensitive value for <em>enum</em> or <em>glob</em> or NULL for <em>range</em> constraint_type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>min</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NUMERIC</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Minimum value for <em>range</em> or NULL for <em>enum</em> or <em>glob</em> constraint_type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>min_is_inclusive</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BOOLEAN</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0 (false) if min value is exclusive, or 1 (true) if min value is inclusive</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>max</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NUMERIC</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum value for <em>range</em> or NULL for <em>enum</em> or <em>glob</em> constraint_type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>max_is_inclusive</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BOOLEAN</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0 (false) if max value is exclusive, or 1 (true) if max value is inclusive</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>description</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">For ranges and globs, describes the constraint; for enums, describes the enum value.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p><em>The min and max columns are defined as NUMERIC to be able to contain range values for any numeric data column defined with a data type from Table 1. These are the only exceptions to the data type rule stated in Req 5.</em></p>
</div>
<div class="paragraph">
<p>See <a href="#gpkg_data_column_constraints_sql">gpkg_data_columns Table Definition SQL</a>.</p>
</div>
<h5 id="_table_data_values_8" class="float">Table Data Values</h5>
<h6 id="_gpkg_extensions_4" class="float">gpkg_extensions</h6>
<div id="r141" class="exampleblock">
<div class="title">Requirement 141</div>
<div class="content">
<div class="paragraph">
<p>GeoPackages with a row in the <code>gpkg_extensions</code> table with an <code>extension_name</code> of "gpkg_schema" SHALL comply with this extension. The row SHALL have a <code>scope</code> of "read-write".</p>
</div>
</div>
</div>
<h6 id="_data_columns" class="float">Data Columns</h6>
<div id="r104" class="exampleblock">
<div class="title">Requirement 104</div>
<div class="content">
<div class="paragraph">
<p>Values of the <code>gpkg_data_columns</code> table <code>table_name</code> column value SHALL reference values in the <code>gpkg_contents</code> <code>table_name</code> column.</p>
</div>
</div>
</div>
<div id="r105" class="exampleblock">
<div class="title">Requirement 105</div>
<div class="content">
<div class="paragraph">
<p>The <code>column_name</code> column value in a <code>gpkg_data_columns</code> table row SHALL contain the name of a column in the SQLite table or view identified by the <code>table_name</code> column value.</p>
</div>
</div>
</div>
<div id="r106" class="exampleblock">
<div class="title">Requirement 106</div>
<div class="content">
<div class="paragraph">
<p>The constraint_name column value in a gpkg_data_columns table MAY be NULL.
If it is not NULL, it SHALL contain a constraint_name column value (which SHALL be lowercase) from the gpkg_data_column_constraints table.</p>
</div>
</div>
</div>
<h6 id="_data_column_constraints" class="float">Data Column Constraints</h6>
<div class="paragraph">
<p>The lowercase gpkg_data_column_constraints constraint_type column value specifies the type of constraint: "range", "enum", or "glob" (GLOB is a text pattern match - see <a href="#33">[33]</a>).
The case sensitive value column contains an enumerated legal value for constraint_type "enum", a pattern match string for constraint_type "glob", or NULL for constraint_type "range". The set of value column values in rows of constraint_type "enum" with the same constraint_name contains all possible enumerated values for the constraint name. The min and max column values specify the minim and maximum valid values for constraint_type "range", or are NULL for constraint_type "enum" or "glob". The min_is_inclusive and max_is_inclusive column values contain 1 if the min and max values are inclusive, 0 if they are exclusive, or are NULL for constraint_type "enum" or "glob".
These restrictions MAY be enforced by SQL triggers or by code in applications that update GeoPackage data values.</p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 25. Sample Data Column Constraints</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">constraint_name</th>
<th class="tableblock halign-left valign-top">constraint_type</th>
<th class="tableblock halign-left valign-top">value</th>
<th class="tableblock halign-left valign-top">min</th>
<th class="tableblock halign-left valign-top">min_is_inclusive</th>
<th class="tableblock halign-left valign-top">max</th>
<th class="tableblock halign-left valign-top">max_is_inclusive</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sampleRange</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">range</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NULL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sampleEnum</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">enum</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NULL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NULL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NULL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NULL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sampleEnum</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">enum</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NULL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NULL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NULL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NULL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sampleEnum</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">enum</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NULL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NULL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NULL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NULL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sampleEnum</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">enum</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NULL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NULL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NULL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NULL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sampleEnum</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">enum</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">9</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NULL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NULL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NULL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NULL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sampleGlob</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">glob</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[1-2][0-9][0-9][0-9]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NULL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NULL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NULL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NULL</p></td>
</tr>
</tbody>
</table>

<div id="r108" class="exampleblock">
<div class="title">Requirement 108</div>
<div class="content">
<div class="paragraph">
<p>The <code>gpkg_data_column_constraints</code> table MAY be empty.
If it contains data, the lowercase <code>constraint_type</code> column values SHALL be one of "range", "enum", or "glob".</p>
</div>
</div>
</div>
<div id="r109" class="exampleblock">
<div class="title">Requirement 109</div>
<div class="content">
<div class="paragraph">
<p>The <code>gpkg_data_column_constraint</code> <code>constraint_name</code> values for rows with <code>constraint_type</code> values of "range" and "glob" SHALL be unique.</p>
</div>
</div>
</div>
<div id="r110" class="exampleblock">
<div class="title">Requirement 110</div>
<div class="content">
<div class="paragraph">
<p>The <code>gpkg_data_column_constraints</code> table MAY be empty.
If it contains rows with <code>constraint_type</code> column values of "range", the <code>value</code> column values for those rows SHALL be NULL.</p>
</div>
</div>
</div>
<div id="r111" class="exampleblock">
<div class="title">Requirement 111</div>
<div class="content">
<div class="paragraph">
<p>If the <code>gpkg_data_column_constraints</code> table contains rows with <code>constraint_type</code> column values of "range", the <code>min</code> column values for those rows SHALL be NOT NULL and less than the <code>max</code> column value which shall be NOT NULL.</p>
</div>
</div>
</div>
<div id="r112" class="exampleblock">
<div class="title">Requirement 112</div>
<div class="content">
<div class="paragraph">
<p>If the <code>gpkg_data_column_constraints</code> table contains rows with <code>constraint_type</code> column values of "range", the <code>min_is_inclusive</code> and <code>max_is_inclusive</code> column values for those rows SHALL be 0 or 1.</p>
</div>
</div>
</div>
<div id="r113" class="exampleblock">
<div class="title">Requirement 113</div>
<div class="content">
<div class="paragraph">
<p>If the <code>gpkg_data_column_constraints</code> table contains rows with <code>constraint_type</code> column values of "enum" or "glob", the <code>min</code>, <code>max</code>, <code>min_is_inclusive</code> and <code>max_is_inclusive</code> column values for those rows SHALL be NULL.</p>
</div>
</div>
</div>
<div id="r114" class="exampleblock">
<div class="title">Requirement 114</div>
<div class="content">
<div class="paragraph">
<p>If the <code>gpkg_data_column_constraints</code> table contains rows with <code>constraint_type</code> column values of "enum" or "glob", the <code>value</code> column SHALL NOT be NULL.</p>
</div>
</div>
</div>
<h4 id="_abstract_test_suite_7" class="float">Abstract Test Suite</h4>
<h5 id="_table_definition_5" class="float">Table Definition</h5>
<h6 id="_data_columns_2" class="float">Data Columns</h6>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/extensions/schema/data_columns/table_def</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the gpkg_data_columns table exists and has the correct definition.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>PRAGMA table_info(gpkg_data_columns)</p>
</li>
<li>
<p>Fail if returns an empty result set</p>
</li>
<li>
<p>Fail if column names and column definitions in the returned table_info do not match those of Table 23, including data type, nullability, default values. Column order, check constraint and trigger definitions, and other column definitions in the returned sql are irrelevant.</p>
</li>
<li>
<p>Pass if no failures.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Annex F.9 Req 103</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Basic</p>
</div></div></td>
</tr>
</tbody>
</table>

<h5 id="_data_column_constraints_2" class="float">Data Column Constraints</h5>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/extensions/schema/data_column_constraints/table_def</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the gpkg_data_column_constraints table exists and has the correct definition.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>PRAGMA table_info(gpkg_data_column_constraints)</p>
</li>
<li>
<p>Fail if returns an empty result set</p>
</li>
<li>
<p>Fail if column names and column definitions in the returned table_info do not match those of Table 23, including data type, nullability, default values. Column order, check constraint and trigger definitions, and other column definitions in the returned sql are irrelevant.</p>
</li>
<li>
<p>Pass if no failures.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Annex F.9 Req 107</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Basic</p>
</div></div></td>
</tr>
</tbody>
</table>

<h5 id="_data_values" class="float">Data Values</h5>
<h6 id="_gpkg_extensions_5" class="float">gpkg_extensions</h6>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/extensions/schema/extensions/data_values_scope</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the gpkg_extensions table has the required row.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT scope FROM gpkg_extensions WHERE extension_name = <em>gpkg_schema</em>;</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>For each row returned from step 1</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Fail if scope is not "read-write".</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if no fails</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Annex F.9 Req 141</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type:</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capabilities</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/extensions/schema/data_columns/table_name</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that for each gpkg_data_columns row, the table_name value matches a row in gpkg_contents.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT DISTINCT gdc.table_name AS gdc_table, gc.table_name AS gc_table FROM gpkg_data_columns AS gdc LEFT OUTER JOIN gpkg_contents AS gc ON gdc.table_name = gc.tbl_name;</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>For each row from step 1</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Fail if gc_table is NULL.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if no fails.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Annex F.9 Req 104</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/extensions/schema/data_columns/column_name</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that for each gpkg_data_columns row, the column_name matches a column in the table or view identified by the table_name column value.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT table_name, column_name FROM gpkg_data_columns</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>For each row from step 1</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>PRAGMA table_info(table_name)</p>
</li>
<li>
<p>Fail if table_name does not contain a column matching column_name</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if no fails</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Annex F.9 Req 105</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/extensions/schema/data_columns/constraint_name</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that for each gpkg_data_columns row, if the constraint_name value is NOT NULL then the constraint_type column value contains a constraint_type column value from the gpkg_data_column_constraints table for a row with a matching constraint_name value.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT constraint_name AS cn, constraint_type AS ct FROM gpkg_data_columns</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>For each NOT NULL cn value from step 1</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Fail if ct is NULL</p>
</li>
<li>
<p>If ct NOT NULL, SELECT constraint_type FROM gpkg_data_column_constraints WHERE constraint_name = cn AND constraint_type = ct</p>
</li>
<li>
<p>Fail if returns an empty result set</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if no fails</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Annex F.9 Req 106</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<h6 id="_data_column_constraints_3" class="float">Data Column Constraints</h6>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/extensions/schema/data_column_constraints/constraint_type</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the gpkg_data_column_constraints constraint_type column values are one of "range", "enum", or "glob".</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT DISTINCT constraint_type FROM gpkg_data_column_constraints</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>For each constraint_type value returned by step 1</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Fail if constraint_type NOT IN ("range", "enum", "glob").</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if no fails.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Annex F.9 Req 108</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/extensions/schema/data_column_constraints/constraint_names_unique</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the gpkg_data_column_constraints constraint_name column values for constraint_type values  of "range", or "glob" are unique.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT DISTINCT constraint_name FROM gpkg_data_column_constraints  WHERE constraint_type IN (<em>range</em>, <em>glob</em>)</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>For each returned constraint_name cn</p>
</li>
<li>
<p>SELECT count(*) FROM gpkg_data column_constraints WHERE constraint_name = cn</p>
</li>
<li>
<p>Fail if count &gt; 1</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if no fails.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Annex F.9 Req 109</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/extensions/schema/data_column_constraints/value_for_range</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the gpkg_data_column_constraints value column values are NULL for rows with a constraint_type value of "range".</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT constraint_name, value FROM gpkg_data_column_constraints WHERE constraint_type = <em>range</em></p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>For each value returned by step 1</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Fail if value IS NOT NULL</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if no fails.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Annex F.9 Req 110</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/extensions/schema/data_column_constraints/min_max_for_range</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the gpkg_data_column_constraints min column values are NOT NULL and less than the max column values for rows with a constraint_type value of "range".</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT constraint_name, min, max FROM gpkg_data_column_constraints WHERE constraint_type = <em>range</em></p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>For each set of min and max values returned by step 1</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Fail if min IS NULL</p>
</li>
<li>
<p>Fail if max IS NULL</p>
</li>
<li>
<p>Fail if min &gt;= max</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if no fails.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Annex F.9 Req 111</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/extensions/schema/data_column_constraints/inclusive_for_range</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the gpkg_data_column_constraints min_is_inclusive and max_is_inclusive  column values are NOT NULL and either 0 or 1 for rows with a constraint_type value of "range".</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT constraint_name, min_is_inclusive, max_is_inclusive FROM gpkg_data_column_constraints WHERE constraint_type = <em>range</em></p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>For each set of values returned by step 1</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Fail if min_is_inclusive IS NULL</p>
</li>
<li>
<p>Fail if max_is_inclusive IS NULL</p>
</li>
<li>
<p>Fail if min_is_inclusive is NOT IN (0,1)</p>
</li>
<li>
<p>Fail if max_is_inclusive is NOT IN (0,1)</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if no fails.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Annex F.9 Req 112</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID:</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/extensions/schema/data_column_constraints/min_max_inclusive_for_enum_glob</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose:</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the gpkg_data_column_constraints min, max, min_is_inclusive and max_is_inclusive column values are NULL for rows with a constraint_type value of "enum" or "glob".</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method:</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT constraint_name, min, max, min_is_inclusive, max_is_inclusive FROM gpkg_data_column_constraints WHERE constraint_type IN (<em>enum</em>,<em>glob</em>)</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>For each set of values returned by step 1</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Fail if min IS NOT NULL</p>
</li>
<li>
<p>Fail if max IS NOT NULL</p>
</li>
<li>
<p>Fail if min_is_inclusive IS NOT NULL</p>
</li>
<li>
<p>Fail if max_is_inclusive IS NOT NULL</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if no fails.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Annex F.9 Req 113</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID:</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/extensions/schema/data_column_constraints/value_for_enum_glob</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose:</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the gpkg_data_column_constraints value column values are NOT NULL for rows with a constraint_type value of "enum" or "glob".</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method:</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p>SELECT value FROM gpkg_data_column_constraints WHERE constraint_type IN (<em>enum</em>,<em>glob</em>)</p>
</li>
<li>
<p>Not testable if returns an empty result set</p>
</li>
<li>
<p>For each value returned by step 1</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Fail if value IS NULL</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if no fails.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Annex F.9 Req 114</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<h4 id="_table_definition_sql_2" class="float">Table Definition SQL</h4>
<h5 id="_gpkg_data_columns" class="float">gpkg_data_columns</h5>
<div id="gpkg_data_columns_sql" class="listingblock">
<div class="title">gpkg_data_columns Table Definition SQL</div>
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">CREATE</span> <span class="type">TABLE</span> gpkg_data_columns (
  table_name <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  column_name <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  name <span class="predefined-type">TEXT</span> <span class="directive">UNIQUE</span>,
  title <span class="predefined-type">TEXT</span>,
  description <span class="predefined-type">TEXT</span>,
  mime_type <span class="predefined-type">TEXT</span>,
  constraint_name <span class="predefined-type">TEXT</span>,
  <span class="type">CONSTRAINT</span> pk_gdc <span class="directive">PRIMARY</span> <span class="type">KEY</span> (table_name, column_name),
  <span class="type">CONSTRAINT</span> fk_gdc_tn <span class="directive">FOREIGN</span> <span class="type">KEY</span> (table_name) <span class="keyword">REFERENCES</span> gpkg_contents(table_name)
);</code></pre>
</div>
</div>
<h5 id="_gpkg_data_column_constraints" class="float">gpkg_data_column_constraints</h5>
<div id="gpkg_data_column_constraints_sql" class="listingblock">
<div class="title">gpkg_data_columns Table Definition SQL</div>
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">CREATE</span> <span class="type">TABLE</span> gpkg_data_column_constraints (
  constraint_name <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  constraint_type <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>, // <span class="string"><span class="delimiter">'</span><span class="content">range</span><span class="delimiter">'</span></span> | <span class="string"><span class="delimiter">'</span><span class="content">enum</span><span class="delimiter">'</span></span> | <span class="string"><span class="delimiter">'</span><span class="content">glob</span><span class="delimiter">'</span></span>
  value <span class="predefined-type">TEXT</span>,
  <span class="predefined">min</span> NUMERIC,
  min_is_inclusive <span class="predefined-type">BOOLEAN</span>, // <span class="integer">0</span> = <span class="predefined-constant">false</span>, <span class="integer">1</span> = <span class="predefined-constant">true</span>
  <span class="predefined">max</span> NUMERIC,
  max_is_inclusive <span class="predefined-type">BOOLEAN</span>, // <span class="integer">0</span> = <span class="predefined-constant">false</span>, <span class="integer">1</span> = <span class="predefined-constant">true</span>
  description <span class="predefined-type">TEXT</span>,
  <span class="type">CONSTRAINT</span> gdcc_ntv <span class="directive">UNIQUE</span> (constraint_name, constraint_type, value)
)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="extension_crs_wkt">F.10. WKT for Coordinate Reference Systems</h3>
<h4 id="_introduction_11" class="float">Introduction</h4>
<div class="paragraph">
<p>The OGC GeoPackage standard was adopted prior to the adoption of "OGC Well known text representation of Coordinate Reference Systems" <a href="#34">[34]</a>, in 13 August, 2014. As a result, the OGC GeoPackage standard references an older document <a href="#32">[32]</a> which has known ambiguities that are being encountered in the field. This extension establishes a new column to contain values that conform to the new standard.</p>
</div>
<h4 id="_extension_author_8" class="float">Extension Author</h4>
<div class="paragraph">
<p>GeoPackage SWG, author_name <code>gpkg</code>.</p>
</div>
<h4 id="_extension_name_or_template_7" class="float">Extension Name or Template</h4>
<div class="paragraph">
<p><code>gpkg_crs_wkt</code></p>
</div>
<h4 id="_extension_type_8" class="float">Extension Type</h4>
<div class="paragraph">
<p>Extension of Existing Requirement in clause <a href="#spatial_ref_sys_data_table_definition">Table Definition</a>.</p>
</div>
<h4 id="_applicability_8" class="float">Applicability</h4>
<div class="paragraph">
<p>Applies to the <code>gpkg_spatial_ref_sys</code> table.</p>
</div>
<h4 id="_scope_8" class="float">Scope</h4>
<div class="paragraph">
<p>Read-write</p>
</div>
<h4 id="_requirements_8" class="float">Requirements</h4>
<h5 id="_table_definition_6" class="float">Table Definition</h5>
<h6 id="_gpkg_spatial_ref_sys_2" class="float">gpkg_spatial_ref_sys</h6>
<div id="r115" class="exampleblock">
<div class="title">Requirement 115</div>
<div class="content">
<div class="paragraph">
<p>For GeoPackages conforming to this extension, the <code>gpkg_spatial_ref_sys</code> table SHALL have an additional column called <code>definition_12_063</code> as per <a href="#gpkg_spatial_ref_sys_cols_crs_wkt">Spatial Ref Sys Table Definition</a> and <a href="#gpkg_spatial_ref_sys_crs_wkt_sql">gpkg_spatial_ref_sys Table Definition SQL (CRS WKT Extension)</a>.</p>
</div>
</div>
</div>
<table id="gpkg_spatial_ref_sys_cols_crs_wkt" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 26. Spatial Ref Sys Table Definition</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Column Name</th>
<th class="tableblock halign-left valign-top">Column Type</th>
<th class="tableblock halign-left valign-top">Column Description</th>
<th class="tableblock halign-left valign-top">Not Null</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Key</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>srs_name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Human readable name of this SRS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>srs_id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">INTEGER</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique identifier for each Spatial Reference System within a GeoPackage</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PK</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>organization</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Case-insensitive name of the defining organization e.g. EPSG or epsg</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>organization_coordsys_id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">INTEGER</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Numeric ID of the Spatial Reference System assigned by the organization</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>definition</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Well-known Text <a href="#32">[32]</a> Representation of the Spatial Reference System</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>undefined</em></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>description</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Human readable description of this SRS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>definition_12_063</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Well-known Text <a href="#34">[34]</a> Representation of the Spatial Reference System</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>undefined</em></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>

<h5 id="_table_data_values_9" class="float">Table Data Values</h5>
<h6 id="_gpkg_extensions_6" class="float">gpkg_extensions</h6>
<div id="r145" class="exampleblock">
<div class="title">Requirement 145</div>
<div class="content">
<div class="paragraph">
<p>GeoPackages with a row in the <code>gpkg_extensions</code> table with an <code>extension_name</code> of "gpkg_crs_wkt" SHALL comply with this extension. The row SHALL have a <code>scope</code> of "read-write".</p>
</div>
</div>
</div>
<h6 id="_gpkg_spatial_ref_sys_3" class="float">gpkg_spatial_ref_sys</h6>
<div id="r116" class="exampleblock">
<div class="title">Requirement 116</div>
<div class="content">
<div class="paragraph">
<p>Values of the <code>definition_12_063</code> column SHALL be constructed per the WKT syntax in <a href="#34">[34]</a>.</p>
</div>
</div>
</div>
<div id="r117" class="exampleblock">
<div class="title">Requirement 117</div>
<div class="content">
<div class="paragraph">
<p>At least one definition column SHALL be defined with a valid definition unless the value of the <code>srs_id</code> column is <code>0</code> or <code>-1</code>. Both columns SHOULD be defined. If it is not possible to produce a valid <a href="#32">[32]</a> definition then the value of the <code>definition</code> column MAY be <code>undefined</code>. If it is not possible to produce a valid <a href="#34">[34]</a> definition then the value of the <code>definition_12_063</code> column MAY be <code>undefined</code>.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>If, for a particular row, both the <code>definition</code> and <code>definition_12_063</code> columns are populated, the value in the <code>definition_12_063</code> column takes priority.</p>
</div>
<h4 id="_abstract_test_suite_8" class="float">Abstract Test Suite</h4>
<h5 id="_table_definition_7" class="float">Table Definition</h5>
<div class="paragraph">
<p><strong>Table Definition</strong></p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/extension_crs_wkt/table_def</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the gpkg_spatial_ref_sys table exists and has the correct definition. Extends <code>/base/core/gpkg_spatial_ref_sys/data/table_def</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p><code>PRAGMA table_info('gpkg_spatial_ref_sys')</code></p>
</li>
<li>
<p>Fail if returns an empty result set</p>
</li>
<li>
<p>Fail if result set does not include a column named <em>definition_12_063</em> or if the column is not of <code>type</code> <em>TEXT</em>, <code>notnull</code> 1, and <code>dflt_value</code> <em>undefined</em>.</p>
</li>
<li>
<p>Pass if no failures.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Annex F.10 Req 115</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Basic</p>
</div></div></td>
</tr>
</tbody>
</table>

<h5 id="_table_data_values_10" class="float">Table Data Values</h5>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/extension_crs_wkt/data_values_default</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the gpkg_spatial_ref_sys table contains the required default contents. Extends <code>/base/core/gpkg_spatial_ref_sys/data_values_default</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p><code>SELECT organization, organization_coordsys_id, definition, definition_12_063 FROM gpkg_spatial_ref_sys WHERE srs_id = -1</code></p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Confirm that this returns "NONE" -1 "undefined" "undefined"</p>
</li>
</ol>
</div>
</li>
<li>
<p><code>SELECT srs_id, organization, organization_coordsys_id, definition, definition_12_063 FROM gpkg_spatial_ref_sys WHERE srs_id = 0</code></p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Confirm that this returns "NONE" 0 "undefined" "undefined"</p>
</li>
</ol>
</div>
</li>
<li>
<p><code>SELECT definition FROM gpkg_spatial_ref_sys WHERE organization IN ("epsg","EPSG") AND organization_coordsys_id 4326</code></p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Confirm that this is a valid CRS</p>
</li>
</ol>
</div>
</li>
<li>
<p><code>SELECT definition_12_063 FROM gpkg_spatial_ref_sys WHERE organization IN ("epsg","EPSG") AND organization_coordsys_id 4326</code></p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Confirm that this is a valid 12-063 CRS</p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if tests 1-4 are met</p>
</li>
<li>
<p>Fail otherwise</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Annex F.10 Req 116</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:16%;">
<col style="width:83%;"> 
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Case ID</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>/extension_crs_wkt/data_values_required</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Purpose</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Verify that the spatial_ref_sys table contains rows to define all srs_id values used by features and tiles in a GeoPackage. Extends <code>/base/core/gpkg_spatial_ref_sys/data_values_required</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Method</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="olist arabic">
<ol class="arabic">
<li>
<p><code>SELECT definition, definition_12_063 FROM gpkg_spatial_ref_sys WHERE srs_id NOT IN (0, -1)</code></p>
</li>
<li>
<p>For each result</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Fail if both definition values are <em>undefined</em></p>
</li>
</ol>
</div>
</li>
<li>
<p>Pass if no failures</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Annex F.10 Req 117</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Test Type</strong></p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Capability</p>
</div></div></td>
</tr>
</tbody>
</table>

<h4 id="_table_definition_sql_3" class="float">Table Definition SQL</h4>
<h5 id="_gpkg_spatial_ref_sys_4" class="float">gpkg_spatial_ref_sys</h5>
<div id="gpkg_spatial_ref_sys_crs_wkt_sql" class="listingblock">
<div class="title">gpkg_spatial_ref_sys Table Definition SQL (CRS WKT Extension)</div>
<div class="content">
<pre class="CodeRay"><code class="sql language-sql"><span class="class">CREATE</span> <span class="type">TABLE</span> gpkg_spatial_ref_sys (
  srs_name <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  srs_id <span class="predefined-type">INTEGER</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span> <span class="directive">PRIMARY</span> <span class="type">KEY</span>,
  organization <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  organization_coordsys_id <span class="predefined-type">INTEGER</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span>,
  definition  <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span> <span class="directive">DEFAULT</span> <span class="string"><span class="delimiter">'</span><span class="content">undefined</span><span class="delimiter">'</span></span>,
  description <span class="predefined-type">TEXT</span>,
  definition_12_063 <span class="predefined-type">TEXT</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span> <span class="directive">DEFAULT</span> <span class="string"><span class="delimiter">'</span><span class="content">undefined</span><span class="delimiter">'</span></span>
);</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="extension_tiled_gridded_coverage_data">F.11. Tiled Gridded Coverage Data</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>On May 2, 2017 the OGC Architecture Board (OAB) voted to remove this extension from this standard document so that it can be worked on separately. It has since been adopted by OGC and published as <a href="http://docs.opengeospatial.org/is/17-066r1/17-066r1.html">OGC 17-066r1</a>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="geometry_types"> Annex G: Geometry Types (Normative)</h2>
<div class="sectionbody">
<table id="geometry_types_core" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 27. Geometry Type Codes (Core)</caption>
<colgroup>
<col style="width:25%;">
<col style="width:75%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Code</th>
<th class="tableblock halign-left valign-top">Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GEOMETRY</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">POINT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LINESTRING</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">POLYGON</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MULTIPOINT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MULTILINESTRING</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MULTIPOLYGON</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GEOMETRYCOLLECTION</p></td>
</tr>
</tbody>
</table>

<table id="geometry_types_extension" class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 28. Geometry Type Codes (Extension)</caption>
<colgroup>
<col style="width:25%;">
<col style="width:75%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Code</th>
<th class="tableblock halign-left valign-top">Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CIRCULARSTRING</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">9</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">COMPOUNDCURVE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CURVEPOLYGON</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MULTICURVE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">12</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MULTISURFACE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">13</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CURVE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">14</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SURFACE</p></td>
</tr>
</tbody>
</table>

<div class="paragraph">
<p>GEOMETRY subtypes are POINT, CURVE, SURFACE and GEOMCOLLECTION.</p>
</div>
<div class="paragraph">
<p>CURVE subtypes are LINESTRING, CIRCULARSTRING and COMPOUNDCURVE.</p>
</div>
<div class="paragraph">
<p>SURFACE subtype is CURVEPOLYGON.</p>
</div>
<div class="paragraph">
<p>CURVEPOLYGON subtype is POLYGON.</p>
</div>
<div class="paragraph">
<p>GEOMETRYCOLLECTION subtypes are MULTIPOINT, MULTICURVE and MULTISURFACE.</p>
</div>
<div class="paragraph">
<p>MULTICURVE subtype is MULTILINESTRING.</p>
</div>
<div class="paragraph">
<p>MULTISURFACE subtype is MULTIPOLYGON.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="tiles_example_appendix"> Annex H: Tiles Zoom Times Two Example (Informative)</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all" style="width:100%; ">
<caption class="title">Table 29. Zoom Times Two Example</caption>
<colgroup>
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;">
<col style="width:%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">table_name</th>
<th class="tableblock halign-left valign-top">zoom_level</th>
<th class="tableblock halign-left valign-top">matrix_width</th>
<th class="tableblock halign-left valign-top">matrix_height</th>
<th class="tableblock halign-left valign-top">tile_width</th>
<th class="tableblock halign-left valign-top">tile_height</th>
<th class="tableblock halign-left valign-top">pixel_x_size</th>
<th class="tableblock halign-left valign-top">pixel_y_size</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MyTiles</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">512</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">512</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">69237.2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">68412.1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MyTiles</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">512</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">512</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">34618.6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">34206.0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MyTiles</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">512</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">512</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">17309.3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">17103.0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MyTiles</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">64</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">64</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">512</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">512</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8654.64</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8654.64</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MyTiles</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">128</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">128</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">512</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">512</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4327.32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4275.75</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MyTiles</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">256</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">256</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">512</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">512</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2163.66</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2137.87</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MyTiles</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">512</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">512</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">512</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">512</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1081.83</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1068.93</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MyTiles</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1024</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1024</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">512</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">512</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">540.915</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">543.469</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MyTiles</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2048</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2048</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">512</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">512</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">270.457</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">267.234</p></td>
</tr>
</tbody>
</table>

</div>
</div>
<div class="sect1">
<h2 id="_normative_references_normative"> Annex I: Normative References (Normative)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following normative documents contain provisions which, through reference in this text, constitute provisions of OGC 12-128.
For dated references, subsequent amendments to, or revisions of, any of these publications do not apply.
However, parties to agreements based on this part of OGC 12-128 are encouraged to investigate the possibility of applying the most recent editions of the normative documents indicated below.
For undated references, the latest edition of the normative document referred to applies.</p>
</div>
<div class="ulist bibliography">
<ul class="bibliography">
<li>
<p><a id="1"></a>[1] ISO/IEC 9075:1992 Information Technology - Database Language SQL (SQL92)</p>
</li>
<li>
<p><a id="2"></a>[2] ISO/IEC 9075-1:2011 Information Technology - Database Language SQL - Part 1: Framework</p>
</li>
<li>
<p><a id="3"></a>[3] ISO/IEC 9075-2:2011 Information Technology - Database Language SQL - Part 2: Foundation</p>
</li>
<li>
<p><a id="4"></a>[4] ISO/IEC 9075-3:2008 Information Technology - Database Language SQL - Part 3: Call- Level Interface (SQL/CLI)</p>
</li>
<li>
<p><a id="5"></a>[5] SQLite (all parts) <a href="http://www.sqlite.org/">http://www.sqlite.org/</a> (online) <a href="http://www.sqlite.org/sqlite-doc-3071300.zip">http://www.sqlite.org/sqlite-doc-3071300.zip</a> (offline)</p>
</li>
<li>
<p><a id="6"></a>[6] <a href="http://sqlite.org/fileformat2.html">http://sqlite.org/fileformat2.html</a></p>
</li>
<li>
<p><a id="7"></a>[7] <a href="http://www.sqlite.org/formatchng.html">http://www.sqlite.org/formatchng.html</a></p>
</li>
<li>
<p><a id="8"></a>[8] <a href="http://www.sqlite.org/download.html">http://www.sqlite.org/download.html</a></p>
</li>
<li>
<p><a id="9"></a>[9] OGC 06-103r4 OpenGIS® Implementation Standard for Geographic information - Simple feature access - Part 1: Common architecture Version: 1.2.1 2011-05-28 <a href="http://portal.opengeospatial.org/files/?artifact_id=25355">http://portal.opengeospatial.org/files/?artifact_id=25355</a> (also ISO/TC211 19125 Part 1)</p>
</li>
<li>
<p><a id="10"></a>[10] OGC 06-104r4 OpenGIS® Implementation Standard for Geographic information - Simple feature access - Part 2: SQL option Version: 1.2.1 2010-08-04 <a href="http://portal.opengeospatial.org/files/?artifact_id=25354">http://portal.opengeospatial.org/files/?artifact_id=25354</a> (also ISO/TC211 19125 Part 2)</p>
</li>
<li>
<p><a id="11"></a>[11] OGC 99-049 OpenGIS® Simple Features Specification for SQL Revision 1.1 5, 1999, Clause 2.3.8 <a href="http://portal.opengeospatial.org/files/?artifact_id=829">http://portal.opengeospatial.org/files/?artifact_id=829</a> May</p>
</li>
<li>
<p><a id="12"></a>[12] ISO/IEC 13249-3:2011 Information technology — SQL Multimedia and Application Packages - Part 3: Spatial (SQL/MM)</p>
</li>
<li>
<p><a id="13"></a>[13] <a href="http://www.epsg.org/Geodetic.html">http://www.epsg.org/Geodetic.html</a></p>
</li>
<li>
<p><a id="14"></a>[14] <a href="http://www.epsg-registry.org/">http://www.epsg-registry.org/</a></p>
</li>
<li>
<p><a id="15"></a>[15] MIL_STD_2401 DoD World Geodetic System 84 (WGS84), 11 January 1994</p>
</li>
<li>
<p><a id="16"></a>[16] OGC 07-057r7 OpenGIS® Web Map Tile Service Implementation Standard Version 1.0.0 2010-04-06 (WMTS) <a href="http://portal.opengeospatial.org/files/?artifact_id=35326">http://portal.opengeospatial.org/files/?artifact_id=35326</a></p>
</li>
<li>
<p><a id="17"></a>[17] ITU-T Recommendation T.81 (09/92) with Corrigendum (JPEG)</p>
</li>
<li>
<p><a id="18"></a>[18] T.871 : Information technology - Digital compression and coding of continuous-tone still images: JPEG File Interchange Format (JFIF), September 11, 2012 <a href="http://www.itu.int/rec/T-REC-T.871-201105-I/en">http://www.itu.int/rec/T-REC-T.871-201105-I/en</a></p>
</li>
<li>
<p><a id="19"></a>[19] IETF RFC 2046 Multipurpose Internet Mail Extensions (MIME) Part Two: Media Types <a href="http://www.ietf.org/rfc/rfc2046.txt">http://www.ietf.org/rfc/rfc2046.txt</a></p>
</li>
<li>
<p><a id="20"></a>[20] Portable Network Graphics <a href="http://libpng.org/pub/png/">http://libpng.org/pub/png/</a></p>
</li>
<li>
<p><a id="21"></a>[21] MIME Media Types <a href="http://www.iana.org/assignments/media-types/index.html">http://www.iana.org/assignments/media-types/index.html</a></p>
</li>
<li>
<p><a id="22"></a>[22] WebP <a href="https://developers.google.com/speed/webp/">https://developers.google.com/speed/webp/</a></p>
</li>
<li>
<p><a id="23"></a>[23] IETF RFC 3986 Uniform Resource Identifier (URI): Generic Syntax <a href="http://www.ietf.org/rfc/rfc3986.txt">http://www.ietf.org/rfc/rfc3986.txt</a></p>
</li>
<li>
<p><a id="24"></a>[24] W3C Recommendation 26 November 2008 Extensible Markup Language (XML) 1.0 (Fifth Edition) <a href="http://www.w3.org/TR/xml/">http://www.w3.org/TR/xml/</a></p>
</li>
<li>
<p><a id="25"></a>[25] W3C Recommendation 28 October 2004 XML Schema Part 0: Primer Second Edition <a href="http://www.w3.org/TR/xmlschema-0/">http://www.w3.org/TR/xmlschema-0/</a></p>
</li>
<li>
<p><a id="26"></a>[26] W3C Recommendation 28 October 2004 XML Schema Part 1: Structures Second Edition <a href="http://www.w3.org/TR/xmlschema-1/">http://www.w3.org/TR/xmlschema-1/</a></p>
</li>
<li>
<p><a id="27"></a>[27] W3C Recommendation 28 October 2004 XML Schema Part 2: Datatypes Second Edition <a href="http://www.w3.org/TR/xmlschema-2/">http://www.w3.org/TR/xmlschema-2/</a></p>
</li>
<li>
<p><a id="28"></a>[28] ISO: 19115-1:2014 Geographic information&#8201;&#8212;&#8201;Metadata&#8201;&#8212;&#8201;Part 1: Fundamentals (2014) <a href="https://www.iso.org/standard/53798.html">https://www.iso.org/standard/53798.html</a></p>
</li>
<li>
<p><a id="29"></a>[29] ISO 8601 Representation of dates and times <a href="http://www.iso.org/iso/catalogue_detail?csnumber=40874">http://www.iso.org/iso/catalogue_detail?csnumber=40874</a></p>
</li>
<li>
<p><a id="30"></a>[30] OGC® 10-100r3 Geography Markup Language (GML) simple features profile (with technical note) <a href="http://portal.opengeospatial.org/files/?artifact_id=42729">http://portal.opengeospatial.org/files/?artifact_id=42729</a></p>
</li>
<li>
<p><a id="31"></a>[31] SQLite R*Tree Module <a href="http://www.sqlite.org/rtree.html">http://www.sqlite.org/rtree.html</a></p>
</li>
<li>
<p><a id="32"></a>[32] OpenGIS® 01-009 Implementation Specification: Coordinate Transformation Services Revision 1.0  <a href="http://portal.opengeospatial.org/files/?artifact_id=999">http://portal.opengeospatial.org/files/?artifact_id=999</a></p>
</li>
<li>
<p><a id="33"></a>[33] SQLite GLOB operator <a href="https://www.sqlite.org/lang_expr.html#glob">https://www.sqlite.org/lang_expr.html#glob</a></p>
</li>
<li>
<p><a id="34"></a>[34] OGC® 12-063r5 Geographic information - Well-known text representation of coordinate reference systems <a href="http://docs.opengeospatial.org/is/12-063r5/12-063r5.html">http://docs.opengeospatial.org/is/12-063r5/12-063r5.html</a></p>
</li>
<li>
<p><a id="35"></a>[35] TIFF &#8482;  Revision 6.0 Final — June 3, 1992 <a href="ftp://download.osgeo.org/libtiff/doc/TIFF6.pdf">ftp://download.osgeo.org/libtiff/doc/TIFF6.pdf</a>, ©1986-1988, 1992 by Adobe® Systems Incorporated</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_bibliography_informative"> Annex J: Bibliography (Informative)</h2>
<div class="sectionbody">
<div class="ulist bibliography">
<ul class="bibliography">
<li>
<p><a id="B1"></a>[B1] <a href="http://developer.android.com/guide/topics/data/data-storage.html#db">http://developer.android.com/guide/topics/data/data-storage.html#db</a></p>
</li>
<li>
<p><a id="B2"></a>[B2] <a href="https://developer.apple.com/technologies/ios/data-management.html">https://developer.apple.com/technologies/ios/data-management.html</a></p>
</li>
<li>
<p><a id="B3"></a>[B3] <a href="http://www.epsg.org/guides/docs/G7-1.pdf">http://www.epsg.org/guides/docs/G7-1.pdf</a></p>
</li>
<li>
<p><a id="B4"></a>[B4] <a href="http://en.wikipedia.org/wiki/ASCII">http://en.wikipedia.org/wiki/ASCII</a></p>
</li>
<li>
<p><a id="B5"></a>[B5] <a href="http://www.sqlite.org/lang_createtable.html#rowid">http://www.sqlite.org/lang_createtable.html#rowid</a></p>
</li>
<li>
<p><a id="B6"></a>[B6] ISO 19115-2 Geographic information - - Metadata - Part 2: Metadata for imagery and gridded data</p>
</li>
<li>
<p><a id="B7"></a>[B7] ISO 19139: Geographic information&#8201;&#8212;&#8201;Metadata&#8201;&#8212;&#8201;XML schema implementation</p>
</li>
<li>
<p><a id="B8"></a>[B8] Dublin Core Metadata Initiative <a href="http://dublincore.org/">http://dublincore.org/</a>  IETF RFC 5013</p>
</li>
<li>
<p><a id="B9"></a>[B9] ISO 15836:2009  <a href="http://www.iso.org/iso/home/store/catalogue_tc/catalogue_detail.htm?csnumber=52142">http://www.iso.org/iso/home/store/catalogue_tc/catalogue_detail.htm?csnumber=52142</a></p>
</li>
<li>
<p><a id="B10"></a>[B10] Content Standard for Digital Geospatial Metadata (CSDGM)</p>
</li>
<li>
<p><a id="B11"></a>[B11] <a href="http://www.fgdc.gov/standards/projects/FGDC-standards-projects/metadata/base-metadata/index_html">http://www.fgdc.gov/standards/projects/FGDC-standards-projects/metadata/base-metadata/index_html</a></p>
</li>
<li>
<p><a id="B12"></a>[B12] Department of Defense Discovery Metadata Specification (DDMS) <a href="http://metadata.ces.mil/mdr/irs/DDMS/">http://metadata.ces.mil/mdr/irs/DDMS/</a></p>
</li>
<li>
<p><a id="B13"></a>[B13] NMF NGA.STND.0012_2.0 /  NMIS NGA.STND.0018_1.0</p>
</li>
<li>
<p><a id="B14"></a>[B14] Unified Modeling Language (UML) <a href="http://www.uml.org/">http://www.uml.org/</a></p>
</li>
<li>
<p><a id="B15"></a>[B15] XML for Metadata Interchange (XMI) <a href="http://www.omg.org/spec/XMI/">http://www.omg.org/spec/XMI/</a></p>
</li>
<li>
<p><a id="B16"></a>[B16] IDEF1x Data Modeling Method <a href="http://www.idef.com/IDEF1x.htm">http://www.idef.com/IDEF1x.htm</a></p>
</li>
<li>
<p><a id="B17"></a>[B17] Geography Markup Language (GML) ISO 19136:2007</p>
</li>
<li>
<p><a id="B18"></a>[B18] ISO 19110 Geographic information – Methodology for feature cataloguing</p>
</li>
<li>
<p><a id="B19"></a>[B19] RDF Vocabulary Description Language 1.0: RDF Schema  <a href="http://www.w3.org/TR/rdf-schema/">http://www.w3.org/TR/rdf-schema/</a></p>
</li>
<li>
<p><a id="B20"></a>[B20] Web Ontology Language (OWL) <a href="http://www.w3.org/TR/2009/REC-owl2-xml-serialization-20091027/">http://www.w3.org/TR/2009/REC-owl2-xml-serialization-20091027/</a></p>
</li>
<li>
<p><a id="B21"></a>[B21] Simple Knowledge Organization System (SKOS) <a href="http://www.w3.org/TR/skos-reference/">http://www.w3.org/TR/skos-reference/</a></p>
</li>
<li>
<p><a id="B22"></a>[B22] STANAG 7074 Digital Geographic Information Exchange Standard (DIGEST) - AGeoP-3A, edition 1, 19 October 1994 <a href="http://www.dgiwg.org/dgiwg/htm/documents/historical_documents.htm">http://www.dgiwg.org/dgiwg/htm/documents/historical_documents.htm</a></p>
</li>
<li>
<p><a id="B23"></a>[B23] ISO 19109 Geographic information - Rules for application schema</p>
</li>
<li>
<p><a id="B24"></a>[B24] <a href="http://www.sqlite.org/changes.html">http://www.sqlite.org/changes.html</a></p>
</li>
<li>
<p><a id="B25"></a>[B25] <a href="http://sqlite.org/src4/doc/trunk/www/design.wiki">http://sqlite.org/src4/doc/trunk/www/design.wiki</a></p>
</li>
<li>
<p><a id="B26"></a>[B26] OGC® 16-094r3 GeoPackage Elevation Extension Interoperability Experiment Engineering Report, Draft Revision 3, 21 June 2016</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_endnotes"> Annex K: Endnotes</h2>
<div class="sectionbody">
<div class="ulist bibliography">
<ul class="bibliography">
<li>
<p><a id="K1"></a>[K1] SQLite version 4 (reference B25), which will be an alternative to version 3, not a replacement thereof, was not available when this standard was written. See Future Work clause in Annex B.</p>
</li>
<li>
<p><a id="K2"></a>[K2] SQLite is in the public domain (see <a href="http://www.sqlite.org/copyright.html)">http://www.sqlite.org/copyright.html)</a></p>
</li>
<li>
<p><a id="K3"></a>[K3] With SQLite versions 3.7.17 and later this value MAY be set with the "PRAGMA application_id=1196444487;" SQL statement, where 1196444487 is the 32-bit integer value of 0x47504B47. With earlier versions of SQLite the application id can be set by writing the byte sequence 0x47, 0x50, 0x4B, 0x47 at offset 68 in the SQLite database file (see <a href="http://www.sqlite.org/fileformat2.html#database_header">http://www.sqlite.org/fileformat2.html#database_header</a> for details).</p>
</li>
<li>
<p><a id="K4"></a>[K4] Older GeoPackages use a different versioning mechanism. Instead of using the user_version, they have an application ID of "GP10" (for GeoPackage 1.0 and 1.0.1) or "GP11" (for GeoPackage 1.1).</p>
</li>
<li>
<p><a id="K4a"></a>[K4a] For more information on maximum database size, see Section 14 of <a href="https://www.sqlite.org/limits.html">https://www.sqlite.org/limits.html</a>.</p>
</li>
<li>
<p><a id="K5"></a>[K5] The SQLite PRAGMA integrity_check SQL command does a full database scan that can take a long time to complete on a large GeoPackage file.</p>
</li>
<li>
<p><a id="K6"></a>[K6] New applications should use the latest available SQLite version software <a href="#8">[8]</a></p>
</li>
<li>
<p><a id="K7"></a>[K7] The following statement selects an ISO 8601 timestamp value using the SQLite strftime function: SELECT (strftime(<em>%Y-%m-%dT%H:%M:%fZ</em>,<em>now</em>)).</p>
</li>
<li>
<p><a id="K8"></a>[K8] GeometryCollection is a generic term for the ST_GeomCollection type defined in <a href="#12">[12]</a>, which uses it for the definition of Well Known Text (WKT) and Well Known Binary (WKB) encodings. The SQL type name GEOMCOLLECTION defined in <a href="#10">[10]</a> and used in Clause 1.1.2.1.1 and Annex G below refers to the SQL BLOB encoding of a GeometryCollection.</p>
</li>
<li>
<p><a id="K9"></a>[K9] OGC WKB simple feature geometry types specified in <a href="#9">[9]</a> are a subset of the ISO WKB geometry types specified in <a href="#12">[12]</a></p>
</li>
<li>
<p><a id="K10"></a>[K10] WKB geometry types are are restricted to 0, 1 and 2-dimensional geometric objects that exist in 2, 3 or 4-dimensional coordinate space; they are not geographic or geodesic geometry types.</p>
</li>
<li>
<p><a id="K11"></a>[K11] The axis order in WKB is always (x,y{,z}{,m}) where x is easting or longitude, y is northing or latitude, z is optional elevation and m is optional measure.</p>
</li>
<li>
<p><a id="K12"></a>[K12] A GeoPackage is not required to contain any feature data tables. Feature data tables in a GeoPackage MAY be empty.</p>
</li>
<li>
<p><a id="K13"></a>[K13] GeoPackage applications MAY use SQL triggers or tests in application code to meet this requirement</p>
</li>
<li>
<p><a id="K14"></a>[K14] Images of multiple MIME types MAY be stored in given table. For example, in a tiles table, image/png format tiles COULD be used for transparency where there is no data on the tile edges, and image/jpeg format tiles COULD be used for storage efficiency where there is image data for all pixels. Images of multiple bit depths of the same MIME type MAY also be stored in a given table, for example image/png tiles in both 8 and 24 bit depths.</p>
</li>
<li>
<p><a id="K15"></a>[K15] See Zoom Other Intervals for use of other zoom levels as a registered extensions.</p>
</li>
<li>
<p><a id="K16"></a>[K16] See Tiles Encoding WebP regarding use of the WebP alternative tile MIME type as a registered extension.</p>
</li>
<li>
<p><a id="K17"></a>[K17] Note that SQLite ignores certain column properties (those pertaining to insert, update, or delete operations) when those columns are part of a view. Therefore it is not possible to enforce rules such as NOT NULL or PRIMARY KEY for those columns. When using views, the producer is responsible for ensuring that the underlying tables are populated properly.</p>
</li>
<li>
<p><a id="K18"></a>[K18] The "tiles" stipulation was removed because it prevented the use of the tile matrix mechanism by extensions for other data types.</p>
</li>
<li>
<p><a id="K19"></a>[K19] The "tiles" stipulation was removed because it prevented the use of the tile matrix mechanism by extensions for other data types.</p>
</li>
<li>
<p><a id="K20"></a>[K20] GeoPackage applications MAY query the gpkg_tile_matrix table or the tile pyramid user data table to determine the minimum and maximum zoom levels for a given tile pyramid table.</p>
</li>
<li>
<p><a id="K21"></a>[K21] GeoPackage applications MAY query a tile pyramid user data table to determine which tiles are available at each zoom level.</p>
</li>
<li>
<p><a id="K22"></a>[K22] GeoPackage applications that insert, update, or delete tile pyramid user data table tiles row records are responsible for maintaining the corresponding descriptive contents of the gpkg_tile_matrix_metadata table.</p>
</li>
<li>
<p><a id="K23"></a>[K23] The <code>gpkg_tile_matrix_set</code> table contains coordinates that define a bounding box as the exact stated spatial extent for all tiles in a tile (matrix set) table. If the geographic extent of the image data contained in tiles at a particular zoom level is within but not equal to this bounding box, then the non-image area of matrix edge tiles must be padded with no-data values, preferably transparent ones.</p>
</li>
<li>
<p><a id="K24"></a>[K24] A GeoPackage is not required to contain any tile pyramid user data tables. Tile pyramid user data tables in a GeoPackage MAY be empty.</p>
</li>
<li>
<p><a id="K25"></a>[K25] The zoom_level / tile_column / tile_row unique key is automatically indexed, and allows tiles to be selected and accessed by "z, x, y", a common convention used by some implementations. This table / view definition MAY also allow tiles to be selected based on a spatially indexed bounding box in a separate metadata table.</p>
</li>
<li>
<p><a id="K26"></a>[K26] If an application process will make many updates, it is often faster to drop the indexes, do the updates, and then recreate the indexes.</p>
</li>
<li>
<p><a id="K27"></a>[K27] Informative examples of hierarchical metadata are provided in Hierarchical Metadata Example One - ISO19115.</p>
</li>
<li>
<p><a id="K28"></a>[K28] An informative example of raster image metadata is provided in <a href="#tiles_example_appendix">Tiles Zoom Times Two Example (Informative)</a></p>
</li>
<li>
<p><a id="K29"></a>[K29] For example, for ISO 19139 metadata the URI value should be the metadata schema namespace <a href="http://www.isotc211.org/2005/gmd">http://www.isotc211.org/2005/gmd</a></p>
</li>
<li>
<p><a id="K30"></a>[K30] In SQLite, the rowid value is always equal to the value of a single-column primary key on an integer column [B30] and is not changed by a database reorganization performed by the VACUUM SQL command.</p>
</li>
<li>
<p><a id="K31"></a>[K31] Such a metadata hierarchy MAY have only one level of defined metadata</p>
</li>
<li>
<p><a id="K32"></a>[K32] The scope codes in Metadata Scopes include a very wide set of descriptive information types as "metadata" to describe data.</p>
</li>
<li>
<p><a id="K33"></a>[K33] ISO 19139 format metadata (B32) is recommended for general-purpose description of geospatial data at the series and dataset metadata scopes.</p>
</li>
<li>
<p><a id="K34"></a>[K34] The "catalog" md_scope MAY be used for Feature Catalog (B40) information stored as XML metadata that is linked to features stored in a GeoPackage.</p>
</li>
<li>
<p><a id="K35"></a>[K35] The "schema" md_scope MAY be used for Application Schema (B37)(B38)(B39)(B44) information stored as XML metadata that is linked to features stored in a GeoPackage.</p>
</li>
<li>
<p><a id="K36"></a>[K36] The "taxonomy" md_scope MAY be used for taxonomy or knowledge system (B41)(B42) "linked data" information stored as XML metadata that is linked to features stored in a GeoPackage.</p>
</li>
<li>
<p><a id="K37"></a>[K37] The following statement selects an ISO 8601timestamp value using the SQLite strftime function: SELECT (strftime(<em>%Y-%m-%dT%H:%M:%fZ</em>,<em>now</em>)).</p>
</li>
<li>
<p><a id="K38"></a>[K38] A GeoPackage is not required to contain a gpkg_data_columns table. The gpkg_data_columns table in a GeoPackage MAY be empty.</p>
</li>
<li>
<p><a id="K39"></a>[K39] GeoPackages MAY contain MIME types other than the raster image types specified in clauses 2.2.4, 2.2.5, and 3.2.2 as feature attributes, but they are not required to do so.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2018-04-19 18:34:55 UTC
</div>
</div>
</body>
</html>